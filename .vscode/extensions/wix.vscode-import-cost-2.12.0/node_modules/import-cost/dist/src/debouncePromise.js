'use strict';

exports.__esModule = true;
exports.debouncePromise = debouncePromise;
var promises = {};

var DebounceError = exports.DebounceError = new Error('DebounceError');

function debouncePromise(key, fn) {
  var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 500;

  var promise = new Promise(function (resolve, reject) {
    setTimeout(function () {
      return promises[key] === promise ? new Promise(fn).then(resolve).catch(reject) : reject(DebounceError);
    }, delay);
  });
  return promises[key] = promise;
}