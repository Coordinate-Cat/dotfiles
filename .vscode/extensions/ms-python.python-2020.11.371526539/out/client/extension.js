module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=397)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33);t.METADATA_KEY=r;var i=n(601);t.Container=i.Container;var o=n(68);t.BindingScopeEnum=o.BindingScopeEnum,t.BindingTypeEnum=o.BindingTypeEnum,t.TargetTypeEnum=o.TargetTypeEnum;var s=n(617);t.AsyncContainerModule=s.AsyncContainerModule,t.ContainerModule=s.ContainerModule;var a=n(618);t.injectable=a.injectable;var c=n(619);t.tagged=c.tagged;var l=n(620);t.named=l.named;var u=n(316);t.inject=u.inject,t.LazyServiceIdentifer=u.LazyServiceIdentifer;var d=n(621);t.optional=d.optional;var h=n(622);t.unmanaged=h.unmanaged;var p=n(623);t.multiInject=p.multiInject;var f=n(624);t.targetName=f.targetName;var g=n(625);t.postConstruct=g.postConstruct;var m=n(314);t.MetadataReader=m.MetadataReader;var v=n(84);t.guid=v.guid;var y=n(76);t.decorate=y.decorate;var b=n(319);t.traverseAncerstors=b.traverseAncerstors,t.taggedConstraint=b.taggedConstraint,t.namedConstraint=b.namedConstraint,t.typeConstraint=b.typeConstraint;var S=n(110);t.getServiceIdentifierAsString=S.getServiceIdentifierAsString;var E=n(626);t.multiBindToService=E.multiBindToService},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterPathService=t.IExperimentService=t.IExperimentsManager=t.IAsyncDisposableRegistry=t.ICryptoUtils=t.IEditorUtils=t.IFeatureDeprecationManager=t.BANNER_NAME_PROPOSE_LS=t.IPythonExtensionBanner=t.IBrowserService=t.IExtensions=t.IExtensionContext=t.IHttpClient=t.IFileDownloader=t.ISocketServer=t.IConfigurationService=t.AnalysisSettingsLogLevel=t.ICurrentProcess=t.IRandom=t.IPathUtils=t.IInstaller=t.ModuleNamePurpose=t.Product=t.ProductType=t.InstallerResponse=t.IPersistentStateFactory=t.WORKSPACE_MEMENTO=t.GLOBAL_MEMENTO=t.IMemento=t.IDisposableRegistry=t.IsWindows=t.IDocumentSymbolProvider=t.IOutputChannel=void 0,t.IOutputChannel=Symbol("IOutputChannel"),t.IDocumentSymbolProvider=Symbol("IDocumentSymbolProvider"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDisposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore"}(t.InstallerResponse||(t.InstallerResponse={})),function(e){e.Linter="Linter",e.Formatter="Formatter",e.TestFramework="TestFramework",e.RefactoringLibrary="RefactoringLibrary",e.WorkspaceSymbols="WorkspaceSymbols",e.DataScience="DataScience"}(t.ProductType||(t.ProductType={})),function(e){e[e.pytest=1]="pytest",e[e.nosetest=2]="nosetest",e[e.pylint=3]="pylint",e[e.flake8=4]="flake8",e[e.pycodestyle=5]="pycodestyle",e[e.pylama=6]="pylama",e[e.prospector=7]="prospector",e[e.pydocstyle=8]="pydocstyle",e[e.yapf=9]="yapf",e[e.autopep8=10]="autopep8",e[e.mypy=11]="mypy",e[e.unittest=12]="unittest",e[e.ctags=13]="ctags",e[e.rope=14]="rope",e[e.isort=15]="isort",e[e.black=16]="black",e[e.bandit=17]="bandit",e[e.jupyter=18]="jupyter",e[e.ipykernel=19]="ipykernel",e[e.notebook=20]="notebook",e[e.kernelspec=21]="kernelspec",e[e.nbconvert=22]="nbconvert",e[e.pandas=23]="pandas"}(t.Product||(t.Product={})),function(e){e[e.install=1]="install",e[e.run=2]="run"}(t.ModuleNamePurpose||(t.ModuleNamePurpose={})),t.IInstaller=Symbol("IInstaller"),t.IPathUtils=Symbol("IPathUtils"),t.IRandom=Symbol("IRandom"),t.ICurrentProcess=Symbol("ICurrentProcess"),function(e){e.Information="Information",e.Error="Error",e.Warning="Warning"}(t.AnalysisSettingsLogLevel||(t.AnalysisSettingsLogLevel={})),t.IConfigurationService=Symbol("IConfigurationService"),t.ISocketServer=Symbol("ISocketServer"),t.IFileDownloader=Symbol("IFileDownloader"),t.IHttpClient=Symbol("IHttpClient"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IPythonExtensionBanner=Symbol("IPythonExtensionBanner"),t.BANNER_NAME_PROPOSE_LS="ProposePylance",t.IFeatureDeprecationManager=Symbol("IFeatureDeprecationManager"),t.IEditorUtils=Symbol("IEditorUtils"),t.ICryptoUtils=Symbol("ICryptoUtils"),t.IAsyncDisposableRegistry=Symbol("IAsyncDisposableRegistry"),t.IExperimentsManager=Symbol("IExperimentsManager"),t.IExperimentService=Symbol("IExperimentService"),t.IInterpreterPathService=Symbol("IInterpreterPathService")},function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVSCodeNotebook=t.IClipboard=t.ICustomEditorService=t.IActiveResourceService=t.ILanguageService=t.IWebviewPanelProvider=t.IWebviewPanel=t.IWebview=t.IWebviewPanelMessageListener=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.IJupyterExtensionDependencyManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IJupyterExtensionDependencyManager=Symbol("IJupyterExtensionDependencyManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.IWebviewPanelMessageListener=Symbol("IWebviewPanelMessageListener"),t.IWebview=Symbol("IWebview"),t.IWebviewPanel=Symbol("IWebviewPanel"),t.IWebviewPanelProvider=Symbol("IWebviewPanelProvider"),t.ILanguageService=Symbol("ILanguageService"),t.IActiveResourceService=Symbol("IActiveResourceService"),t.ICustomEditorService=Symbol("ICustomEditorService"),t.IClipboard=Symbol("IClipboard"),t.IVSCodeNotebook=Symbol("IVSCodeNotebook")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogOptions=t.traceWarning=t.traceVerbose=t.traceInfo=t.traceError=t.traceDecorators=void 0;var r=n(119);Object.defineProperty(t,"traceDecorators",{enumerable:!0,get:function(){return r.traceDecorators}}),Object.defineProperty(t,"traceError",{enumerable:!0,get:function(){return r.logError}}),Object.defineProperty(t,"traceInfo",{enumerable:!0,get:function(){return r.logInfo}}),Object.defineProperty(t,"traceVerbose",{enumerable:!0,get:function(){return r.logVerbose}}),Object.defineProperty(t,"traceWarning",{enumerable:!0,get:function(){return r.logWarning}});var i=n(289);Object.defineProperty(t,"LogOptions",{enumerable:!0,get:function(){return i.TraceOptions}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.FileType=t.IFileSystemPathUtils=t.IPlatformService=t.IsWindows=t.IRegistry=t.RegistryHive=void 0;const r=n(2);!function(e){e[e.HKCU=0]="HKCU",e[e.HKLM=1]="HKLM"}(t.RegistryHive||(t.RegistryHive={})),t.IRegistry=Symbol("IRegistry"),t.IsWindows=Symbol("IS_WINDOWS"),t.IPlatformService=Symbol("IPlatformService"),t.IFileSystemPathUtils=Symbol("IFileSystemPathUtils"),t.FileType=r.FileType,t.IFileSystem=Symbol("IFileSystem")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendTelemetryWhenDone=t.captureTelemetry=t.sendTelemetryEvent=t.clearTelemetryReporter=t._resetSharedProperties=t.setSharedProperty=t.isTelemetryDisabled=void 0;const r=n(10),i=n(5),o=(n(133),n(30));n(9);t.isTelemetryDisabled=function(e){return!1===e.getConfiguration("telemetry").inspect("enableTelemetry").globalValue};const s={};let a;function c(e,t,o,c){var l;if(r.isTestExecution()||!function(){try{const e=n(2),t=n(290);return void 0!==e&&void 0!==t}catch(e){return!1}}())return;const u=function(){if(!r.isTestExecution()&&a)return a;const e=r.PVSC_EXTENSION_ID,t=n(2).extensions.getExtension(e).packageJSON.version,i=n(290).default;return a=new i(e,t,r.AppinsightsKey,!0)}(),d="number"==typeof t?{duration:t}:t||void 0,h={},p=e;if(o){const t=o;Object.getOwnPropertyNames(t).forEach(n=>{if(void 0!==t[n]&&null!==t[n])try{h[n]="string"==typeof t[n]?t[n]:"object"==typeof t[n]?"object":t[n].toString()}catch(t){i.traceError(`Failed to serialize ${n} for ${e}`,t)}})}if(Object.assign(h,s),c){const e={errorName:c.name,errorMessage:c.message,errorStack:null!==(l=c.stack)&&void 0!==l?l:""};Object.assign(h,e);const t=Object.getOwnPropertyNames(e);u.sendTelemetryErrorEvent(p,h,d,t)}else u.sendTelemetryEvent(p,h,d);process.env&&process.env.VSC_PYTHON_LOG_TELEMETRY&&i.traceInfo(`Telemetry Event : ${p} Measures: ${JSON.stringify(d)} Props: ${JSON.stringify(h)} `)}t.setSharedProperty=function(e,t){const n=e;r.isUnitTestExecution()&&n.startsWith("ds_")||(void 0===t?delete s[n]:s[n]=t)},t._resetSharedProperties=function(){for(const e of Object.keys(s))delete s[e]},t.clearTelemetryReporter=function(){a=void 0},t.sendTelemetryEvent=c,t.captureTelemetry=function(e,t,n=!0,r,i){return function(s,a,l){const u=l.value;return l.value=function(...s){if(!n&&!i)return c(e,void 0,t),u.apply(this,s);const a=()=>i?{...t,...i(this)}:t,l=n?new o.StopWatch:void 0,d=u.apply(this,s);return d&&"function"==typeof d.then&&"function"==typeof d.catch?d.then(t=>(c(e,null==l?void 0:l.elapsedTime,a()),t)).catch(t=>{const n=a()||{};n.failed=!0,c(r||e,null==l?void 0:l.elapsedTime,n,t)}):c(e,null==l?void 0:l.elapsedTime,a()),d},l}},t.sendTelemetryWhenDone=function(e,t,n,r){if(n=n||new o.StopWatch,"function"!=typeof t.then)throw new Error("Method is neither a Promise nor a Theneable");t.then(t=>(c(e,n.elapsedTime,r),t),t=>(c(e,n.elapsedTime,r,t),Promise.reject(t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceContainer=t.IServiceManager=void 0,t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformErrors=t.EventName=void 0,function(e){e.COMPLETION="COMPLETION",e.COMPLETION_ADD_BRACKETS="COMPLETION.ADD_BRACKETS",e.DEFINITION="DEFINITION",e.HOVER_DEFINITION="HOVER_DEFINITION",e.REFERENCE="REFERENCE",e.SIGNATURE="SIGNATURE",e.SYMBOL="SYMBOL",e.FORMAT_SORT_IMPORTS="FORMAT.SORT_IMPORTS",e.FORMAT="FORMAT.FORMAT",e.FORMAT_ON_TYPE="FORMAT.FORMAT_ON_TYPE",e.EDITOR_LOAD="EDITOR.LOAD",e.LINTING="LINTING",e.GO_TO_OBJECT_DEFINITION="GO_TO_OBJECT_DEFINITION",e.REFACTOR_RENAME="REFACTOR_RENAME",e.REFACTOR_EXTRACT_VAR="REFACTOR_EXTRACT_VAR",e.REFACTOR_EXTRACT_FUNCTION="REFACTOR_EXTRACT_FUNCTION",e.REPL="REPL",e.SELECT_INTERPRETER="SELECT_INTERPRETER",e.SELECT_INTERPRETER_ENTER_BUTTON="SELECT_INTERPRETER_ENTER_BUTTON",e.SELECT_INTERPRETER_ENTER_CHOICE="SELECT_INTERPRETER_ENTER_CHOICE",e.PYTHON_INTERPRETER="PYTHON_INTERPRETER",e.PYTHON_INSTALL_PACKAGE="PYTHON_INSTALL_PACKAGE",e.PYTHON_INTERPRETER_DISCOVERY="PYTHON_INTERPRETER_DISCOVERY",e.PYTHON_INTERPRETER_AUTO_SELECTION="PYTHON_INTERPRETER_AUTO_SELECTION",e.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES="PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES",e.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE="PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE",e.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL="PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL",e.PIPENV_INTERPRETER_DISCOVERY="PIPENV_INTERPRETER_DISCOVERY",e.TERMINAL_SHELL_IDENTIFICATION="TERMINAL_SHELL_IDENTIFICATION",e.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT="PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT",e.PYTHON_NOT_INSTALLED_PROMPT="PYTHON_NOT_INSTALLED_PROMPT",e.CONDA_INHERIT_ENV_PROMPT="CONDA_INHERIT_ENV_PROMPT",e.UNSAFE_INTERPRETER_PROMPT="UNSAFE_INTERPRETER_PROMPT",e.INSIDERS_RELOAD_PROMPT="INSIDERS_RELOAD_PROMPT",e.INSIDERS_PROMPT="INSIDERS_PROMPT",e.ENVFILE_VARIABLE_SUBSTITUTION="ENVFILE_VARIABLE_SUBSTITUTION",e.ENVFILE_WORKSPACE="ENVFILE_WORKSPACE",e.WORKSPACE_SYMBOLS_BUILD="WORKSPACE_SYMBOLS.BUILD",e.WORKSPACE_SYMBOLS_GO_TO="WORKSPACE_SYMBOLS.GO_TO",e.EXECUTION_CODE="EXECUTION_CODE",e.EXECUTION_DJANGO="EXECUTION_DJANGO",e.DEBUG_ADAPTER_USING_WHEELS_PATH="DEBUG_ADAPTER.USING_WHEELS_PATH",e.DEBUG_SESSION_ERROR="DEBUG_SESSION.ERROR",e.DEBUG_SESSION_START="DEBUG_SESSION.START",e.DEBUG_SESSION_STOP="DEBUG_SESSION.STOP",e.DEBUG_SESSION_USER_CODE_RUNNING="DEBUG_SESSION.USER_CODE_RUNNING",e.DEBUGGER="DEBUGGER",e.DEBUGGER_ATTACH_TO_CHILD_PROCESS="DEBUGGER.ATTACH_TO_CHILD_PROCESS",e.DEBUGGER_ATTACH_TO_LOCAL_PROCESS="DEBUGGER.ATTACH_TO_LOCAL_PROCESS",e.DEBUGGER_CONFIGURATION_PROMPTS="DEBUGGER.CONFIGURATION.PROMPTS",e.DEBUGGER_CONFIGURATION_PROMPTS_IN_LAUNCH_JSON="DEBUGGER.CONFIGURATION.PROMPTS.IN.LAUNCH.JSON",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_REQUEST",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_ERROR",e.OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS="OPEN_DATAVIEWER_FROM_VARIABLE_WINDOW_SUCCESS",e.UNITTEST_STOP="UNITTEST.STOP",e.UNITTEST_DISABLE="UNITTEST.DISABLE",e.UNITTEST_RUN="UNITTEST.RUN",e.UNITTEST_DISCOVER="UNITTEST.DISCOVER",e.UNITTEST_DISCOVER_WITH_PYCODE="UNITTEST.DISCOVER.WITH.PYTHONCODE",e.UNITTEST_CONFIGURE="UNITTEST.CONFIGURE",e.UNITTEST_CONFIGURING="UNITTEST.CONFIGURING",e.UNITTEST_VIEW_OUTPUT="UNITTEST.VIEW_OUTPUT",e.UNITTEST_NAVIGATE="UNITTEST.NAVIGATE",e.UNITTEST_ENABLED="UNITTEST.ENABLED",e.UNITTEST_EXPLORER_WORK_SPACE_COUNT="UNITTEST.TEST_EXPLORER.WORK_SPACE_COUNT",e.PYTHON_EXPERIMENTS="PYTHON_EXPERIMENTS",e.PYTHON_EXPERIMENTS_DISABLED="PYTHON_EXPERIMENTS_DISABLED",e.PYTHON_EXPERIMENTS_OPT_IN_OUT="PYTHON_EXPERIMENTS_OPT_IN_OUT",e.PYTHON_EXPERIMENTS_DOWNLOAD_SUCCESS_RATE="PYTHON_EXPERIMENTS_DOWNLOAD_SUCCESS_RATE",e.PLAY_BUTTON_ICON_DISABLED="PLAY_BUTTON_ICON.DISABLED",e.PYTHON_WEB_APP_RELOAD="PYTHON_WEB_APP.RELOAD",e.EXTENSION_SURVEY_PROMPT="EXTENSION_SURVEY_PROMPT",e.ACTIVATION_TIP_PROMPT="ACTIVATION_TIP_PROMPT",e.ACTIVATION_SURVEY_PROMPT="ACTIVATION_SURVEY_PROMPT",e.JOIN_MAILING_LIST_PROMPT="JOIN_MAILING_LIST_PROMPT",e.PYTHON_LANGUAGE_SERVER_CURRENT_SELECTION="PYTHON_LANGUAGE_SERVER_CURRENT_SELECTION",e.PYTHON_LANGUAGE_SERVER_LIST_BLOB_STORE_PACKAGES="PYTHON_LANGUAGE_SERVER.LIST_BLOB_PACKAGES",e.PYTHON_LANGUAGE_SERVER_EXTRACTED="PYTHON_LANGUAGE_SERVER.EXTRACTED",e.PYTHON_LANGUAGE_SERVER_DOWNLOADED="PYTHON_LANGUAGE_SERVER.DOWNLOADED",e.PYTHON_LANGUAGE_SERVER_ERROR="PYTHON_LANGUAGE_SERVER.ERROR",e.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED="PYTHON_LANGUAGE_SERVER.PLATFORM_SUPPORTED",e.PYTHON_LANGUAGE_SERVER_ENABLED="PYTHON_LANGUAGE_SERVER.ENABLED",e.PYTHON_LANGUAGE_SERVER_STARTUP="PYTHON_LANGUAGE_SERVER.STARTUP",e.PYTHON_LANGUAGE_SERVER_READY="PYTHON_LANGUAGE_SERVER.READY",e.PYTHON_LANGUAGE_SERVER_TELEMETRY="PYTHON_LANGUAGE_SERVER.EVENT",e.PYTHON_LANGUAGE_SERVER_REQUEST="PYTHON_LANGUAGE_SERVER.REQUEST",e.LANGUAGE_SERVER_ENABLED="LANGUAGE_SERVER.ENABLED",e.LANGUAGE_SERVER_STARTUP="LANGUAGE_SERVER.STARTUP",e.LANGUAGE_SERVER_READY="LANGUAGE_SERVER.READY",e.LANGUAGE_SERVER_TELEMETRY="LANGUAGE_SERVER.EVENT",e.LANGUAGE_SERVER_REQUEST="LANGUAGE_SERVER.REQUEST",e.LANGUAGE_SERVER_TRY_PYLANCE="LANGUAGE_SERVER.TRY_PYLANCE",e.TERMINAL_CREATE="TERMINAL.CREATE",e.ACTIVATE_ENV_IN_CURRENT_TERMINAL="ACTIVATE_ENV_IN_CURRENT_TERMINAL",e.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED="ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED",e.DIAGNOSTICS_ACTION="DIAGNOSTICS.ACTION",e.DIAGNOSTICS_MESSAGE="DIAGNOSTICS.MESSAGE",e.PLATFORM_INFO="PLATFORM.INFO",e.SELECT_LINTER="LINTING.SELECT",e.LINTER_NOT_INSTALLED_PROMPT="LINTER_NOT_INSTALLED_PROMPT",e.LINTER_INSTALL_PROMPT="LINTER_INSTALL_PROMPT",e.LINTER_INSTALL_PROMPT_ACTION="LINTER_INSTALL_PROMPT_ACTION",e.CONFIGURE_AVAILABLE_LINTER_PROMPT="CONFIGURE_AVAILABLE_LINTER_PROMPT",e.HASHED_PACKAGE_NAME="HASHED_PACKAGE_NAME",e.HASHED_PACKAGE_PERF="HASHED_PACKAGE_PERF",e.JEDI_MEMORY="JEDI_MEMORY"}(t.EventName||(t.EventName={})),function(e){e.FailedToParseVersion="FailedToParseVersion",e.FailedToDetermineOS="FailedToDetermineOS"}(t.PlatformErrors||(t.PlatformErrors={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};function o(){return"1"===process.env.VSC_PYTHON_UNIT_TEST}Object.defineProperty(t,"__esModule",{value:!0}),t.UseProposedApi=t.UseVSCodeNotebookEditorApi=t.UseCustomEditorApi=t.isUnitTestExecution=t.isTestExecution=t.isCI=t.STANDARD_OUTPUT_CHANNEL=t.DEFAULT_INTERPRETER_SETTING=t.Delays=t.Text=t.Button_Text_Tests_View_Output=t.Octicons=t.Commands=t.AppinsightsKey=t.JUPYTER_EXTENSION_ID=t.PYLANCE_EXTENSION_ID=t.CODE_RUNNER_EXTENSION_ID=t.PVSC_EXTENSION_ID=t.PYTHON_ALLFILES=t.PYTHON=t.NotebookCellScheme=t.PYTHON_WARNINGS=t.JUPYTER_LANGUAGE=t.MARKDOWN_LANGUAGE=t.PYTHON_LANGUAGE=void 0,t.PYTHON_LANGUAGE="python",t.MARKDOWN_LANGUAGE="markdown",t.JUPYTER_LANGUAGE="jupyter",t.PYTHON_WARNINGS="PYTHONWARNINGS",t.NotebookCellScheme="vscode-notebook-cell",t.PYTHON=[{scheme:"file",language:t.PYTHON_LANGUAGE},{scheme:"untitled",language:t.PYTHON_LANGUAGE},{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE}],t.PYTHON_ALLFILES=[{language:t.PYTHON_LANGUAGE}],t.PVSC_EXTENSION_ID="ms-python.python",t.CODE_RUNNER_EXTENSION_ID="formulahendry.code-runner",t.PYLANCE_EXTENSION_ID="ms-python.vscode-pylance",t.JUPYTER_EXTENSION_ID="ms-toolsai.jupyter",t.AppinsightsKey="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",function(e){e.Set_Interpreter="python.setInterpreter",e.Set_ShebangInterpreter="python.setShebangInterpreter",e.Exec_In_Terminal="python.execInTerminal",e.Exec_In_Terminal_Icon="python.execInTerminal-icon",e.Exec_Selection_In_Terminal="python.execSelectionInTerminal",e.Exec_Selection_In_Django_Shell="python.execSelectionInDjangoShell",e.Tests_View_UI="python.viewTestUI",e.Tests_Picker_UI="python.selectTestToRun",e.Tests_Picker_UI_Debug="python.selectTestToDebug",e.Tests_Configure="python.configureTests",e.Tests_Discover="python.discoverTests",e.Tests_Discovering="python.discoveringTests",e.Tests_Run_Failed="python.runFailedTests",e.Sort_Imports="python.sortImports",e.Tests_Run="python.runtests",e.Tests_Run_Parametrized="python.runParametrizedTests",e.Tests_Debug="python.debugtests",e.Tests_Ask_To_Stop_Test="python.askToStopTests",e.Tests_Ask_To_Stop_Discovery="python.askToStopTestDiscovery",e.Tests_Stop="python.stopTests",e.Test_Reveal_Test_Item="python.revealTestItem",e.ViewOutput="python.viewOutput",e.Tests_ViewOutput="python.viewTestOutput",e.Tests_Select_And_Run_Method="python.selectAndRunTestMethod",e.Tests_Select_And_Debug_Method="python.selectAndDebugTestMethod",e.Tests_Select_And_Run_File="python.selectAndRunTestFile",e.Tests_Run_Current_File="python.runCurrentTestFile",e.Refactor_Extract_Variable="python.refactorExtractVariable",e.Refactor_Extract_Method="python.refactorExtractMethod",e.Build_Workspace_Symbols="python.buildWorkspaceSymbols",e.Start_REPL="python.startREPL",e.Create_Terminal="python.createTerminal",e.Set_Linter="python.setLinter",e.Enable_Linter="python.enableLinting",e.Run_Linter="python.runLinting",e.Enable_SourceMap_Support="python.enableSourceMapSupport",e.navigateToTestFunction="navigateToTestFunction",e.navigateToTestSuite="navigateToTestSuite",e.navigateToTestFile="navigateToTestFile",e.openTestNodeInEditor="python.openTestNodeInEditor",e.runTestNode="python.runTestNode",e.debugTestNode="python.debugTestNode",e.SwitchOffInsidersChannel="python.switchOffInsidersChannel",e.SwitchToInsidersDaily="python.switchToDailyChannel",e.SwitchToInsidersWeekly="python.switchToWeeklyChannel",e.PickLocalProcess="python.pickLocalProcess",e.GetSelectedInterpreterPath="python.interpreterPath",e.ClearWorkspaceInterpreter="python.clearWorkspaceInterpreter",e.ResetInterpreterSecurityStorage="python.resetInterpreterSecurityStorage",e.OpenStartPage="python.startPage.open"}(t.Commands||(t.Commands={})),function(e){e.Test_Pass="$(check)",e.Test_Fail="$(alert)",e.Test_Error="$(x)",e.Test_Skip="$(circle-slash)",e.Downloading="$(cloud-download)",e.Installing="$(desktop-download)"}(t.Octicons||(t.Octicons={})),t.Button_Text_Tests_View_Output="View Output",function(e){e.CodeLensRunUnitTest="Run Test",e.CodeLensDebugUnitTest="Debug Test"}(t.Text||(t.Text={})),function(e){e.MaxUnitTestCodeLensDelay=5e3}(t.Delays||(t.Delays={})),t.DEFAULT_INTERPRETER_SETTING="python",t.STANDARD_OUTPUT_CHANNEL="STANDARD_OUTPUT_CHANNEL",t.isCI="true"===process.env.TRAVIS||void 0!==process.env.TF_BUILD,t.isTestExecution=function(){return"1"===process.env.VSC_PYTHON_CI_TEST||o()},t.isUnitTestExecution=o,t.UseCustomEditorApi=Symbol("USE_CUSTOM_EDITOR"),t.UseVSCodeNotebookEditorApi=Symbol("USE_NATIVEEDITOR"),t.UseProposedApi=Symbol("USE_VSC_PROPOSED_API"),i(n(61),t)},function(e,t,n){"use strict";String.prototype.splitLines=function(e={removeEmptyEntries:!0,trim:!0}){let t=this.split(/\r?\n/g);return e&&e.trim&&(t=t.map(e=>e.trim())),e&&e.removeEmptyEntries&&(t=t.filter(e=>e.length>0)),t},String.prototype.toCommandArgument=function(){return this?this.indexOf(" ")>=0&&!this.startsWith('"')&&!this.endsWith('"')?`"${this}"`:this.toString():this},String.prototype.fileToCommandArgument=function(){return this?this.toCommandArgument().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},Promise.prototype.ignoreErrors=function(){this.catch(()=>{})},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,(t,n)=>void 0===e[n]?t:e[n])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterStatusbarVisibilityFilter=t.IInterpreterLocatorProgressService=t.IInterpreterLocatorProgressHandler=t.IInterpreterWatcherBuilder=t.IInterpreterWatcher=t.IInterpreterLocatorHelper=t.IPipEnvService=t.IInterpreterHelper=t.IShebangCodeLensProvider=t.IInterpreterDisplay=t.IInterpreterService=t.ICondaService=t.IInterpreterLocatorService=t.IComponentAdapter=t.IVirtualEnvironmentsSearchPathProvider=t.IKnownSearchPathsForInterpreters=t.IInterpreterVersionService=t.PIPENV_SERVICE=t.WORKSPACE_VIRTUAL_ENV_SERVICE=t.GLOBAL_VIRTUAL_ENV_SERVICE=t.KNOWN_PATH_SERVICE=t.CURRENT_PATH_SERVICE=t.CONDA_ENV_SERVICE=t.CONDA_ENV_FILE_SERVICE=t.WINDOWS_REGISTRY_SERVICE=t.INTERPRETER_LOCATOR_SERVICE=void 0,t.INTERPRETER_LOCATOR_SERVICE="IInterpreterLocatorService",t.WINDOWS_REGISTRY_SERVICE="WindowsRegistryService",t.CONDA_ENV_FILE_SERVICE="CondaEnvFileService",t.CONDA_ENV_SERVICE="CondaEnvService",t.CURRENT_PATH_SERVICE="CurrentPathService",t.KNOWN_PATH_SERVICE="KnownPathsService",t.GLOBAL_VIRTUAL_ENV_SERVICE="VirtualEnvService",t.WORKSPACE_VIRTUAL_ENV_SERVICE="WorkspaceVirtualEnvService",t.PIPENV_SERVICE="PipEnvService",t.IInterpreterVersionService=Symbol("IInterpreterVersionService"),t.IKnownSearchPathsForInterpreters=Symbol("IKnownSearchPathsForInterpreters"),t.IVirtualEnvironmentsSearchPathProvider=Symbol("IVirtualEnvironmentsSearchPathProvider"),t.IComponentAdapter=Symbol("IComponentAdapter"),t.IInterpreterLocatorService=Symbol("IInterpreterLocatorService"),t.ICondaService=Symbol("ICondaService"),t.IInterpreterService=Symbol("IInterpreterService"),t.IInterpreterDisplay=Symbol("IInterpreterDisplay"),t.IShebangCodeLensProvider=Symbol("IShebangCodeLensProvider"),t.IInterpreterHelper=Symbol("IInterpreterHelper"),t.IPipEnvService=Symbol("IPipEnvService"),t.IInterpreterLocatorHelper=Symbol("IInterpreterLocatorHelper"),t.IInterpreterWatcher=Symbol("IInterpreterWatcher"),t.IInterpreterWatcherBuilder=Symbol("IInterpreterWatcherBuilder"),t.IInterpreterLocatorProgressHandler=Symbol("IInterpreterLocatorProgressHandler"),t.IInterpreterLocatorProgressService=Symbol("IInterpreterLocatorProgressService"),t.IInterpreterStatusbarVisibilityFilter=Symbol("IInterpreterStatusbarVisibilityFilter")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localize=t.getCollectionJSON=t._getAskedForCollection=t._resetCollections=t.OutdatedDebugger=t.Testing=t.DebugConfigStrings=t.StartPage=t.Products=t.ExtensionSurveyBanner=t.Installer=t.Linters=t.Logging=t.OutputChannelNames=t.ExtensionChannels=t.InterpreterQuickPickList=t.Interpreters=t.Experiments=t.Http=t.LanguageService=t.Jupyter=t.Pylance=t.AttachProcess=t.CommonSurvey=t.Common=t.Diagnostics=void 0;const r=n(4),i=n(61),o=n(192);let s,a;!function(e){e.warnSourceMaps=u("diagnostics.warnSourceMaps","Source map support is enabled in the Python Extension, this will adversely impact performance of the extension."),e.disableSourceMaps=u("diagnostics.disableSourceMaps","Disable Source Map Support"),e.warnBeforeEnablingSourceMaps=u("diagnostics.warnBeforeEnablingSourceMaps","Enabling source map support in the Python Extension will adversely impact performance of the extension."),e.enableSourceMapsAndReloadVSC=u("diagnostics.enableSourceMapsAndReloadVSC","Enable and reload Window."),e.lsNotSupported=u("diagnostics.lsNotSupported","Your operating system does not meet the minimum requirements of the Python Language Server. Reverting to the alternative autocompletion provider, Jedi."),e.upgradeCodeRunner=u("diagnostics.upgradeCodeRunner","Please update the Code Runner extension for it to be compatible with the Python extension."),e.removedPythonPathFromSettings=u("diagnostics.removedPythonPathFromSettings",'We removed the "python.pythonPath" setting from your settings.json file as the setting is no longer used by the Python extension. You can get the path of your selected interpreter in the Python output channel. [Learn more](https://aka.ms/AA7jfor).'),e.invalidPythonPathInDebuggerSettings=u("diagnostics.invalidPythonPathInDebuggerSettings",'You need to select a Python interpreter before you start debugging.\n\nTip: click on "Select Python Interpreter" in the status bar.'),e.invalidPythonPathInDebuggerLaunch=u("diagnostics.invalidPythonPathInDebuggerLaunch","The Python path in your debug configuration is invalid."),e.invalidDebuggerTypeDiagnostic=u("diagnostics.invalidDebuggerTypeDiagnostic",'Your launch.json file needs to be updated to change the "pythonExperimental" debug configurations to use the "python" debugger type, otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.consoleTypeDiagnostic=u("diagnostics.consoleTypeDiagnostic",'Your launch.json file needs to be updated to change the console type string from "none" to "internalConsole", otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?'),e.justMyCodeDiagnostic=u("diagnostics.justMyCodeDiagnostic",'Configuration "debugStdLib" in launch.json is no longer supported. It\'s recommended to replace it with "justMyCode", which is the exact opposite of using "debugStdLib". Would you like to automatically update your launch.json file to do that?'),e.yesUpdateLaunch=u("diagnostics.yesUpdateLaunch","Yes, update launch.json"),e.invalidTestSettings=u("diagnostics.invalidTestSettings",'Your settings needs to be updated to change the setting "python.unitTest." to "python.testing.", otherwise testing Python code using the extension may not work. Would you like to automatically update your settings now?'),e.updateSettings=u("diagnostics.updateSettings","Yes, update settings"),e.checkIsort5UpgradeGuide=u("diagnostics.checkIsort5UpgradeGuide","We found outdated configuration for sorting imports in this workspace. Check the [isort upgrade guide](https://aka.ms/AA9j5x4) to update your settings.")}(t.Diagnostics||(t.Diagnostics={})),function(e){e.bannerLabelYes=u("Common.bannerLabelYes","Yes"),e.bannerLabelNo=u("Common.bannerLabelNo","No"),e.yesPlease=u("Common.yesPlease","Yes, please"),e.canceled=u("Common.canceled","Canceled"),e.cancel=u("Common.cancel","Cancel"),e.ok=u("Common.ok","Ok"),e.gotIt=u("Common.gotIt","Got it!"),e.install=u("Common.install","Install"),e.loadingExtension=u("Common.loadingPythonExtension","Python extension loading..."),e.openOutputPanel=u("Common.openOutputPanel","Show output"),e.noIWillDoItLater=u("Common.noIWillDoItLater","No, I will do it later"),e.notNow=u("Common.notNow","Not now"),e.doNotShowAgain=u("Common.doNotShowAgain","Do not show again"),e.reload=u("Common.reload","Reload"),e.moreInfo=u("Common.moreInfo","More Info"),e.learnMore=u("Common.learnMore","Learn more"),e.and=u("Common.and","and"),e.reportThisIssue=u("Common.reportThisIssue","Report this issue")}(t.Common||(t.Common={})),function(e){e.remindMeLaterLabel=u("CommonSurvey.remindMeLaterLabel","Remind me later"),e.yesLabel=u("CommonSurvey.yesLabel","Yes, take survey now"),e.noLabel=u("CommonSurvey.noLabel","No, thanks")}(t.CommonSurvey||(t.CommonSurvey={})),function(e){e.unsupportedOS=u("AttachProcess.unsupportedOS","Operating system '{0}' not supported."),e.attachTitle=u("AttachProcess.attachTitle","Attach to process"),e.selectProcessPlaceholder=u("AttachProcess.selectProcessPlaceholder","Select the process to attach to"),e.noProcessSelected=u("AttachProcess.noProcessSelected","No process selected"),e.refreshList=u("AttachProcess.refreshList","Refresh process list")}(t.AttachProcess||(t.AttachProcess={})),function(e){e.proposePylanceMessage=u("Pylance.proposePylanceMessage","Try out a new faster, feature-rich language server for Python by Microsoft, Pylance! Install the extension now."),e.tryItNow=u("Pylance.tryItNow","Try it now"),e.remindMeLater=u("Pylance.remindMeLater","Remind me later"),e.installPylanceMessage=u("Pylance.installPylanceMessage","Pylance extension is not installed. Click Yes to open Pylance installation page."),e.pylanceNotInstalledMessage=u("Pylance.pylanceNotInstalledMessage","Pylance extension is not installed."),e.pylanceInstalledReloadPromptMessage=u("Pylance.pylanceInstalledReloadPromptMessage","Pylance extension is now installed. Reload window to activate?")}(t.Pylance||(t.Pylance={})),function(e){e.jupyterExtensionRequired=u("Jupyter.extensionRequired","The Jupyter extension is required to perform that task. Click Yes to open the Jupyter extension installation page.")}(t.Jupyter||(t.Jupyter={})),function(e){e.startingJedi=u("LanguageService.startingJedi","Starting Jedi Python language engine."),e.startingMicrosoft=u("LanguageService.startingMicrosoft","Starting Microsoft Python language server."),e.startingPylance=u("LanguageService.startingPylance","Starting Pylance language server."),e.startingNone=u("LanguageService.startingNone","Editor support is inactive since language server is set to None."),e.reloadAfterLanguageServerChange=u("LanguageService.reloadAfterLanguageServerChange","Please reload the window switching between language servers."),e.lsFailedToStart=u("LanguageService.lsFailedToStart","We encountered an issue starting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToDownload=u("LanguageService.lsFailedToDownload","We encountered an issue downloading the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.lsFailedToExtract=u("LanguageService.lsFailedToExtract","We encountered an issue extracting the language server. Reverting to Jedi language engine. Check the Python output panel for details."),e.downloadFailedOutputMessage=u("LanguageService.downloadFailedOutputMessage","Language server download failed."),e.extractionFailedOutputMessage=u("LanguageService.extractionFailedOutputMessage","Language server extraction failed."),e.extractionCompletedOutputMessage=u("LanguageService.extractionCompletedOutputMessage","Language server download complete."),e.extractionDoneOutputMessage=u("LanguageService.extractionDoneOutputMessage","done."),e.reloadVSCodeIfSeachPathHasChanged=u("LanguageService.reloadVSCodeIfSeachPathHasChanged","Search paths have changed for this Python interpreter. Please reload the extension to ensure that the IntelliSense works correctly.")}(t.LanguageService||(t.LanguageService={})),function(e){e.downloadingFile=u("downloading.file","Downloading {0}..."),e.downloadingFileProgress=u("downloading.file.progress","{0}{1} of {2} KB ({3}%)")}(t.Http||(t.Http={})),function(e){e.inGroup=u("Experiments.inGroup","User belongs to experiment group '{0}'")}(t.Experiments||(t.Experiments={})),function(e){e.loading=u("Interpreters.LoadingInterpreters","Loading Python Interpreters"),e.refreshing=u("Interpreters.RefreshingInterpreters","Refreshing Python Interpreters"),e.condaInheritEnvMessage=u("Interpreters.condaInheritEnvMessage",'We noticed you\'re using a conda environment. If you are experiencing issues with this environment in the integrated terminal, we recommend that you let the Python extension change "terminal.integrated.inheritEnv" to false in your user settings.'),e.unsafeInterpreterMessage=u("Interpreters.unsafeInterpreterMessage","We found a Python environment in this workspace. Do you want to select it to start up the features in the Python extension? Only accept if you trust this environment."),e.environmentPromptMessage=u("Interpreters.environmentPromptMessage","We noticed a new virtual environment has been created. Do you want to select it for the workspace folder?"),e.entireWorkspace=u("Interpreters.entireWorkspace","Entire workspace"),e.selectInterpreterTip=u("Interpreters.selectInterpreterTip","Tip: you can change the Python interpreter used by the Python extension by clicking on the Python version in the status bar"),e.pythonInterpreterPath=u("Interpreters.pythonInterpreterPath","Python interpreter path: {0}")}(t.Interpreters||(t.Interpreters={})),function(e){e.quickPickListPlaceholder=u("InterpreterQuickPickList.quickPickListPlaceholder","Current: {0}"),e.enterPath={detail:u("InterpreterQuickPickList.enterPath.detail","Enter path or find an existing interpreter"),label:u("InterpreterQuickPickList.enterPath.label","Enter interpreter path..."),placeholder:u("InterpreterQuickPickList.enterPath.placeholder","Enter path to a Python interpreter.")},e.browsePath={label:u("InterpreterQuickPickList.browsePath.label","Find..."),detail:u("InterpreterQuickPickList.browsePath.detail","Browse your file system to find a Python interpreter."),openButtonLabel:u("python.command.python.setInterpreter.title","Select Interpreter"),title:u("InterpreterQuickPickList.browsePath.title","Select Python interpreter")}}(t.InterpreterQuickPickList||(t.InterpreterQuickPickList={})),function(e){e.yesWeekly=u("ExtensionChannels.yesWeekly","Yes, weekly"),e.yesDaily=u("ExtensionChannels.yesDaily","Yes, daily"),e.promptMessage=u("ExtensionChannels.promptMessage","We noticed you are using Visual Studio Code Insiders. Would you like to use the Insiders build of the Python extension?"),e.reloadToUseInsidersMessage=u("ExtensionChannels.reloadToUseInsidersMessage","Please reload Visual Studio Code to use the insiders build of the Python extension."),e.downloadCompletedOutputMessage=u("ExtensionChannels.downloadCompletedOutputMessage","Insiders build download complete."),e.startingDownloadOutputMessage=u("ExtensionChannels.startingDownloadOutputMessage","Starting download for Insiders build."),e.downloadingInsidersMessage=u("ExtensionChannels.downloadingInsidersMessage","Downloading Insiders Extension... "),e.installingInsidersMessage=u("ExtensionChannels.installingInsidersMessage","Installing Insiders build of extension... "),e.installingStableMessage=u("ExtensionChannels.installingStableMessage","Installing Stable build of extension... "),e.installationCompleteMessage=u("ExtensionChannels.installationCompleteMessage","complete.")}(t.ExtensionChannels||(t.ExtensionChannels={})),function(e){e.languageServer=u("OutputChannelNames.languageServer","Python Language Server"),e.python=u("OutputChannelNames.python","Python"),e.pythonTest=u("OutputChannelNames.pythonTest","Python Test Log")}(t.OutputChannelNames||(t.OutputChannelNames={})),function(e){e.currentWorkingDirectory=u("Logging.CurrentWorkingDirectory","cwd:")}(t.Logging||(t.Logging={})),function(e){e.enableLinter=u("Linter.enableLinter","Enable {0}"),e.enablePylint=u("Linter.enablePylint","You have a pylintrc file in your workspace. Do you want to enable pylint?"),e.replaceWithSelectedLinter=u("Linter.replaceWithSelectedLinter","Multiple linters are enabled in settings. Replace with '{0}'?"),e.installMessage=u("Linter.install","Install a linter to get error reporting."),e.installPylint=u("Linter.installPylint","Install pylint"),e.installFlake8=u("Linter.installFlake8","Install flake8"),e.selectLinter=u("Linter.selectLinter","Select Linter")}(t.Linters||(t.Linters={})),function(e){e.noCondaOrPipInstaller=u("Installer.noCondaOrPipInstaller","There is no Conda or Pip installer available in the selected environment."),e.noPipInstaller=u("Installer.noPipInstaller","There is no Pip installer available in the selected environment."),e.searchForHelp=u("Installer.searchForHelp","Search for help"),e.couldNotInstallLibrary=u("Installer.couldNotInstallLibrary","Could not install {0}. If pip is not available, please use the package manager of your choice to manually install this library into your Python environment."),e.dataScienceInstallPrompt=u("Installer.dataScienceInstallPrompt","Data Science library {0} is not installed. Install?")}(t.Installer||(t.Installer={})),function(e){e.bannerMessage=u("ExtensionSurveyBanner.bannerMessage","Can you please take 2 minutes to tell us how the Python extension is working for you?"),e.bannerLabelYes=u("ExtensionSurveyBanner.bannerLabelYes","Yes, take survey now"),e.bannerLabelNo=u("ExtensionSurveyBanner.bannerLabelNo","No, thanks"),e.maybeLater=u("ExtensionSurveyBanner.maybeLater","Maybe later")}(t.ExtensionSurveyBanner||(t.ExtensionSurveyBanner={})),function(e){e.installingModule=u("products.installingModule","Installing {0}")}(t.Products||(t.Products={})),function(e){e.getStarted=u("StartPage.getStarted","Python - Get Started"),e.pythonExtensionTitle=u("StartPage.pythonExtensionTitle","Python Extension"),e.createJupyterNotebook=u("StartPage.createJupyterNotebook","Create a Jupyter Notebook"),e.notebookDescription=u("StartPage.notebookDescription",'- Run "<div class="link italics" role="button" onclick={0}>Create New Blank Jupyter Notebook</div>" in the Command Palette (<div class="italics">Shift + Command + P</div>)<br />- Explore our <div class="link" role="button" onclick={1}>sample notebook</div> to learn about notebook features'),e.createAPythonFile=u("StartPage.createAPythonFile","Create a Python File"),e.pythonFileDescription=u("StartPage.pythonFileDescription",'- Create a <div class="link" role="button" onclick={0}>new file</div> with a .py extension'),e.openInteractiveWindow=u("StartPage.openInteractiveWindow","Use the Interactive Window to develop Python Scripts"),e.interactiveWindowDesc=u("StartPage.interactiveWindowDesc",'- You can create cells on a Python file by typing "#%%" <br /> - Use "<div class="italics">Shift + Enter</div> " to run a cell, the output will be shown in the interactive window'),e.releaseNotes=u("StartPage.releaseNotes",'Take a look at our <a class="link" href={0}>Release Notes</a> to learn more about the latest features.'),e.tutorialAndDoc=u("StartPage.tutorialAndDoc",'Explore more features in our <a class="link" href={0}>Tutorials</a> or check <a class="link" href={1}>Documentation</a> for tips and troubleshooting.'),e.dontShowAgain=u("StartPage.dontShowAgain","Don't show this page again"),e.helloWorld=u("StartPage.helloWorld","Hello world"),e.sampleNotebook=u("StartPage.sampleNotebook","Notebooks intro"),e.openFolder=u("StartPage.openFolder","Open a Folder or Workspace"),e.folderDesc=u("StartPage.folderDesc",'- Open a <div class="link" role="button" onclick={0}>Folder</div><br /> - Open a <div class="link" role="button" onclick={1}>Workspace</div>'),e.badWebPanelFormatString=u("StartPage.badWebPanelFormatString","<html><body><h1>{0} is not a valid file name</h1></body></html>")}(t.StartPage||(t.StartPage={})),function(e){let t,n,r,i,o,s,a;e.selectConfiguration={title:u("debug.selectConfigurationTitle"),placeholder:u("debug.selectConfigurationPlaceholder")},e.launchJsonCompletions={label:u("debug.launchJsonConfigurationsCompletionLabel"),description:u("debug.launchJsonConfigurationsCompletionDescription")},function(e){e.snippet={name:u("python.snippet.launch.standard.label")},e.selectConfiguration={label:u("debug.debugFileConfigurationLabel"),description:u("debug.debugFileConfigurationDescription")}}(t=e.file||(e.file={})),function(e){e.snippet={name:u("python.snippet.launch.module.label"),default:u("python.snippet.launch.module.default")},e.selectConfiguration={label:u("debug.debugModuleConfigurationLabel"),description:u("debug.debugModuleConfigurationDescription")},e.enterModule={title:u("debug.moduleEnterModuleTitle"),prompt:u("debug.moduleEnterModulePrompt"),default:u("debug.moduleEnterModuleDefault"),invalid:u("debug.moduleEnterModuleInvalidNameError")}}(n=e.module||(e.module={})),function(e){e.snippet={name:u("python.snippet.launch.attach.label")},e.selectConfiguration={label:u("debug.remoteAttachConfigurationLabel"),description:u("debug.remoteAttachConfigurationDescription")},e.enterRemoteHost={title:u("debug.attachRemoteHostTitle"),prompt:u("debug.attachRemoteHostPrompt"),invalid:u("debug.attachRemoteHostValidationError")},e.enterRemotePort={title:u("debug.attachRemotePortTitle"),prompt:u("debug.attachRemotePortPrompt"),invalid:u("debug.attachRemotePortValidationError")}}(r=e.attach||(e.attach={})),function(e){e.snippet={name:u("python.snippet.launch.attachpid.label")},e.selectConfiguration={label:u("debug.attachPidConfigurationLabel"),description:u("debug.attachPidConfigurationDescription")}}(i=e.attachPid||(e.attachPid={})),function(e){e.snippet={name:u("python.snippet.launch.django.label")},e.selectConfiguration={label:u("debug.debugDjangoConfigurationLabel"),description:u("debug.debugDjangoConfigurationDescription")},e.enterManagePyPath={title:u("debug.djangoEnterManagePyPathTitle"),prompt:u("debug.djangoEnterManagePyPathPrompt"),invalid:u("debug.djangoEnterManagePyPathInvalidFilePathError")}}(o=e.django||(e.django={})),function(e){e.snippet={name:u("python.snippet.launch.flask.label")},e.selectConfiguration={label:u("debug.debugFlaskConfigurationLabel"),description:u("debug.debugFlaskConfigurationDescription")},e.enterAppPathOrNamePath={title:u("debug.flaskEnterAppPathOrNamePathTitle"),prompt:u("debug.flaskEnterAppPathOrNamePathPrompt"),invalid:u("debug.flaskEnterAppPathOrNamePathInvalidNameError")}}(s=e.flask||(e.flask={})),function(e){e.snippet={name:u("python.snippet.launch.pyramid.label")},e.selectConfiguration={label:u("debug.debugPyramidConfigurationLabel"),description:u("debug.debugPyramidConfigurationDescription")},e.enterDevelopmentIniPath={title:u("debug.pyramidEnterDevelopmentIniPathTitle"),prompt:u("debug.pyramidEnterDevelopmentIniPathPrompt"),invalid:u("debug.pyramidEnterDevelopmentIniPathInvalidFilePathError")}}(a=e.pyramid||(e.pyramid={}))}(t.DebugConfigStrings||(t.DebugConfigStrings={})),function(e){e.testErrorDiagnosticMessage=u("Testing.testErrorDiagnosticMessage","Error"),e.testFailDiagnosticMessage=u("Testing.testFailDiagnosticMessage","Fail"),e.testSkippedDiagnosticMessage=u("Testing.testSkippedDiagnosticMessage","Skipped"),e.configureTests=u("Testing.configureTests","Configure Test Framework"),e.disableTests=u("Testing.disableTests","Disable Tests")}(t.Testing||(t.Testing={})),function(e){e.outdatedDebuggerMessage=u("OutdatedDebugger.updateDebuggerMessage","We noticed you are attaching to ptvsd (Python debugger), which was deprecated on May 1st, 2020. Please switch to [debugpy](https://aka.ms/migrateToDebugpy).")}(t.OutdatedDebugger||(t.OutdatedDebugger={}));let c,l={};function u(e,t){return()=>function(e,t){s&&d()===c||h();let n=a;s&&s.hasOwnProperty(e)&&(n=s);let r=n[e];!r&&t&&(r=t);return l[e]=r,r}(e,t)}function d(){const e=process.env.VSCODE_NLS_CONFIG;return e?JSON.parse(e).locale:"en-us"}function h(){const e=new o.FileSystem;c=d();const t=r.join(i.EXTENSION_ROOT_DIR,`package.nls.${c}.json`);if(e.fileExistsSync(t)){const n=e.readFileSync(t);s=JSON.parse(n)}else s={};if(!a){const t=r.join(i.EXTENSION_ROOT_DIR,"package.nls.json");if(e.fileExistsSync(t)){const n=e.readFileSync(t);a=JSON.parse(n)}else a={}}}t._resetCollections=function(){c="",s=void 0,l={}},t._getAskedForCollection=function(){return l},t.getCollectionJSON=function(){return s&&d()===c||h(),JSON.stringify({...a,...s})},t.localize=u,h()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUntitledFile=t.isNotebookCell=t.getURIFilter=t.isUri=t.isResource=t.tracing=t.usingAsync=t.using=t.swallowExceptions=t.noop=void 0;const r=n(10),i=n(15),o=n(30);function s(e){if(!e)return!1;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme}t.noop=function(){},t.swallowExceptions=function(e){try{e()}catch(e){}},t.using=function(e,t){try{t(e)}finally{e.dispose()}},t.usingAsync=async function(e,t){try{return await t(e)}finally{await e.dispose()}},t.tracing=function(e,t){const n=new o.StopWatch;try{const r=t();return i.isPromise(r)?r.then(t=>(e({elapsed:n.elapsedTime,returnValue:t}),t)).catch(t=>{e({elapsed:n.elapsedTime,err:t})}):e({elapsed:n.elapsedTime,returnValue:r}),r}catch(t){throw e({elapsed:n.elapsedTime,err:t}),t}},t.isResource=function(e){if(!e)return!0;const t=e;return"string"==typeof t.path&&"string"==typeof t.scheme},t.isUri=s,t.getURIFilter=function(e,t={checkExact:!0}){let n=e.path;for(;e.path.endsWith("/");)n=n.slice(0,-1);const r=n+"/";return function(i){if(i.scheme!==e.scheme)return!1;let o=i.path;for(;i.path.endsWith("/");)o=o.slice(0,-1);if(t.checkExact&&o===n)return!0;if(t.checkParent&&o.startsWith(r))return!0;if(t.checkChild){const e="{candidatePath}/";if(n.startsWith(e))return!0}return!1}},t.isNotebookCell=function(e){return(s(e)?e:e.uri).scheme.includes(r.NotebookCellScheme)},t.isUntitledFile=function(e){return"untitled"===(null==e?void 0:e.scheme)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenIterator=t.iterable=t.mapToIterator=t.chain=t.NEVER=t.iterEmpty=t.createDeferredFromPromise=t.createDeferredFrom=t.createDeferred=t.isPromise=t.isThenable=t.waitForPromise=t.sleep=void 0,t.sleep=async function(e){return new Promise(t=>{setTimeout(()=>t(e),e)})},t.waitForPromise=async function(e,t){return new Promise((n,r)=>{const i=setTimeout(()=>n(null),t);e.then(e=>{clearTimeout(i),n(e)}).catch(e=>{clearTimeout(i),r(e)})})},t.isThenable=function(e){return"function"==typeof(null==e?void 0:e.then)},t.isPromise=function(e){return"function"==typeof(null==e?void 0:e.then)&&"function"==typeof(null==e?void 0:e.catch)};class r{constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function i(e=null){return new r(e)}async function o(e,t){const n=void 0===t?-1:t;try{return{index:n,result:await e.next(),err:null}}catch(e){return{index:n,err:e,result:null}}}async function*s(e,n){const r=e.map(o);let i=e.length;for(;i>0;){const{index:s,result:a,err:c}=await Promise.race(r);null!==c?(r[s]=t.NEVER,i-=1,void 0!==n&&await n(c,s)):a.done?(r[s]=t.NEVER,i-=1,void 0!==a.value&&(yield a.value)):(r[s]=o(e[s],s),yield a.value)}}function a(e){const t=e;return void 0===t[Symbol.asyncIterator]&&(t[Symbol.asyncIterator]=()=>t),t}t.createDeferred=i,t.createDeferredFrom=function(...e){const t=i();return Promise.all(e).then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.createDeferredFromPromise=function(e){const t=i();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.iterEmpty=function(){return async function*(){}()},t.NEVER=new Promise(()=>{}),t.chain=s,t.mapToIterator=async function*(e,t,n=!0){if(n){const n=e.map(e=>async function*(){yield t(e)}());yield*a(s(n))}else yield*e.map(t)},t.iterable=a,t.flattenIterator=async function(e){const t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSingleActivationService=t.ILanguageServerOutputChannel=t.IPlatformData=t.PlatformName=t.ILanguageServerProxy=t.ILanguageServerExtension=t.ILanguageServerManager=t.ILanguageServerAnalysisOptions=t.ILanguageClientFactory=t.LanguageClientFactory=t.ILanguageServerCompatibilityService=t.IDownloadChannelRule=t.MajorLanguageServerVersion=t.ILanguageServerPackageService=t.ILanguageServerDownloader=t.ILanguageServerFolderService=t.ILanguageServerCache=t.ILanguageServerActivator=t.NodeLanguageServerFolder=t.DotNetLanguageServerFolder=t.LanguageServerType=t.IExtensionActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionActivationService=Symbol("IExtensionActivationService"),function(e){e.Jedi="Jedi",e.Microsoft="Microsoft",e.Node="Pylance",e.None="None"}(t.LanguageServerType||(t.LanguageServerType={})),t.DotNetLanguageServerFolder="languageServer",t.NodeLanguageServerFolder="nodeLanguageServer",t.ILanguageServerActivator=Symbol("ILanguageServerActivator"),t.ILanguageServerCache=Symbol("ILanguageServerCache"),t.ILanguageServerFolderService=Symbol("ILanguageServerFolderService"),t.ILanguageServerDownloader=Symbol("ILanguageServerDownloader"),t.ILanguageServerPackageService=Symbol("ILanguageServerPackageService"),t.MajorLanguageServerVersion=Symbol("MajorLanguageServerVersion"),t.IDownloadChannelRule=Symbol("IDownloadChannelRule"),t.ILanguageServerCompatibilityService=Symbol("ILanguageServerCompatibilityService"),function(e){e.base="base",e.simple="simple",e.downloaded="downloaded"}(t.LanguageClientFactory||(t.LanguageClientFactory={})),t.ILanguageClientFactory=Symbol("ILanguageClientFactory"),t.ILanguageServerAnalysisOptions=Symbol("ILanguageServerAnalysisOptions"),t.ILanguageServerManager=Symbol("ILanguageServerManager"),t.ILanguageServerExtension=Symbol("ILanguageServerExtension"),t.ILanguageServerProxy=Symbol("ILanguageServerProxy"),function(e){e.Windows32Bit="win-x86",e.Windows64Bit="win-x64",e.Mac64Bit="osx-x64",e.Linux64Bit="linux-x64"}(t.PlatformName||(t.PlatformName={})),t.IPlatformData=Symbol("IPlatformData"),t.ILanguageServerOutputChannel=Symbol("ILanguageServerOutputChannel"),t.IExtensionSingleActivationService=Symbol("IExtensionSingleActivationService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITestsStatusUpdaterService=t.ITestContextService=t.ITestMessageService=t.IXUnitParser=t.ITestRunner=t.IUnitTestSocketServer=t.ITestsParser=t.ITestDiscoveryService=t.ITestManager=t.ITestManagerServiceFactory=t.ITestManagerFactory=t.ITestDebugLauncher=t.ITestResultsService=t.ITestCollectionStorageService=t.ITestVisitor=t.ITestsHelper=t.IWorkspaceTestManagerService=t.TestStatus=t.TestingType=void 0,function(e){e.folder="folder",e.file="file",e.suite="suite",e.function="function"}(t.TestingType||(t.TestingType={})),function(e){e.Unknown="Unknown",e.Discovering="Discovering",e.Idle="Idle",e.Running="Running",e.Fail="Fail",e.Error="Error",e.Skipped="Skipped",e.Pass="Pass"}(t.TestStatus||(t.TestStatus={})),t.IWorkspaceTestManagerService=Symbol("IWorkspaceTestManagerService"),t.ITestsHelper=Symbol("ITestsHelper"),t.ITestVisitor=Symbol("ITestVisitor"),t.ITestCollectionStorageService=Symbol("ITestCollectionStorageService"),t.ITestResultsService=Symbol("ITestResultsService"),t.ITestDebugLauncher=Symbol("ITestDebugLauncher"),t.ITestManagerFactory=Symbol("ITestManagerFactory"),t.ITestManagerServiceFactory=Symbol("TestManagerServiceFactory"),t.ITestManager=Symbol("ITestManager"),t.ITestDiscoveryService=Symbol("ITestDiscoveryService"),t.ITestsParser=Symbol("ITestsParser"),t.IUnitTestSocketServer=Symbol("IUnitTestSocketServer"),t.ITestRunner=Symbol("ITestRunner"),t.IXUnitParser=Symbol("IXUnitParser"),t.ITestMessageService=Symbol("ITestMessageService"),t.ITestContextService=Symbol("ITestContextService"),t.ITestsStatusUpdaterService=Symbol("ITestsStatusUpdaterService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonToolExecutionService=t.StdErrError=t.IPythonExecutionService=t.IPythonExecutionFactory=t.IProcessServiceFactory=t.IProcessLogger=t.IBufferDecoder=void 0,t.IBufferDecoder=Symbol("IBufferDecoder"),t.IProcessLogger=Symbol("IProcessLogger"),t.IProcessServiceFactory=Symbol("IProcessServiceFactory"),t.IPythonExecutionFactory=Symbol("IPythonExecutionFactory"),t.IPythonExecutionService=Symbol("IPythonExecutionService");class r extends Error{constructor(e){super(e)}}t.StdErrError=r,t.IPythonToolExecutionService=Symbol("IPythonToolRunnerService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITestDataItemResource=t.ITestTreeViewProvider=t.TestWorkspaceFolder=t.TestDataItemType=t.DiagnosticMessageType=t.PythonTestMessageSeverity=t.ITestDiagnosticService=t.IUnitTestHelper=t.ITestManagerRunner=t.IArgumentsHelper=t.IArgumentsService=t.TestFilter=t.ITestConfigurationManagerFactory=t.ITestConfigSettingsService=t.ITestManagementService=t.ITestDisplay=t.ITestResultDisplay=t.ITestConfigurationService=void 0,t.ITestConfigurationService=Symbol("ITestConfigurationService"),t.ITestResultDisplay=Symbol("ITestResultDisplay"),t.ITestDisplay=Symbol("ITestDisplay"),t.ITestManagementService=Symbol("ITestManagementService"),t.ITestConfigSettingsService=Symbol("ITestConfigSettingsService"),t.ITestConfigurationManagerFactory=Symbol("ITestConfigurationManagerFactory"),function(e){e.removeTests="removeTests",e.discovery="discovery",e.runAll="runAll",e.runSpecific="runSpecific",e.debugAll="debugAll",e.debugSpecific="debugSpecific"}(t.TestFilter||(t.TestFilter={})),t.IArgumentsService=Symbol("IArgumentsService"),t.IArgumentsHelper=Symbol("IArgumentsHelper"),t.ITestManagerRunner=Symbol("ITestManagerRunner"),t.IUnitTestHelper=Symbol("IUnitTestHelper"),t.ITestDiagnosticService=Symbol("ITestDiagnosticService"),function(e){e[e.Error=0]="Error",e[e.Failure=1]="Failure",e[e.Skip=2]="Skip",e[e.Pass=3]="Pass"}(t.PythonTestMessageSeverity||(t.PythonTestMessageSeverity={})),function(e){e[e.Error=0]="Error",e[e.Fail=1]="Fail",e[e.Skipped=2]="Skipped",e[e.Pass=3]="Pass"}(t.DiagnosticMessageType||(t.DiagnosticMessageType={})),function(e){e.workspaceFolder="workspaceFolder",e.folder="folder",e.file="file",e.suite="suite",e.function="function"}(t.TestDataItemType||(t.TestDataItemType={}));t.TestWorkspaceFolder=class{constructor(e){this.workspaceFolder=e}get resource(){return this.workspaceFolder.uri}get name(){return this.workspaceFolder.name}},t.ITestTreeViewProvider=Symbol("ITestTreeViewProvider"),t.ITestDataItemResource=Symbol("ITestDataItemResource")},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")}),Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")}),Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")}),Object.defineProperty(t,"configs",{value:n(411)})},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trace=t.displayProgress=t.swallowExceptions=t.cache=t.clearCachedResourceSpecificIngterpreterData=t.makeDebounceAsyncDecorator=t.makeDebounceDecorator=t.debounceAsync=t.debounceSync=void 0;const r=n(2);n(11);const i=n(10),o=n(5),s=n(15),a=n(183),c=n(14),l=n(489);function u(e){return function(t,n,r){const i=r.value,o=l((function(){return i.apply(this,arguments)}),e,{});r.value=o}}function d(e){return function(t,n,r){const i=r.value,o={started:!1,deferred:void 0,timer:void 0};r.value=function(){const t=o.deferred;if(t&&o.started)return t.promise;const n=t&&t.completed,r=o.deferred=!t||n?s.createDeferred():t;return o.timer&&clearTimeout(o.timer),o.timer=setTimeout(async()=>{o.started=!0,i.apply(this).then(e=>{o.started=!1,r.resolve(e)}).catch(e=>{o.started=!1,r.reject(e)})},e||0),r.promise}}}t.debounceSync=function(e){return i.isTestExecution()&&(e=void 0),u(e)},t.debounceAsync=function(e){return i.isTestExecution()&&(e=void 0),d(e)},t.makeDebounceDecorator=u,t.makeDebounceAsyncDecorator=d,t.clearCachedResourceSpecificIngterpreterData=function(e,t,r,i=n(2)){new a.InMemoryInterpreterSpecificCache(e,0,[t],r,i).clear()};const h=a.getGlobalCacheStore();t.cache=function(e){return function(t,n,r){const s=r.value,c=`Cache_Method_Output_${"constructor"in t&&t.constructor.name?t.constructor.name:""}.${n}`;r.value=async function(...t){if(i.isTestExecution())return s.apply(this,t);const n=a.getCacheKeyFromFunctionArgs(c,t),r=h.get(n);if(r&&r.expiry>Date.now())return o.traceVerbose("Cached data exists "+n),Promise.resolve(r.data);const l=s.apply(this,t);return l.then(t=>h.set(n,{data:t,expiry:Date.now()+e})).ignoreErrors(),l}}},t.swallowExceptions=function(e){return function(t,n,r){const s=r.value,a=`Python Extension (Error in ${e||n}, method:${n}):`;r.value=function(...e){try{const t=s.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch(e=>{i.isTestExecution()||o.traceError(a,e)})}catch(e){if(i.isTestExecution())return;o.traceError(a,e)}}}},t.displayProgress=function(e,t=r.ProgressLocation.Window){return function(n,o,s){const a=s.value;s.value=async function(...n){const o={location:t,title:e},s=a.apply(this,n);return i.isTestExecution()||r.window.withProgress(o,()=>s),s}}},t.trace=function(e){return function(t,n,r){const i=r.value;return r.value=function(...n){const r={kind:"Class",name:t&&t.constructor?t.constructor.name:"",args:n},o=this;return c.tracing(t=>e(r,t),()=>i.apply(o,n))},r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinterInstallationPromptVariants=t.SendSelectionToREPL=t.JoinMailingListPromptVariants=t.JediLSP=t.SurveyAndInterpreterTipNotification=t.TryPylance=t.DeprecatePythonPath=t.CollectNodeLSRequestTiming=t.CollectLSRequestTiming=t.ValidateABTesting=t.UseTerminalToGetActivatedEnvVars=t.WebAppReload=t.ShowExtensionSurveyPrompt=t.AlwaysDisplayTestExplorerGroups=void 0,function(e){e.control="AlwaysDisplayTestExplorer - control",e.experiment="AlwaysDisplayTestExplorer - experiment"}(t.AlwaysDisplayTestExplorerGroups||(t.AlwaysDisplayTestExplorerGroups={})),function(e){e.control="ShowExtensionSurveyPrompt - control",e.enabled="ShowExtensionSurveyPrompt - enabled"}(t.ShowExtensionSurveyPrompt||(t.ShowExtensionSurveyPrompt={})),function(e){e.control="Reload - control",e.experiment="Reload - experiment"}(t.WebAppReload||(t.WebAppReload={})),function(e){e.control="UseTerminalToGetActivatedEnvVars - control",e.experiment="UseTerminalToGetActivatedEnvVars - experiment"}(t.UseTerminalToGetActivatedEnvVars||(t.UseTerminalToGetActivatedEnvVars={})),function(e){e.control="AA_testing - control",e.experiment="AA_testing - experiment"}(t.ValidateABTesting||(t.ValidateABTesting={})),function(e){e.control="CollectLSRequestTiming - control",e.experiment="CollectLSRequestTiming - experiment"}(t.CollectLSRequestTiming||(t.CollectLSRequestTiming={})),function(e){e.control="CollectNodeLSRequestTiming - control",e.experiment="CollectNodeLSRequestTiming - experiment"}(t.CollectNodeLSRequestTiming||(t.CollectNodeLSRequestTiming={})),function(e){e.control="DeprecatePythonPath - control",e.experiment="DeprecatePythonPath - experiment"}(t.DeprecatePythonPath||(t.DeprecatePythonPath={})),function(e){e.experiment="tryPylance",e.jediPrompt1="tryPylancePromptText1",e.jediPrompt2="tryPylancePromptText2"}(t.TryPylance||(t.TryPylance={})),function(e){e.tipExperiment="pythonTipPromptWording",e.surveyExperiment="pythonMailingListPromptWording"}(t.SurveyAndInterpreterTipNotification||(t.SurveyAndInterpreterTipNotification={})),function(e){e.experiment="jediLSP"}(t.JediLSP||(t.JediLSP={})),function(e){e.variant1="pythonJoinMailingListVar1",e.variant2="pythonJoinMailingListVar2",e.variant3="pythonJoinMailingListVar3"}(t.JoinMailingListPromptVariants||(t.JoinMailingListPromptVariants={})),function(e){e.experiment="pythonSendEntireLineToREPL"}(t.SendSelectionToREPL||(t.SendSelectionToREPL={})),function(e){e.pylintFirst="pythonInstallPylintButtonFirst",e.flake8First="pythonInstallFlake8ButtonFirst",e.noPrompt="pythonNotDisplayLinterPrompt"}(t.LinterInstallationPromptVariants||(t.LinterInstallationPromptVariants={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IShellDetector=t.ITerminalActivationHandler=t.ITerminalActivationCommandProvider=t.ITerminalActivator=t.ITerminalHelper=t.ITerminalServiceFactory=t.TerminalShellType=t.TerminalActivationProviders=void 0,function(e){e.bashCShellFish="bashCShellFish",e.commandPromptAndPowerShell="commandPromptAndPowerShell",e.pyenv="pyenv",e.conda="conda",e.pipenv="pipenv"}(t.TerminalActivationProviders||(t.TerminalActivationProviders={})),function(e){e.powershell="powershell",e.powershellCore="powershellCore",e.commandPrompt="commandPrompt",e.gitbash="gitbash",e.bash="bash",e.zsh="zsh",e.ksh="ksh",e.fish="fish",e.cshell="cshell",e.tcshell="tshell",e.wsl="wsl",e.xonsh="xonsh",e.other="other"}(t.TerminalShellType||(t.TerminalShellType={})),t.ITerminalServiceFactory=Symbol("ITerminalServiceFactory"),t.ITerminalHelper=Symbol("ITerminalHelper"),t.ITerminalActivator=Symbol("ITerminalActivator"),t.ITerminalActivationCommandProvider=Symbol("ITerminalActivationCommandProvider"),t.ITerminalActivationHandler=Symbol("ITerminalActivationHandler"),t.IShellDetector=Symbol("IShellDetector")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icons=t.UNITTEST_PROVIDER=t.PYTEST_PROVIDER=t.NOSETEST_PROVIDER=t.UNIT_TEST_PRODUCTS=t.TEST_OUTPUT_CHANNEL=t.CommandSource=t.CANCELLATION_REASON=void 0;const r=n(1);t.CANCELLATION_REASON="cancelled_user_request",function(e){e.auto="auto",e.ui="ui",e.codelens="codelens",e.commandPalette="commandpalette",e.testExplorer="testExplorer"}(t.CommandSource||(t.CommandSource={})),t.TEST_OUTPUT_CHANNEL="TEST_OUTPUT_CHANNEL",t.UNIT_TEST_PRODUCTS=[r.Product.pytest,r.Product.unittest,r.Product.nosetest],t.NOSETEST_PROVIDER="nosetest",t.PYTEST_PROVIDER="pytest",t.UNITTEST_PROVIDER="unittest",function(e){e.discovering="discovering-tests.svg",e.passed="status-ok.svg",e.failed="status-error.svg",e.unknown="status-unknown.svg"}(t.Icons||(t.Icons={}))},function(e,t,n){"use strict";var r;function i(e=process.platform){return/^win/.test(e)?r.Windows:/^darwin/.test(e)?r.OSX:/^linux/.test(e)?r.Linux:r.Unknown}function o(e){return process.env[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserHomeDir=t.getPathEnvironmentVariable=t.getEnvironmentVariable=t.getOSType=t.OSType=t.Architecture=void 0,function(e){e[e.Unknown=1]="Unknown",e[e.x86=2]="x86",e[e.x64=3]="x64"}(t.Architecture||(t.Architecture={})),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(r=t.OSType||(t.OSType={})),t.getOSType=i,t.getEnvironmentVariable=o,t.getPathEnvironmentVariable=function(){return o("Path")||o("PATH")},t.getUserHomeDir=function(){return i()===r.Windows?o("USERPROFILE"):o("HOME")||o("HOMEPATH")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortInterpreters=t.inSameDirectory=t.mergeEnvironments=t.updateEnvironment=t.areSamePartialEnvironment=t.getEnvironmentTypeName=t.normalizeEnvironment=t.EnvironmentType=void 0;const r=n(4),i=n(38),o=n(145);var s;function a(e){e.path=r.normalize(e.path)}function c(e,t,n){return!(!e||!t)&&(!!n.arePathsSame(e.path,t.path)||!!o.areSameVersion(e.version,t.version)&&!!u(e.path,t.path,n))}function l(e,t){e.envType===s.Unknown&&t.envType&&t.envType!==s.Unknown&&(e.envType=t.envType);["envName","envPath","path","sysPrefix","architecture","sysVersion","version","pipEnvWorkspaceFolder"].forEach(n=>{!e[n]&&t[n]&&(e[n]=t[n])})}function u(e,t,n){if(!e||!t)return!1;const i=r.dirname(e),o=r.dirname(t);return n.arePathsSame(i,o)}!function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv",e.WindowsStore="WindowsStore",e.Poetry="Poetry",e.VirtualEnvWrapper="VirtualEnvWrapper",e.Global="Global",e.System="System"}(s=t.EnvironmentType||(t.EnvironmentType={})),t.normalizeEnvironment=a,t.getEnvironmentTypeName=function(e){switch(e){case s.Conda:return"conda";case s.Pipenv:return"pipenv";case s.Pyenv:return"pyenv";case s.Venv:return"venv";case s.VirtualEnv:return"virtualenv";case s.WindowsStore:return"windows store";case s.Poetry:return"poetry";default:return""}},t.areSamePartialEnvironment=c,t.updateEnvironment=l,t.mergeEnvironments=function(e,t){return e.reduce((e,n)=>{const r=e.find(e=>c(n,e,t));if(r)l(r,n);else{const t={...n};a(t),e.push(t)}return e},[])},t.inSameDirectory=u,t.sortInterpreters=function(e){if(0===e.length)return[];if(1===e.length)return[e[0]];const t=e.slice();return t.sort((e,t)=>e.version&&t.version?i.compare(e.version.raw,t.version.raw):0),t}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0;t.StopWatch=class{constructor(){this.started=(new Date).getTime()}get elapsedTime(){return(new Date).getTime()-this.started}reset(){this.started=(new Date).getTime()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(291),i=n(291);t.makePatchingRequire=i.makePatchingRequire;var o=function(e){return!0},s=function(){function e(){this.version=n(496).version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach((function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=o);var r=this.subscribers[e];if(r)for(var i=0;i<r.length;++i)if(r[i].listener===t&&r[i].filter===n)return r.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new s,n(292).prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));t.channel=global.diagnosticsSource},function(e,t,n){var r=n(29),i=n(570),o=n(571),s=n(572),a=[],c=n(22);var l,u,d=function(){};function h(e){i(e),e.gracefulify=h,e.FileReadStream=d,e.FileWriteStream=g,e.createReadStream=function(e,t){return new d(e,t)},e.createWriteStream=function(e,t){return new g(e,t)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,i){return t(n,r,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[n,r,i]])}))}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o){return n(t,r,i,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),f()):p([e,[t,r,i,o]])}))}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o){return r(t,n,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),f()):p([e,[t,n,i,o]])}))}(e,t,n,i)});var s=e.readdir;function a(t){return s.apply(e,t)}if(e.readdir=function(e,t,n){var r=[e];"function"!=typeof t?r.push(t):n=t;return r.push((function(e,t){t&&t.sort&&t.sort();!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof n&&n.apply(this,arguments),f()):p([a,[r]])})),a(r)},"v0.8"===process.version.substr(0,4)){var c=o(e);d=c.ReadStream,g=c.WriteStream}var l=e.ReadStream;l&&(d.prototype=Object.create(l.prototype),d.prototype.open=function(){var e=this;v(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var u=e.WriteStream;function d(e,t){return this instanceof d?(l.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function g(e,t){return this instanceof g?(u.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}u&&(g.prototype=Object.create(u.prototype),g.prototype.open=function(){var e=this;v(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),e.ReadStream=d,e.WriteStream=g;var m=e.open;function v(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,i){return m(t,n,r,(function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[t,n,r,i]])}))}(e,t,n,r)}return e.open=v,e}function p(e){d("ENQUEUE",e[0].name,e[1]),a.push(e)}function f(){var e=a.shift();e&&(d("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}c.debuglog?d=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=c.format.apply(c,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(a),n(67).equal(a.length,0)})),e.exports=h(s(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(e.exports=h(r),r.__patched=!0),e.exports.close=(l=r.close,function(e,t){return l.call(r,e,(function(e){e||f(),"function"==typeof t&&t.apply(this,arguments)}))}),e.exports.closeSync=(u=r.closeSync,function(e){var t=u.apply(r,arguments);return f(),t}),/\bgraceful-fs\b/.test(r.closeSync.toString())||(r.closeSync=e.exports.closeSync,r.close=e.exports.close)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISourceMapSupportService=t.IInvalidPythonPathInDebuggerService=t.IDiagnosticHandlerService=t.IDiagnosticFilterService=t.IDiagnosticsService=t.DiagnosticIgnoreScope=t.DiagnosticScope=void 0,function(e){e.Global="Global",e.WorkspaceFolder="WorkspaceFolder"}(t.DiagnosticScope||(t.DiagnosticScope={})),function(e){e.always="always",e.session="session"}(t.DiagnosticIgnoreScope||(t.DiagnosticIgnoreScope={})),t.IDiagnosticsService=Symbol("IDiagnosticsService"),t.IDiagnosticFilterService=Symbol("IDiagnosticFilterService"),t.IDiagnosticHandlerService=Symbol("IDiagnosticHandlerService"),t.IInvalidPythonPathInDebuggerService=Symbol("IInvalidPythonPathInDebuggerService"),t.ISourceMapSupportService=Symbol("ISourceMapSupportService")},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(327);r(n(327)),r(n(661)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return(a=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}(this,l(t).call(this,"Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ".concat(e.toString().split("\n")[0],"\n"))),Error.captureStackTrace(i(i(n)),t),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),t}(o(Error));e.exports=function(e){if(e.length>2)throw new u(e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e}function n(e){return new t(e)}return t.prototype.transform=e,n.Format=t,n}},function(e,t,n){"use strict";var r=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();e.exports=r},function(e,t){var n;t=e.exports=$,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=0,a=s++;o[a]="0|[1-9]\\d*";var c=s++;o[c]="[0-9]+";var l=s++;o[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=s++;o[u]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var d=s++;o[d]="("+o[c]+")\\.("+o[c]+")\\.("+o[c]+")";var h=s++;o[h]="(?:"+o[a]+"|"+o[l]+")";var p=s++;o[p]="(?:"+o[c]+"|"+o[l]+")";var f=s++;o[f]="(?:-("+o[h]+"(?:\\."+o[h]+")*))";var g=s++;o[g]="(?:-?("+o[p]+"(?:\\."+o[p]+")*))";var m=s++;o[m]="[0-9A-Za-z-]+";var v=s++;o[v]="(?:\\+("+o[m]+"(?:\\."+o[m]+")*))";var y=s++,b="v?"+o[u]+o[f]+"?"+o[v]+"?";o[y]="^"+b+"$";var S="[v=\\s]*"+o[d]+o[g]+"?"+o[v]+"?",E=s++;o[E]="^"+S+"$";var w=s++;o[w]="((?:<|>)?=?)";var _=s++;o[_]=o[c]+"|x|X|\\*";var P=s++;o[P]=o[a]+"|x|X|\\*";var C=s++;o[C]="[v=\\s]*("+o[P]+")(?:\\.("+o[P]+")(?:\\.("+o[P]+")(?:"+o[f]+")?"+o[v]+"?)?)?";var T=s++;o[T]="[v=\\s]*("+o[_]+")(?:\\.("+o[_]+")(?:\\.("+o[_]+")(?:"+o[g]+")?"+o[v]+"?)?)?";var I=s++;o[I]="^"+o[w]+"\\s*"+o[C]+"$";var O=s++;o[O]="^"+o[w]+"\\s*"+o[T]+"$";var R=s++;o[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=s++;o[D]="(?:~>?)";var x=s++;o[x]="(\\s*)"+o[D]+"\\s+",i[x]=new RegExp(o[x],"g");var k=s++;o[k]="^"+o[D]+o[C]+"$";var A=s++;o[A]="^"+o[D]+o[T]+"$";var N=s++;o[N]="(?:\\^)";var j=s++;o[j]="(\\s*)"+o[N]+"\\s+",i[j]=new RegExp(o[j],"g");var F=s++;o[F]="^"+o[N]+o[C]+"$";var M=s++;o[M]="^"+o[N]+o[T]+"$";var L=s++;o[L]="^"+o[w]+"\\s*("+S+")$|^$";var U=s++;o[U]="^"+o[w]+"\\s*("+b+")$|^$";var W=s++;o[W]="(\\s*)"+o[w]+"\\s*("+S+"|"+o[C]+")",i[W]=new RegExp(o[W],"g");var B=s++;o[B]="^\\s*("+o[C]+")\\s+-\\s+("+o[C]+")\\s*$";var V=s++;o[V]="^\\s*("+o[T]+")\\s+-\\s+("+o[T]+")\\s*$";var H=s++;o[H]="(<|>)?=?\\s*\\*";for(var q=0;q<35;q++)n(q,o[q]),i[q]||(i[q]=new RegExp(o[q]));function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[E]:i[y]).test(e))return null;try{return new $(e,t)}catch(e){return null}}function $(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof $))return new $(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[E]:i[y]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=G,t.valid=function(e,t){var n=G(e,t);return n?n.version:null},t.clean=function(e,t){var n=G(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){return e instanceof $||(e=new $(e,this.options)),z(this.major,e.major)||z(this.minor,e.minor)||z(this.patch,e.patch)},$.prototype.comparePre=function(e){if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return z(r,i)}while(++t)},$.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new $(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var n=G(e),r=G(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=z;var K=/^[0-9]+$/;function z(e,t){var n=K.test(e),r=K.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Y(e,t,n){return new $(e,n).compare(new $(t,n))}function J(e,t,n){return Y(e,t,n)>0}function X(e,t,n){return Y(e,t,n)<0}function Q(e,t,n){return 0===Y(e,t,n)}function Z(e,t,n){return 0!==Y(e,t,n)}function ee(e,t,n){return Y(e,t,n)>=0}function te(e,t,n){return Y(e,t,n)<=0}function ne(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return Q(e,n,r);case"!=":return Z(e,n,r);case">":return J(e,n,r);case">=":return ee(e,n,r);case"<":return X(e,n,r);case"<=":return te(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function re(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof re){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return z(t,e)},t.major=function(e,t){return new $(e,t).major},t.minor=function(e,t){return new $(e,t).minor},t.patch=function(e,t){return new $(e,t).patch},t.compare=Y,t.compareLoose=function(e,t){return Y(e,t,!0)},t.rcompare=function(e,t,n){return Y(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=J,t.lt=X,t.eq=Q,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=ne,t.Comparator=re;var ie={};function oe(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new oe(e.raw,t);if(e instanceof re)return new oe(e.value,t);if(!(this instanceof oe))return new oe(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,o,s,a,c,l,u,d,h){return((t=se(n)?"":se(r)?">="+n+".0.0":se(i)?">="+n+"."+r+".0":">="+t)+" "+(a=se(c)?"":se(l)?"<"+(+c+1)+".0.0":se(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function ce(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ie&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new oe(t,n)}catch(e){return!1}return t.test(e)}function ue(e,t,n,r){var i,o,s,a,c;switch(e=new $(e,r),t=new oe(t,r),n){case">":i=J,o=te,s=X,a=">",c=">=";break;case"<":i=X,o=ee,s=J,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,h=null;if(u.forEach((function(e){e.semver===ie&&(e=new re(">=0.0.0")),d=d||e,h=h||e,i(e.semver,d.semver,r)?d=e:s(e.semver,h.semver,r)&&(h=e)})),d.operator===a||d.operator===c)return!1;if((!h.operator||h.operator===a)&&o(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.options.loose?i[L]:i[U],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new $(n[2],this.options.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ie||("string"==typeof e&&(e=new $(e,this.options)),ne(e,this.operator,this.semver,this.options))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new oe(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new oe(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=oe,oe.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},oe.prototype.toString=function(){return this.range},oe.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[V]:i[B];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(i[W],"$1$2$3"),n("comparator trim",e,i[W]),e=(e=(e=e.replace(i[x],"$1~")).replace(i[j],"$1^")).split(/\s+/).join(" ");var o=t?i[L]:i[U],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[M]:i[F];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[A]:i[k];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),se(r)?a="":se(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":se(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[O]:i[I];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=se(i),l=c||se(o),u=l||se(s);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(o=0),s=0,">"===r?(r=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[H],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(o)}))),s=s.map((function(e){return new re(e,this.options)}),this)},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new oe(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},oe.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new $(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new oe(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new $(r=e,n)))})),r},t.minVersion=function(e,t){e=new oe(e,t);var n=new $("0.0.0");if(e.test(n))return n;if(n=new $("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!J(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new oe(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ue(e,t,"<",n)},t.gtr=function(e,t,n){return ue(e,t,">",n)},t.outside=ue,t.prerelease=function(e,t){var n=G(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new oe(e,n),t=new oe(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(i[R]);if(null==t)return null;return G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";class r extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${e.toString().split("\n")[0]}\n`),Error.captureStackTrace(this,r)}}e.exports=e=>{if(e.length>2)throw new r(e);function t(e={}){this.options=e}function n(e){return new t(e)}return t.prototype.transform=e,n.Format=t,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterEvaluation=t.IInterpreterSecurityStorage=t.IInterpreterSecurityService=t.IInterpreterAutoSelectionRule=t.AutoSelectionRule=t.IInterpreterAutoSelectionService=t.IInterpreterAutoSeletionProxyService=void 0,t.IInterpreterAutoSeletionProxyService=Symbol("IInterpreterAutoSeletionProxyService"),t.IInterpreterAutoSelectionService=Symbol("IInterpreterAutoSelectionService"),function(e){e.all="all",e.currentPath="currentPath",e.workspaceVirtualEnvs="workspaceEnvs",e.settings="settings",e.cachedInterpreters="cachedInterpreters",e.systemWide="system",e.windowsRegistry="windowsRegistry"}(t.AutoSelectionRule||(t.AutoSelectionRule={})),t.IInterpreterAutoSelectionRule=Symbol("IInterpreterAutoSelectionRule"),t.IInterpreterSecurityService=Symbol("IInterpreterSecurityService"),t.IInterpreterSecurityStorage=Symbol("IInterpreterSecurityStorage"),t.IInterpreterEvaluation=Symbol("IInterpreterEvaluation")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visualstudio_py_testlauncher=t.testlauncher=t.shell_exec=t.printEnvVariablesToFile=t.printEnvVariables=t.symbolProvider=t.normalizeSelection=t.normalizeForInterpreter=t.refactor=t.sortImports=t.completion=t.interpreterInfo=t.testing_tools=t._ISOLATED=t._SCRIPTS_DIR=void 0;const r=n(4),i=n(10);t._SCRIPTS_DIR=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles");const o=t._SCRIPTS_DIR;t._ISOLATED=r.join(t._SCRIPTS_DIR,"pyvsc-run-isolated.py");const s=t._ISOLATED;t.testing_tools=n(697),t.interpreterInfo=function(){const e=r.join(o,"interpreterInfo.py"),t=[s,e];return[t,function(e){let n;try{n=JSON.parse(e)}catch(n){throw Error(`python ${t} returned bad JSON (${e}) (${n})`)}return n}]},t.completion=function(e){const t=r.join(o,"completion.py"),n=[s,t];return e&&(n.push("custom"),n.push(e)),[n,function(e){return e.splitLines().map(e=>JSON.parse(e))}]},t.sortImports=function(e,t){const n=r.join(o,"sortImports.py"),i=[s,n,e,"--diff"];return t&&i.push(...t),[i,function(e){return e}]},t.refactor=function(e){const t=r.join(o,"refactor.py");return[[s,t,e],function(e){return e.split(/\r?\n/g).filter(e=>e.length>0).map(e=>JSON.parse(e))}]},t.normalizeForInterpreter=function(){const e=r.join(o,"normalizeForInterpreter.py");return[[s,e],function(e){return e}]},t.normalizeSelection=function(){const e=r.join(o,"normalizeSelection.py");return[[s,e],function(e){return e}]},t.symbolProvider=function(e,t){const n=r.join(o,"symbolProvider.py"),i=[s,n,e];return t&&i.push(t),[i,function(e){return JSON.parse(e)}]},t.printEnvVariables=function(){const e=r.join(o,"printEnvVariables.py").fileToCommandArgument();return[[s,e],function(e){return JSON.parse(e)}]},t.printEnvVariablesToFile=function(e){const t=r.join(o,"printEnvVariablesToFile.py");return[[s,t,e.fileToCommandArgument()],function(e){return JSON.parse(e)}]},t.shell_exec=function(e,t,n){const i=r.join(o,"shell_exec.py");return[s,i,e.fileToCommandArgument(),...n,t.fileToCommandArgument()]},t.testlauncher=function(e){const t=r.join(o,"testlauncher.py");return[s,t,...e]},t.visualstudio_py_testlauncher=function(e){return[r.join(o,"visualstudio_py_testlauncher.py"),...e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IProtocolParser=t.IOutdatedDebuggerPromptFactory=t.IDebugSessionLoggingFactory=t.IDebugAdapterDescriptorFactory=t.PythonPathSource=t.DebugConfigurationType=t.IDebugConfigurationProvider=t.IDebuggerBanner=t.IDebugConfigurationService=void 0,t.IDebugConfigurationService=Symbol("IDebugConfigurationService"),t.IDebuggerBanner=Symbol("IDebuggerBanner"),t.IDebugConfigurationProvider=Symbol("IDebugConfigurationProvider"),function(e){e.launchFile="launchFile",e.remoteAttach="remoteAttach",e.launchDjango="launchDjango",e.launchFlask="launchFlask",e.launchModule="launchModule",e.launchPyramid="launchPyramid",e.pidAttach="pidAttach"}(t.DebugConfigurationType||(t.DebugConfigurationType={})),function(e){e.launchJson="launch.json",e.settingsJson="settings.json"}(t.PythonPathSource||(t.PythonPathSource={})),t.IDebugAdapterDescriptorFactory=Symbol("IDebugAdapterDescriptorFactory"),t.IDebugSessionLoggingFactory=Symbol("IDebugSessionLoggingFactory"),t.IOutdatedDebuggerPromptFactory=Symbol("IOutdatedDebuggerPromptFactory"),t.IProtocolParser=Symbol("IProtocolParser")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILintingEngine=t.LintMessageSeverity=t.ILinterManager=t.IAvailableLinterActivator=t.LinterId=void 0,function(e){e.Flake8="flake8",e.MyPy="mypy",e.PyCodeStyle="pycodestyle",e.Prospector="prospector",e.PyDocStyle="pydocstyle",e.PyLama="pylama",e.PyLint="pylint",e.Bandit="bandit"}(t.LinterId||(t.LinterId={})),t.IAvailableLinterActivator=Symbol("IAvailableLinterActivator"),t.ILinterManager=Symbol("ILinterManager"),function(e){e[e.Hint=0]="Hint",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information"}(t.LintMessageSeverity||(t.LintMessageSeverity={})),t.ILintingEngine=Symbol("ILintingEngine")},function(e,t,n){"use strict";var r=n(379),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:s,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";t.fromCallback=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((t,n)=>{arguments[arguments.length]=(e,r)=>{if(e)return n(e);t(r)},arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)}),"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then(e=>t(null,e),t)}),"name",{value:e.name})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},function(e,t,n){"use strict";e.exports=n(653)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51);class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=s;class a extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(528)),r(n(297)),r(n(543))},function(e,t,n){"use strict";const r=(0,n(45).fromCallback)(n(576)),i=n(577);e.exports={mkdirs:r,mkdirsSync:i,mkdirp:r,mkdirpSync:i,ensureDir:r,ensureDirSync:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(655);r.default.install();const i=n(329),o=n(4),s=n(20),a=n(73),c=n(187);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(329));class l extends i.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),i.Disposable.create(()=>this.process.off("message",e))}}t.IPCMessageReader=l;class u extends i.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",e=>this.fireError(e)),t.on("close",()=>this.fireClose)}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}t.IPCMessageWriter=u;class d extends i.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(r.default().stream.asReadableStream(e),t)}}t.SocketMessageReader=d;class h extends i.WriteableStreamMessageWriter{constructor(e,t){super(r.default().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=h;class p extends i.ReadableStreamMessageReader{constructor(e,t){super(r.default().stream.asReadableStream(e),t)}}t.StreamMessageReader=p;class f extends i.WriteableStreamMessageWriter{constructor(e,t){super(r.default().stream.asWritableStream(e),t)}}t.StreamMessageWriter=f,t.generateRandomPipeName=function(){const e=a.randomBytes(21).toString("hex");return"win32"===process.platform?`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`:o.join(s.tmpdir(),`vscode-${e}.sock`)},t.createClientPipeTransport=function(e,t="utf-8"){let n;const r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{let s=c.createServer(e=>{s.close(),n([new d(e,t),new h(e,t)])});s.on("error",o),s.listen(e,()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerPipeTransport=function(e,t="utf-8"){const n=c.createConnection(e);return[new d(n,t),new h(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const r=new Promise((e,t)=>{n=e});return new Promise((i,o)=>{const s=c.createServer(e=>{s.close(),n([new d(e,t),new h(e,t)])});s.on("error",o),s.listen(e,"127.0.0.1",()=>{s.removeListener("error",o),i({onConnected:()=>r})})})},t.createServerSocketTransport=function(e,t="utf-8"){const n=c.createConnection(e,"127.0.0.1");return[new d(n,t),new h(n,t)]},t.createMessageConnection=function(e,t,n,r){n||(n=i.NullLogger);const o=void 0!==(s=e).listen&&void 0===s.read?e:new p(e);var s;const a=function(e){return void 0!==e.write&&void 0===e.end}(t)?t:new f(t);return i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),i.createMessageConnection(o,a,n,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerTypeName=t.DEBUGGER_PATH=void 0;const r=n(4),i=n(10);t.DEBUGGER_PATH=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles","lib","python","debugpy"),t.DebuggerTypeName="python"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.copyDesiredTestResults=t.isSubtestsParent=t.getChildren=t.findFlattendTestSuite=t.findFlattendTestFunction=t.getParentSuite=t.getParentFile=t.getParent=t.getTestFunction=t.getTestFolder=t.getTestSuite=t.getTestFile=t.getTestDataItemType=t.TestsHelper=t.convertFileToPackage=t.extractBetweenDelimiters=t.selectTestWorkspace=void 0;const o=n(0),s=n(4),a=n(2),c=n(3),l=n(10),u=n(1),d=n(8),h=n(19),p=n(26),f=n(17);t.selectTestWorkspace=async function(e){if(Array.isArray(a.workspace.workspaceFolders)&&0!==a.workspace.workspaceFolders.length){if(1===a.workspace.workspaceFolders.length)return a.workspace.workspaceFolders[0].uri;{const t=await e.showWorkspaceFolderPick({placeHolder:"Select a workspace"});return t?t.uri:void 0}}},t.extractBetweenDelimiters=function(e,t,n){return(e=e.substring(e.indexOf(t)+t.length)).substring(0,e.lastIndexOf(n))},t.convertFileToPackage=function(e){const t=e.lastIndexOf(".");return e.substring(0,t).replace(/\//g,".").replace(/\\/g,".")};let g=class{constructor(e,t){this.flatteningVisitor=e,this.appShell=t.get(c.IApplicationShell),this.commandManager=t.get(c.ICommandManager)}parseProviderName(e){switch(e){case u.Product.nosetest:return"nosetest";case u.Product.pytest:return"pytest";case u.Product.unittest:return"unittest";default:throw new Error("Unknown Test Product "+e)}}parseProduct(e){switch(e){case"nosetest":return u.Product.nosetest;case"pytest":return u.Product.pytest;case"unittest":return u.Product.unittest;default:throw new Error("Unknown Test Provider "+e)}}getSettingsPropertyNames(e){switch(this.parseProviderName(e)){case"pytest":return{argsName:"pytestArgs",pathName:"pytestPath",enabledName:"pytestEnabled"};case"nosetest":return{argsName:"nosetestArgs",pathName:"nosetestPath",enabledName:"nosetestsEnabled"};case"unittest":return{argsName:"unittestArgs",enabledName:"unittestEnabled"};default:throw new Error(`Unknown Test Provider '${e}'`)}}flattenTestFiles(e,t){e.forEach(e=>this.flatteningVisitor.visitTestFile(e));const n={testFiles:e,testFunctions:this.flatteningVisitor.flattenedTestFunctions,testSuites:this.flatteningVisitor.flattenedTestSuites,testFolders:[],rootTestFolders:[],summary:{passed:0,failures:0,errors:0,skipped:0}};return this.placeTestFilesIntoFolders(n,t),n}placeTestFilesIntoFolders(e,t){const n=[];e.testFiles.forEach(e=>{const r=s.relative(t,e.fullPath),i=s.dirname(r);-1===n.indexOf(i)&&n.push(i)}),e.testFolders=[];const r=new Map;n.sort();const i=a.Uri.file(t);n.forEach(n=>{n.split(s.sep).reduce((n,o,a,c)=>{let l,u=o;if(n.length>0&&(l=r.get(n),u=s.join(n,o)),!r.has(u)){const n={resource:i,name:u,testFiles:[],folders:[],nameToRun:u,time:0,functionsPassed:0,functionsFailed:0,functionsDidNotRun:0};r.set(u,n),l?l.folders.push(n):e.rootTestFolders.push(n),e.testFiles.filter(e=>s.dirname(s.relative(t,e.fullPath))===u).forEach(e=>{n.testFiles.push(e)}),e.testFolders.push(n)}return u},"")})}parseTestName(e,t,n){if(!n)return;const r=s.isAbsolute(e)?e:s.resolve(t,e),i=n.testFolders.filter(t=>t.nameToRun===e||t.name===e||t.name===r);if(i.length>0)return{testFolder:i};const o=n.testFiles.filter(t=>t.nameToRun===e||t.name===e||t.fullPath===r);if(o.length>0)return{testFile:o};const c=n.testFunctions.filter(t=>t.testFunction.nameToRun===e||t.testFunction.name===e).map(e=>e.testFunction);return c.length>0?{testFunction:c}:{testFile:[{resource:a.Uri.file(t),name:e,nameToRun:e,functions:[],suites:[],xmlName:e,fullPath:"",time:0,functionsPassed:0,functionsFailed:0,functionsDidNotRun:0}]}}displayTestErrorMessage(e){this.appShell.showErrorMessage(e,l.Button_Text_Tests_View_Output).then(e=>{e===l.Button_Text_Tests_View_Output&&this.commandManager.executeCommand(l.Commands.Tests_ViewOutput,void 0,p.CommandSource.ui)})}mergeTests(e){return e.reduce((e,t,n)=>(0===n||(e.summary.errors+=t.summary.errors,e.summary.failures+=t.summary.failures,e.summary.passed+=t.summary.passed,e.summary.skipped+=t.summary.skipped,e.rootTestFolders.push(...t.rootTestFolders),e.testFiles.push(...t.testFiles),e.testFolders.push(...t.testFolders),e.testFunctions.push(...t.testFunctions),e.testSuites.push(...t.testSuites)),e),e[0])}shouldRunAllTests(e){return!e||!(Array.isArray(e.testFile)&&e.testFile.length>0||Array.isArray(e.testFolder)&&e.testFolder.length>0||Array.isArray(e.testFunction)&&e.testFunction.length>0||Array.isArray(e.testSuite)&&e.testSuite.length>0)}};function m(e){if(e instanceof h.TestWorkspaceFolder)return h.TestDataItemType.workspaceFolder;if(v(e))return h.TestDataItemType.file;if(b(e))return h.TestDataItemType.folder;if(y(e))return h.TestDataItemType.suite;if(S(e))return h.TestDataItemType.function;throw new Error("Unknown test type")}function v(e){if(e)return"string"==typeof e.fullPath?e:void 0}function y(e){if(e)return Array.isArray(e.suites)&&!v(e)?e:void 0}function b(e){if(e)return Array.isArray(e.folders)?e:void 0}function S(e){if(e&&!(e instanceof h.TestWorkspaceFolder||v(e)||b(e)||y(e)))return e}function E(e,t){switch(m(t)){case h.TestDataItemType.file:return w(e,t);case h.TestDataItemType.folder:return function(e,t){if(m(t)===h.TestDataItemType.folder)return function(e,t){if(e.rootTestFolders.indexOf(t)>=0)return;return e.testFolders.find(e=>e.folders.some(e=>e===t))}(e,t);return w(e,t)}(e,t);case h.TestDataItemType.suite:{const n=t;if(P(n)){const t=n.functions[0],r=e.testSuites.find(e=>e.testSuite.functions.indexOf(t)>=0);return r?r.testSuite:e.testFiles.find(e=>e.functions.indexOf(t)>=0)}const r=e.testSuites.find(e=>e.testSuite.suites.indexOf(n)>=0);return r?r.testSuite:e.testFiles.find(e=>e.suites.indexOf(n)>=0)}case h.TestDataItemType.function:{const n=t;if(n.subtestParent)return n.subtestParent.asSuite;const r=e.testSuites.find(e=>e.testSuite.functions.indexOf(n)>=0);return r?r.testSuite:e.testFiles.find(e=>e.functions.indexOf(n)>=0)}default:throw new Error("Unknown test type")}}function w(e,t){return e.testFolders.find(e=>e.testFiles.some(e=>e===t))}function _(e){const t=[],n=[];return e.forEach(e=>{if(!e.subtestParent)return void n.push(e);const r=e.subtestParent.asSuite;t.indexOf(r)<0&&t.push(r)}),[t,n]}function P(e){const t=e.functions;if(0===t.length)return!1;const n=t[0].subtestParent;return void 0!==n&&n.asSuite===e}function C(e,t){e.forEach(e=>{const n=t.find(t=>t.name===e.name&&t.nameToRun===e.nameToRun);n&&T(e,n)})}function T(e,t){Object.keys(e).forEach(n=>{const r=e[n];["boolean","number","string","undefined"].indexOf(typeof r)>=0&&(t[n]=r)})}g=r([o.injectable(),i(0,o.inject(f.ITestVisitor)),i(0,o.named("TestFlatteningVisitor")),i(1,o.inject(d.IServiceContainer))],g),t.TestsHelper=g,t.getTestDataItemType=m,t.getTestFile=v,t.getTestSuite=y,t.getTestFolder=b,t.getTestFunction=S,t.getParent=E,t.getParentFile=function(e,t){let n=E(e,t);for(;n;){if(m(n)===h.TestDataItemType.file)return n;n=E(e,n)}throw new Error("No parent file for provided test item")},t.getParentSuite=function(e,t){let n=E(e,t);for(;n;){if(m(n)===h.TestDataItemType.suite)return n;n=E(e,n)}},t.findFlattendTestFunction=function(e,t){return e.testFunctions.find(e=>e.testFunction===t)},t.findFlattendTestSuite=function(e,t){return e.testSuites.find(e=>e.testSuite===t)},t.getChildren=function(e){switch(m(e)){case h.TestDataItemType.folder:return[...e.folders,...e.testFiles];case h.TestDataItemType.file:{const[t,n]=_(e.functions);return[...n,...e.suites,...t]}case h.TestDataItemType.suite:{let t=[],n=e.functions;return P(e)||([t,n]=_(e.functions)),[...n,...e.suites,...t]}case h.TestDataItemType.function:return[];default:throw new Error("Unknown Test Type")}},t.isSubtestsParent=P,t.copyDesiredTestResults=function(e,t){!function(e,t){e.forEach(e=>{const n=t.find(t=>t.name===e.name&&t.nameToRun===e.nameToRun);n&&(T(e,n),function(e,t){e.forEach(e=>{const n=t.find(t=>t.name===e.name);n&&(T(e,n),C(e.functions,n.functions),function e(t,n){t.forEach(t=>{const r=n.find(e=>e.name===t.name&&e.nameToRun===t.nameToRun&&e.xmlName===t.xmlName);r&&(T(t,r),C(t.functions,r.functions),e(t.suites,r.suites),r.functionsPassed=r.functionsDidNotRun=r.functionsFailed=0)})}(e.suites,n.suites),n.functionsPassed=n.functionsDidNotRun=n.functionsFailed=0)})}(e.testFiles,n.testFiles),n.functionsPassed=n.functionsDidNotRun=n.functionsFailed=0)})}(e.testFolders,t.testFolders)}},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentVariablesProvider=t.IEnvironmentVariablesService=void 0,t.IEnvironmentVariablesService=Symbol("IEnvironmentVariablesService"),t.IEnvironmentVariablesProvider=Symbol("IEnvironmentVariablesProvider")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(332),s=n(677),a=n(678),c=n(113),l=n(679),u=n(335),d=n(336);class h{error(e){i.RAL().console.error(e)}warn(e){i.RAL().console.warn(e)}info(e){i.RAL().console.info(e)}log(e){i.RAL().console.log(e)}}var p,f,g,m,v;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(p=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(f=t.CloseAction||(t.CloseAction={}));class y{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?p.Continue:p.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return f.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(r.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),f.DoNotRestart):(this.restarts.shift(),f.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(g=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"}(m=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(v||(v={}));const b=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],S=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter],E=[i.SymbolTag.Deprecated];function w(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var _;!function(e){e.is=function(e){let t=e;return t&&c.func(t.register)&&c.func(t.unregister)&&c.func(t.dispose)&&void 0!==t.messages}}(_||(_={}));class P{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(r.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(const t of this._selectors.values())if(r.languages.match(t,e))return{send:e=>{this.callback(e)}}}}class C extends P{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),P.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;r.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&r.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class T extends P{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),P.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(e=>{if(r.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}})}}class I{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==i.TextDocumentSyncKind.None&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===i.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)):this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===i.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new l.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e))return{send:e=>{this.callback(e)}}}}class O extends P{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>P.textDocumentFilter(e,t.document))}get messages(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}}class R{constructor(e){this._client=e,this._selectors=new Map}get messages(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(P.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class D extends P{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),P.textDocumentFilter),this._includeText=!1}get messages(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){w(w(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const e="boolean"==typeof n.save?{includeText:!1}:{includeText:!!n.save.includeText};this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class x{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){w(w(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!c.string(e.globPattern))continue;let t=!0,o=!0,s=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&i.WatchKind.Create),o=0!=(e.kind&i.WatchKind.Change),s=0!=(e.kind&i.WatchKind.Delete));let a=r.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(a,t,o,s),n.push(a)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,o){t&&e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created}),null,o),n&&e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed}),null,o),r&&e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}class k{constructor(e,t){this._client=e,this._message=t,this._registrations=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:n[0],data:t,provider:n[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(!t)return[void 0,void 0];if(i.TextDocumentRegistrationOptions.is(t)){const n=i.StaticRegistrationOptions.hasId(t)?t.id:u.generateUuid(),r=t.documentSelector||e;if(r)return[n,Object.assign({},t,{documentSelector:r})]}else if(c.boolean(t)&&!0===t||i.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=c.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[u.generateUuid(),n]}return[void 0,void 0]}getRegistrationOptions(e,t){if(e&&t)return c.boolean(t)&&!0===t?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(null!==n&&r.languages.match(n,e))return t.provider}}getAllProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}t.TextDocumentFeature=k;class A extends k{constructor(e){super(e,i.CompletionRequest.type)}fillClientCapabilities(e){let t=w(w(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[i.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveAdditionalTextEditsSupport:!0},t.completionItemKind={valueSet:S}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.triggerCharacters||[],n={provideCompletionItems:(e,t,n,r)=>{const o=this._client,s=this._client.clientOptions.middleware,a=(e,t,n,r)=>o.sendRequest(i.CompletionRequest.type,o.code2ProtocolConverter.asCompletionParams(e,t,n),r).then(o.protocol2CodeConverter.asCompletionResult,e=>o.handleFailedRequest(i.CompletionRequest.type,e,null));return s.provideCompletionItem?s.provideCompletionItem(e,t,r,n,a):a(e,t,r,n)},resolveCompletionItem:e.resolveProvider?(e,t)=>{const n=this._client,r=this._client.clientOptions.middleware,o=(e,t)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,t=>n.handleFailedRequest(i.CompletionResolveRequest.type,t,e));return r.resolveCompletionItem?r.resolveCompletionItem(e,t,o):o(e,t)}:void 0};return[r.languages.registerCompletionItemProvider(e.documentSelector,n,...t),n]}}class N extends k{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=w(w(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideHover:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.HoverRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asHover,e=>r.handleFailedRequest(i.HoverRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideHover?s.provideHover(e,t,n,o):o(e,t,n)}};return[r.languages.registerHoverProvider(e.documentSelector,t),t]}}class j extends k{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=w(w(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,n,r)=>{const o=this._client,s=(e,t,n,r)=>o.sendRequest(i.SignatureHelpRequest.type,o.code2ProtocolConverter.asSignatureHelpParams(e,t,n),r).then(o.protocol2CodeConverter.asSignatureHelp,e=>o.handleFailedRequest(i.SignatureHelpRequest.type,e,null)),a=o.clientOptions.middleware;return a.provideSignatureHelp?a.provideSignatureHelp(e,t,r,n,s):s(e,t,r,n)}};let n;if(void 0===e.retriggerCharacters){const i=e.triggerCharacters||[];n=r.languages.registerSignatureHelpProvider(e.documentSelector,t,...i)}else{const i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=r.languages.registerSignatureHelpProvider(e.documentSelector,t,i)}return[n,t]}}class F extends k{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=w(w(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDefinition:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.DefinitionRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDefinitionResult,e=>r.handleFailedRequest(i.DefinitionRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideDefinition?s.provideDefinition(e,t,n,o):o(e,t,n)}};return[r.languages.registerDefinitionProvider(e.documentSelector,t),t]}}class M extends k{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideReferences:(e,t,n,r)=>{const o=this._client,s=(e,t,n,r)=>o.sendRequest(i.ReferencesRequest.type,o.code2ProtocolConverter.asReferenceParams(e,t,n),r).then(o.protocol2CodeConverter.asReferences,e=>o.handleFailedRequest(i.ReferencesRequest.type,e,null)),a=o.clientOptions.middleware;return a.provideReferences?a.provideReferences(e,t,n,r,s):s(e,t,n,r)}};return[r.languages.registerReferenceProvider(e.documentSelector,t),t]}}class L extends k{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDocumentHighlights:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.DocumentHighlightRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDocumentHighlights,e=>r.handleFailedRequest(i.DocumentHighlightRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,n,o):o(e,t,n)}};return[r.languages.registerDocumentHighlightProvider(e.documentSelector,t),t]}}class U extends k{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=w(w(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:b},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:E}}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentSymbolProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDocumentSymbols:(e,t)=>{const n=this._client,r=(e,t)=>n.sendRequest(i.DocumentSymbolRequest.type,n.code2ProtocolConverter.asDocumentSymbolParams(e),t).then(e=>{if(null!==e){if(0===e.length)return[];{let t=e[0];return i.DocumentSymbol.is(t)?n.protocol2CodeConverter.asDocumentSymbols(e):n.protocol2CodeConverter.asSymbolInformations(e)}}},e=>n.handleFailedRequest(i.DocumentSymbolRequest.type,e,null)),o=n.clientOptions.middleware;return o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,r):r(e,t)}};return[r.languages.registerDocumentSymbolProvider(e.documentSelector,t),t]}}class W extends class{constructor(e,t){this._client=e,this._message=t,this._registrations=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);const n=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:n[0],provider:n[1]})}unregister(e){let t=this._registrations.get(e);void 0!==t&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values())e.push(t.provider);return e}}{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=w(w(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:b},t.tagSupport={valueSet:E}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:!0===e.workspaceSymbolProvider?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const n=this._client,r=(e,t)=>n.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},t).then(n.protocol2CodeConverter.asSymbolInformations,e=>n.handleFailedRequest(i.WorkspaceSymbolRequest.type,e,null)),o=n.clientOptions.middleware;return o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,r):r(e,t)}};return[r.languages.registerWorkspaceSymbolProvider(t),t]}}class B extends k{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=w(w(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:[i.CodeActionKind.Empty,i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideCodeActions:(e,t,n,r)=>{const o=this._client,s=(e,t,n,r)=>{const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),context:o.code2ProtocolConverter.asCodeActionContext(n)};return o.sendRequest(i.CodeActionRequest.type,s,r).then(e=>{if(null===e)return;const t=[];for(let n of e)i.Command.is(n)?t.push(o.protocol2CodeConverter.asCommand(n)):t.push(o.protocol2CodeConverter.asCodeAction(n));return t},e=>o.handleFailedRequest(i.CodeActionRequest.type,e,null))},a=o.clientOptions.middleware;return a.provideCodeActions?a.provideCodeActions(e,t,n,r,s):s(e,t,n,r)}};return[r.languages.registerCodeActionsProvider(e.documentSelector,t,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),t]}}class V extends k{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeLensProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideCodeLenses:(e,t)=>{const n=this._client,r=(e,t)=>n.sendRequest(i.CodeLensRequest.type,n.code2ProtocolConverter.asCodeLensParams(e),t).then(n.protocol2CodeConverter.asCodeLenses,e=>n.handleFailedRequest(i.CodeLensRequest.type,e,null)),o=n.clientOptions.middleware;return o.provideCodeLenses?o.provideCodeLenses(e,t,r):r(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const n=this._client,r=(e,t)=>n.sendRequest(i.CodeLensResolveRequest.type,n.code2ProtocolConverter.asCodeLens(e),t).then(n.protocol2CodeConverter.asCodeLens,t=>n.handleFailedRequest(i.CodeLensResolveRequest.type,t,e)),o=n.clientOptions.middleware;return o.resolveCodeLens?o.resolveCodeLens(e,t,r):r(e,t)}:void 0};return[r.languages.registerCodeLensProvider(e.documentSelector,t),t]}}class H extends k{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDocumentFormattingEdits:(e,t,n)=>{const r=this._client,o=(e,t,n)=>{const o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),options:r.code2ProtocolConverter.asFormattingOptions(t)};return r.sendRequest(i.DocumentFormattingRequest.type,o,n).then(r.protocol2CodeConverter.asTextEdits,e=>r.handleFailedRequest(i.DocumentFormattingRequest.type,e,null))},s=r.clientOptions.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,n,o):o(e,t,n)}};return[r.languages.registerDocumentFormattingEditProvider(e.documentSelector,t),t]}}class q extends k{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDocumentRangeFormattingEdits:(e,t,n,r)=>{const o=this._client,s=(e,t,n,r)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),range:o.code2ProtocolConverter.asRange(t),options:o.code2ProtocolConverter.asFormattingOptions(n)};return o.sendRequest(i.DocumentRangeFormattingRequest.type,s,r).then(o.protocol2CodeConverter.asTextEdits,e=>o.handleFailedRequest(i.DocumentRangeFormattingRequest.type,e,null))};let a=o.clientOptions.middleware;return a.provideDocumentRangeFormattingEdits?a.provideDocumentRangeFormattingEdits(e,t,n,r,s):s(e,t,n,r)}};return[r.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,t),t]}}class G extends k{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){w(w(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideOnTypeFormattingEdits:(e,t,n,r,o)=>{const s=this._client,a=(e,t,n,r,o)=>{let a={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),ch:n,options:s.code2ProtocolConverter.asFormattingOptions(r)};return s.sendRequest(i.DocumentOnTypeFormattingRequest.type,a,o).then(s.protocol2CodeConverter.asTextEdits,e=>s.handleFailedRequest(i.DocumentOnTypeFormattingRequest.type,e,null))},c=s.clientOptions.middleware;return c.provideOnTypeFormattingEdits?c.provideOnTypeFormattingEdits(e,t,n,r,o,a):a(e,t,n,r,o)}},n=e.moreTriggerCharacter||[];return[r.languages.registerOnTypeFormattingEditProvider(e.documentSelector,t,e.firstTriggerCharacter,...n),t]}}class $ extends k{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=w(w(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);n&&(c.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register(this.messages,{id:u.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){const t={provideRenameEdits:(e,t,n,r)=>{const o=this._client,s=(e,t,n,r)=>{let s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:n};return o.sendRequest(i.RenameRequest.type,s,r).then(o.protocol2CodeConverter.asWorkspaceEdit,e=>o.handleFailedRequest(i.RenameRequest.type,e,null))},a=o.clientOptions.middleware;return a.provideRenameEdits?a.provideRenameEdits(e,t,n,r,s):s(e,t,n,r)},prepareRename:e.prepareProvider?(e,t,n)=>{const r=this._client,o=(e,t,n)=>{let o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),position:r.code2ProtocolConverter.asPosition(t)};return r.sendRequest(i.PrepareRenameRequest.type,o,n).then(e=>i.Range.is(e)?r.protocol2CodeConverter.asRange(e):e&&i.Range.is(e.range)?{range:r.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}:Promise.reject(new Error("The element can't be renamed.")),e=>r.handleFailedRequest(i.PrepareRenameRequest.type,e,void 0))},s=r.clientOptions.middleware;return s.prepareRename?s.prepareRename(e,t,n,o):o(e,t,n)}:void 0};return[r.languages.registerRenameProvider(e.documentSelector,t),t]}}class K extends k{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=w(w(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);n&&this.register(this.messages,{id:u.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideDocumentLinks:(e,t)=>{const n=this._client,r=(e,t)=>n.sendRequest(i.DocumentLinkRequest.type,n.code2ProtocolConverter.asDocumentLinkParams(e),t).then(n.protocol2CodeConverter.asDocumentLinks,e=>n.handleFailedRequest(i.DocumentLinkRequest.type,e,null)),o=n.clientOptions.middleware;return o.provideDocumentLinks?o.provideDocumentLinks(e,t,r):r(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const n=this._client;let r=(e,t)=>n.sendRequest(i.DocumentLinkResolveRequest.type,n.code2ProtocolConverter.asDocumentLink(e),t).then(n.protocol2CodeConverter.asDocumentLink,t=>n.handleFailedRequest(i.DocumentLinkResolveRequest.type,t,e));const o=n.clientOptions.middleware;return o.resolveDocumentLink?o.resolveDocumentLink(e,t,r):r(e,t)}:void 0};return[r.languages.registerDocumentLinkProvider(e.documentSelector,t),t]}}class z{constructor(e){this._client=e,this._listeners=new Map}get messages(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){w(w(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=r.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(n=c.string(e)?[e]:e,void 0!==n&&void 0!==t){if(!n.some(e=>t.affectsConfiguration(e)))return}let r=e=>{void 0!==e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let a=e[s],c=a.indexOf("."),l=null;if(l=c>=0?r.workspace.getConfiguration(a.substr(0,c),n).get(a.substr(c+1)):r.workspace.getConfiguration(void 0,n).get(a),l){let n=e[s].split(".");t(i,n)[n[n.length-1]]=o.toJSONObject(l)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class Y{constructor(e){this._client=e,this._commands=new Map}get messages(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){w(w(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){const n=this._client,o=n.clientOptions.middleware,s=(e,t)=>{let r={command:e,arguments:t};return n.sendRequest(i.ExecuteCommandRequest.type,r).then(void 0,e=>n.handleFailedRequest(i.ExecuteCommandRequest.type,e,void 0))};if(t.registerOptions.commands){const e=[];for(const n of t.registerOptions.commands)e.push(r.commands.registerCommand(n,(...e)=>o.executeCommand?o.executeCommand(n,e,s):s(n,e)));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(e=>e.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())}),this._commands.clear()}}!function(e){e.is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}}(t.MessageTransports||(t.MessageTransports={}));class J{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}}class X{constructor(e,t,n){this._traceFormat=i.TraceFormat.Text,this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||g.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||new y(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=v.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new l.Delayer(250),this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)}),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._trace=i.Trace.Off,this._tracer={log:(e,t)=>{c.string(e)?this.logTrace(e,t):this.logObjectTrace(e)}},this._c2p=s.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=a.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===v.Running?m.Running:this.state===v.Starting?m.Starting:m.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${c.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${c.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${c.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${c.string(e)?e:e.method} failed.`,t),t}}onProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onProgress(e,t,n)}catch(e){throw this.error(`Registering progress handler for token ${t} failed.`,e),e}}sendProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,n)}catch(e){throw this.error(`Sending progress for token ${t} failed.`,e),e}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new y(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(e=>{e.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?c.string(e.stack)?e.stack:e.message:c.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=g.Info&&this.showNotificationMessage()}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=g.Warn&&this.showNotificationMessage()}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=g.Error&&this.showNotificationMessage()}showNotificationMessage(){r.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(""+JSON.stringify(e))}needsStart(){return this.state===v.Initial||this.state===v.Stopping||this.state===v.Stopped}needsStop(){return this.state===v.Starting||this.state===v.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===v.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new J(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()),this.state=v.Starting,this.resolveConnection().then(e=>(e.onLogMessage(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message,void 0,!1);break;case i.MessageType.Warning:this.warn(e.message,void 0,!1);break;case i.MessageType.Info:this.info(e.message,void 0,!1);break;default:this.outputChannel.appendLine(e.message)}}),e.onShowMessage(e=>{switch(e.type){case i.MessageType.Error:r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:r.window.showWarningMessage(e.message);break;case i.MessageType.Info:r.window.showInformationMessage(e.message);break;default:r.window.showInformationMessage(e.message)}}),e.onRequest(i.ShowMessageRequest.type,e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:t=r.window.showInformationMessage;break;default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}),e.onTelemetry(e=>{this._telemetryEmitter.fire(e)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=v.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),r.window.showErrorMessage("Couldn't start client "+this._name)}),new r.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:null,clientInfo:{name:"vscode",version:r.version},rootPath:n||null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:c.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){const t=u.generateUuid(),n=new d.ProgressPart(e,t);return o.workDoneToken=t,this.doInitialize(e,o).then(e=>(n.done(),e),e=>{throw n.cancel(),e})}return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(t=>{this._resolvedConnection=e,this._initializeResult=t,this.state=v.Running;let n=void 0;return c.number(t.capabilities.textDocumentSync)?n=t.capabilities.textDocumentSync===i.TextDocumentSyncKind.None?{openClose:!1,change:i.TextDocumentSyncKind.None,save:void 0}:{openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics(e=>this.handleDiagnostics(e)),e.onRequest(i.RegistrationRequest.type,e=>this.handleRegistrationRequest(e)),e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e)),e.onRequest(i.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e)),e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e)),e.onRequest(i.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e)),e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t}).then(void 0,t=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof i.ResponseError&&t.data&&t.data.retry?r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))}):(t&&t.message&&r.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t)),t})}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===v.Stopping&&this._onStop?this._onStop:(this.state=v.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=v.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=v.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(e=>e.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(e=>e.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this.cleanUpChannel(),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var t;const n=this;function r(e){n._fileEvents.push(e),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(e=>{n.isConnectionActive()&&(n.forceDocumentSync(),e.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},e=>{n.error("Notify file events failed.",e)})})}const i=null===(t=this.clientOptions.middleware)||void 0===t?void 0:t.workspace;(null==i?void 0:i.didChangeWatchedFile)?i.didChangeWatchedFile(e,r):r(e)}forceDocumentSync(){this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware;r.handleDiagnostics?r.handleDiagnostics(t,n,(e,t)=>this.setDiagnostics(e,t)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>function(e,t,n,r,o){let s=new h,a=i.createProtocolConnection(e,t,s,o);return a.onError(e=>{n(e[0],e[1],e[2])}),a.onClose(r),{listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(c.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(c.string(e)?e:e.method,t),sendNotification:(e,t)=>a.sendNotification(c.string(e)?e:e.method,t),onNotification:(e,t)=>a.onNotification(c.string(e)?e:e.method,t),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(e,t,n)=>{const r={sendNotification:!1,traceFormat:i.TraceFormat.Text};void 0===n?a.trace(e,t,r):(c.boolean(n),a.trace(e,t,n))},initialize:e=>a.sendRequest(i.InitializeRequest.type,e),shutdown:()=>a.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(i.ExitNotification.type),onLogMessage:e=>a.onNotification(i.LogMessageNotification.type,e),onShowMessage:e=>a.onNotification(i.ShowMessageNotification.type,e),onTelemetry:e=>a.onNotification(i.TelemetryEventNotification.type,e),didChangeConfiguration:e=>a.sendNotification(i.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>a.sendNotification(i.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>a.sendNotification(i.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>a.sendNotification(i.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>a.sendNotification(i.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>a.sendNotification(i.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>a.onNotification(i.PublishDiagnosticsNotification.type,e),dispose:()=>a.dispose()}}(n.reader,n.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===v.Stopping||this.state===v.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=f.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===f.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=v.Stopped,this.cleanUp(!1,!0)):e===f.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=v.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===p.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){r.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=r.workspace.getConfiguration(this._id),o=i.Trace.Off,s=i.TraceFormat.Text;if(n){const e=n.get("trace.server","off");"string"==typeof e?o=i.Trace.fromString(e):(o=i.Trace.fromString(n.get("trace.server.verbosity","off")),s=i.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=c.array(n)?n:[n],t&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(u.generateUuid(),t))}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),_.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new z(this)),this.registerFeature(new C(this,this._syncedDocuments)),this.registerFeature(new I(this)),this.registerFeature(new O(this)),this.registerFeature(new R(this)),this.registerFeature(new D(this)),this.registerFeature(new T(this,this._syncedDocuments)),this.registerFeature(new x(this,e=>this.notifyFileEvent(e))),this.registerFeature(new A(this)),this.registerFeature(new N(this)),this.registerFeature(new j(this)),this.registerFeature(new F(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new U(this)),this.registerFeature(new W(this)),this.registerFeature(new B(this)),this.registerFeature(new V(this)),this.registerFeature(new H(this)),this.registerFeature(new q(this)),this.registerFeature(new G(this)),this.registerFeature(new $(this)),this.registerFeature(new K(this)),this.registerFeature(new Y(this))}fillInitializeParams(e){for(let t of this._features)c.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};w(e,"workspace").applyEdit=!0;let t=w(w(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete],t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional;let n=w(w(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[i.DiagnosticTag.Unnecessary,i.DiagnosticTag.Deprecated]},n.complexDiagnosticCodeSupport=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;r.workspace.textDocuments.forEach(e=>n.set(e.uri.toString(),e));let o=!1;if(t.documentChanges)for(const e of t.documentChanges)if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=!0;break}}return o?Promise.resolve({applied:!1}):c.asPromise(r.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>({applied:e})))}handleFailedRequest(e,t,n){if(t instanceof i.ResponseError){if(t.code===i.ErrorCodes.RequestCancelled)throw this.makeCancelError();if(t.code===i.ErrorCodes.ContentModified)return n}throw this.error(`Request ${e.method} failed.`,t),t}makeCancelError(){const e=new Error(X.Canceled);return e.name=X.Canceled,e}}t.BaseLanguageClient=X,X.Canceled="Canceled"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModuleVersion=t.isModuleInstalled=t.isValid=t.getUserSitePackages=t.getSitePackages=t.getExecutable=t.getSysPrefix=t.getVersion=t.execModule=t.execCode=void 0;const r=n(41);t.execCode=function(e,t=!0){const n=["-c",e];return t&&n.splice(0,0,r._ISOLATED),n},t.execModule=function(e,t,n=!0){const i=["-m",e,...t];return n&&(i[0]=r._ISOLATED),i},t.getVersion=function(){return[["--version"],function(e){return e.trim()}]},t.getSysPrefix=function(){return[[r._ISOLATED,"-c","import sys;print(sys.prefix)"],function(e){return e.trim()}]},t.getExecutable=function(){return[[r._ISOLATED,"-c","import sys;print(sys.executable)"],function(e){return e.trim()}]},t.getSitePackages=function(){return[[r._ISOLATED,"-c","from distutils.sysconfig import get_python_lib; print(get_python_lib())"],function(e){return e.trim()}]},t.getUserSitePackages=function(){return[[r._ISOLATED,"site","--user-site"],function(e){return e.trim()}]},t.isValid=function(){return[["-c","print(1234)"],function(e){return e.startsWith("1234")}]},t.isModuleInstalled=function(e){return[[r._ISOLATED,"-c","import "+e],function(e){return!0}]},t.getModuleVersion=function(e){return[[r._ISOLATED,e,"--version"],function(e){return e.trim()}]}},function(e,t,n){try{var r=n(22);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(430)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MillisecondsInADay=t.HiddenFilePrefix=t.HiddenFileFormatString=t.EXTENSION_ROOT_DIR=void 0;const r=n(4),i=r.basename(__dirname);t.EXTENSION_ROOT_DIR="client"===i?r.join(__dirname,"..",".."):r.join(__dirname,"..","..","..",".."),t.HiddenFileFormatString="_HiddenFile_{0}.py",t.HiddenFilePrefix="_HiddenFile_",t.MillisecondsInADay=864e5},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=n(81),o=n(82),s=n(83),a=n(189),c=n(37),l=n(108),u=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++){n=o[s];if((n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),r=(Buffer.from?Buffer.from(n,"binary"):new Buffer(n,"binary")).toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,(i>0?i+".":"")+(r=r.length<2?"0"+r:r)+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++){if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[l.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,l){n&&0===n.indexOf("//")&&(n="https:"+n);var u=s.parse(n),d=r({},a,{host:u.hostname,port:u.port,path:u.pathname}),h=void 0;if("https:"===u.protocol&&(h=t.proxyHttpsUrl||void 0),"http:"===u.protocol&&(h=t.proxyHttpUrl||void 0),h){0===h.indexOf("//")&&(h="http:"+h);var p=s.parse(h);"https:"===p.protocol?(c.info("Proxies that use HTTPS are not supported"),h=void 0):d=r({},d,{host:p.hostname,port:p.port||"80",path:n,headers:r({},d.headers,{Host:u.hostname})})}var f="https:"===u.protocol&&!h;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?o.request(d,l):i.request(d,l)},e.safeIncludeCorrelationHeader=function(t,n,r){var i;if("string"==typeof r)i=r;else if(r instanceof Array)i=r.join(",");else if(r&&"function"==typeof r.toString)try{i=r.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,r)}i?e.addCorrelationIdHeaderFromString(t,n,i):n.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.addCorrelationIdHeaderFromString=function(e,t,n){var r=n.split(","),i=l.requestContextSourceKey+"=";r.some((function(e){return e.substring(0,i.length)===i}))||t.setHeader(l.requestContextHeader,n+","+l.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();e.exports=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCommandPromptHandlerService=t.DiagnosticCommandPromptHandlerServiceId=void 0;const o=n(0),s=n(2),a=n(3),c=n(8);t.DiagnosticCommandPromptHandlerServiceId="DiagnosticCommandPromptHandlerServiceId";let l=class{constructor(e){this.appShell=e.get(a.IApplicationShell)}async handle(e,t={commandPrompts:[]}){const n=t.commandPrompts.map(e=>e.prompt),r=await this.displayMessage(t.message?t.message:e.message,e.severity,n);if(t.onClose&&t.onClose(r),!r)return;const i=t.commandPrompts.find(e=>e.prompt===r);i&&i.command&&await i.command.invoke()}async displayMessage(e,t,n){switch(t){case s.DiagnosticSeverity.Error:return this.appShell.showErrorMessage(e,...n);case s.DiagnosticSeverity.Warning:return this.appShell.showWarningMessage(e,...n);default:return this.appShell.showInformationMessage(e,...n)}}};l=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],l),t.DiagnosticCommandPromptHandlerService=l},function(e,t,n){"use strict";var r=n(117),i=n(60);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=a(e[n].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=s(i)),n+=c(i.toString(16))}return n},t.zero2=a,t.zero8=c,t.join32=function(e,t,n,i){var o=n-t;r(o%4==0);for(var s=new Array(o/4),a=0,c=t;a<s.length;a++,c+=4){var l;l="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[a]=l>>>0}return s},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];"big"===t?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},t.sum64=function(e,t,n,r){var i=e[t],o=r+e[t+1]>>>0,s=(o<r?1:0)+n+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,i,o,s,a){var c=0,l=t;return c+=(l=l+r>>>0)<t?1:0,c+=(l=l+o>>>0)<o?1:0,e+n+i+s+(c+=(l=l+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,i,o,s,a){return t+r+o+a>>>0},t.sum64_5_hi=function(e,t,n,r,i,o,s,a,c,l){var u=0,d=t;return u+=(d=d+r>>>0)<t?1:0,u+=(d=d+o>>>0)<o?1:0,u+=(d=d+a>>>0)<a?1:0,e+n+i+s+c+(u+=(d=d+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,i,o,s,a,c,l){return t+r+o+a+l>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){"use strict";const r=t.format=n(39);function i(e,t){t=t||e,Object.defineProperty(r,e,{get:()=>n(415)(`./${t}.js`),configurable:!0})}t.levels=n(157),i("align"),i("errors"),i("cli"),i("combine"),i("colorize"),i("json"),i("label"),i("logstash"),i("metadata"),i("ms"),i("padLevels","pad-levels"),i("prettyPrint","pretty-print"),i("printf"),i("simple"),i("splat"),i("timestamp"),i("uncolorize")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticsService=t.BaseDiagnostic=void 0;const s=n(0),a=n(3),c=n(7),l=n(9),u=n(34);let d=class{constructor(e,t,n,r,i,o="default",s=!0){this.code=e,this.message=t,this.severity=n,this.scope=r,this.resource=i,this.invokeHandler=o,this.shouldShowPrompt=s}};d=i([s.injectable()],d),t.BaseDiagnostic=d;let h=r=class{constructor(e,t,n,r=!1){this.supportedDiagnosticCodes=e,this.serviceContainer=t,this.runInBackground=r,this.filterService=t.get(u.IDiagnosticFilterService),n.push(this)}dispose(){}async handle(e){if(0===e.length)return;const t=e.filter(e=>{if(e.invokeHandler&&"always"===e.invokeHandler)return!0;const t=this.getDiagnosticsKey(e);return-1===r.handledDiagnosticCodeKeys.indexOf(t)&&(r.handledDiagnosticCodeKeys.push(t),!0)});await this.onHandle(t)}async canHandle(e){return c.sendTelemetryEvent(l.EventName.DIAGNOSTICS_MESSAGE,void 0,{code:e.code}),this.supportedDiagnosticCodes.filter(t=>t===e.code).length>0}getDiagnosticsKey(e){if(e.scope===u.DiagnosticScope.Global)return e.code;const t=this.serviceContainer.get(a.IWorkspaceService),n=e.resource?t.getWorkspaceFolder(e.resource):void 0;return`${e.code}dbe75733-0407-4124-a1b2-ca769dc30523${n?n.uri.fsPath:""}`}};h.handledDiagnosticCodeKeys=[],h=r=i([s.injectable(),o(0,s.unmanaged()),o(1,s.unmanaged()),o(2,s.unmanaged()),o(3,s.unmanaged())],h),t.BaseDiagnosticsService=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDiagnosticsCommandFactory=void 0,t.IDiagnosticsCommandFactory=Symbol("IDiagnosticsCommandFactory")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCodes=void 0,function(e){e.InvalidEnvironmentPathVariableDiagnostic="InvalidEnvironmentPathVariableDiagnostic",e.InvalidDebuggerTypeDiagnostic="InvalidDebuggerTypeDiagnostic",e.NoPythonInterpretersDiagnostic="NoPythonInterpretersDiagnostic",e.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic="MacInterpreterSelectedAndNoOtherInterpretersDiagnostic",e.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic="MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic",e.InvalidPythonPathInDebuggerSettingsDiagnostic="InvalidPythonPathInDebuggerSettingsDiagnostic",e.InvalidPythonPathInDebuggerLaunchDiagnostic="InvalidPythonPathInDebuggerLaunchDiagnostic",e.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic",e.NoCurrentlySelectedPythonInterpreterDiagnostic="InvalidPythonInterpreterDiagnostic",e.LSNotSupportedDiagnostic="LSNotSupportedDiagnostic",e.PythonPathDeprecatedDiagnostic="PythonPathDeprecatedDiagnostic",e.JustMyCodeDiagnostic="JustMyCodeDiagnostic",e.ConsoleTypeDiagnostic="ConsoleTypeDiagnostic",e.ConfigPythonPathDiagnostic="ConfigPythonPathDiagnostic",e.UpgradeCodeRunnerDiagnostic="UpgradeCodeRunnerDiagnostic"}(t.DiagnosticCodes||(t.DiagnosticCodes={}))},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";const r=n(45).fromPromise,i=n(304);e.exports={pathExists:r((function(e){return i.access(e).then(()=>!0).catch(()=>!1)})),pathExistsSync:i.existsSync}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(33);function o(e,t,n,i,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var l=s[c];if(Array.isArray(l))for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key)}else l=[];l.push(i),s[c]=l,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}function a(e,t){return function(n,r){t(n,r,e)}}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([a(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterComparer=t.IInterpreterSelector=t.IPythonPathUpdaterServiceManager=t.IPythonPathUpdaterServiceFactory=void 0,t.IPythonPathUpdaterServiceFactory=Symbol("IPythonPathUpdaterServiceFactory"),t.IPythonPathUpdaterServiceManager=Symbol("IPythonPathUpdaterServiceManager"),t.IInterpreterSelector=Symbol("IInterpreterSelector"),t.IInterpreterComparer=Symbol("IInterpreterComparer")},function(e,t,n){"use strict";let r;function i(){if(void 0===r)throw new Error("No runtime abstraction layer installed");return r}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");r=e}}(i||(i={})),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLinter=t.parseLine=t.matchNamedRegEx=void 0;const r=n(4),i=n(3),o=n(10);n(11);const s=n(5),a=n(18),c=n(1),l=n(908),u=n(43),d=n(345);function h(e,t){const n=d(t,"g").exec(e);if(null!==n)return n.groups()}function p(e,t,n,r=0){const i=h(e,t);if(i)return i.line=Number(i.line),i.column=Number(i.column),{code:i.code,message:i.message,column:isNaN(i.column)||i.column<=0?0:i.column-r,line:i.line,type:i.type,provider:n}}t.matchNamedRegEx=h,t.parseLine=p;t.BaseLinter=class{constructor(e,t,n,r=0){this.outputChannel=t,this.serviceContainer=n,this.columnOffset=r,this._info=n.get(u.ILinterManager).getLinterInfo(e),this.errorHandler=new l.ErrorHandler(this.info.product,t,n),this.configService=n.get(c.IConfigurationService),this.workspace=n.get(i.IWorkspaceService)}get pythonSettings(){return this._pythonSettings}get info(){return this._info}async lint(e,t){return this._pythonSettings=this.configService.getSettings(e.uri),this.runLinter(e,t)}getWorkspaceRootPath(e){const t=this.workspace.getWorkspaceFolder(e.uri),n=t&&"string"==typeof t.uri.fsPath?t.uri.fsPath:void 0;return"string"==typeof n?n:r.dirname(e.uri.fsPath)}parseMessagesSeverity(e,t){if(t[e]){const n=t[e];switch(n){case"Error":return u.LintMessageSeverity.Error;case"Hint":return u.LintMessageSeverity.Hint;case"Information":return u.LintMessageSeverity.Information;case"Warning":return u.LintMessageSeverity.Warning;default:if(u.LintMessageSeverity[n])return u.LintMessageSeverity[n]}}return u.LintMessageSeverity.Information}async run(e,t,n,r="(?<line>\\d+),(?<column>-?\\d+),(?<type>\\w+),(?<code>\\w+\\d+):(?<message>.*)\\r?(\\n|$)"){if(!this.info.isEnabled(t.uri))return[];const i=this.info.getExecutionInfo(e,t.uri),o=this.getWorkspaceRootPath(t),s=this.serviceContainer.get(a.IPythonToolExecutionService);try{const e=await s.exec(i,{cwd:o,token:n,mergeStdOutErr:!1},t.uri);return this.displayLinterResultHeader(e.stdout),await this.parseMessages(e.stdout,t,n,r)}catch(e){return await this.handleError(e,t.uri,i),[]}}async parseMessages(e,t,n,r){const i=e.splitLines({removeEmptyEntries:!1,trim:!1});return this.parseLines(i,r)}async handleError(e,t,n){o.isTestExecution()?this.errorHandler.handleError(e,t,n).ignoreErrors():this.errorHandler.handleError(e,t,n).catch(e=>s.traceError("Error in errorHandler.handleError",e)).ignoreErrors()}parseLine(e,t){return p(e,t,this.info.id,this.columnOffset)}parseLines(e,t){const n=[];for(const r of e)try{const e=this.parseLine(r,t);if(e&&(n.push(e),n.length>=this.pythonSettings.linting.maxNumberOfProblems))break}catch(e){s.traceError(`Linter '${this.info.id}' failed to parse the line '${r}.`,e)}return n}displayLinterResultHeader(e){this.outputChannel.append(`${"#".repeat(10)}Linting Output - ${this.info.id}${"#".repeat(10)}\n`),this.outputChannel.append(e)}}},function(e,t,n){"use strict";const r=n(22),i=n(429),{LEVEL:o}=n(21),s=e.exports=function(e={}){i.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",e=>{this.levels=e.levels,this.parent=e}),this.once("unpipe",e=>{e===this.parent&&(this.parent=null,this.close&&this.close())})};r.inherits(s,i),s.prototype._write=function(e,t,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);const r=this.level||this.parent&&this.parent.level;if(!r||this.levels[r]>=this.levels[e[o]]){if(e&&!this.format)return this.log(e,n);let t,r;try{r=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!r){if(n(),t)throw t;return}return this.log(r,n)}return n(null)},s.prototype._writev=function(e,t){if(this.logv){const n=e.filter(this._accept,this);return n.length?this.logv(n,t):t(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let r,i;try{i=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(e){r=e}if(r||!i){if(e[n].callback(),r)throw t(null),r}else this.log(i,e[n].callback)}return t(null)},s.prototype._accept=function(e){const t=e.chunk;if(this.silent)return!1;const n=this.level||this.parent&&this.parent.level;return!(!0!==t.exception&&n&&!(this.levels[n]>=this.levels[t[o]])||!this.handleExceptions&&!0===t.exception)},s.prototype._nop=function(){}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JediProxyHandler=t.JediProxy=t.CommandType=void 0;const i=n(4),o=n(694),s=n(2);n(11);const a=n(86),c=n(6),l=n(59),u=n(41),d=n(18),h=n(1),p=n(15),f=n(23),g=n(30),m=n(57),v=n(7),y=n(9),b=n(5),S=new Map;S.set("none",s.CompletionItemKind.Value),S.set("type",s.CompletionItemKind.Class),S.set("tuple",s.CompletionItemKind.Class),S.set("dict",s.CompletionItemKind.Class),S.set("dictionary",s.CompletionItemKind.Class),S.set("function",s.CompletionItemKind.Function),S.set("lambda",s.CompletionItemKind.Function),S.set("generator",s.CompletionItemKind.Function),S.set("class",s.CompletionItemKind.Class),S.set("instance",s.CompletionItemKind.Reference),S.set("method",s.CompletionItemKind.Method),S.set("builtin",s.CompletionItemKind.Class),S.set("builtinfunction",s.CompletionItemKind.Function),S.set("module",s.CompletionItemKind.Module),S.set("file",s.CompletionItemKind.File),S.set("xrange",s.CompletionItemKind.Class),S.set("slice",s.CompletionItemKind.Class),S.set("traceback",s.CompletionItemKind.Class),S.set("frame",s.CompletionItemKind.Class),S.set("buffer",s.CompletionItemKind.Class),S.set("dictproxy",s.CompletionItemKind.Class),S.set("funcdef",s.CompletionItemKind.Function),S.set("property",s.CompletionItemKind.Property),S.set("import",s.CompletionItemKind.Module),S.set("keyword",s.CompletionItemKind.Keyword),S.set("constant",s.CompletionItemKind.Variable),S.set("variable",s.CompletionItemKind.Variable),S.set("value",s.CompletionItemKind.Value),S.set("param",s.CompletionItemKind.Variable),S.set("statement",s.CompletionItemKind.Keyword);const E=new Map;function w(e){if(S.has(e)){const t=S.get(e);if(t)return t}return s.CompletionItemKind.Keyword}function _(e){if(E.has(e)){const t=E.get(e);if(t)return t}return s.SymbolKind.Variable}var P;E.set("none",s.SymbolKind.Variable),E.set("type",s.SymbolKind.Class),E.set("tuple",s.SymbolKind.Class),E.set("dict",s.SymbolKind.Class),E.set("dictionary",s.SymbolKind.Class),E.set("function",s.SymbolKind.Function),E.set("lambda",s.SymbolKind.Function),E.set("generator",s.SymbolKind.Function),E.set("class",s.SymbolKind.Class),E.set("instance",s.SymbolKind.Class),E.set("method",s.SymbolKind.Method),E.set("builtin",s.SymbolKind.Class),E.set("builtinfunction",s.SymbolKind.Function),E.set("module",s.SymbolKind.Module),E.set("file",s.SymbolKind.File),E.set("xrange",s.SymbolKind.Array),E.set("slice",s.SymbolKind.Class),E.set("traceback",s.SymbolKind.Class),E.set("frame",s.SymbolKind.Class),E.set("buffer",s.SymbolKind.Array),E.set("dictproxy",s.SymbolKind.Class),E.set("funcdef",s.SymbolKind.Function),E.set("property",s.SymbolKind.Property),E.set("import",s.SymbolKind.Module),E.set("keyword",s.SymbolKind.Variable),E.set("constant",s.SymbolKind.Constant),E.set("variable",s.SymbolKind.Variable),E.set("value",s.SymbolKind.Variable),E.set("param",s.SymbolKind.Variable),E.set("statement",s.SymbolKind.Variable),E.set("boolean",s.SymbolKind.Boolean),E.set("int",s.SymbolKind.Number),E.set("longlean",s.SymbolKind.Number),E.set("float",s.SymbolKind.Number),E.set("complex",s.SymbolKind.Number),E.set("string",s.SymbolKind.String),E.set("unicode",s.SymbolKind.String),E.set("list",s.SymbolKind.Array),function(e){e[e.Arguments=0]="Arguments",e[e.Completions=1]="Completions",e[e.Hover=2]="Hover",e[e.Usages=3]="Usages",e[e.Definitions=4]="Definitions",e[e.Symbols=5]="Symbols"}(P=t.CommandType||(t.CommandType={}));const C=new Map;C.set(P.Arguments,"arguments"),C.set(P.Completions,"completions"),C.set(P.Definitions,"definitions"),C.set(P.Hover,"tooltip"),C.set(P.Usages,"usages"),C.set(P.Symbols,"names");class T{constructor(e,t,n){this.serviceContainer=n,this.cmdId=0,this.previousData="",this.commands=new Map,this.commandQueue=[],this.spawnRetryAttempts=0,this.additionalAutoCompletePaths=[],this.ignoreJediMemoryFootprint=!1,this.pidUsageFailures={timer:new g.StopWatch,counter:0},this.disposables=[],this.workspacePath=e;const r=n.get(h.IConfigurationService);this.pythonSettings=r.getSettings(s.Uri.file(e)),this.lastKnownPythonInterpreter=t?t.path:this.pythonSettings.pythonPath,this.initialized=p.createDeferred(),this.startLanguageServer().then(()=>this.initialized.resolve()).ignoreErrors(),this.checkJediMemoryFootprint().ignoreErrors()}static getProperty(e,t){return e[t]}dispose(){for(;this.disposables.length>0;){const e=this.disposables.pop();e&&e.dispose()}this.timer&&clearTimeout(this.timer),this.killProcess()}getNextCommandId(){const e=this.cmdId;return this.cmdId+=1,e}async sendCommand(e){if(await this.initialized.promise,await this.languageServerStarted.promise,!this.proc)return Promise.reject(new Error("Python proc not initialized"));const t=e,n=this.createPayload(t);t.deferred=p.createDeferred();try{this.proc.stdin.write(JSON.stringify(n)+"\n"),this.commands.set(t.id,t),this.commandQueue.push(t.id)}catch(e){return b.traceError(e),"This socket is closed."===e.message?this.killProcess():this.handleError("sendCommand",e.message),Promise.reject(e)}return t.deferred.promise}initialize(){return this.spawnProcess().catch(e=>{this.languageServerStarted&&this.languageServerStarted.reject(e),this.handleError("spawnProcess",e)})}shouldCheckJediMemoryFootprint(){return!this.ignoreJediMemoryFootprint&&-1!==this.pythonSettings.jediMemoryLimit&&(!this.lastCmdIdProcessedForPidUsage||!this.lastCmdIdProcessed||this.lastCmdIdProcessedForPidUsage!==this.lastCmdIdProcessed)}async checkJediMemoryFootprint(){-1!==this.pythonSettings.jediMemoryLimit&&(await this.checkJediMemoryFootprintImpl(),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this.checkJediMemoryFootprint(),15e3))}async checkJediMemoryFootprintImpl(){if(!this.proc||this.proc.killed)return;if(!this.shouldCheckJediMemoryFootprint())return;this.lastCmdIdProcessedForPidUsage=this.lastCmdIdProcessed;const e=p.createDeferred();return o.stat(this.proc.pid,async(t,n)=>{if(t)this.pidUsageFailures.counter+=1,this.pidUsageFailures.timer.elapsedTime>6e4&&(this.ignoreJediMemoryFootprint=this.pidUsageFailures.counter>2,this.pidUsageFailures.counter=0,this.pidUsageFailures.timer.reset()),b.traceError("Python Extension: (pidusage)",t);else{const e=Math.min(Math.max(this.pythonSettings.jediMemoryLimit,1024),8192);let t=!1;if(n&&n.memory){t=n.memory>1024*e*1024;const r={mem_use:n.memory,limit:1024*e*1024,isUserDefinedLimit:1024!==e,restart:t};v.sendTelemetryEvent(y.EventName.JEDI_MEMORY,void 0,r)}t&&(b.traceWarning(`IntelliSense process memory consumption exceeded limit of ${e} MB and process will be restarted.\nThe limit is controlled by the 'python.jediMemoryLimit' setting.`),await this.restartLanguageServer())}e.resolve()}),e.promise}async environmentVariablesChangeHandler(){const e=await this.buildAutoCompletePaths();this.additionalAutoCompletePaths.join(",")!==e.join(",")&&(this.additionalAutoCompletePaths=e,this.restartLanguageServer().ignoreErrors())}async startLanguageServer(){const e=await this.buildAutoCompletePaths();return this.additionalAutoCompletePaths=e,this.restartLanguageServer()}restartLanguageServer(){return this.killProcess(),this.clearPendingRequests(),this.initialize()}clearPendingRequests(){this.commandQueue=[],this.commands.forEach(e=>{void 0!==e.deferred&&e.deferred.resolve()}),this.commands.clear()}killProcess(){try{this.proc&&this.proc.kill()}catch(e){}this.proc=void 0}handleError(e,t){b.traceError(e+" jediProxy",`Error (${e}) ${t}`)}async spawnProcess(){this.languageServerStarted&&!this.languageServerStarted.completed&&this.languageServerStarted.reject(new Error("Language server not started.")),this.languageServerStarted=p.createDeferred();const e=await this.serviceContainer.get(d.IPythonExecutionFactory).create({resource:s.Uri.file(this.workspacePath),pythonPath:this.lastKnownPythonInterpreter});if(0===(await e.getExecutablePath().catch(()=>"")).length)return;const[t,n]=u.completion(this.pythonSettings.jediPath),r=e.execObservable(t,{});this.proc=r.proc,this.languageServerStarted.resolve(),this.proc.on("end",e=>{b.traceError("spawnProcess.end","End - "+e)}),this.proc.on("error",e=>{this.handleError("error",""+e),this.spawnRetryAttempts+=1,this.spawnRetryAttempts<10&&e&&e.message&&e.message.indexOf("This socket has been ended by the other party")>=0&&this.spawnProcess().catch(e=>{this.languageServerStarted&&this.languageServerStarted.reject(e),this.handleError("spawnProcess",e)})}),r.out.subscribe(e=>{if("stderr"===e.source)this.handleError("stderr",e.out);else{const t=e.out,r=this.previousData=`${this.previousData}${t}`;let i;try{i=n(r),this.previousData=""}catch(e){return void(-1===e.message.indexOf("Unexpected end of input")&&-1===e.message.indexOf("Unexpected end of JSON input")&&-1===e.message.indexOf("Unexpected token")&&this.handleError("stdout",e.message))}i.forEach(e=>{if(!e)return;const t=T.getProperty(e,"id");if(!this.commands.has(t))return;const n=this.commands.get(t);if(!n)return;if(this.lastCmdIdProcessed=n.id,T.getProperty(e,"arguments"))return void this.commandQueue.splice(this.commandQueue.indexOf(n.id),1);this.commands.delete(t);const r=this.commandQueue.indexOf(n.id);if(r&&this.commandQueue.splice(r,1),n.token.isCancellationRequested)return void this.safeResolve(n,void 0);const i=this.getCommandHandler(n.command);i&&i.call(this,n,e),this.checkQueueLength()})}},e=>this.handleError("subscription.error",""+e))}getCommandHandler(e){switch(e){case P.Completions:return this.onCompletion;case P.Definitions:return this.onDefinition;case P.Hover:return this.onHover;case P.Symbols:return this.onSymbols;case P.Usages:return this.onUsages;case P.Arguments:return this.onArguments;default:return}}onCompletion(e,t){let n=T.getProperty(t,"results");n=Array.isArray(n)?n:[],n.forEach(e=>{const t=e.type;e.type=w(t),e.kind=_(t),e.rawType=w(t)});const r={items:n,requestId:e.id};this.safeResolve(e,r)}onDefinition(e,t){const n=T.getProperty(t,"results"),r={requestId:e.id,definitions:[]};n.length>0&&(r.definitions=n.map(e=>{const t=e.type;return{fileName:e.fileName,text:e.text,rawType:t,type:w(t),kind:_(t),container:e.container,range:{startLine:e.range.start_line,startColumn:e.range.start_column,endLine:e.range.end_line,endColumn:e.range.end_column}}})),this.safeResolve(e,r)}onHover(e,t){const n=T.getProperty(t,"results"),r={requestId:e.id,items:n.map(e=>({kind:_(e.type),description:e.description,signature:e.signature,docstring:e.docstring,text:e.text}))};this.safeResolve(e,r)}onSymbols(e,t){let n=T.getProperty(t,"results");n=Array.isArray(n)?n:[];const r={requestId:e.id,definitions:[]};r.definitions=n.map(e=>{const t=e.type;return{fileName:e.fileName,text:e.text,rawType:t,type:w(t),kind:_(t),container:e.container,range:{startLine:e.range.start_line,startColumn:e.range.start_column,endLine:e.range.end_line,endColumn:e.range.end_column}}}),this.safeResolve(e,r)}onUsages(e,t){let n=T.getProperty(t,"results");n=Array.isArray(n)?n:[];const r={requestId:e.id,references:n.map(e=>({columnIndex:e.column,fileName:e.fileName,lineIndex:e.line-1,moduleName:e.moduleName,name:e.name}))};this.safeResolve(e,r)}onArguments(e,t){const n=T.getProperty(t,"results");this.safeResolve(e,{requestId:e.id,definitions:n})}checkQueueLength(){if(this.commandQueue.length>10){this.commandQueue.splice(0,this.commandQueue.length-10).forEach(e=>{if(this.commands.has(e)){const t=this.commands.get(e);try{this.safeResolve(t,void 0)}catch(e){}finally{this.commands.delete(e)}}})}}createPayload(e){const t={id:e.id,prefix:"",lookup:C.get(e.command),path:e.fileName,source:e.source,line:e.lineIndex,column:e.columnIndex,config:this.getConfig()};return e.command===P.Symbols&&(delete t.column,delete t.line),t}async getPathFromPython(e=l.getExecutable){const[t,n]=e();try{const e=await this.serviceContainer.get(d.IPythonExecutionFactory).create({resource:s.Uri.file(this.workspacePath),pythonPath:this.lastKnownPythonInterpreter}),r=n((await e.exec(t,{cwd:this.workspacePath})).stdout).splitLines();if(0===r.length)return"";const i=this.serviceContainer.get(c.IFileSystem);return await i.fileExists(r[0])?r[0]:""}catch(e){return""}}async buildAutoCompletePaths(){const e=[this.getPathFromPython(l.getSysPrefix).catch(()=>""),this.getPathFromPython(l.getExecutable).then(e=>i.dirname(e)).catch(()=>""),this.getPathFromPython(l.getSitePackages).then(e=>a.IS_WINDOWS&&e.length>0?i.join(e,".."):e).catch(()=>""),this.getPathFromPython(l.getUserSitePackages).catch(()=>"")];try{const t=await this.getEnvironmentVariablesProvider().getEnvironmentVariables(s.Uri.file(this.workspacePath)).then(e=>e?T.getProperty(e,"PYTHONPATH"):"").then(e=>"string"==typeof e&&e.trim().length>0?e.trim():"").then(e=>e.split(i.delimiter).filter(e=>e.trim().length>0)),n=t.filter(e=>!i.isAbsolute(e)).map(e=>i.resolve(this.workspacePath,e));return(await Promise.all(e)).concat(...t,...n).filter(e=>e.length>0)}catch(e){return b.traceError("Python Extension: jediProxy.filePaths",e),[]}}getEnvironmentVariablesProvider(){return this.environmentVariablesProvider||(this.environmentVariablesProvider=this.serviceContainer.get(m.IEnvironmentVariablesProvider),this.environmentVariablesProvider.onDidEnvironmentVariablesChange(this.environmentVariablesChangeHandler.bind(this))),this.environmentVariablesProvider}getConfig(){const e=this.pythonSettings.autoComplete?this.pythonSettings.autoComplete.extraPaths.map(e=>i.isAbsolute(e)?e:"string"!=typeof this.workspacePath?"":i.join(this.workspacePath,e)):[];"string"==typeof this.workspacePath&&e.unshift(this.workspacePath);return{extraPaths:e.concat(this.additionalAutoCompletePaths).filter(e=>e.length>0).filter((e,t,n)=>n.indexOf(e)===t),useSnippets:!1,caseInsensitiveCompletion:!0,showDescriptions:!0,fuzzyMatcher:!0}}safeResolve(e,t){e&&e.deferred&&e.deferred.resolve(t)}}r([f.swallowExceptions("JediProxy")],T.prototype,"environmentVariablesChangeHandler",null),r([f.swallowExceptions("JediProxy")],T.prototype,"startLanguageServer",null),t.JediProxy=T;t.JediProxyHandler=class{constructor(e){this.jediProxy=e,this.commandCancellationTokenSources=new Map}get JediProxy(){return this.jediProxy}dispose(){this.jediProxy&&this.jediProxy.dispose()}sendCommand(e,t){const n=e;if(n.id=n.id||this.jediProxy.getNextCommandId(),this.commandCancellationTokenSources.has(e.command)){const t=this.commandCancellationTokenSources.get(e.command);t&&t.cancel()}const r=new s.CancellationTokenSource;return this.commandCancellationTokenSources.set(e.command,r),n.token=r.token,this.jediProxy.sendCommand(n).catch(e=>{b.traceError(e)})}sendCommandNonCancellableCommand(e,t){const n=e;return n.id=n.id||this.jediProxy.getNextCommandId(),t&&(n.token=t),this.jediProxy.sendCommand(n).catch(e=>{b.traceError(e)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_WINDOWS=t.NON_WINDOWS_PATH_VARIABLE_NAME=t.WINDOWS_PATH_VARIABLE_NAME=void 0,t.WINDOWS_PATH_VARIABLE_NAME="Path",t.NON_WINDOWS_PATH_VARIABLE_NAME="PATH",t.IS_WINDOWS=/^win/.test(process.platform)},function(e,t){e.exports=require("./node_modules/diff-match-patch")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyPythonExecInfo=t.buildPythonExecInfo=void 0,t.buildPythonExecInfo=function(e,t){if(Array.isArray(e)){const n=e.slice(1);return t&&n.push(...t),{args:n,command:e[0],python:[...e],pythonExecutable:e[e.length-1]}}return{command:e,args:t||[],python:[e],pythonExecutable:e}},t.copyPythonExecInfo=function(e,t){const n={command:e.command,args:[...e.args],python:[...e.python],pythonExecutable:e.pythonExecutable};return t&&n.args.push(...t),void 0===n.pythonExecutable&&(n.pythonExecutable=n.python[n.python.length-1]),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITestExplorerCommandHandler=t.ITestNavigatorHelper=t.ITestCodeNavigator=t.NavigableItemType=t.ITestCodeNavigatorCommandHandler=void 0,t.ITestCodeNavigatorCommandHandler=Symbol("ITestCodeNavigatorCommandHandler"),function(e){e.testFile="testFile",e.testFunction="testFunction",e.testSuite="testSuite"}(t.NavigableItemType||(t.NavigableItemType={})),t.ITestCodeNavigator=Symbol("ITestCodeNavigator"),t.ITestNavigatorHelper=Symbol("ITestNavigatorHelper"),t.ITestExplorerCommandHandler=Symbol("ITestExplorerCommandHandler")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CacheableLocatorService=t.CacheableLocatorPromiseCache=void 0;const o=n(0),s=n(205),a=n(2),c=n(3);n(11);const l=n(5),u=n(1),d=n(15),h=n(30),p=n(7),f=n(9);class g{constructor(){this.normalMap=new Map}static forceUseStatic(){g.useStatic=!0}static forceUseNormal(){g.useStatic=!1}get(e){return g.useStatic?g.staticMap.get(e):this.normalMap.get(e)}set(e,t){g.useStatic?g.staticMap.set(e,t):this.normalMap.set(e,t)}delete(e){g.useStatic?g.staticMap.delete(e):this.normalMap.delete(e)}}t.CacheableLocatorPromiseCache=g,g.useStatic=!1,g.staticMap=new Map;let m=class{constructor(e,t,n=!1){this.name=e,this.serviceContainer=t,this.cachePerWorkspace=n,this.promisesPerResource=new g,this.handlersAddedToResource=new Set,this.locating=new a.EventEmitter,this._hasInterpreters=d.createDeferred(),this.cacheKeyPrefix="INTERPRETERS_CACHE_v3_"+e,this._didTriggerInterpreterSuggestions=!1}get didTriggerInterpreterSuggestions(){return this._didTriggerInterpreterSuggestions}set didTriggerInterpreterSuggestions(e){this._didTriggerInterpreterSuggestions=e}get onLocating(){return this.locating.event}get hasInterpreters(){return this._hasInterpreters.completed?this._hasInterpreters.promise:Promise.resolve(!1)}async getInterpreters(e,t){const n=this.getCacheKey(e);let r=this.promisesPerResource.get(n);if(!r||(null==t?void 0:t.ignoreCache)){r=d.createDeferred(),this.promisesPerResource.set(n,r),this.addHandlersForInterpreterWatchers(n,e).ignoreErrors();const t=new h.StopWatch;this.getInterpretersImplementation(e).then(async n=>{await this.cacheInterpreters(n,e),l.traceVerbose(`Interpreters returned by ${this.name} are of count ${Array.isArray(n)?n.length:0}`),l.traceVerbose(`Interpreters returned by ${this.name} are ${JSON.stringify(n)}`),p.sendTelemetryEvent(f.EventName.PYTHON_INTERPRETER_DISCOVERY,t.elapsedTime,{locator:this.name,interpreters:Array.isArray(n)?n.length:0}),r.resolve(n)}).catch(e=>{p.sendTelemetryEvent(f.EventName.PYTHON_INTERPRETER_DISCOVERY,t.elapsedTime,{locator:this.name},e),r.reject(e)}),this.locating.fire(r.promise)}if(r.promise.then(e=>this._hasInterpreters.resolve(e.length>0)).catch(e=>this._hasInterpreters.resolve(!1)),r.completed)return r.promise;const i=(null==t?void 0:t.ignoreCache)?void 0:this.getCachedInterpreters(e);return Array.isArray(i)?i:r.promise}async addHandlersForInterpreterWatchers(e,t){if(this.handlersAddedToResource.has(e))return;this.handlersAddedToResource.add(e);const n=await this.getInterpreterWatchers(t),r=this.serviceContainer.get(u.IDisposableRegistry);n.forEach(n=>{n.onDidCreate(()=>{l.traceVerbose("Interpreter Watcher change handler for "+this.cacheKeyPrefix),this.promisesPerResource.delete(e),this.getInterpreters(t).ignoreErrors()},this,r)})}async getInterpreterWatchers(e){return[]}createPersistenceStore(e){const t=this.getCacheKey(e),n=this.serviceContainer.get(u.IPersistentStateFactory);return this.cachePerWorkspace?n.createWorkspacePersistentState(t,void 0):n.createGlobalPersistentState(t,void 0)}getCachedInterpreters(e){const t=this.createPersistenceStore(e);if(Array.isArray(t.value))return t.value.map(e=>({...e,cachedEntry:!0}))}async cacheInterpreters(e,t){const n=this.createPersistenceStore(t);await n.updateValue(e)}getCacheKey(e){if(!e||!this.cachePerWorkspace)return this.cacheKeyPrefix;const t=this.serviceContainer.get(c.IWorkspaceService);if(!Array.isArray(t.workspaceFolders))return this.cacheKeyPrefix;const n=t.getWorkspaceFolder(e);return n?`${this.cacheKeyPrefix}:${s(n.uri.fsPath)}`:this.cacheKeyPrefix}};r([l.traceDecorators.verbose("Get Interpreters in CacheableLocatorService")],m.prototype,"getInterpreters",null),m=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged())],m),t.CacheableLocatorService=m},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=!1);var n=0,r=e.length,a="",c=0,l=16,u=0,d=0,h=0,p=0,f=0;function g(t,r){for(var i=0,o=0;i<t||!r;){var s=e.charCodeAt(n);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}n++,i++}return i<t&&(o=-1),o}function m(){if(a="",f=0,c=n,d=u,p=h,n>=r)return c=r,l=17;var t=e.charCodeAt(n);if(i(t)){do{n++,a+=String.fromCharCode(t),t=e.charCodeAt(n)}while(i(t));return l=15}if(o(t))return n++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(n)&&(n++,a+="\n"),u++,h=n,l=14;switch(t){case 123:return n++,l=1;case 125:return n++,l=2;case 91:return n++,l=3;case 93:return n++,l=4;case 58:return n++,l=6;case 44:return n++,l=5;case 34:return n++,a=function(){for(var t="",i=n;;){if(n>=r){t+=e.substring(i,n),f=2;break}var s=e.charCodeAt(n);if(34===s){t+=e.substring(i,n),n++;break}if(92!==s){if(s>=0&&s<=31){if(o(s)){t+=e.substring(i,n),f=2;break}f=6}n++}else{if(t+=e.substring(i,n),++n>=r){f=2;break}switch(s=e.charCodeAt(n++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=g(4,!0);a>=0?t+=String.fromCharCode(a):f=4;break;default:f=5}i=n}}return t}(),l=10;case 47:var m=n-1;if(47===e.charCodeAt(n+1)){for(n+=2;n<r&&!o(e.charCodeAt(n));)n++;return a=e.substring(m,n),l=12}if(42===e.charCodeAt(n+1)){n+=2;for(var y=r-1,b=!1;n<y;){var S=e.charCodeAt(n);if(42===S&&47===e.charCodeAt(n+1)){n+=2,b=!0;break}n++,o(S)&&(13===S&&10===e.charCodeAt(n)&&n++,u++,h=n)}return b||(n++,f=1),a=e.substring(m,n),l=13}return a+=String.fromCharCode(t),n++,l=16;case 45:if(a+=String.fromCharCode(t),++n===r||!s(e.charCodeAt(n)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=n;if(48===e.charCodeAt(n))n++;else for(n++;n<e.length&&s(e.charCodeAt(n));)n++;if(n<e.length&&46===e.charCodeAt(n)){if(!(++n<e.length&&s(e.charCodeAt(n))))return f=3,e.substring(t,n);for(n++;n<e.length&&s(e.charCodeAt(n));)n++}var r=n;if(n<e.length&&(69===e.charCodeAt(n)||101===e.charCodeAt(n)))if((++n<e.length&&43===e.charCodeAt(n)||45===e.charCodeAt(n))&&n++,n<e.length&&s(e.charCodeAt(n))){for(n++;n<e.length&&s(e.charCodeAt(n));)n++;r=n}else f=3;return e.substring(t,r)}(),l=11;default:for(;n<r&&v(t);)n++,t=e.charCodeAt(n);if(c!==n){switch(a=e.substring(c,n)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return a+=String.fromCharCode(t),n++,l=16}}function v(e){if(i(e)||o(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){n=e,a="",c=0,l=16,f=0},getPosition:function(){return n},scan:t?function(){var e;do{e=m()}while(e>=12&&e<=15);return e}:m,getToken:function(){return l},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return n-c},getTokenStartLine:function(){return d},getTokenStartCharacter:function(){return c-p},getTokenError:function(){return f}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function o(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function a(e,t,n){var i,o,s,a,u;if(t){for(a=t.offset,u=a+t.length,s=a;s>0&&!l(e,s-1);)s--;for(var d=u;d<e.length&&!l(e,d);)d++;o=e.substring(s,d),i=function(e,t){var n=0,r=0,i=t.tabSize||4;for(;n<e.length;){var o=e.charAt(n);if(" "===o)r++;else{if("\t"!==o)break;r+=i}n++}return Math.floor(r/i)}(o,n)}else o=e,i=0,s=0,a=0,u=e.length;var h,p=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),f=!1,g=0;h=n.insertSpaces?c(" ",n.tabSize||4):"\t";var m=r(o,!1),v=!1;function y(){return p+c(h,i+g)}function b(){var e=m.scan();for(f=!1;15===e||14===e;)f=f||14===e,e=m.scan();return v=16===e||0!==m.getTokenError(),e}var S=[];function E(t,n,r){!v&&n<u&&r>a&&e.substring(n,r)!==t&&S.push({offset:n,length:r-n,content:t})}var w=b();if(17!==w){var _=m.getTokenOffset()+s;E(c(h,i),s,_)}for(;17!==w;){for(var P=m.getTokenOffset()+m.getTokenLength()+s,C=b(),T="";!f&&(12===C||13===C);){E(" ",P,m.getTokenOffset()+s),P=m.getTokenOffset()+m.getTokenLength()+s,T=12===C?y():"",C=b()}if(2===C)1!==w&&(g--,T=y());else if(4===C)3!==w&&(g--,T=y());else{switch(w){case 3:case 1:g++,T=y();break;case 5:case 12:T=y();break;case 13:T=f?y():" ";break;case 6:T=" ";break;case 10:if(6===C){T="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===C||13===C?T=" ":5!==C&&17!==C&&(v=!0);break;case 16:v=!0}!f||12!==C&&13!==C||(T=y())}E(T,P,m.getTokenOffset()+s),w=C}return S}function c(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function l(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var u;function d(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=u.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function o(e){return r.children.push(e),e}p(e,{onObjectBegin:function(e){r=o({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,t,n){(r=o({type:"property",offset:t,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:r})},onObjectEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:function(e,t){r=o({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:function(e,t,n){o({type:f(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:function(e,t,n){"property"===r.type&&(":"===e?r.colonOffset=t:","===e&&i(t))},onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n);var s=r.children[0];return s&&delete s.parent,s}function h(e,t){if(e){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if("string"==typeof o){if("object"!==n.type||!Array.isArray(n.children))return;for(var s=!1,a=0,c=n.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){n=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if("array"!==n.type||u<0||!Array.isArray(n.children)||u>=n.children.length)return;n=n.children[u]}}return n}}function p(e,t,n){void 0===n&&(n=u.DEFAULT);var i=r(e,!1);function o(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function s(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var a=o(t.onObjectBegin),c=s(t.onObjectProperty),l=o(t.onObjectEnd),d=o(t.onArrayBegin),h=o(t.onArrayEnd),p=s(t.onLiteralValue),f=s(t.onSeparator),g=o(t.onComment),m=s(t.onError),v=n&&n.disallowComments,y=n&&n.allowTrailingComma;function b(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:v||S(11);break;case 2:S(12);break;case 6:S(16)}switch(e){case 12:case 13:v?S(10):g();break;case 16:S(1);break;case 15:case 14:break;default:return e}}}function S(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),m(e),t.length+n.length>0)for(var r=i.getToken();17!==r;){if(-1!==t.indexOf(r)){b();break}if(-1!==n.indexOf(r))break;r=b()}}function E(e){var t=i.getTokenValue();return e?p(t):c(t),b(),!0}function w(){switch(i.getToken()){case 3:return function(){d(),b();for(var e=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||S(4,[],[]),f(","),b(),4===i.getToken()&&y)break}else e&&S(6,[],[]);w()||S(4,[],[4,5]),e=!0}return h(),4!==i.getToken()?S(8,[4],[]):b(),!0}();case 1:return function(){a(),b();for(var e=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(e||S(4,[],[]),f(","),b(),2===i.getToken()&&y)break}else e&&S(6,[],[]);(10!==i.getToken()?(S(3,[],[2,5]),0):(E(!1),6===i.getToken()?(f(":"),b(),w()||S(4,[],[2,5])):S(5,[],[2,5]),1))||S(4,[],[2,5]),e=!0}return l(),2!==i.getToken()?S(7,[2],[]):b(),!0}();case 10:return E(!0);default:return function(){switch(i.getToken()){case 11:var e=0;try{"number"!=typeof(e=JSON.parse(i.getTokenValue()))&&(S(2),e=0)}catch(e){S(2)}p(e);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return b(),!0}()}}return b(),17===i.getToken()||(w()?(17!==i.getToken()&&S(9,[],[]),!0):(S(4,[],[]),!1))}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"null"}}function g(e,t,n,r,i){for(var o,s=t.slice(),a=d(e,[]),c=void 0,l=void 0;s.length>0&&(l=s.pop(),void 0===(c=h(a,s))&&void 0!==n);)"string"==typeof l?((o={})[l]=n,n=o):n=[n];if(c){if("object"===c.type&&"string"==typeof l&&Array.isArray(c.children)){var u=h(c,[l]);if(void 0!==u){if(void 0===n){if(!u.parent)throw new Error("Malformed AST");var p=c.children.indexOf(u.parent),f=void 0,g=u.parent.offset+u.parent.length;if(p>0)f=(w=c.children[p-1]).offset+w.length;else if(f=c.offset+1,c.children.length>1)g=c.children[1].offset;return m(e,{offset:f,length:g-f,content:""},r)}return m(e,{offset:u.offset,length:u.length,content:JSON.stringify(n)},r)}if(void 0===n)return[];var v=JSON.stringify(l)+": "+JSON.stringify(n),y=i?i(c.children.map((function(e){return e.children[0].value}))):c.children.length,b=void 0;return m(e,b=y>0?{offset:(w=c.children[y-1]).offset+w.length,length:0,content:","+v}:0===c.children.length?{offset:c.offset+1,length:0,content:v}:{offset:c.offset+1,length:0,content:v+","},r)}if("array"===c.type&&"number"==typeof l&&Array.isArray(c.children)){if(-1===l){v=""+JSON.stringify(n),b=void 0;if(0===c.children.length)b={offset:c.offset+1,length:0,content:v};else b={offset:(w=c.children[c.children.length-1]).offset+w.length,length:0,content:","+v};return m(e,b,r)}if(void 0===n&&c.children.length>=0){var S=l,E=c.children[S];b=void 0;if(1===c.children.length)b={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===S){var w,_=(w=c.children[S-1]).offset+w.length;b={offset:_,length:c.offset+c.length-2-_,content:""}}else b={offset:E.offset,length:c.children[S+1].offset-E.offset,content:""};return m(e,b,r)}throw new Error("Array modification not supported yet")}throw new Error("Can not add "+("number"!=typeof l?"index":"property")+" to parent of type "+c.type)}if(void 0===n)throw new Error("Can not delete in empty document");return m(e,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(n)},r)}function m(e,t,n){var r=v(e,t),i=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!l(r,i-1);)i--;for(;o<r.length&&!l(r,o);)o++}for(var s=a(r,{offset:i,length:o-i},n),c=s.length-1;c>=0;c--){var u=s[c];r=v(r,u),i=Math.min(i,u.offset),o=Math.max(o,u.offset+u.length),o+=u.content.length-u.length}return[{offset:i,length:e.length-(r.length-o)-i,content:r.substring(i,o)}]}function v(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}n.r(t),function(e){e.DEFAULT={allowTrailingComma:!1}}(u||(u={})),n.d(t,"createScanner",(function(){return y})),n.d(t,"getLocation",(function(){return b})),n.d(t,"parse",(function(){return S})),n.d(t,"parseTree",(function(){return E})),n.d(t,"findNodeAtLocation",(function(){return w})),n.d(t,"findNodeAtOffset",(function(){return _})),n.d(t,"getNodePath",(function(){return P})),n.d(t,"getNodeValue",(function(){return C})),n.d(t,"visit",(function(){return T})),n.d(t,"stripComments",(function(){return I})),n.d(t,"printParseErrorCode",(function(){return O})),n.d(t,"format",(function(){return R})),n.d(t,"modify",(function(){return D})),n.d(t,"applyEdits",(function(){return x}));var y=r,b=function(e,t){var n=[],r=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(e,t,n,r){o.value=e,o.offset=t,o.length=n,o.type=r,o.colonOffset=void 0,i=o}try{p(e,{onObjectBegin:function(e,o){if(t<=e)throw r;i=void 0,s=t>e,n.push("")},onObjectProperty:function(e,i,o){if(t<i)throw r;if(a(e,i,o,"property"),n[n.length-1]=e,t<=i+o)throw r},onObjectEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onArrayBegin:function(e,o){if(t<=e)throw r;i=void 0,n.push(0)},onArrayEnd:function(e,o){if(t<=e)throw r;i=void 0,n.pop()},onLiteralValue:function(e,n,i){if(t<n)throw r;if(a(e,n,i,f(e)),t<=n+i)throw r},onSeparator:function(e,o,a){if(t<=o)throw r;if(":"===e&&i&&"property"===i.type)i.colonOffset=o,s=!1,i=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(s=!0,n[n.length-1]=""),i=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:i,isAtPropertyKey:s,matches:function(e){for(var t=0,r=0;t<e.length&&r<n.length;r++)if(e[t]===n[r]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},S=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=u.DEFAULT);var r=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):r&&(i[r]=e)}return p(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]},E=d,w=h,_=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var i=t.children;if(Array.isArray(i))for(var o=0;o<i.length&&i[o].offset<=n;o++){var s=e(i[o],n,r);if(s)return s}return t}},P=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&n.push(i)}return n},C=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,i=t.children;r<i.length;r++){var o=i[r],s=o.children[1];s&&(n[o.children[0].value]=e(s))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},T=p,I=function(e,t){var n,i,o=r(e),s=[],a=0;do{switch(i=o.getPosition(),n=o.scan()){case 12:case 13:case 17:a!==i&&s.push(e.substring(a,i)),void 0!==t&&s.push(o.getTokenValue().replace(/[^\r\n]/g,t)),a=o.getPosition()}}while(17!==n);return s.join("")};function O(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function R(e,t,n){return a(e,t,n)}function D(e,t,n,r){return g(e,t,n,r.formattingOptions,r.getInsertionIndex)}function x(e,t){for(var n=t.length-1;n>=0;n--)e=v(e,t[n]);return e}},function(e,t){e.exports=r,r.default=r,r.stable=o,r.stableStringify=o;var n=[];function r(e,t,r){!function e(t,r,i,o){var s;if("object"==typeof t&&null!==t){for(s=0;s<i.length;s++)if(i[s]===t)return o[r]="[Circular]",void n.push([o,r,t]);if(i.push(t),Array.isArray(t))for(s=0;s<t.length;s++)e(t[s],s,i,t);else{var a=Object.keys(t);for(s=0;s<a.length;s++){var c=a[s];e(t[c],c,i,t)}}i.pop()}}(e,"",[],void 0);for(var i=JSON.stringify(e,t,r);0!==n.length;){var o=n.pop();o[0][o[1]]=o[2]}return i}function i(e,t){return e<t?-1:e>t?1:0}function o(e,t,r){for(var o=function e(t,r,o,s){var a;if("object"==typeof t&&null!==t){for(a=0;a<o.length;a++)if(o[a]===t)return s[r]="[Circular]",void n.push([s,r,t]);if("function"==typeof t.toJSON)return;if(o.push(t),Array.isArray(t))for(a=0;a<t.length;a++)e(t[a],a,o,t);else{var c={},l=Object.keys(t).sort(i);for(a=0;a<l.length;a++){var u=l[a];e(t[u],u,o,t),c[u]=t[u]}if(void 0===s)return c;n.push([s,r,t]),s[r]=c}o.pop()}}(e,"",[],void 0)||e,s=JSON.stringify(o,t,r);0!==n.length;){var a=n.pop();a[0][a[1]]=a[2]}return s}},function(e,t,n){"use strict";const r={};function i(e,t,n){n||(n=Error);class i extends n{constructor(e,n,r){super(function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(e,n,r))}}i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){const n=e.length;return e=e.map(e=>String(e)),n>2?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){let r;var i,s;let a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a=`The ${e} ${r} ${o(t,"type")}`;else{a=`The "${e}" ${function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument"} ${r} ${o(t,"type")}`}return a+=". Received type "+typeof n,a}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var i=n(269),o=n(273);n(60)(l,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var c=s[a];l.prototype[c]||(l.prototype[c]=o.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLevel=t.resolveLevel=t.getLevelName=t.resolveLevelName=t.configLevels=t.LogLevel=void 0;const r=n(102);var i;!function(e){e[e.Error=40]="Error",e[e.Warn=30]="Warn",e[e.Info=20]="Info",e[e.Debug=10]="Debug",e[e.Trace=5]="Trace"}(i=t.LogLevel||(t.LogLevel={}));const o={[i.Error]:"ERROR",[i.Warn]:"WARNING",[i.Info]:"INFORMATION",[i.Debug]:"DEBUG",[i.Trace]:"DEBUG-TRACE"};t.configLevels={ERROR:0,WARNING:1,INFORMATION:2,DEBUG:4,"DEBUG-TRACE":5};const s={[i.Error]:"error",[i.Warn]:"warn",[i.Info]:"info",[i.Debug]:"debug",[i.Trace]:"silly"};function a(e){return o[e]}function c(e,n){let i;if(void 0===n)i=o;else if(n===t.configLevels)i=o;else{if(n!==r.config.npm.levels)return;i=s}for(const t of Object.keys(i))if("string"!=typeof t&&o[t]===e)return t}t.resolveLevelName=function(e,n){return void 0===n||n===t.configLevels?a(e):n===r.config.npm.levels?s[e]:void 0},t.getLevelName=a,t.resolveLevel=c,t.getLevel=function(e){return c(e)}},function(e,t,n){"use strict";var r=n(62),i=n(37),o=function(){function e(){}return e.queryCorrelationId=function(t,n){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))n(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(n);else{e.pendingLookups[o]=[n];var s=function(){if(e.pendingLookups[o]){var n={method:"GET",disableAppInsightsAutoCollection:!0};i.info(e.TAG,n);var a=r.makeRequest(t,o,n,(function(n){if(200===n.statusCode){var r="";n.setEncoding("utf-8"),n.on("data",(function(e){r+=e})),n.on("end",(function(){i.info(e.TAG,r);var t=e.correlationIdPrefix+r;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach((function(e){return e(t)})),delete e.pendingLookups[o]}))}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)}));a&&(a.on("error",(function(t){i.warn(e.TAG,t)})),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[r];i&&(e.pendingLookups[r]=i.filter((function(e){return e!=n})),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!1,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();e.exports=o},function(e,t,n){"use strict";const r=n(20).homedir();e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return r?e.replace(/^~(?=$|\/|\\)/,r):e}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsStoreInterpreter=t.isRestrictedWindowsStoreInterpreterPath=void 0;const o=n(0),s=n(4),a=n(5),c=n(6),l=n(18),u=n(1),d=n(12),h=n(8);function p(e){const t=e.toUpperCase().replace(/\//g,"\\");return t.includes("\\Program Files\\WindowsApps\\".toUpperCase())||t.includes("\\Microsoft\\WindowsApps\\PythonSoftwareFoundation".toUpperCase())}t.isRestrictedWindowsStoreInterpreterPath=p;let f=class{constructor(e,t,n,r){this.serviceContainer=e,this.persistentFactory=t,this.fs=n,this.pyenvs=r}async isWindowsStoreInterpreter(e){const t=await this.pyenvs.isWindowsStoreInterpreter(e);if(void 0!==t)return t;const n=e.toUpperCase().replace(/\//g,"\\");return n.includes("\\Microsoft\\WindowsApps\\".toUpperCase())||n.includes("\\Program Files\\WindowsApps\\".toUpperCase())||n.includes("\\Microsoft\\WindowsApps\\PythonSoftwareFoundation".toUpperCase())}isHiddenInterpreter(e){return p(e)}async getInterpreterHash(e){const t="WINDOWS_STORE_INTERPRETER_HASH_"+e,n=this.persistentFactory.createGlobalPersistentState(t,void 0,36e5);if(n.value)return n.value;const r=this.serviceContainer.get(l.IPythonExecutionFactory),i=await r.create({pythonPath:e}),o=await i.getExecutablePath(),a=await this.fs.getFileHash(o).catch(()=>this.fs.getFileHash(s.dirname(o)));return await n.updateValue(a),a}};r([a.traceDecorators.error("Get Windows Store Interpreter Hash")],f.prototype,"getInterpreterHash",null),f=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.inject(u.IPersistentStateFactory)),i(2,o.inject(c.IFileSystem)),i(3,o.inject(d.IComponentAdapter))],f),t.WindowsStoreInterpreter=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemVariables=void 0;const r=n(4),i=n(2),o=n(322);t.SystemVariables=class extends class{resolve(e){return o.isString(e)?this.__resolveString(e):o.isArray(e)?this.__resolveArray(e):o.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return o.isString(e)?this.__resolveString(e):o.isArray(e)?this.__resolveAnyArray(e):o.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,(e,t)=>{const n=this[t];return o.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e})}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolve(r)}),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolveAny(r)}),t}__resolveArray(e){return e.map(e=>this.__resolveString(e))}__resolveAnyArray(e){return e.map(e=>this.resolveAny(e))}}{constructor(e,t,n,o){super();const s=n&&e?n.getWorkspaceFolder(e):void 0;this._workspaceFolder=s?s.uri.fsPath:t||__dirname,this._workspaceFolderName=r.basename(this._workspaceFolder),this._filePath=e?e.fsPath:void 0,o&&o.activeTextEditor&&(this._lineNumber=o.activeTextEditor.selection.anchor.line+1,this._selectedText=o.activeTextEditor.document.getText(new i.Range(o.activeTextEditor.selection.start,o.activeTextEditor.selection.end))),this._execPath=process.execPath,Object.keys(process.env).forEach(e=>{this["env:"+e]=this["env."+e]=process.env[e]})}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get workspaceRootFolderName(){return this._workspaceFolderName}get workspaceFolderBasename(){return this._workspaceFolderName}get file(){return this._filePath}get relativeFile(){return this.file?r.relative(this._workspaceFolder,this.file):void 0}get relativeFileDirname(){return this.relativeFile?r.dirname(this.relativeFile):void 0}get fileBasename(){return this.file?r.basename(this.file):void 0}get fileBasenameNoExtension(){return this.file?r.parse(this.file).name:void 0}get fileDirname(){return this.file?r.dirname(this.file):void 0}get fileExtname(){return this.file?r.extname(this.file):void 0}get lineNumber(){return this._lineNumber}get selectedText(){return this._selectedText}get execPath(){return this._execPath}}},function(e,t,n){"use strict";var r,i=n(66),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRuleService=t.NextAction=void 0;const o=n(0),s=n(38);n(11);const a=n(5),c=n(6),l=n(1),u=n(30),d=n(7),h=n(9);var p;!function(e){e.runNextRule="runNextRule",e.exit="exit"}(p=t.NextAction||(t.NextAction={}));let f=class{constructor(e,t,n){this.ruleName=e,this.fs=t,this.stateStore=n.createGlobalPersistentState("InterpreterAutoSeletionRule-"+this.ruleName,void 0)}setNextRule(e){this.nextRule=e}async autoSelectInterpreter(e,t){await this.clearCachedInterpreterIfInvalid(e);const n=new u.StopWatch,r=await this.onAutoSelectInterpreter(e,t);a.traceVerbose(`Rule = ${this.ruleName}, result = ${r}`);const i=r===p.runNextRule;d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{elapsedTime:n.elapsedTime},{rule:this.ruleName,identified:i}),r===p.runNextRule&&await this.next(e,t)}getPreviouslyAutoSelectedInterpreter(e){const t=this.stateStore.value;return a.traceVerbose(`Current value for rule ${this.ruleName} is ${t?JSON.stringify(t):"nothing"}`),t}async setGlobalInterpreter(e,t){if(await this.cacheSelectedInterpreter(void 0,e),!e||!t||!e.version)return!1;const n=t.getAutoSelectedInterpreter(void 0),r=n&&n.version?s.compare(e.version.raw,n.version.raw):1;return r>0?(await t.setGlobalInterpreter(e),!0):0===r}async clearCachedInterpreterIfInvalid(e){this.stateStore.value&&!await this.fs.fileExists(this.stateStore.value.path)&&(d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{rule:this.ruleName,interpreterMissing:!0}),await this.cacheSelectedInterpreter(e,void 0))}async cacheSelectedInterpreter(e,t){const n=(t?t.path:"")===(this.stateStore.value?this.stateStore.value.path:"");d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{rule:this.ruleName,updated:n}),await this.stateStore.updateValue(t)}async next(e,t){return a.traceVerbose("Executing next rule from "+this.ruleName),this.nextRule&&t?this.nextRule.autoSelectInterpreter(e,t):void 0}};r([a.traceDecorators.verbose("autoSelectInterpreter")],f.prototype,"autoSelectInterpreter",null),r([a.traceDecorators.verbose("setGlobalInterpreter")],f.prototype,"setGlobalInterpreter",null),f=r([o.injectable(),i(0,o.unmanaged()),i(1,o.inject(c.IFileSystem)),i(2,o.inject(l.IPersistentStateFactory))],f),t.BaseRuleService=f},function(e,t,n){"use strict";const r=n(65),{warn:i}=n(254),o=t;o.version=n(426).version,o.transports=n(427),o.config=n(181),o.addColors=r.levels,o.format=r.format,o.createLogger=n(280),o.ExceptionHandler=n(281),o.RejectionHandler=n(285),o.Container=n(488),o.Transport=n(80),o.loggers=new o.Container;const s=o.createLogger();Object.keys(o.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure"]).forEach(e=>o[e]=(...t)=>s[e](...t)),Object.defineProperty(o,"level",{get:()=>s.level,set(e){s.level=e}}),Object.defineProperty(o,"exceptions",{get:()=>s.exceptions}),["exitOnError"].forEach(e=>{Object.defineProperty(o,e,{get:()=>s[e],set(t){s[e]=t}})}),Object.defineProperty(o,"default",{get:()=>({exceptionHandlers:s.exceptionHandlers,rejectionHandlers:s.rejectionHandlers,transports:s.transports})}),i.deprecated(o,"setLevels"),i.forFunctions(o,"useFormat",["cli"]),i.forProperties(o,"useFormat",["padLevels","stripColors"]),i.forFunctions(o,"deprecated",["addRewriter","addFilter","clone","extend"]),i.forProperties(o,"deprecated",["emitErrs","levelLength"]),i.moved(o,"createLogger","Logger")},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(121),s=n(21),a=s.LEVEL,c=s.MESSAGE;o.enabled=!0;var l=/\s+/,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t.colors&&this.addColors(t.colors),this.options=t}var t,n,s;return t=e,s=[{key:"addColors",value:function(t){var n=Object.keys(t).reduce((function(e,n){return e[n]=l.test(t[n])?t[n].split(l):t[n],e}),{});return e.allColors=Object.assign({},e.allColors||{},n),e.allColors}}],(n=[{key:"addColors",value:function(t){return e.addColors(t)}},{key:"colorize",value:function(t,n,r){if(void 0===r&&(r=n),!Array.isArray(e.allColors[t]))return o[e.allColors[t]](r);for(var i=0,s=e.allColors[t].length;i<s;i++)r=o[e.allColors[t][i]](r);return r}},{key:"transform",value:function(e,t){return t.all&&"string"==typeof e[c]&&(e[c]=this.colorize(e[a],e.level,e[c])),(t.level||t.all||!t.message)&&(e.level=this.colorize(e[a],e.level)),(t.all||t.message)&&(e.message=this.colorize(e[a],e.level,e.message)),e}}])&&i(t.prototype,n),s&&i(t,s),e}();e.exports=function(e){return new u(e)},e.exports.Colorizer=e.exports.Format=u},function(e,t,n){var r=n(66),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){var r=n(54);"disable"===process.env.READABLE_STREAM&&r?(e.exports=r.Readable,Object.assign(e.exports,r),e.exports.Stream=r):((t=e.exports=n(269)).Stream=r||t,t.Readable=t,t.Writable=n(273),t.Duplex=n(94),t.Transform=n(275),t.PassThrough=n(465),t.finished=n(179),t.pipeline=n(466))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(184),o=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,n,r,i,o){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t,traceparent:i,tracestate:o},customProperties:new s(r)}:null},e.runWithContext=function(t,n){return e.enabled?e.session.bind(n,((r={})[e.CONTEXT_NAME]=t,r))():n();var r},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t){return e.enabled?e.session.bind(t):t},e.enable=function(t){this.enabled||(this.isNodeVersionCompatible()?(e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=n(510):this.cls=n(521)),e.session=this.cls.createNamespace("AI-CLS-Session"),i.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0):this.enabled=!1)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,r=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&n)&&r},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();t.CorrelationContextManager=o;var s=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n))r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===t)return void(o.value=n)}this.props.push({key:t,value:n})}},e.bannedCharacters=/[,=]/,e}()},function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"}(r=t.QuickPulseCounter||(t.QuickPulseCounter={})),function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(i=t.PerformanceCounter||(t.PerformanceCounter={})),t.PerformanceToQuickPulseCounter=((o={})[i.PROCESSOR_TIME]=r.PROCESSOR_TIME,o[i.REQUEST_RATE]=r.REQUEST_RATE,o[i.REQUEST_DURATION]=r.REQUEST_DURATION,o[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,o[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,o[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,o[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,o[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,o[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,o),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability}},function(e,t,n){"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},function(e,t,n){"use strict";const r=n(569),i={};r(i,n(304)),r(i,n(573)),r(i,n(307)),r(i,n(50)),r(i,n(135)),r(i,n(581)),r(i,n(585)),r(i,n(586)),r(i,n(587)),r(i,n(588)),r(i,n(594)),r(i,n(75)),e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);function i(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(e){var t="Object";null!==e.implementationType&&(t=o(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)}))),r},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(function e(t,n){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===n||e(t.parentRequest,n))}(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=o},function(e,t,n){(function(e){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],a="[object Arguments]",c="[object Array]",l="[object Boolean]",u="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",f="[object Map]",g="[object Number]",m="[object Object]",v="[object RegExp]",y="[object Set]",b="[object String]",S="[object Symbol]",E="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",P="[object Float32Array]",C="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",R="[object Uint8Array]",D="[object Uint16Array]",x="[object Uint32Array]",k=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,N=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,F=/[&<>"']/g,M=RegExp(j.source),L=RegExp(F.source),U=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,B=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,$=RegExp(G.source),K=/^\s+|\s+$/g,z=/^\s+/,Y=/\s+$/,J=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ee=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ne=/\w*$/,re=/^[-+]0x[0-9a-f]+$/i,ie=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,se=/^0o[0-7]+$/i,ae=/^(?:0|[1-9]\d*)$/,ce=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,le=/($^)/,ue=/['\n\r\u2028\u2029\\]/g,de="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",he="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pe="[\\ud800-\\udfff]",fe="["+he+"]",ge="["+de+"]",me="\\d+",ve="[\\u2700-\\u27bf]",ye="[a-z\\xdf-\\xf6\\xf8-\\xff]",be="[^\\ud800-\\udfff"+he+me+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Se="\\ud83c[\\udffb-\\udfff]",Ee="[^\\ud800-\\udfff]",we="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Ce="(?:"+ye+"|"+be+")",Te="(?:"+Pe+"|"+be+")",Ie="(?:"+ge+"|"+Se+")"+"?",Oe="[\\ufe0e\\ufe0f]?"+Ie+("(?:\\u200d(?:"+[Ee,we,_e].join("|")+")[\\ufe0e\\ufe0f]?"+Ie+")*"),Re="(?:"+[ve,we,_e].join("|")+")"+Oe,De="(?:"+[Ee+ge+"?",ge,we,_e,pe].join("|")+")",xe=RegExp("[']","g"),ke=RegExp(ge,"g"),Ae=RegExp(Se+"(?="+Se+")|"+De+Oe,"g"),Ne=RegExp([Pe+"?"+ye+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[fe,Pe,"$"].join("|")+")",Te+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[fe,Pe+Ce,"$"].join("|")+")",Pe+"?"+Ce+"+(?:['](?:d|ll|m|re|s|t|ve))?",Pe+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",me,Re].join("|"),"g"),je=RegExp("[\\u200d\\ud800-\\udfff"+de+"\\ufe0e\\ufe0f]"),Fe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Me=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Le=-1,Ue={};Ue[P]=Ue[C]=Ue[T]=Ue[I]=Ue[O]=Ue[R]=Ue["[object Uint8ClampedArray]"]=Ue[D]=Ue[x]=!0,Ue[a]=Ue[c]=Ue[w]=Ue[l]=Ue[_]=Ue[u]=Ue[d]=Ue[h]=Ue[f]=Ue[g]=Ue[m]=Ue[v]=Ue[y]=Ue[b]=Ue[E]=!1;var We={};We[a]=We[c]=We[w]=We[_]=We[l]=We[u]=We[P]=We[C]=We[T]=We[I]=We[O]=We[f]=We[g]=We[m]=We[v]=We[y]=We[b]=We[S]=We[R]=We["[object Uint8ClampedArray]"]=We[D]=We[x]=!0,We[d]=We[h]=We[E]=!1;var Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ve=parseFloat,He=parseInt,qe="object"==typeof global&&global&&global.Object===Object&&global,Ge="object"==typeof self&&self&&self.Object===Object&&self,$e=qe||Ge||Function("return this")(),Ke=t&&!t.nodeType&&t,ze=Ke&&"object"==typeof e&&e&&!e.nodeType&&e,Ye=ze&&ze.exports===Ke,Je=Ye&&qe.process,Xe=function(){try{var e=ze&&ze.require&&ze.require("util").types;return e||Je&&Je.binding&&Je.binding("util")}catch(e){}}(),Qe=Xe&&Xe.isArrayBuffer,Ze=Xe&&Xe.isDate,et=Xe&&Xe.isMap,tt=Xe&&Xe.isRegExp,nt=Xe&&Xe.isSet,rt=Xe&&Xe.isTypedArray;function it(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ot(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function st(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function at(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function ut(e,t){return!!(null==e?0:e.length)&&St(e,t,0)>-1}function dt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function ht(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ft(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function gt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function mt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var vt=Pt("length");function yt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function St(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):bt(e,wt,n)}function Et(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function wt(e){return e!=e}function _t(e,t){var n=null==e?0:e.length;return n?It(e,t)/n:NaN}function Pt(e){return function(t){return null==t?void 0:t[e]}}function Ct(e){return function(t){return null==e?void 0:e[t]}}function Tt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function It(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ot(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Rt(e){return function(t){return e(t)}}function Dt(e,t){return ht(t,(function(t){return e[t]}))}function xt(e,t){return e.has(t)}function kt(e,t){for(var n=-1,r=e.length;++n<r&&St(t,e[n],0)>-1;);return n}function At(e,t){for(var n=e.length;n--&&St(t,e[n],0)>-1;);return n}function Nt(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var jt=Ct({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Ft=Ct({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Mt(e){return"\\"+Be[e]}function Lt(e){return je.test(e)}function Ut(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Wt(e,t){return function(n){return e(t(n))}}function Bt(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var a=e[n];a!==t&&a!==o||(e[n]=o,s[i++]=n)}return s}function Vt(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function qt(e){return Lt(e)?function(e){var t=Ae.lastIndex=0;for(;Ae.test(e);)++t;return t}(e):vt(e)}function Gt(e){return Lt(e)?function(e){return e.match(Ae)||[]}(e):function(e){return e.split("")}(e)}var $t=Ct({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Kt=function e(t){var n,r=(t=null==t?$e:Kt.defaults($e.Object(),t,Kt.pick($e,Me))).Array,de=t.Date,he=t.Error,pe=t.Function,fe=t.Math,ge=t.Object,me=t.RegExp,ve=t.String,ye=t.TypeError,be=r.prototype,Se=pe.prototype,Ee=ge.prototype,we=t["__core-js_shared__"],_e=Se.toString,Pe=Ee.hasOwnProperty,Ce=0,Te=(n=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ie=Ee.toString,Oe=_e.call(ge),Re=$e._,De=me("^"+_e.call(Pe).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ae=Ye?t.Buffer:void 0,je=t.Symbol,Be=t.Uint8Array,qe=Ae?Ae.allocUnsafe:void 0,Ge=Wt(ge.getPrototypeOf,ge),Ke=ge.create,ze=Ee.propertyIsEnumerable,Je=be.splice,Xe=je?je.isConcatSpreadable:void 0,vt=je?je.iterator:void 0,Ct=je?je.toStringTag:void 0,zt=function(){try{var e=Zi(ge,"defineProperty");return e({},"",{}),e}catch(e){}}(),Yt=t.clearTimeout!==$e.clearTimeout&&t.clearTimeout,Jt=de&&de.now!==$e.Date.now&&de.now,Xt=t.setTimeout!==$e.setTimeout&&t.setTimeout,Qt=fe.ceil,Zt=fe.floor,en=ge.getOwnPropertySymbols,tn=Ae?Ae.isBuffer:void 0,nn=t.isFinite,rn=be.join,on=Wt(ge.keys,ge),sn=fe.max,an=fe.min,cn=de.now,ln=t.parseInt,un=fe.random,dn=be.reverse,hn=Zi(t,"DataView"),pn=Zi(t,"Map"),fn=Zi(t,"Promise"),gn=Zi(t,"Set"),mn=Zi(t,"WeakMap"),vn=Zi(ge,"create"),yn=mn&&new mn,bn={},Sn=Io(hn),En=Io(pn),wn=Io(fn),_n=Io(gn),Pn=Io(mn),Cn=je?je.prototype:void 0,Tn=Cn?Cn.valueOf:void 0,In=Cn?Cn.toString:void 0;function On(e){if(qs(e)&&!As(e)&&!(e instanceof kn)){if(e instanceof xn)return e;if(Pe.call(e,"__wrapped__"))return Oo(e)}return new xn(e)}var Rn=function(){function e(){}return function(t){if(!Hs(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Dn(){}function xn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function An(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new jn;++t<n;)this.add(e[t])}function Mn(e){var t=this.__data__=new Nn(e);this.size=t.size}function Ln(e,t){var n=As(e),r=!n&&ks(e),i=!n&&!r&&Ms(e),o=!n&&!r&&!i&&Qs(e),s=n||r||i||o,a=s?Ot(e.length,ve):[],c=a.length;for(var l in e)!t&&!Pe.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||so(l,c))||a.push(l);return a}function Un(e){var t=e.length;return t?e[Fr(0,t-1)]:void 0}function Wn(e,t){return Po(vi(e),Yn(t,0,e.length))}function Bn(e){return Po(vi(e))}function Vn(e,t,n){(void 0!==n&&!Rs(e[t],n)||void 0===n&&!(t in e))&&Kn(e,t,n)}function Hn(e,t,n){var r=e[t];Pe.call(e,t)&&Rs(r,n)&&(void 0!==n||t in e)||Kn(e,t,n)}function qn(e,t){for(var n=e.length;n--;)if(Rs(e[n][0],t))return n;return-1}function Gn(e,t,n,r){return er(e,(function(e,i,o){t(r,e,n(e),o)})),r}function $n(e,t){return e&&yi(t,Sa(t),e)}function Kn(e,t,n){"__proto__"==t&&zt?zt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function zn(e,t){for(var n=-1,i=t.length,o=r(i),s=null==e;++n<i;)o[n]=s?void 0:ga(e,t[n]);return o}function Yn(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function Jn(e,t,n,r,i,o){var s,c=1&t,d=2&t,E=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Hs(e))return e;var k=As(e);if(k){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Pe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return vi(e,s)}else{var A=no(e),N=A==h||A==p;if(Ms(e))return di(e,c);if(A==m||A==a||N&&!i){if(s=d||N?{}:io(e),!c)return d?function(e,t){return yi(e,to(e),t)}(e,function(e,t){return e&&yi(t,Ea(t),e)}(s,e)):function(e,t){return yi(e,eo(e),t)}(e,$n(s,e))}else{if(!We[A])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case w:return hi(e);case l:case u:return new r(+e);case _:return function(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case P:case C:case T:case I:case O:case R:case"[object Uint8ClampedArray]":case D:case x:return pi(e,n);case f:return new r;case g:case b:return new r(e);case v:return function(e){var t=new e.constructor(e.source,ne.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return new r;case S:return i=e,Tn?ge(Tn.call(i)):{}}var i}(e,A,c)}}o||(o=new Mn);var j=o.get(e);if(j)return j;o.set(e,s),Ys(e)?e.forEach((function(r){s.add(Jn(r,t,n,r,e,o))})):Gs(e)&&e.forEach((function(r,i){s.set(i,Jn(r,t,n,i,e,o))}));var F=k?void 0:(E?d?$i:Gi:d?Ea:Sa)(e);return st(F||e,(function(r,i){F&&(r=e[i=r]),Hn(s,i,Jn(r,t,n,i,e,o))})),s}function Xn(e,t,n){var r=n.length;if(null==e)return!r;for(e=ge(e);r--;){var i=n[r],o=t[i],s=e[i];if(void 0===s&&!(i in e)||!o(s))return!1}return!0}function Qn(e,t,n){if("function"!=typeof e)throw new ye(i);return So((function(){e.apply(void 0,n)}),t)}function Zn(e,t,n,r){var i=-1,o=ut,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=ht(t,Rt(n))),r?(o=dt,s=!1):t.length>=200&&(o=xt,s=!1,t=new Fn(t));e:for(;++i<a;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,s&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(u)}else o(t,d,r)||c.push(u)}return c}On.templateSettings={escape:U,evaluate:W,interpolate:B,variable:"",imports:{_:On}},On.prototype=Dn.prototype,On.prototype.constructor=On,xn.prototype=Rn(Dn.prototype),xn.prototype.constructor=xn,kn.prototype=Rn(Dn.prototype),kn.prototype.constructor=kn,An.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},An.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},An.prototype.get=function(e){var t=this.__data__;if(vn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Pe.call(t,e)?t[e]:void 0},An.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:Pe.call(t,e)},An.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(e){var t=this.__data__,n=qn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},Nn.prototype.get=function(e){var t=this.__data__,n=qn(t,e);return n<0?void 0:t[n][1]},Nn.prototype.has=function(e){return qn(this.__data__,e)>-1},Nn.prototype.set=function(e,t){var n=this.__data__,r=qn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},jn.prototype.clear=function(){this.size=0,this.__data__={hash:new An,map:new(pn||Nn),string:new An}},jn.prototype.delete=function(e){var t=Xi(this,e).delete(e);return this.size-=t?1:0,t},jn.prototype.get=function(e){return Xi(this,e).get(e)},jn.prototype.has=function(e){return Xi(this,e).has(e)},jn.prototype.set=function(e,t){var n=Xi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Fn.prototype.add=Fn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Fn.prototype.has=function(e){return this.__data__.has(e)},Mn.prototype.clear=function(){this.__data__=new Nn,this.size=0},Mn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Mn.prototype.get=function(e){return this.__data__.get(e)},Mn.prototype.has=function(e){return this.__data__.has(e)},Mn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Nn){var r=n.__data__;if(!pn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jn(r)}return n.set(e,t),this.size=n.size,this};var er=Ei(cr),tr=Ei(lr,!0);function nr(e,t){var n=!0;return er(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function rr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!Xs(s):n(s,a)))var a=s,c=o}return c}function ir(e,t){var n=[];return er(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function or(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=oo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?or(a,t-1,n,r,i):pt(i,a):r||(i[i.length]=a)}return i}var sr=wi(),ar=wi(!0);function cr(e,t){return e&&sr(e,t,Sa)}function lr(e,t){return e&&ar(e,t,Sa)}function ur(e,t){return lt(t,(function(t){return Ws(e[t])}))}function dr(e,t){for(var n=0,r=(t=ai(t,e)).length;null!=e&&n<r;)e=e[To(t[n++])];return n&&n==r?e:void 0}function hr(e,t,n){var r=t(e);return As(e)?r:pt(r,n(e))}function pr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ct&&Ct in ge(e)?function(e){var t=Pe.call(e,Ct),n=e[Ct];try{e[Ct]=void 0;var r=!0}catch(e){}var i=Ie.call(e);r&&(t?e[Ct]=n:delete e[Ct]);return i}(e):function(e){return Ie.call(e)}(e)}function fr(e,t){return e>t}function gr(e,t){return null!=e&&Pe.call(e,t)}function mr(e,t){return null!=e&&t in ge(e)}function vr(e,t,n){for(var i=n?dt:ut,o=e[0].length,s=e.length,a=s,c=r(s),l=1/0,u=[];a--;){var d=e[a];a&&t&&(d=ht(d,Rt(t))),l=an(d.length,l),c[a]=!n&&(t||o>=120&&d.length>=120)?new Fn(a&&d):void 0}d=e[0];var h=-1,p=c[0];e:for(;++h<o&&u.length<l;){var f=d[h],g=t?t(f):f;if(f=n||0!==f?f:0,!(p?xt(p,g):i(u,g,n))){for(a=s;--a;){var m=c[a];if(!(m?xt(m,g):i(e[a],g,n)))continue e}p&&p.push(g),u.push(f)}}return u}function yr(e,t,n){var r=null==(e=mo(e,t=ai(t,e)))?e:e[To(Uo(t))];return null==r?void 0:it(r,e,n)}function br(e){return qs(e)&&pr(e)==a}function Sr(e,t,n,r,i){return e===t||(null==e||null==t||!qs(e)&&!qs(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var s=As(e),h=As(t),p=s?c:no(e),E=h?c:no(t),P=(p=p==a?m:p)==m,C=(E=E==a?m:E)==m,T=p==E;if(T&&Ms(e)){if(!Ms(t))return!1;s=!0,P=!1}if(T&&!P)return o||(o=new Mn),s||Qs(e)?Hi(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!o(new Be(e),new Be(t)));case l:case u:case g:return Rs(+e,+t);case d:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case f:var a=Ut;case y:var c=1&r;if(a||(a=Vt),e.size!=t.size&&!c)return!1;var h=s.get(e);if(h)return h==t;r|=2,s.set(e,t);var p=Hi(a(e),a(t),r,i,o,s);return s.delete(e),p;case S:if(Tn)return Tn.call(e)==Tn.call(t)}return!1}(e,t,p,n,r,i,o);if(!(1&n)){var I=P&&Pe.call(e,"__wrapped__"),O=C&&Pe.call(t,"__wrapped__");if(I||O){var R=I?e.value():e,D=O?t.value():t;return o||(o=new Mn),i(R,D,n,r,o)}}if(!T)return!1;return o||(o=new Mn),function(e,t,n,r,i,o){var s=1&n,a=Gi(e),c=a.length,l=Gi(t).length;if(c!=l&&!s)return!1;var u=c;for(;u--;){var d=a[u];if(!(s?d in t:Pe.call(t,d)))return!1}var h=o.get(e),p=o.get(t);if(h&&p)return h==t&&p==e;var f=!0;o.set(e,t),o.set(t,e);var g=s;for(;++u<c;){d=a[u];var m=e[d],v=t[d];if(r)var y=s?r(v,m,d,t,e,o):r(m,v,d,e,t,o);if(!(void 0===y?m===v||i(m,v,n,r,o):y)){f=!1;break}g||(g="constructor"==d)}if(f&&!g){var b=e.constructor,S=t.constructor;b==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof S&&S instanceof S||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o)}(e,t,n,r,Sr,i))}function Er(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=ge(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var c=(a=n[i])[0],l=e[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in e))return!1}else{var d=new Mn;if(r)var h=r(l,u,c,e,t,d);if(!(void 0===h?Sr(u,l,3,r,d):h))return!1}}return!0}function wr(e){return!(!Hs(e)||(t=e,Te&&Te in t))&&(Ws(e)?De:oe).test(Io(e));var t}function _r(e){return"function"==typeof e?e:null==e?$a:"object"==typeof e?As(e)?Rr(e[0],e[1]):Or(e):tc(e)}function Pr(e){if(!ho(e))return on(e);var t=[];for(var n in ge(e))Pe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Cr(e){if(!Hs(e))return function(e){var t=[];if(null!=e)for(var n in ge(e))t.push(n);return t}(e);var t=ho(e),n=[];for(var r in e)("constructor"!=r||!t&&Pe.call(e,r))&&n.push(r);return n}function Tr(e,t){return e<t}function Ir(e,t){var n=-1,i=js(e)?r(e.length):[];return er(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Or(e){var t=Qi(e);return 1==t.length&&t[0][2]?fo(t[0][0],t[0][1]):function(n){return n===e||Er(n,e,t)}}function Rr(e,t){return co(e)&&po(t)?fo(To(e),t):function(n){var r=ga(n,e);return void 0===r&&r===t?ma(n,e):Sr(t,r,3)}}function Dr(e,t,n,r,i){e!==t&&sr(t,(function(o,s){if(i||(i=new Mn),Hs(o))!function(e,t,n,r,i,o,s){var a=yo(e,n),c=yo(t,n),l=s.get(c);if(l)return void Vn(e,n,l);var u=o?o(a,c,n+"",e,t,s):void 0,d=void 0===u;if(d){var h=As(c),p=!h&&Ms(c),f=!h&&!p&&Qs(c);u=c,h||p||f?As(a)?u=a:Fs(a)?u=vi(a):p?(d=!1,u=di(c,!0)):f?(d=!1,u=pi(c,!0)):u=[]:Ks(c)||ks(c)?(u=a,ks(a)?u=sa(a):Hs(a)&&!Ws(a)||(u=io(c))):d=!1}d&&(s.set(c,u),i(u,c,r,o,s),s.delete(c));Vn(e,n,u)}(e,t,s,n,Dr,r,i);else{var a=r?r(yo(e,s),o,s+"",e,t,i):void 0;void 0===a&&(a=o),Vn(e,s,a)}}),Ea)}function xr(e,t){var n=e.length;if(n)return so(t+=t<0?n:0,n)?e[t]:void 0}function kr(e,t,n){t=t.length?ht(t,(function(e){return As(e)?function(t){return dr(t,1===e.length?e[0]:e)}:e})):[$a];var r=-1;return t=ht(t,Rt(Ji())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ir(e,(function(e,n,i){return{criteria:ht(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var c=fi(i[r],o[r]);if(c){if(r>=a)return c;var l=n[r];return c*("desc"==l?-1:1)}}return e.index-t.index}(e,t,n)}))}function Ar(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=dr(e,s);n(a,s)&&Br(o,ai(s,e),a)}return o}function Nr(e,t,n,r){var i=r?Et:St,o=-1,s=t.length,a=e;for(e===t&&(t=vi(t)),n&&(a=ht(e,Rt(n)));++o<s;)for(var c=0,l=t[o],u=n?n(l):l;(c=i(a,u,c,r))>-1;)a!==e&&Je.call(a,c,1),Je.call(e,c,1);return e}function jr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;so(i)?Je.call(e,i,1):Zr(e,i)}}return e}function Fr(e,t){return e+Zt(un()*(t-e+1))}function Mr(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Zt(t/2))&&(e+=e)}while(t);return n}function Lr(e,t){return Eo(go(e,t,$a),e+"")}function Ur(e){return Un(Ra(e))}function Wr(e,t){var n=Ra(e);return Po(n,Yn(t,0,n.length))}function Br(e,t,n,r){if(!Hs(e))return e;for(var i=-1,o=(t=ai(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var c=To(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var u=a[c];void 0===(l=r?r(u,c,a):void 0)&&(l=Hs(u)?u:so(t[i+1])?[]:{})}Hn(a,c,l),a=a[c]}return e}var Vr=yn?function(e,t){return yn.set(e,t),e}:$a,Hr=zt?function(e,t){return zt(e,"toString",{configurable:!0,enumerable:!1,value:Ha(t),writable:!0})}:$a;function qr(e){return Po(Ra(e))}function Gr(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function $r(e,t){var n;return er(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function Kr(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!Xs(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return zr(e,t,$a,n)}function zr(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,a=null===t,c=Xs(t),l=void 0===t;i<o;){var u=Zt((i+o)/2),d=n(e[u]),h=void 0!==d,p=null===d,f=d==d,g=Xs(d);if(s)var m=r||f;else m=l?f&&(r||h):a?f&&h&&(r||!p):c?f&&h&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);m?i=u+1:o=u}return an(o,4294967294)}function Yr(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Rs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function Jr(e){return"number"==typeof e?e:Xs(e)?NaN:+e}function Xr(e){if("string"==typeof e)return e;if(As(e))return ht(e,Xr)+"";if(Xs(e))return In?In.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Qr(e,t,n){var r=-1,i=ut,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=dt;else if(o>=200){var l=t?null:Mi(e);if(l)return Vt(l);s=!1,i=xt,c=new Fn}else c=t?[]:a;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,s&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),a.push(u)}else i(c,d,n)||(c!==a&&c.push(d),a.push(u))}return a}function Zr(e,t){return null==(e=mo(e,t=ai(t,e)))||delete e[To(Uo(t))]}function ei(e,t,n,r){return Br(e,t,n(dr(e,t)),r)}function ti(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Gr(e,r?0:o,r?o+1:i):Gr(e,r?o+1:0,r?i:o)}function ni(e,t){var n=e;return n instanceof kn&&(n=n.value()),ft(t,(function(e,t){return t.func.apply(t.thisArg,pt([e],t.args))}),n)}function ri(e,t,n){var i=e.length;if(i<2)return i?Qr(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=Zn(s[o]||a,e[c],t,n));return Qr(or(s,1),t,n)}function ii(e,t,n){for(var r=-1,i=e.length,o=t.length,s={};++r<i;){var a=r<o?t[r]:void 0;n(s,e[r],a)}return s}function oi(e){return Fs(e)?e:[]}function si(e){return"function"==typeof e?e:$a}function ai(e,t){return As(e)?e:co(e,t)?[e]:Co(aa(e))}var ci=Lr;function li(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Gr(e,t,n)}var ui=Yt||function(e){return $e.clearTimeout(e)};function di(e,t){if(t)return e.slice();var n=e.length,r=qe?qe(n):new e.constructor(n);return e.copy(r),r}function hi(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function pi(e,t){var n=t?hi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function fi(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Xs(e),s=void 0!==t,a=null===t,c=t==t,l=Xs(t);if(!a&&!l&&!o&&e>t||o&&s&&c&&!a&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!c)return-1}return 0}function gi(e,t,n,i){for(var o=-1,s=e.length,a=n.length,c=-1,l=t.length,u=sn(s-a,0),d=r(l+u),h=!i;++c<l;)d[c]=t[c];for(;++o<a;)(h||o<s)&&(d[n[o]]=e[o]);for(;u--;)d[c++]=e[o++];return d}function mi(e,t,n,i){for(var o=-1,s=e.length,a=-1,c=n.length,l=-1,u=t.length,d=sn(s-c,0),h=r(d+u),p=!i;++o<d;)h[o]=e[o];for(var f=o;++l<u;)h[f+l]=t[l];for(;++a<c;)(p||o<s)&&(h[f+n[a]]=e[o++]);return h}function vi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function yi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),i?Kn(n,a,c):Hn(n,a,c)}return n}function bi(e,t){return function(n,r){var i=As(n)?ot:Gn,o=t?t():{};return i(n,e,Ji(r,2),o)}}function Si(e){return Lr((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,s&&ao(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=ge(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t}))}function Ei(e,t){return function(n,r){if(null==n)return n;if(!js(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=ge(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function wi(e){return function(t,n,r){for(var i=-1,o=ge(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function _i(e){return function(t){var n=Lt(t=aa(t))?Gt(t):void 0,r=n?n[0]:t.charAt(0),i=n?li(n,1).join(""):t.slice(1);return r[e]()+i}}function Pi(e){return function(t){return ft(Wa(ka(t).replace(xe,"")),e,"")}}function Ci(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Rn(e.prototype),r=e.apply(n,t);return Hs(r)?r:n}}function Ti(e){return function(t,n,r){var i=ge(t);if(!js(t)){var o=Ji(n,3);t=Sa(t),n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:void 0}}function Ii(e){return qi((function(t){var n=t.length,r=n,o=xn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ye(i);if(o&&!a&&"wrapper"==zi(s))var a=new xn([],!0)}for(r=a?r:n;++r<n;){var c=zi(s=t[r]),l="wrapper"==c?Ki(s):void 0;a=l&&lo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[zi(l[0])].apply(a,l[3]):1==s.length&&lo(s)?a[c]():a.thru(s)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&As(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Oi(e,t,n,i,o,s,a,c,l,u){var d=128&t,h=1&t,p=2&t,f=24&t,g=512&t,m=p?void 0:Ci(e);return function v(){for(var y=arguments.length,b=r(y),S=y;S--;)b[S]=arguments[S];if(f)var E=Yi(v),w=Nt(b,E);if(i&&(b=gi(b,i,o,f)),s&&(b=mi(b,s,a,f)),y-=w,f&&y<u){var _=Bt(b,E);return ji(e,t,Oi,v.placeholder,n,b,_,c,l,u-y)}var P=h?n:this,C=p?P[e]:e;return y=b.length,c?b=vo(b,c):g&&y>1&&b.reverse(),d&&l<y&&(b.length=l),this&&this!==$e&&this instanceof v&&(C=m||Ci(C)),C.apply(P,b)}}function Ri(e,t){return function(n,r){return function(e,t,n,r){return cr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Di(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Xr(n),r=Xr(r)):(n=Jr(n),r=Jr(r)),i=e(n,r)}return i}}function xi(e){return qi((function(t){return t=ht(t,Rt(Ji())),Lr((function(n){var r=this;return e(t,(function(e){return it(e,r,n)}))}))}))}function ki(e,t){var n=(t=void 0===t?" ":Xr(t)).length;if(n<2)return n?Mr(t,e):t;var r=Mr(t,Qt(e/qt(t)));return Lt(t)?li(Gt(r),0,e).join(""):r.slice(0,e)}function Ai(e){return function(t,n,i){return i&&"number"!=typeof i&&ao(t,n,i)&&(n=i=void 0),t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n,i){for(var o=-1,s=sn(Qt((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,i=void 0===i?t<n?1:-1:na(i),e)}}function Ni(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=oa(t),n=oa(n)),e(t,n)}}function ji(e,t,n,r,i,o,s,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=[e,t,i,u?o:void 0,u?s:void 0,u?void 0:o,u?void 0:s,a,c,l],h=n.apply(void 0,d);return lo(e)&&bo(h,d),h.placeholder=r,wo(h,e,t)}function Fi(e){var t=fe[e];return function(e,n){if(e=oa(e),(n=null==n?0:an(ra(n),292))&&nn(e)){var r=(aa(e)+"e").split("e");return+((r=(aa(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Mi=gn&&1/Vt(new gn([,-0]))[1]==1/0?function(e){return new gn(e)}:Xa;function Li(e){return function(t){var n=no(t);return n==f?Ut(t):n==y?Ht(t):function(e,t){return ht(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ui(e,t,n,s,a,c,l,u){var d=2&t;if(!d&&"function"!=typeof e)throw new ye(i);var h=s?s.length:0;if(h||(t&=-97,s=a=void 0),l=void 0===l?l:sn(ra(l),0),u=void 0===u?u:ra(u),h-=a?a.length:0,64&t){var p=s,f=a;s=a=void 0}var g=d?void 0:Ki(e),m=[e,t,n,s,a,p,f,c,l,u];if(g&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?gi(l,c,t[4]):c,e[4]=l?Bt(e[3],o):t[4]}(c=t[5])&&(l=e[5],e[5]=l?mi(l,c,t[6]):c,e[6]=l?Bt(e[5],o):t[6]);(c=t[7])&&(e[7]=c);128&r&&(e[8]=null==e[8]?t[8]:an(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(m,g),e=m[0],t=m[1],n=m[2],s=m[3],a=m[4],!(u=m[9]=void 0===m[9]?d?0:e.length:sn(m[9]-h,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=Ci(e);return function o(){for(var s=arguments.length,a=r(s),c=s,l=Yi(o);c--;)a[c]=arguments[c];var u=s<3&&a[0]!==l&&a[s-1]!==l?[]:Bt(a,l);if((s-=u.length)<n)return ji(e,t,Oi,o.placeholder,void 0,a,u,void 0,void 0,n-s);var d=this&&this!==$e&&this instanceof o?i:e;return it(d,this,a)}}(e,t,u):32!=t&&33!=t||a.length?Oi.apply(void 0,m):function(e,t,n,i){var o=1&t,s=Ci(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=i.length,d=r(u+c),h=this&&this!==$e&&this instanceof t?s:e;++l<u;)d[l]=i[l];for(;c--;)d[l++]=arguments[++a];return it(h,o?n:this,d)}}(e,t,n,s);else var v=function(e,t,n){var r=1&t,i=Ci(e);return function t(){var o=this&&this!==$e&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return wo((g?Vr:bo)(v,m),e,t)}function Wi(e,t,n,r){return void 0===e||Rs(e,Ee[n])&&!Pe.call(r,n)?t:e}function Bi(e,t,n,r,i,o){return Hs(e)&&Hs(t)&&(o.set(t,e),Dr(e,t,void 0,Bi,o),o.delete(t)),e}function Vi(e){return Ks(e)?void 0:e}function Hi(e,t,n,r,i,o){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=2&n?new Fn:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var f=e[d],g=t[d];if(r)var m=s?r(g,f,d,t,e,o):r(f,g,d,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!mt(t,(function(e,t){if(!xt(p,t)&&(f===e||i(f,e,n,r,o)))return p.push(t)}))){h=!1;break}}else if(f!==g&&!i(f,g,n,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function qi(e){return Eo(go(e,void 0,No),e+"")}function Gi(e){return hr(e,Sa,eo)}function $i(e){return hr(e,Ea,to)}var Ki=yn?function(e){return yn.get(e)}:Xa;function zi(e){for(var t=e.name+"",n=bn[t],r=Pe.call(bn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Yi(e){return(Pe.call(On,"placeholder")?On:e).placeholder}function Ji(){var e=On.iteratee||Ka;return e=e===Ka?_r:e,arguments.length?e(arguments[0],arguments[1]):e}function Xi(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Qi(e){for(var t=Sa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,po(i)]}return t}function Zi(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wr(n)?n:void 0}var eo=en?function(e){return null==e?[]:(e=ge(e),lt(en(e),(function(t){return ze.call(e,t)})))}:ic,to=en?function(e){for(var t=[];e;)pt(t,eo(e)),e=Ge(e);return t}:ic,no=pr;function ro(e,t,n){for(var r=-1,i=(t=ai(t,e)).length,o=!1;++r<i;){var s=To(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Vs(i)&&so(s,i)&&(As(e)||ks(e))}function io(e){return"function"!=typeof e.constructor||ho(e)?{}:Rn(Ge(e))}function oo(e){return As(e)||ks(e)||!!(Xe&&e&&e[Xe])}function so(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ao(e,t,n){if(!Hs(n))return!1;var r=typeof t;return!!("number"==r?js(n)&&so(t,n.length):"string"==r&&t in n)&&Rs(n[t],e)}function co(e,t){if(As(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Xs(e))||(H.test(e)||!V.test(e)||null!=t&&e in ge(t))}function lo(e){var t=zi(e),n=On[t];if("function"!=typeof n||!(t in kn.prototype))return!1;if(e===n)return!0;var r=Ki(n);return!!r&&e===r[0]}(hn&&no(new hn(new ArrayBuffer(1)))!=_||pn&&no(new pn)!=f||fn&&"[object Promise]"!=no(fn.resolve())||gn&&no(new gn)!=y||mn&&no(new mn)!=E)&&(no=function(e){var t=pr(e),n=t==m?e.constructor:void 0,r=n?Io(n):"";if(r)switch(r){case Sn:return _;case En:return f;case wn:return"[object Promise]";case _n:return y;case Pn:return E}return t});var uo=we?Ws:oc;function ho(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ee)}function po(e){return e==e&&!Hs(e)}function fo(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in ge(n)))}}function go(e,t,n){return t=sn(void 0===t?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=sn(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(a),it(e,this,c)}}function mo(e,t){return t.length<2?e:dr(e,Gr(t,0,-1))}function vo(e,t){for(var n=e.length,r=an(t.length,n),i=vi(e);r--;){var o=t[r];e[r]=so(o,n)?i[o]:void 0}return e}function yo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var bo=_o(Vr),So=Xt||function(e,t){return $e.setTimeout(e,t)},Eo=_o(Hr);function wo(e,t,n){var r=t+"";return Eo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(J,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return st(s,(function(n){var r="_."+n[0];t&n[1]&&!ut(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(X);return t?t[1].split(Q):[]}(r),n)))}function _o(e){var t=0,n=0;return function(){var r=cn(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Po(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=Fr(n,i),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Co=function(e){var t=_s(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(q,(function(e,n,r,i){t.push(r?i.replace(ee,"$1"):n||e)})),t}));function To(e){if("string"==typeof e||Xs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Io(e){if(null!=e){try{return _e.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oo(e){if(e instanceof kn)return e.clone();var t=new xn(e.__wrapped__,e.__chain__);return t.__actions__=vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ro=Lr((function(e,t){return Fs(e)?Zn(e,or(t,1,Fs,!0)):[]})),Do=Lr((function(e,t){var n=Uo(t);return Fs(n)&&(n=void 0),Fs(e)?Zn(e,or(t,1,Fs,!0),Ji(n,2)):[]})),xo=Lr((function(e,t){var n=Uo(t);return Fs(n)&&(n=void 0),Fs(e)?Zn(e,or(t,1,Fs,!0),void 0,n):[]}));function ko(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),bt(e,Ji(t,3),i)}function Ao(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=ra(n),i=n<0?sn(r+i,0):an(i,r-1)),bt(e,Ji(t,3),i,!0)}function No(e){return(null==e?0:e.length)?or(e,1):[]}function jo(e){return e&&e.length?e[0]:void 0}var Fo=Lr((function(e){var t=ht(e,oi);return t.length&&t[0]===e[0]?vr(t):[]})),Mo=Lr((function(e){var t=Uo(e),n=ht(e,oi);return t===Uo(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?vr(n,Ji(t,2)):[]})),Lo=Lr((function(e){var t=Uo(e),n=ht(e,oi);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?vr(n,void 0,t):[]}));function Uo(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Wo=Lr(Bo);function Bo(e,t){return e&&e.length&&t&&t.length?Nr(e,t):e}var Vo=qi((function(e,t){var n=null==e?0:e.length,r=zn(e,t);return jr(e,ht(t,(function(e){return so(e,n)?+e:e})).sort(fi)),r}));function Ho(e){return null==e?e:dn.call(e)}var qo=Lr((function(e){return Qr(or(e,1,Fs,!0))})),Go=Lr((function(e){var t=Uo(e);return Fs(t)&&(t=void 0),Qr(or(e,1,Fs,!0),Ji(t,2))})),$o=Lr((function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,Qr(or(e,1,Fs,!0),void 0,t)}));function Ko(e){if(!e||!e.length)return[];var t=0;return e=lt(e,(function(e){if(Fs(e))return t=sn(e.length,t),!0})),Ot(t,(function(t){return ht(e,Pt(t))}))}function zo(e,t){if(!e||!e.length)return[];var n=Ko(e);return null==t?n:ht(n,(function(e){return it(t,void 0,e)}))}var Yo=Lr((function(e,t){return Fs(e)?Zn(e,t):[]})),Jo=Lr((function(e){return ri(lt(e,Fs))})),Xo=Lr((function(e){var t=Uo(e);return Fs(t)&&(t=void 0),ri(lt(e,Fs),Ji(t,2))})),Qo=Lr((function(e){var t=Uo(e);return t="function"==typeof t?t:void 0,ri(lt(e,Fs),void 0,t)})),Zo=Lr(Ko);var es=Lr((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,zo(e,n)}));function ts(e){var t=On(e);return t.__chain__=!0,t}function ns(e,t){return t(e)}var rs=qi((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return zn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof kn&&so(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ns,args:[i],thisArg:void 0}),new xn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));var is=bi((function(e,t,n){Pe.call(e,n)?++e[n]:Kn(e,n,1)}));var os=Ti(ko),ss=Ti(Ao);function as(e,t){return(As(e)?st:er)(e,Ji(t,3))}function cs(e,t){return(As(e)?at:tr)(e,Ji(t,3))}var ls=bi((function(e,t,n){Pe.call(e,n)?e[n].push(t):Kn(e,n,[t])}));var us=Lr((function(e,t,n){var i=-1,o="function"==typeof t,s=js(e)?r(e.length):[];return er(e,(function(e){s[++i]=o?it(t,e,n):yr(e,t,n)})),s})),ds=bi((function(e,t,n){Kn(e,n,t)}));function hs(e,t){return(As(e)?ht:Ir)(e,Ji(t,3))}var ps=bi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var fs=Lr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ao(e,t[0],t[1])?t=[]:n>2&&ao(t[0],t[1],t[2])&&(t=[t[0]]),kr(e,or(t,1),[])})),gs=Jt||function(){return $e.Date.now()};function ms(e,t,n){return t=n?void 0:t,Ui(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function vs(e,t){var n;if("function"!=typeof t)throw new ye(i);return e=ra(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var ys=Lr((function(e,t,n){var r=1;if(n.length){var i=Bt(n,Yi(ys));r|=32}return Ui(e,r,t,n,i)})),bs=Lr((function(e,t,n){var r=3;if(n.length){var i=Bt(n,Yi(bs));r|=32}return Ui(t,r,e,n,i)}));function Ss(e,t,n){var r,o,s,a,c,l,u=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new ye(i);function f(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function g(e){return u=e,c=So(v,t),d?f(e):a}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-u>=s}function v(){var e=gs();if(m(e))return y(e);c=So(v,function(e){var n=t-(e-l);return h?an(n,s-(e-u)):n}(e))}function y(e){return c=void 0,p&&r?f(e):(r=o=void 0,a)}function b(){var e=gs(),n=m(e);if(r=arguments,o=this,l=e,n){if(void 0===c)return g(l);if(h)return ui(c),c=So(v,t),f(l)}return void 0===c&&(c=So(v,t)),a}return t=oa(t)||0,Hs(n)&&(d=!!n.leading,s=(h="maxWait"in n)?sn(oa(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){void 0!==c&&ui(c),u=0,r=l=o=c=void 0},b.flush=function(){return void 0===c?a:y(gs())},b}var Es=Lr((function(e,t){return Qn(e,1,t)})),ws=Lr((function(e,t,n){return Qn(e,oa(t)||0,n)}));function _s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ye(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(_s.Cache||jn),n}function Ps(e){if("function"!=typeof e)throw new ye(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}_s.Cache=jn;var Cs=ci((function(e,t){var n=(t=1==t.length&&As(t[0])?ht(t[0],Rt(Ji())):ht(or(t,1),Rt(Ji()))).length;return Lr((function(r){for(var i=-1,o=an(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return it(e,this,r)}))})),Ts=Lr((function(e,t){return Ui(e,32,void 0,t,Bt(t,Yi(Ts)))})),Is=Lr((function(e,t){return Ui(e,64,void 0,t,Bt(t,Yi(Is)))})),Os=qi((function(e,t){return Ui(e,256,void 0,void 0,void 0,t)}));function Rs(e,t){return e===t||e!=e&&t!=t}var Ds=Ni(fr),xs=Ni((function(e,t){return e>=t})),ks=br(function(){return arguments}())?br:function(e){return qs(e)&&Pe.call(e,"callee")&&!ze.call(e,"callee")},As=r.isArray,Ns=Qe?Rt(Qe):function(e){return qs(e)&&pr(e)==w};function js(e){return null!=e&&Vs(e.length)&&!Ws(e)}function Fs(e){return qs(e)&&js(e)}var Ms=tn||oc,Ls=Ze?Rt(Ze):function(e){return qs(e)&&pr(e)==u};function Us(e){if(!qs(e))return!1;var t=pr(e);return t==d||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Ks(e)}function Ws(e){if(!Hs(e))return!1;var t=pr(e);return t==h||t==p||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Bs(e){return"number"==typeof e&&e==ra(e)}function Vs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Hs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qs(e){return null!=e&&"object"==typeof e}var Gs=et?Rt(et):function(e){return qs(e)&&no(e)==f};function $s(e){return"number"==typeof e||qs(e)&&pr(e)==g}function Ks(e){if(!qs(e)||pr(e)!=m)return!1;var t=Ge(e);if(null===t)return!0;var n=Pe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&_e.call(n)==Oe}var zs=tt?Rt(tt):function(e){return qs(e)&&pr(e)==v};var Ys=nt?Rt(nt):function(e){return qs(e)&&no(e)==y};function Js(e){return"string"==typeof e||!As(e)&&qs(e)&&pr(e)==b}function Xs(e){return"symbol"==typeof e||qs(e)&&pr(e)==S}var Qs=rt?Rt(rt):function(e){return qs(e)&&Vs(e.length)&&!!Ue[pr(e)]};var Zs=Ni(Tr),ea=Ni((function(e,t){return e<=t}));function ta(e){if(!e)return[];if(js(e))return Js(e)?Gt(e):vi(e);if(vt&&e[vt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[vt]());var t=no(e);return(t==f?Ut:t==y?Vt:Ra)(e)}function na(e){return e?(e=oa(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ra(e){var t=na(e),n=t%1;return t==t?n?t-n:t:0}function ia(e){return e?Yn(ra(e),0,4294967295):0}function oa(e){if("number"==typeof e)return e;if(Xs(e))return NaN;if(Hs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Hs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(K,"");var n=ie.test(e);return n||se.test(e)?He(e.slice(2),n?2:8):re.test(e)?NaN:+e}function sa(e){return yi(e,Ea(e))}function aa(e){return null==e?"":Xr(e)}var ca=Si((function(e,t){if(ho(t)||js(t))yi(t,Sa(t),e);else for(var n in t)Pe.call(t,n)&&Hn(e,n,t[n])})),la=Si((function(e,t){yi(t,Ea(t),e)})),ua=Si((function(e,t,n,r){yi(t,Ea(t),e,r)})),da=Si((function(e,t,n,r){yi(t,Sa(t),e,r)})),ha=qi(zn);var pa=Lr((function(e,t){e=ge(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&ao(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],s=Ea(o),a=-1,c=s.length;++a<c;){var l=s[a],u=e[l];(void 0===u||Rs(u,Ee[l])&&!Pe.call(e,l))&&(e[l]=o[l])}return e})),fa=Lr((function(e){return e.push(void 0,Bi),it(_a,void 0,e)}));function ga(e,t,n){var r=null==e?void 0:dr(e,t);return void 0===r?n:r}function ma(e,t){return null!=e&&ro(e,t,mr)}var va=Ri((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),e[t]=n}),Ha($a)),ya=Ri((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ie.call(t)),Pe.call(e,t)?e[t].push(n):e[t]=[n]}),Ji),ba=Lr(yr);function Sa(e){return js(e)?Ln(e):Pr(e)}function Ea(e){return js(e)?Ln(e,!0):Cr(e)}var wa=Si((function(e,t,n){Dr(e,t,n)})),_a=Si((function(e,t,n,r){Dr(e,t,n,r)})),Pa=qi((function(e,t){var n={};if(null==e)return n;var r=!1;t=ht(t,(function(t){return t=ai(t,e),r||(r=t.length>1),t})),yi(e,$i(e),n),r&&(n=Jn(n,7,Vi));for(var i=t.length;i--;)Zr(n,t[i]);return n}));var Ca=qi((function(e,t){return null==e?{}:function(e,t){return Ar(e,t,(function(t,n){return ma(e,n)}))}(e,t)}));function Ta(e,t){if(null==e)return{};var n=ht($i(e),(function(e){return[e]}));return t=Ji(t),Ar(e,n,(function(e,n){return t(e,n[0])}))}var Ia=Li(Sa),Oa=Li(Ea);function Ra(e){return null==e?[]:Dt(e,Sa(e))}var Da=Pi((function(e,t,n){return t=t.toLowerCase(),e+(n?xa(t):t)}));function xa(e){return Ua(aa(e).toLowerCase())}function ka(e){return(e=aa(e))&&e.replace(ce,jt).replace(ke,"")}var Aa=Pi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Na=Pi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),ja=_i("toLowerCase");var Fa=Pi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ma=Pi((function(e,t,n){return e+(n?" ":"")+Ua(t)}));var La=Pi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ua=_i("toUpperCase");function Wa(e,t,n){return e=aa(e),void 0===(t=n?void 0:t)?function(e){return Fe.test(e)}(e)?function(e){return e.match(Ne)||[]}(e):function(e){return e.match(Z)||[]}(e):e.match(t)||[]}var Ba=Lr((function(e,t){try{return it(e,void 0,t)}catch(e){return Us(e)?e:new he(e)}})),Va=qi((function(e,t){return st(t,(function(t){t=To(t),Kn(e,t,ys(e[t],e))})),e}));function Ha(e){return function(){return e}}var qa=Ii(),Ga=Ii(!0);function $a(e){return e}function Ka(e){return _r("function"==typeof e?e:Jn(e,1))}var za=Lr((function(e,t){return function(n){return yr(n,e,t)}})),Ya=Lr((function(e,t){return function(n){return yr(e,n,t)}}));function Ja(e,t,n){var r=Sa(t),i=ur(t,r);null!=n||Hs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=ur(t,Sa(t)));var o=!(Hs(n)&&"chain"in n&&!n.chain),s=Ws(e);return st(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pt([this.value()],arguments))})})),e}function Xa(){}var Qa=xi(ht),Za=xi(ct),ec=xi(mt);function tc(e){return co(e)?Pt(To(e)):function(e){return function(t){return dr(t,e)}}(e)}var nc=Ai(),rc=Ai(!0);function ic(){return[]}function oc(){return!1}var sc=Di((function(e,t){return e+t}),0),ac=Fi("ceil"),cc=Di((function(e,t){return e/t}),1),lc=Fi("floor");var uc,dc=Di((function(e,t){return e*t}),1),hc=Fi("round"),pc=Di((function(e,t){return e-t}),0);return On.after=function(e,t){if("function"!=typeof t)throw new ye(i);return e=ra(e),function(){if(--e<1)return t.apply(this,arguments)}},On.ary=ms,On.assign=ca,On.assignIn=la,On.assignInWith=ua,On.assignWith=da,On.at=ha,On.before=vs,On.bind=ys,On.bindAll=Va,On.bindKey=bs,On.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return As(e)?e:[e]},On.chain=ts,On.chunk=function(e,t,n){t=(n?ao(e,t,n):void 0===t)?1:sn(ra(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=r(Qt(i/t));o<i;)a[s++]=Gr(e,o,o+=t);return a},On.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},On.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return pt(As(n)?vi(n):[n],or(t,1))},On.cond=function(e){var t=null==e?0:e.length,n=Ji();return e=t?ht(e,(function(e){if("function"!=typeof e[1])throw new ye(i);return[n(e[0]),e[1]]})):[],Lr((function(n){for(var r=-1;++r<t;){var i=e[r];if(it(i[0],this,n))return it(i[1],this,n)}}))},On.conforms=function(e){return function(e){var t=Sa(e);return function(n){return Xn(n,e,t)}}(Jn(e,1))},On.constant=Ha,On.countBy=is,On.create=function(e,t){var n=Rn(e);return null==t?n:$n(n,t)},On.curry=function e(t,n,r){var i=Ui(t,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},On.curryRight=function e(t,n,r){var i=Ui(t,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=e.placeholder,i},On.debounce=Ss,On.defaults=pa,On.defaultsDeep=fa,On.defer=Es,On.delay=ws,On.difference=Ro,On.differenceBy=Do,On.differenceWith=xo,On.drop=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,(t=n||void 0===t?1:ra(t))<0?0:t,r):[]},On.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,0,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t):[]},On.dropRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0,!0):[]},On.dropWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!0):[]},On.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ao(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=ra(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:ra(r))<0&&(r+=i),r=n>r?0:ia(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},On.filter=function(e,t){return(As(e)?lt:ir)(e,Ji(t,3))},On.flatMap=function(e,t){return or(hs(e,t),1)},On.flatMapDeep=function(e,t){return or(hs(e,t),1/0)},On.flatMapDepth=function(e,t,n){return n=void 0===n?1:ra(n),or(hs(e,t),n)},On.flatten=No,On.flattenDeep=function(e){return(null==e?0:e.length)?or(e,1/0):[]},On.flattenDepth=function(e,t){return(null==e?0:e.length)?or(e,t=void 0===t?1:ra(t)):[]},On.flip=function(e){return Ui(e,512)},On.flow=qa,On.flowRight=Ga,On.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},On.functions=function(e){return null==e?[]:ur(e,Sa(e))},On.functionsIn=function(e){return null==e?[]:ur(e,Ea(e))},On.groupBy=ls,On.initial=function(e){return(null==e?0:e.length)?Gr(e,0,-1):[]},On.intersection=Fo,On.intersectionBy=Mo,On.intersectionWith=Lo,On.invert=va,On.invertBy=ya,On.invokeMap=us,On.iteratee=Ka,On.keyBy=ds,On.keys=Sa,On.keysIn=Ea,On.map=hs,On.mapKeys=function(e,t){var n={};return t=Ji(t,3),cr(e,(function(e,r,i){Kn(n,t(e,r,i),e)})),n},On.mapValues=function(e,t){var n={};return t=Ji(t,3),cr(e,(function(e,r,i){Kn(n,r,t(e,r,i))})),n},On.matches=function(e){return Or(Jn(e,1))},On.matchesProperty=function(e,t){return Rr(e,Jn(t,1))},On.memoize=_s,On.merge=wa,On.mergeWith=_a,On.method=za,On.methodOf=Ya,On.mixin=Ja,On.negate=Ps,On.nthArg=function(e){return e=ra(e),Lr((function(t){return xr(t,e)}))},On.omit=Pa,On.omitBy=function(e,t){return Ta(e,Ps(Ji(t)))},On.once=function(e){return vs(2,e)},On.orderBy=function(e,t,n,r){return null==e?[]:(As(t)||(t=null==t?[]:[t]),As(n=r?void 0:n)||(n=null==n?[]:[n]),kr(e,t,n))},On.over=Qa,On.overArgs=Cs,On.overEvery=Za,On.overSome=ec,On.partial=Ts,On.partialRight=Is,On.partition=ps,On.pick=Ca,On.pickBy=Ta,On.property=tc,On.propertyOf=function(e){return function(t){return null==e?void 0:dr(e,t)}},On.pull=Wo,On.pullAll=Bo,On.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Nr(e,t,Ji(n,2)):e},On.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Nr(e,t,void 0,n):e},On.pullAt=Vo,On.range=nc,On.rangeRight=rc,On.rearg=Os,On.reject=function(e,t){return(As(e)?lt:ir)(e,Ps(Ji(t,3)))},On.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=Ji(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return jr(e,i),n},On.rest=function(e,t){if("function"!=typeof e)throw new ye(i);return Lr(e,t=void 0===t?t:ra(t))},On.reverse=Ho,On.sampleSize=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ra(t),(As(e)?Wn:Wr)(e,t)},On.set=function(e,t,n){return null==e?e:Br(e,t,n)},On.setWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Br(e,t,n,r)},On.shuffle=function(e){return(As(e)?Bn:qr)(e)},On.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ao(e,t,n)?(t=0,n=r):(t=null==t?0:ra(t),n=void 0===n?r:ra(n)),Gr(e,t,n)):[]},On.sortBy=fs,On.sortedUniq=function(e){return e&&e.length?Yr(e):[]},On.sortedUniqBy=function(e,t){return e&&e.length?Yr(e,Ji(t,2)):[]},On.split=function(e,t,n){return n&&"number"!=typeof n&&ao(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=aa(e))&&("string"==typeof t||null!=t&&!zs(t))&&!(t=Xr(t))&&Lt(e)?li(Gt(e),0,n):e.split(t,n):[]},On.spread=function(e,t){if("function"!=typeof e)throw new ye(i);return t=null==t?0:sn(ra(t),0),Lr((function(n){var r=n[t],i=li(n,0,t);return r&&pt(i,r),it(e,this,i)}))},On.tail=function(e){var t=null==e?0:e.length;return t?Gr(e,1,t):[]},On.take=function(e,t,n){return e&&e.length?Gr(e,0,(t=n||void 0===t?1:ra(t))<0?0:t):[]},On.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?Gr(e,(t=r-(t=n||void 0===t?1:ra(t)))<0?0:t,r):[]},On.takeRightWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3),!1,!0):[]},On.takeWhile=function(e,t){return e&&e.length?ti(e,Ji(t,3)):[]},On.tap=function(e,t){return t(e),e},On.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new ye(i);return Hs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ss(e,t,{leading:r,maxWait:t,trailing:o})},On.thru=ns,On.toArray=ta,On.toPairs=Ia,On.toPairsIn=Oa,On.toPath=function(e){return As(e)?ht(e,To):Xs(e)?[e]:vi(Co(aa(e)))},On.toPlainObject=sa,On.transform=function(e,t,n){var r=As(e),i=r||Ms(e)||Qs(e);if(t=Ji(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Hs(e)&&Ws(o)?Rn(Ge(e)):{}}return(i?st:cr)(e,(function(e,r,i){return t(n,e,r,i)})),n},On.unary=function(e){return ms(e,1)},On.union=qo,On.unionBy=Go,On.unionWith=$o,On.uniq=function(e){return e&&e.length?Qr(e):[]},On.uniqBy=function(e,t){return e&&e.length?Qr(e,Ji(t,2)):[]},On.uniqWith=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Qr(e,void 0,t):[]},On.unset=function(e,t){return null==e||Zr(e,t)},On.unzip=Ko,On.unzipWith=zo,On.update=function(e,t,n){return null==e?e:ei(e,t,si(n))},On.updateWith=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:ei(e,t,si(n),r)},On.values=Ra,On.valuesIn=function(e){return null==e?[]:Dt(e,Ea(e))},On.without=Yo,On.words=Wa,On.wrap=function(e,t){return Ts(si(t),e)},On.xor=Jo,On.xorBy=Xo,On.xorWith=Qo,On.zip=Zo,On.zipObject=function(e,t){return ii(e||[],t||[],Hn)},On.zipObjectDeep=function(e,t){return ii(e||[],t||[],Br)},On.zipWith=es,On.entries=Ia,On.entriesIn=Oa,On.extend=la,On.extendWith=ua,Ja(On,On),On.add=sc,On.attempt=Ba,On.camelCase=Da,On.capitalize=xa,On.ceil=ac,On.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=oa(n))==n?n:0),void 0!==t&&(t=(t=oa(t))==t?t:0),Yn(oa(e),t,n)},On.clone=function(e){return Jn(e,4)},On.cloneDeep=function(e){return Jn(e,5)},On.cloneDeepWith=function(e,t){return Jn(e,5,t="function"==typeof t?t:void 0)},On.cloneWith=function(e,t){return Jn(e,4,t="function"==typeof t?t:void 0)},On.conformsTo=function(e,t){return null==t||Xn(e,t,Sa(t))},On.deburr=ka,On.defaultTo=function(e,t){return null==e||e!=e?t:e},On.divide=cc,On.endsWith=function(e,t,n){e=aa(e),t=Xr(t);var r=e.length,i=n=void 0===n?r:Yn(ra(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},On.eq=Rs,On.escape=function(e){return(e=aa(e))&&L.test(e)?e.replace(F,Ft):e},On.escapeRegExp=function(e){return(e=aa(e))&&$.test(e)?e.replace(G,"\\$&"):e},On.every=function(e,t,n){var r=As(e)?ct:nr;return n&&ao(e,t,n)&&(t=void 0),r(e,Ji(t,3))},On.find=os,On.findIndex=ko,On.findKey=function(e,t){return yt(e,Ji(t,3),cr)},On.findLast=ss,On.findLastIndex=Ao,On.findLastKey=function(e,t){return yt(e,Ji(t,3),lr)},On.floor=lc,On.forEach=as,On.forEachRight=cs,On.forIn=function(e,t){return null==e?e:sr(e,Ji(t,3),Ea)},On.forInRight=function(e,t){return null==e?e:ar(e,Ji(t,3),Ea)},On.forOwn=function(e,t){return e&&cr(e,Ji(t,3))},On.forOwnRight=function(e,t){return e&&lr(e,Ji(t,3))},On.get=ga,On.gt=Ds,On.gte=xs,On.has=function(e,t){return null!=e&&ro(e,t,gr)},On.hasIn=ma,On.head=jo,On.identity=$a,On.includes=function(e,t,n,r){e=js(e)?e:Ra(e),n=n&&!r?ra(n):0;var i=e.length;return n<0&&(n=sn(i+n,0)),Js(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&St(e,t,n)>-1},On.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ra(n);return i<0&&(i=sn(r+i,0)),St(e,t,i)},On.inRange=function(e,t,n){return t=na(t),void 0===n?(n=t,t=0):n=na(n),function(e,t,n){return e>=an(t,n)&&e<sn(t,n)}(e=oa(e),t,n)},On.invoke=ba,On.isArguments=ks,On.isArray=As,On.isArrayBuffer=Ns,On.isArrayLike=js,On.isArrayLikeObject=Fs,On.isBoolean=function(e){return!0===e||!1===e||qs(e)&&pr(e)==l},On.isBuffer=Ms,On.isDate=Ls,On.isElement=function(e){return qs(e)&&1===e.nodeType&&!Ks(e)},On.isEmpty=function(e){if(null==e)return!0;if(js(e)&&(As(e)||"string"==typeof e||"function"==typeof e.splice||Ms(e)||Qs(e)||ks(e)))return!e.length;var t=no(e);if(t==f||t==y)return!e.size;if(ho(e))return!Pr(e).length;for(var n in e)if(Pe.call(e,n))return!1;return!0},On.isEqual=function(e,t){return Sr(e,t)},On.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Sr(e,t,void 0,n):!!r},On.isError=Us,On.isFinite=function(e){return"number"==typeof e&&nn(e)},On.isFunction=Ws,On.isInteger=Bs,On.isLength=Vs,On.isMap=Gs,On.isMatch=function(e,t){return e===t||Er(e,t,Qi(t))},On.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,Er(e,t,Qi(t),n)},On.isNaN=function(e){return $s(e)&&e!=+e},On.isNative=function(e){if(uo(e))throw new he("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wr(e)},On.isNil=function(e){return null==e},On.isNull=function(e){return null===e},On.isNumber=$s,On.isObject=Hs,On.isObjectLike=qs,On.isPlainObject=Ks,On.isRegExp=zs,On.isSafeInteger=function(e){return Bs(e)&&e>=-9007199254740991&&e<=9007199254740991},On.isSet=Ys,On.isString=Js,On.isSymbol=Xs,On.isTypedArray=Qs,On.isUndefined=function(e){return void 0===e},On.isWeakMap=function(e){return qs(e)&&no(e)==E},On.isWeakSet=function(e){return qs(e)&&"[object WeakSet]"==pr(e)},On.join=function(e,t){return null==e?"":rn.call(e,t)},On.kebabCase=Aa,On.last=Uo,On.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=ra(n))<0?sn(r+i,0):an(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):bt(e,wt,i,!0)},On.lowerCase=Na,On.lowerFirst=ja,On.lt=Zs,On.lte=ea,On.max=function(e){return e&&e.length?rr(e,$a,fr):void 0},On.maxBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),fr):void 0},On.mean=function(e){return _t(e,$a)},On.meanBy=function(e,t){return _t(e,Ji(t,2))},On.min=function(e){return e&&e.length?rr(e,$a,Tr):void 0},On.minBy=function(e,t){return e&&e.length?rr(e,Ji(t,2),Tr):void 0},On.stubArray=ic,On.stubFalse=oc,On.stubObject=function(){return{}},On.stubString=function(){return""},On.stubTrue=function(){return!0},On.multiply=dc,On.nth=function(e,t){return e&&e.length?xr(e,ra(t)):void 0},On.noConflict=function(){return $e._===this&&($e._=Re),this},On.noop=Xa,On.now=gs,On.pad=function(e,t,n){e=aa(e);var r=(t=ra(t))?qt(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ki(Zt(i),n)+e+ki(Qt(i),n)},On.padEnd=function(e,t,n){e=aa(e);var r=(t=ra(t))?qt(e):0;return t&&r<t?e+ki(t-r,n):e},On.padStart=function(e,t,n){e=aa(e);var r=(t=ra(t))?qt(e):0;return t&&r<t?ki(t-r,n)+e:e},On.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),ln(aa(e).replace(z,""),t||0)},On.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ao(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=na(e),void 0===t?(t=e,e=0):t=na(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=un();return an(e+i*(t-e+Ve("1e-"+((i+"").length-1))),t)}return Fr(e,t)},On.reduce=function(e,t,n){var r=As(e)?ft:Tt,i=arguments.length<3;return r(e,Ji(t,4),n,i,er)},On.reduceRight=function(e,t,n){var r=As(e)?gt:Tt,i=arguments.length<3;return r(e,Ji(t,4),n,i,tr)},On.repeat=function(e,t,n){return t=(n?ao(e,t,n):void 0===t)?1:ra(t),Mr(aa(e),t)},On.replace=function(){var e=arguments,t=aa(e[0]);return e.length<3?t:t.replace(e[1],e[2])},On.result=function(e,t,n){var r=-1,i=(t=ai(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var o=null==e?void 0:e[To(t[r])];void 0===o&&(r=i,o=n),e=Ws(o)?o.call(e):o}return e},On.round=hc,On.runInContext=e,On.sample=function(e){return(As(e)?Un:Ur)(e)},On.size=function(e){if(null==e)return 0;if(js(e))return Js(e)?qt(e):e.length;var t=no(e);return t==f||t==y?e.size:Pr(e).length},On.snakeCase=Fa,On.some=function(e,t,n){var r=As(e)?mt:$r;return n&&ao(e,t,n)&&(t=void 0),r(e,Ji(t,3))},On.sortedIndex=function(e,t){return Kr(e,t)},On.sortedIndexBy=function(e,t,n){return zr(e,t,Ji(n,2))},On.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=Kr(e,t);if(r<n&&Rs(e[r],t))return r}return-1},On.sortedLastIndex=function(e,t){return Kr(e,t,!0)},On.sortedLastIndexBy=function(e,t,n){return zr(e,t,Ji(n,2),!0)},On.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=Kr(e,t,!0)-1;if(Rs(e[n],t))return n}return-1},On.startCase=Ma,On.startsWith=function(e,t,n){return e=aa(e),n=null==n?0:Yn(ra(n),0,e.length),t=Xr(t),e.slice(n,n+t.length)==t},On.subtract=pc,On.sum=function(e){return e&&e.length?It(e,$a):0},On.sumBy=function(e,t){return e&&e.length?It(e,Ji(t,2)):0},On.template=function(e,t,n){var r=On.templateSettings;n&&ao(e,t,n)&&(t=void 0),e=aa(e),t=ua({},t,r,Wi);var i,o,s=ua({},t.imports,r.imports,Wi),a=Sa(s),c=Dt(s,a),l=0,u=t.interpolate||le,d="__p += '",h=me((t.escape||le).source+"|"+u.source+"|"+(u===B?te:le).source+"|"+(t.evaluate||le).source+"|$","g"),p="//# sourceURL="+(Pe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Le+"]")+"\n";e.replace(h,(function(t,n,r,s,a,c){return r||(r=s),d+=e.slice(l,c).replace(ue,Mt),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var f=Pe.call(t,"variable")&&t.variable;f||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(k,""):d).replace(A,"$1").replace(N,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Ba((function(){return pe(a,p+"return "+d).apply(void 0,c)}));if(g.source=d,Us(g))throw g;return g},On.times=function(e,t){if((e=ra(e))<1||e>9007199254740991)return[];var n=4294967295,r=an(e,4294967295);e-=4294967295;for(var i=Ot(r,t=Ji(t));++n<e;)t(n);return i},On.toFinite=na,On.toInteger=ra,On.toLength=ia,On.toLower=function(e){return aa(e).toLowerCase()},On.toNumber=oa,On.toSafeInteger=function(e){return e?Yn(ra(e),-9007199254740991,9007199254740991):0===e?e:0},On.toString=aa,On.toUpper=function(e){return aa(e).toUpperCase()},On.trim=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(K,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e),i=Gt(t);return li(r,kt(r,i),At(r,i)+1).join("")},On.trimEnd=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(Y,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e);return li(r,0,At(r,Gt(t))+1).join("")},On.trimStart=function(e,t,n){if((e=aa(e))&&(n||void 0===t))return e.replace(z,"");if(!e||!(t=Xr(t)))return e;var r=Gt(e);return li(r,kt(r,Gt(t))).join("")},On.truncate=function(e,t){var n=30,r="...";if(Hs(t)){var i="separator"in t?t.separator:i;n="length"in t?ra(t.length):n,r="omission"in t?Xr(t.omission):r}var o=(e=aa(e)).length;if(Lt(e)){var s=Gt(e);o=s.length}if(n>=o)return e;var a=n-qt(r);if(a<1)return r;var c=s?li(s,0,a).join(""):e.slice(0,a);if(void 0===i)return c+r;if(s&&(a+=c.length-a),zs(i)){if(e.slice(a).search(i)){var l,u=c;for(i.global||(i=me(i.source,aa(ne.exec(i))+"g")),i.lastIndex=0;l=i.exec(u);)var d=l.index;c=c.slice(0,void 0===d?a:d)}}else if(e.indexOf(Xr(i),a)!=a){var h=c.lastIndexOf(i);h>-1&&(c=c.slice(0,h))}return c+r},On.unescape=function(e){return(e=aa(e))&&M.test(e)?e.replace(j,$t):e},On.uniqueId=function(e){var t=++Ce;return aa(e)+t},On.upperCase=La,On.upperFirst=Ua,On.each=as,On.eachRight=cs,On.first=jo,Ja(On,(uc={},cr(On,(function(e,t){Pe.call(On.prototype,t)||(uc[t]=e)})),uc),{chain:!1}),On.VERSION="4.17.19",st(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){On[e].placeholder=On})),st(["drop","take"],(function(e,t){kn.prototype[e]=function(n){n=void 0===n?1:sn(ra(n),0);var r=this.__filtered__&&!t?new kn(this):this.clone();return r.__filtered__?r.__takeCount__=an(n,r.__takeCount__):r.__views__.push({size:an(n,4294967295),type:e+(r.__dir__<0?"Right":"")}),r},kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),st(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ji(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),st(["head","last"],(function(e,t){var n="take"+(t?"Right":"");kn.prototype[e]=function(){return this[n](1).value()[0]}})),st(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");kn.prototype[e]=function(){return this.__filtered__?new kn(this):this[n](1)}})),kn.prototype.compact=function(){return this.filter($a)},kn.prototype.find=function(e){return this.filter(e).head()},kn.prototype.findLast=function(e){return this.reverse().find(e)},kn.prototype.invokeMap=Lr((function(e,t){return"function"==typeof e?new kn(this):this.map((function(n){return yr(n,e,t)}))})),kn.prototype.reject=function(e){return this.filter(Ps(Ji(e)))},kn.prototype.slice=function(e,t){e=ra(e);var n=this;return n.__filtered__&&(e>0||t<0)?new kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=ra(t))<0?n.dropRight(-t):n.take(t-e)),n)},kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},kn.prototype.toArray=function(){return this.take(4294967295)},cr(kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=On[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(On.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,a=t instanceof kn,c=s[0],l=a||As(t),u=function(e){var t=i.apply(On,pt([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(a=l=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,f=a&&!h;if(!o&&l){t=f?t:new kn(this);var g=e.apply(t,s);return g.__actions__.push({func:ns,args:[u],thisArg:void 0}),new xn(g,d)}return p&&f?e.apply(this,s):(g=this.thru(u),p?r?g.value()[0]:g.value():g)})})),st(["pop","push","shift","sort","splice","unshift"],(function(e){var t=be[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);On.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(As(i)?i:[],e)}return this[n]((function(n){return t.apply(As(n)?n:[],e)}))}})),cr(kn.prototype,(function(e,t){var n=On[t];if(n){var r=n.name+"";Pe.call(bn,r)||(bn[r]=[]),bn[r].push({name:t,func:n})}})),bn[Oi(void 0,2).name]=[{name:"wrapper",func:void 0}],kn.prototype.clone=function(){var e=new kn(this.__wrapped__);return e.__actions__=vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=vi(this.__views__),e},kn.prototype.reverse=function(){if(this.__filtered__){var e=new kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=As(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=an(t,e+s);break;case"takeRight":e=sn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,l=r?a:s-1,u=this.__iteratees__,d=u.length,h=0,p=an(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return ni(e,this.__actions__);var f=[];e:for(;c--&&h<p;){for(var g=-1,m=e[l+=t];++g<d;){var v=u[g],y=v.iteratee,b=v.type,S=y(m);if(2==b)m=S;else if(!S){if(1==b)continue e;break e}}f[h++]=m}return f},On.prototype.at=rs,On.prototype.chain=function(){return ts(this)},On.prototype.commit=function(){return new xn(this.value(),this.__chain__)},On.prototype.next=function(){void 0===this.__values__&&(this.__values__=ta(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},On.prototype.plant=function(e){for(var t,n=this;n instanceof Dn;){var r=Oo(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},On.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof kn){var t=e;return this.__actions__.length&&(t=new kn(this)),(t=t.reverse()).__actions__.push({func:ns,args:[Ho],thisArg:void 0}),new xn(t,this.__chain__)}return this.thru(Ho)},On.prototype.toJSON=On.prototype.valueOf=On.prototype.value=function(){return ni(this.__wrapped__,this.__actions__)},On.prototype.first=On.prototype.head,vt&&(On.prototype[vt]=function(){return this}),On}();$e._=Kt,void 0===(r=function(){return Kt}.call(t,n,t,e))||(e.exports=r)}).call(this)}).call(this,n(178)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentActivationService=void 0,t.IEnvironmentActivationService=Symbol("IEnvironmentActivationService")},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return"function"==typeof e}function o(e){return Array.isArray(e)}function s(e){return e&&i(e.then)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=i,t.array=o,t.stringArray=function(e){return o(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=s,t.asPromise=function(e){return e instanceof Promise?e:s(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){r.default().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenizerMode=t.TokenType=t.TextRange=void 0;class r{constructor(e,t){if(e<0)throw new Error("start must be non-negative");if(t<0)throw new Error("length must be non-negative");this.start=e,this.length=t}static fromBounds(e,t){return new r(e,t-e)}get end(){return this.start+this.length}contains(e){return e>=this.start&&e<this.end}}t.TextRange=r,r.empty=r.fromBounds(0,0),function(e){e[e.Unknown=0]="Unknown",e[e.String=1]="String",e[e.Comment=2]="Comment",e[e.Keyword=3]="Keyword",e[e.Number=4]="Number",e[e.Identifier=5]="Identifier",e[e.Operator=6]="Operator",e[e.Colon=7]="Colon",e[e.Semicolon=8]="Semicolon",e[e.Comma=9]="Comma",e[e.OpenBrace=10]="OpenBrace",e[e.CloseBrace=11]="CloseBrace",e[e.OpenBracket=12]="OpenBracket",e[e.CloseBracket=13]="CloseBracket",e[e.OpenCurly=14]="OpenCurly",e[e.CloseCurly=15]="CloseCurly"}(t.TokenType||(t.TokenType={})),function(e){e[e.CommentsAndStrings=0]="CommentsAndStrings",e[e.Full=1]="Full"}(t.TokenizerMode||(t.TokenizerMode={}))},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var r=n(64),i=n(117);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tracing=t.traceDecorators=t.logWarning=t.logVerbose=t.logInfo=t.logError=t.addOutputChannelLogging=t.setLoggingLevel=void 0;var r=n(400);Object.defineProperty(t,"setLoggingLevel",{enumerable:!0,get:function(){return r.setLoggingLevel}}),Object.defineProperty(t,"addOutputChannelLogging",{enumerable:!0,get:function(){return r.addOutputChannelLogging}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return r.logError}}),Object.defineProperty(t,"logInfo",{enumerable:!0,get:function(){return r.logInfo}}),Object.defineProperty(t,"logVerbose",{enumerable:!0,get:function(){return r.logVerbose}}),Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return r.logWarning}}),Object.defineProperty(t,"traceDecorators",{enumerable:!0,get:function(){return r.traceDecorators}}),Object.defineProperty(t,"tracing",{enumerable:!0,get:function(){return r.tracing}})},function(e,t,n){"use strict";const r=n(121),{LEVEL:i,MESSAGE:o}=n(21);r.enabled=!0;const s=/\s+/;class a{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){const t=Object.keys(e).reduce((t,n)=>(t[n]=s.test(e[n])?e[n].split(s):e[n],t),{});return a.allColors=Object.assign({},a.allColors||{},t),a.allColors}addColors(e){return a.addColors(e)}colorize(e,t,n){if(void 0===n&&(n=t),!Array.isArray(a.allColors[e]))return r[a.allColors[e]](n);for(let t=0,i=a.allColors[e].length;t<i;t++)n=r[a.allColors[e][t]](n);return n}transform(e,t){return t.all&&"string"==typeof e[o]&&(e[o]=this.colorize(e[i],e.level,e[o])),(t.level||t.all||!t.message)&&(e.level=this.colorize(e[i],e.level)),(t.all||t.message)&&(e.message=this.colorize(e[i],e.level,e.message)),e}}e.exports=e=>new a(e),e.exports.Colorizer=e.exports.Format=a},function(e,t,n){var r=n(401);e.exports=r},function(e,t,n){"use strict";var r=n(103).Colorizer;e.exports=function(e){return r.addColors(e.colors||e),e}},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(21),a=s.configs,c=s.LEVEL,l=s.MESSAGE,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{levels:a.npm.levels};i(this,e),this.paddings=e.paddingForLevels(t.levels,t.filler),this.options=t}var t,n,s;return t=e,s=[{key:"getLongestLevel",value:function(e){var t=Object.keys(e).map((function(e){return e.length}));return Math.max.apply(Math,r(t))}},{key:"paddingForLevel",value:function(e,t,n){var r=n+1-e.length,i=Math.floor(r/t.length);return"".concat(t).concat(t.repeat(i)).slice(0,r)}},{key:"paddingForLevels",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=e.getLongestLevel(t);return Object.keys(t).reduce((function(t,i){return t[i]=e.paddingForLevel(i,n,r),t}),{})}}],(n=[{key:"transform",value:function(e,t){return e.message="".concat(this.paddings[e[c]]).concat(e.message),e[l]&&(e[l]="".concat(this.paddings[e[c]]).concat(e[l])),e}}])&&o(t.prototype,n),s&&o(t,s),e}();e.exports=function(e){return new u(e)},e.exports.Padder=e.exports.Format=u},function(e,t,n){"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick((function(){e.call(null,t)}));case 3:return process.nextTick((function(){e.call(null,t,n)}));case 4:return process.nextTick((function(){e.call(null,t,n,r)}));default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick((function(){e.apply(null,i)}))}}}:e.exports=process},function(e,t,n){"use strict";var r=n(124),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var o=n(173);o.inherits=n(60);var s=n(431),a=n(255);o.inherits(d,s);for(var c=i(a.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=a.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){var r=n(437),i=n(261);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(175),i=n(438),o=n(439),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var r,i=n(440),o=(r=i)&&r.__esModule?r:{default:r};var s="function"==typeof Symbol;function a(e){return s&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return a(e)?(0,o.default)(e):e},t.isAsync=a},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";var r=n(467),i=n(475),o=n(477),s=n(22),a=n(278).isatty(1),c=process.stdout;function l(e,t){return i(e)?((t=t||{}).colors="colors"in t?t.colors:a,t.ansi=t.colors?o(e,r(e)):e,t.stream=t.stream||c,Array.isArray(t.stream)||(t.stream=[t.stream]),function(e){e instanceof Error&&(e=e.stack||e.message||e),e=[t.ansi," ",e].join(""),e=s.format.apply(this,[e].concat(Array.prototype.slice.call(arguments,1)))+"\n",t.stream.forEach((function(t){t.write(e)}))}):function(){}}l.to=function(e){return c=e,l},e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Telemetry=t.GatherExtension=t.DefaultTheme=void 0,t.DefaultTheme="Default Light+",t.GatherExtension="ms-python.gather",function(e){e.ShiftEnterBannerShown="DS_INTERNAL.SHIFTENTER_BANNER_SHOWN",e.EnableInteractiveShiftEnter="DATASCIENCE.ENABLE_INTERACTIVE_SHIFT_ENTER",e.DisableInteractiveShiftEnter="DATASCIENCE.DISABLE_INTERACTIVE_SHIFT_ENTER",e.WebviewStartup="DS_INTERNAL.WEBVIEW_STARTUP",e.WebviewStyleUpdate="DS_INTERNAL.WEBVIEW_STYLE_UPDATE",e.WebviewMonacoStyleUpdate="DS_INTERNAL.WEBVIEW_MONACO_STYLE_UPDATE",e.StartPageViewed="DS_INTERNAL.STARTPAGE_VIEWED",e.StartPageOpenedFromCommandPalette="DS_INTERNAL.STARTPAGE_OPENED_FROM_COMMAND_PALETTE",e.StartPageOpenedFromNewInstall="DS_INTERNAL.STARTPAGE_OPENED_FROM_NEW_INSTALL",e.StartPageOpenedFromNewUpdate="DS_INTERNAL.STARTPAGE_OPENED_FROM_NEW_UPDATE",e.StartPageWebViewError="DS_INTERNAL.STARTPAGE_WEBVIEWERROR",e.StartPageTime="DS_INTERNAL.STARTPAGE_TIME",e.StartPageClickedDontShowAgain="DATASCIENCE.STARTPAGE_DONT_SHOW_AGAIN",e.StartPageClosedWithoutAction="DATASCIENCE.STARTPAGE_CLOSED_WITHOUT_ACTION",e.StartPageUsedAnActionOnFirstTime="DATASCIENCE.STARTPAGE_USED_ACTION_ON_FIRST_TIME",e.StartPageOpenBlankNotebook="DATASCIENCE.STARTPAGE_OPEN_BLANK_NOTEBOOK",e.StartPageOpenBlankPythonFile="DATASCIENCE.STARTPAGE_OPEN_BLANK_PYTHON_FILE",e.StartPageOpenInteractiveWindow="DATASCIENCE.STARTPAGE_OPEN_INTERACTIVE_WINDOW",e.StartPageOpenCommandPalette="DATASCIENCE.STARTPAGE_OPEN_COMMAND_PALETTE",e.StartPageOpenCommandPaletteWithOpenNBSelected="DATASCIENCE.STARTPAGE_OPEN_COMMAND_PALETTE_WITH_OPENNBSELECTED",e.StartPageOpenSampleNotebook="DATASCIENCE.STARTPAGE_OPEN_SAMPLE_NOTEBOOK",e.StartPageOpenFileBrowser="DATASCIENCE.STARTPAGE_OPEN_FILE_BROWSER",e.StartPageOpenFolder="DATASCIENCE.STARTPAGE_OPEN_FOLDER",e.StartPageOpenWorkspace="DATASCIENCE.STARTPAGE_OPEN_WORKSPACE"}(t.Telemetry||(t.Telemetry={}))},function(e,t,n){"use strict";var r=n(81),i=n(82),o=n(37),s=n(62),a=n(108),c=n(548),l=n(106),u=n(96),d=n(302),h=n(184),p=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),h.IsInitialized&&(n(549).enable(e,this._client),n(550).enable(e,this._client),n(551).enable(e,this._client),n(552).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;r.get;var n=r.request,o=i.request,s=function(n,r){var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];n[e.alreadyAutoCollectedFlag]=!0,n&&r&&i&&(l.CorrelationContextManager.wrapEmitter(n),e.trackRequest(t._client,{options:r,request:n}))};r.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n.call.apply(n,[r,e].concat(t));return s(o,e),o},i.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o.call.apply(o,[i,e].concat(t));return s(r,e),r},r.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=(i=r.request).call.apply(i,[r,e].concat(t));return o.end(),o},i.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=(r=i.request).call.apply(r,[i,e].concat(t));return o.end(),o}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r,i,h=new c(n.options,n.request),p=l.CorrelationContextManager.getCurrentContext();if(p&&p.operation&&p.operation.traceparent&&d.isValidTraceId(p.operation.traceparent.traceId))p.operation.traceparent.updateSpanId(),r=p.operation.traceparent.getBackCompatRequestId();else if(u.w3cEnabled){i=(g=new d).toString(),r=g.getBackCompatRequestId()}else r=p&&p.operation&&p.operation.parentId+e.requestNumber+++".";if(s.canIncludeCorrelationHeader(t,h.getUrl())&&n.request.getHeader&&n.request.setHeader&&t.config&&t.config.correlationId){var f=n.request.getHeader(a.requestContextHeader);try{s.safeIncludeCorrelationHeader(t,n.request,f)}catch(e){o.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(p&&p.operation)try{if(n.request.setHeader(a.requestIdHeader,r),n.request.setHeader(a.parentIdHeader,p.operation.id),n.request.setHeader(a.rootIdHeader,r),i||p.operation.traceparent)n.request.setHeader(a.traceparentHeader,i||p.operation.traceparent.toString());else if(u.w3cEnabled){var g=(new d).toString();n.request.setHeader(a.traceparentHeader,g)}if(p.operation.tracestate){var m=p.operation.tracestate.toString();m&&n.request.setHeader(a.traceStateHeader,m)}var v=p.customProperties.serializeToHeader();v&&n.request.setHeader(a.correlationContextHeader,v)}catch(e){o.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}n.request.on&&(n.request.on("response",(function(e){h.onResponse(e);var i=h.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)})),n.request.on("error",(function(e){h.onError(e);var i=h.getDependencyTelemetry(n,r);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)})))}else o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=p},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(580);e.exports={remove:r(i),removeSync:i.sync}},function(e,t,n){e.exports=u,u.Minimatch=d;var r={sep:"/"};try{r=n(4)}catch(e){}var i=u.GLOBSTAR=d.GLOBSTAR={},o=n(596),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function l(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function u(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new d(t,n).match(e))}function d(e,t){if(!(this instanceof d))return new d(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==r.sep&&(e=e.split(r.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function h(e,t){if(t||(t=this instanceof d?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}u.filter=function(e,t){return t=t||{},function(n,r,i){return u(n,e,t)}},u.defaults=function(e){if(!e||!Object.keys(e).length)return u;var t=u,n=function(n,r,i){return t.minimatch(n,r,l(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,l(e,r))},n},d.defaults=function(e){return e&&Object.keys(e).length?u.defaults(e).Minimatch:d},d.prototype.debug=function(){},d.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(c)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},d.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,r=0;if(n.nonegate)return;for(var i=0,o=e.length;i<o&&"!"===e.charAt(i);i++)t=!t,r++;r&&(this.pattern=e.substr(r));this.negate=t},u.braceExpand=function(e,t){return h(e,t)},d.prototype.braceExpand=h,d.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return i;if(""===e)return"";var r,o="",c=!!n.nocase,l=!1,u=[],d=[],h=!1,f=-1,g=-1,m="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=this;function y(){if(r){switch(r){case"*":o+="[^/]*?",c=!0;break;case"?":o+="[^/]",c=!0;break;default:o+="\\"+r}v.debug("clearStateChar %j %j",r,o),r=!1}}for(var b,S=0,E=e.length;S<E&&(b=e.charAt(S));S++)if(this.debug("%s\t%s %s %j",e,S,o,b),l&&a[b])o+="\\"+b,l=!1;else switch(b){case"/":return!1;case"\\":y(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,S,o,b),h){this.debug("  in class"),"!"===b&&S===g+1&&(b="^"),o+=b;continue}v.debug("call clearStateChar %j",r),y(),r=b,n.noext&&y();continue;case"(":if(h){o+="(";continue}if(!r){o+="\\(";continue}u.push({type:r,start:S-1,reStart:o.length,open:s[r].open,close:s[r].close}),o+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,o),r=!1;continue;case")":if(h||!u.length){o+="\\)";continue}y(),c=!0;var w=u.pop();o+=w.close,"!"===w.type&&d.push(w),w.reEnd=o.length;continue;case"|":if(h||!u.length||l){o+="\\|",l=!1;continue}y(),o+="|";continue;case"[":if(y(),h){o+="\\"+b;continue}h=!0,g=S,f=o.length,o+=b;continue;case"]":if(S===g+1||!h){o+="\\"+b,l=!1;continue}if(h){var _=e.substring(g+1,S);try{RegExp("["+_+"]")}catch(e){var P=this.parse(_,p);o=o.substr(0,f)+"\\["+P[0]+"\\]",c=c||P[1],h=!1;continue}}c=!0,h=!1,o+=b;continue;default:y(),l?l=!1:!a[b]||"^"===b&&h||(o+="\\"),o+=b}h&&(_=e.substr(g+1),P=this.parse(_,p),o=o.substr(0,f)+"\\["+P[0],c=c||P[1]);for(w=u.pop();w;w=u.pop()){var C=o.slice(w.reStart+w.open.length);this.debug("setting tail",o,w),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",C,C,w,o);var T="*"===w.type?"[^/]*?":"?"===w.type?"[^/]":"\\"+w.type;c=!0,o=o.slice(0,w.reStart)+T+"\\("+C}y(),l&&(o+="\\\\");var I=!1;switch(o.charAt(0)){case".":case"[":case"(":I=!0}for(var O=d.length-1;O>-1;O--){var R=d[O],D=o.slice(0,R.reStart),x=o.slice(R.reStart,R.reEnd-8),k=o.slice(R.reEnd-8,R.reEnd),A=o.slice(R.reEnd);k+=A;var N=D.split("(").length-1,j=A;for(S=0;S<N;S++)j=j.replace(/\)[+*?]?/,"");var F="";""===(A=j)&&t!==p&&(F="$"),o=D+x+A+F+k}""!==o&&c&&(o="(?=.)"+o);I&&(o=m+o);if(t===p)return[o,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var M=n.nocase?"i":"";try{var L=new RegExp("^"+o+"$",M)}catch(e){return new RegExp("$.")}return L._glob=e,L._src=o,L};var p={};u.makeRe=function(e,t){return new d(e,t||{}).makeRe()},d.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",r=t.nocase?"i":"",o=e.map((function(e){return e.map((function(e){return e===i?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=!1}return this.regexp},u.match=function(e,t,n){var r=new d(t,n=n||{});return e=e.filter((function(e){return r.match(e)})),r.options.nonull&&!e.length&&e.push(t),e},d.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==r.sep&&(e=e.split(r.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],l=e;if(n.matchBase&&1===a.length&&(l=[i]),this.matchOne(l,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},d.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var l,u=t[s],d=e[o];if(this.debug(t,u,d),!1===u)return!1;if(u===i){this.debug("GLOBSTAR",[t,u,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!r.dot&&"."===e[o].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),n))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!r.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!n||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof u?(l=r.nocase?d.toLowerCase()===u.toLowerCase():d===u,this.debug("string match",u,d,l)):(l=d.match(u),this.debug("pattern match",u,d,l)),!l)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normCasePath=t.FileSystemPathUtils=t.Executables=t.FileSystemPaths=void 0;const r=n(4),i=n(27),o=n(97);class s{constructor(e,t){this.isCaseInsensitive=e,this.raw=t}static withDefaults(e){return void 0===e&&(e=i.getOSType()===i.OSType.Windows),new s(e,r)}get sep(){return this.raw.sep}join(...e){return this.raw.join(...e)}dirname(e){return this.raw.dirname(e)}basename(e,t){return this.raw.basename(e,t)}normalize(e){return this.raw.normalize(e)}normCase(e){return e=this.raw.normalize(e),this.isCaseInsensitive?e.toUpperCase():e}}t.FileSystemPaths=s;class a{constructor(e,t){this.delimiter=e,this.osType=t}static withDefaults(){return new a(r.delimiter,i.getOSType())}get envVar(){return this.osType===i.OSType.Windows?"Path":"PATH"}}t.Executables=a;class c{constructor(e,t,n,r){this.home=e,this.paths=t,this.executables=n,this.raw=r}static withDefaults(e){return void 0===e&&(e=s.withDefaults()),new c(o("~"),e,a.withDefaults(),r)}arePathsSame(e,t){return(e=this.paths.normCase(e))===(t=this.paths.normCase(t))}getDisplayName(e,t){return t&&e.startsWith(t)?`.${this.paths.sep}${this.raw.relative(t,e)}`:e.startsWith(this.home)?`~${this.paths.sep}${this.raw.relative(this.home,e)}`:e}}t.FileSystemPathUtils=c,t.normCasePath=function(e){return i.getOSType()===i.OSType.Windows?r.normalize(e).toUpperCase():r.normalize(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INugetRepository=t.INugetService=void 0,t.INugetService=Symbol("INugetService"),t.INugetRepository=Symbol("INugetRepository")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0,function(e){e.ClearAnalyisCache="python.analysis.clearCache",e.RestartLS="python.analysis.restartLanguageServer"}(t.Commands||(t.Commands={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DailyLanguageServerPackageRepository=t.BetaLanguageServerPackageRepository=t.StableLanguageServerPackageRepository=t.LanguageServerDownloadChannel=t.azureCDNBlobStorageAccount=t.azureBlobStorageAccount=void 0;const i=n(0),o=n(649);var s;t.azureBlobStorageAccount="https://pvsc.blob.core.windows.net",t.azureCDNBlobStorageAccount="https://pvsc.azureedge.net",function(e){e.stable="stable",e.beta="beta",e.daily="daily"}(s=t.LanguageServerDownloadChannel||(t.LanguageServerDownloadChannel={}));let a=class extends o.AzureBlobStoreNugetRepository{constructor(e,n){super(e,t.azureBlobStorageAccount,`${n}-${s.stable}`,t.azureCDNBlobStorageAccount)}};a=r([i.injectable()],a),t.StableLanguageServerPackageRepository=a;let c=class extends o.AzureBlobStoreNugetRepository{constructor(e,n){super(e,t.azureBlobStorageAccount,`${n}-${s.beta}`,t.azureCDNBlobStorageAccount)}};c=r([i.injectable()],c),t.BetaLanguageServerPackageRepository=c;let l=class extends o.AzureBlobStoreNugetRepository{constructor(e,n){super(e,t.azureBlobStorageAccount,`${n}-${s.daily}`,t.azureCDNBlobStorageAccount)}};l=r([i.injectable()],l),t.DailyLanguageServerPackageRepository=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JediSymbolProvider=t.LanguageServerSymbolProvider=void 0;const i=n(2),o=n(6),s=n(15),a=n(7),c=n(9),l=n(85);function u(e,t,n=""){const r=[],o=new i.Range(e.range.start.line,e.range.start.character,e.range.end.line,e.range.end.character),s=e.kind-1,a=new i.SymbolInformation(e.name,i.SymbolKind[i.SymbolKind[s]],n,new i.Location(t,o));if(r.push(a),e.children&&e.children.length>0)for(const n of e.children){const i=u(n,t,e.name);r.push(...i)}return r}t.LanguageServerSymbolProvider=class{constructor(e){this.languageClient=e}async provideDocumentSymbols(e,t){const n=e.uri,r={textDocument:{uri:n.toString()}},i=await this.languageClient.sendRequest("textDocument/documentSymbol",r,t),o=[];for(const e of i){const t=u(e,n);o.push(...t)}return Promise.resolve(o)}};class d{constructor(e,t,n=500){this.jediFactory=t,this.debounceTimeoutMs=n,this.debounceRequest=new Map,this.fs=e.get(o.IFileSystem)}provideDocumentSymbols(e,t){return this.provideDocumentSymbolsThrottled(e,t)}provideDocumentSymbolsThrottled(e,t){const n=""+e.uri.fsPath;if(this.debounceRequest.has(n)){const e=this.debounceRequest.get(n);clearTimeout(e.timer),e.deferred.resolve([])}const r=s.createDeferred(),i=setTimeout(()=>{if(t.isCancellationRequested)return r.resolve([]);const n=e.fileName,i={command:l.CommandType.Symbols,fileName:n,columnIndex:0,lineIndex:0};e.isDirty&&(i.source=e.getText()),this.jediFactory.getJediProxyHandler(e.uri).sendCommand(i,t).then(t=>this.parseData(e,t)).then(e=>r.resolve(e)).catch(e=>r.reject(e))},this.debounceTimeoutMs);return t.onCancellationRequested(()=>{clearTimeout(i),r.resolve([]),this.debounceRequest.delete(n)}),e.isUntitled||this.debounceRequest.set(n,{timer:i,deferred:r}),r.promise}parseData(e,t){if(t){return t.definitions.filter(t=>this.fs.arePathsSame(t.fileName,e.fileName)).map(e=>{const t=e.kind,n=new i.Range(e.range.startLine,e.range.startColumn,e.range.endLine,e.range.endColumn),r=i.Uri.file(e.fileName),o=new i.Location(r,n);return new i.SymbolInformation(e.text,t,e.container,o)})}return[]}}r([a.captureTelemetry(c.EventName.SYMBOL)],d.prototype,"provideDocumentSymbols",null),t.JediSymbolProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBinary=t.isOctal=t.isHex=t.isDecimal=t.isNumber=t.isLineBreak=t.isWhiteSpace=t.isIdentifierChar=t.isIdentifierStartChar=void 0;const r=n(710);function i(e){switch(e){case 95:return!0;case 6277:case 6278:case 8472:case 8494:case 12443:case 12444:return!0}switch(r.getUnicodeCategory(e)){case r.UnicodeCategory.UppercaseLetter:case r.UnicodeCategory.LowercaseLetter:case r.UnicodeCategory.TitlecaseLetter:case r.UnicodeCategory.ModifierLetter:case r.UnicodeCategory.OtherLetter:case r.UnicodeCategory.LetterNumber:return!0}return!1}function o(e){return e>=48&&e<=57||95===e}t.isIdentifierStartChar=i,t.isIdentifierChar=function(e){if(i(e))return!0;switch(e){case 183:case 903:case 4969:case 4970:case 4971:case 4972:case 4973:case 4974:case 4975:case 4976:case 4977:case 6618:return!0}switch(r.getUnicodeCategory(e)){case r.UnicodeCategory.NonSpacingMark:case r.UnicodeCategory.SpacingCombiningMark:case r.UnicodeCategory.DecimalDigitNumber:case r.UnicodeCategory.ConnectorPunctuation:return!0}return!1},t.isWhiteSpace=function(e){return e<=32||8203===e},t.isLineBreak=function(e){return 13===e||10===e},t.isNumber=function(e){return e>=48&&e<=57||95===e},t.isDecimal=o,t.isHex=function(e){return o(e)||e>=97&&e<=102||e>=65&&e<=70||95===e},t.isOctal=function(e){return e>=48&&e<=55||95===e},t.isBinary=function(e){return 48===e||49===e||95===e}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.EditorUtils=t.getTempFileWithDocumentContents=t.getTextEdits=t.getWorkspaceEditsFromPatch=t.getTextEditsFromPatch=void 0;const i=n(87),o=n(0),s=n(205),a=n(20),c=n(4),l=n(2),u=n(206),d=n(5),h=n(14);var p;!function(e){e[e.Delete=0]="Delete",e[e.Insert=1]="Insert",e[e.Replace=2]="Replace"}(p||(p={}));const f=a.EOL.length;class g{constructor(e,t){this.action=e,this.start=t,this.text=""}apply(){switch(this.action){case p.Insert:return l.TextEdit.insert(this.start,this.text);case p.Delete:return l.TextEdit.delete(new l.Range(this.start,this.end));case p.Replace:return l.TextEdit.replace(new l.Range(this.start,this.end),this.text);default:return new l.TextEdit(new l.Range(new l.Position(0,0),new l.Position(0,0)),"")}}}function m(e,t,r=0){let i=r,o=0;const s=e.split(/\r?\n/g);i>0&&s.filter((e,t)=>t<i).forEach(e=>o+=e.length+f);const a=[];let c,u=null;for(let e=0;e<t.length;e+=1){let r=new l.Position(i,o);for(let n=0;n<t[e][1].length;n+=1)"\n"!==t[e][1][n]?o+=1:(o=0,i+=1);const d=n(87);switch(t[e][0]){case d.DIFF_DELETE:if(0===s[i-1].length&&s[r.line-1]&&0===s[r.line-1].length?(r=new l.Position(r.line-1,0),c=new l.Position(i-1,0)):c=new l.Position(i,o),null===u)u=new g(p.Delete,r);else if(u.action!==p.Delete)throw new Error("cannot format due to an internal error.");u.end=c;break;case d.DIFF_INSERT:null===u?u=new g(p.Insert,r):u.action===p.Delete&&(u.action=p.Replace),i=r.line,o=r.character,u.text+=t[e][1];break;case d.DIFF_EQUAL:null!==u&&(a.push(u),u=null)}}return null!==u&&a.push(u),a}function v(e){const t=[];if(!e)return t;const r=e.split(/[\r\n]/);let o=0;const s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;for(;o<r.length;){const e=r[o].match(s);if(!e)throw new Error("Invalid patch string: "+r[o]);const a=new i.diff_match_patch.patch_obj;t.push(a),a.start1=parseInt(e[1],10),""===e[2]?(a.start1-=1,a.length1=1):"0"===e[2]?a.length1=0:(a.start1-=1,a.length1=parseInt(e[2],10)),a.start2=parseInt(e[3],10),""===e[4]?(a.start2-=1,a.length2=1):"0"===e[4]?a.length2=0:(a.start2-=1,a.length2=parseInt(e[4],10)),o+=1;const c=n(87);for(;o<r.length;){const e=r[o].charAt(0);let t;try{t=r[o].substring(1)}catch(e){throw new Error("Illegal escape in patch_fromText")}if("-"===e)a.diffs.push([c.DIFF_DELETE,t]);else if("+"===e)a.diffs.push([c.DIFF_INSERT,t]);else if(" "===e)a.diffs.push([c.DIFF_EQUAL,t]);else{if("@"===e)break;if(""!==e)throw new Error(`Invalid patch mode '${e}' in: ${t}`)}o+=1}}return t}t.getTextEditsFromPatch=function(e,t){if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return[];t=t.replace(/\\ No newline at end of file[\r\n]/,"");const r=new(n(87).diff_match_patch),i=v.call(r,t);if(!Array.isArray(i)||0===i.length)throw new Error("Unable to parse Patch string");const o=[];return i.forEach(t=>{t.diffs.forEach(e=>{e[1]+=a.EOL}),m(e,t.diffs,t.start1).forEach(e=>o.push(e.apply()))}),o},t.getWorkspaceEditsFromPatch=function(e,t,r){const i=new l.WorkspaceEdit;return e.forEach(e=>{const o=e.indexOf("@@");if(-1===o)return;const s=e.substring(0,o).split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0&&e.toLowerCase().endsWith(".py")&&e.indexOf(" a")>0);if(e.startsWith("---")&&(e=e.substring(o)),0===e.length)return;if(0===s.length)return;let u=s[0].substring(s[0].indexOf(" a")+3).trim();if(u=t&&!c.isAbsolute(u)?c.resolve(t,u):u,!r.fileExistsSync(u))return;e=e.replace(/\\ No newline at end of file[\r\n]/,"");const d=new(n(87).diff_match_patch),h=v.call(d,e);if(!Array.isArray(h)||0===h.length)throw new Error("Unable to parse Patch string");const f=r.readFileSync(u),g=l.Uri.file(u);h.forEach(e=>{e.diffs.forEach(e=>{e[1]+=a.EOL}),m(f,e.diffs,e.start1).forEach(e=>{switch(e.action){case p.Delete:i.delete(g,new l.Range(e.start,e.end));break;case p.Insert:i.insert(g,e.start,e.text);break;case p.Replace:i.replace(g,new l.Range(e.start,e.end),e.text)}})})}),i},t.getTextEdits=function(e,t){return m(e,(new(n(87).diff_match_patch)).diff_main(e,t)).map(e=>e.apply())},t.getTempFileWithDocumentContents=async function(e,t){let n=`${e.uri.fsPath}.${s(e.uri.fsPath)}.tmp`;try{h.isNotebookCell(e.uri)&&!await t.fileExists(e.uri.fsPath)&&(n=(await t.createTemporaryFile(c.basename(e.uri.fsPath)+".tmp")).filePath),await t.writeFile(n,e.getText())}catch(e){throw d.traceError("Failed to create a temporary file",e),new u.WrappedError("Failed to create a temporary file, "+e.message,e)}return n};let y=class{getWorkspaceEditsFromPatch(e,t,r){const i=new l.WorkspaceEdit;if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return i;t=t.replace(/\\ No newline at end of file[\r\n]/,"");const o=new(n(87).diff_match_patch),s=v.call(o,t);if(!Array.isArray(s)||0===s.length)throw new Error("Unable to parse Patch string");return s.forEach(t=>{t.diffs.forEach(e=>{e[1]+=a.EOL}),m(e,t.diffs,t.start1).forEach(e=>{switch(e.action){case p.Delete:i.delete(r,new l.Range(e.start,e.end));break;case p.Insert:i.insert(r,e.start,e.text);break;case p.Replace:i.replace(r,new l.Range(e.start,e.end),e.text)}})}),i}};y=r([o.injectable()],y),t.EditorUtils=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipIfTest=t.isNotInstalledError=void 0;const r=n(10),i=n(207);t.isNotInstalledError=function(e){const t=e;if(!("object"==typeof e&&null!==e))return!1;if(e instanceof i.ModuleNotInstalledError)return!0;const n=e.message.indexOf("No module named")>=0;return"ENOENT"===t.code||127===t.code||n},t.skipIfTest=function(e){return function(t,n,i){const o=i.value;return i.value=function(...t){return r.isTestExecution()?e?Promise.resolve():void 0:o.apply(this,t)},i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPythonVersion=t.areSameVersion=t.parsePythonVersion=void 0;const r=n(38);n(11);const i=n(59);t.parsePythonVersion=function(e){if(!e||0===e.trim().length)return;const t=(e||"").split(".").map(e=>e.trim()).filter(e=>e.length>0).filter((e,t)=>t<4);if(t.length>0&&t[t.length-1].indexOf("-")>0){const e=t[t.length-1];t[t.length-1]=e.split("-")[0].trim(),t.push(e.split("-")[1].trim())}for(;t.length<4;)t.push("");for(let e=0;e<3;e+=1)t[e]=/^\d+$/.test(t[e])?t[e]:"0";-1===["alpha","beta","candidate","final"].indexOf(t[3])&&t.pop();const n=`${t[0]}.${t[1]}.${t[2]}`,i=4===t.length?`${n}-${t[3]}`:n;return new r.SemVer(i)},t.areSameVersion=function(e,t){return!(!e||!t)&&e.raw===t.raw},t.getPythonVersion=async function(e,t,n){const[r,o]=i.getVersion();return n(e,r).then(e=>o(e.stdout).splitLines()[0]).then(e=>0===e.length?t:e).catch(()=>t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionBuildInstaller=t.STABLE_INSTALLER=t.INSIDERS_INSTALLER=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IModuleInstaller=void 0,t.IModuleInstaller=Symbol("IModuleInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),t.INSIDERS_INSTALLER="INSIDERS_INSTALLER",t.STABLE_INSTALLER="STABLE_INSTALLER",t.IExtensionBuildInstaller=Symbol("IExtensionBuildInstaller")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleInstaller=void 0;const i=n(0),o=n(4),s=n(2),a=n(12),c=n(28),l=n(7),u=n(9),d=n(3),h=n(351),p=n(10),f=n(6),g=n(59),m=n(25),v=n(1),y=n(13),b=n(14);let S=class{constructor(e){this.serviceContainer=e}async installModule(e,t,n){l.sendTelemetryEvent(u.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:this.displayName});const r=b.isResource(t)?t:void 0,i=await this.getExecutionInfo(e,t),p=this.serviceContainer.get(m.ITerminalServiceFactory).getTerminalService(r),S=async e=>{const n=await this.processInstallArgs(i.args,t);if(i.moduleName){const s=this.serviceContainer.get(v.IConfigurationService).getSettings(r),l=this.serviceContainer.get(a.IInterpreterService),u=b.isResource(t)?await l.getActiveInterpreter(t):t,d=b.isResource(t)?s.pythonPath:t.path,h=g.execModule(i.moduleName,n);if(u&&u.envType===c.EnvironmentType.Unknown)if(s.globalModuleInstallation){const t=this.serviceContainer.get(f.IFileSystem);await t.isDirReadonly(o.dirname(d)).catch(e=>!0)?this.elevatedInstall(d,h):await p.sendCommand(d,h,e)}else await p.sendCommand(d,h.concat(["--user"]),e);else await p.sendCommand(d,h,e)}else await p.sendCommand(i.execPath,n,e)};if(n){const t=this.serviceContainer.get(d.IApplicationShell),r={location:s.ProgressLocation.Notification,cancellable:!0,title:y.Products.installingModule().format(e)};await t.withProgress(r,async(e,t)=>S(h.wrapCancellationTokens(t,n)))}else await S(n)}elevatedInstall(e,t){const r=this.serviceContainer.get(v.IOutputChannel,p.STANDARD_OUTPUT_CHANNEL),i=`"${e.replace(/\\/g,"/")}" ${t.join(" ")}`;r.appendLine(""),r.appendLine("[Elevated] "+i);n(794).exec(i,{name:"VS Code Python"},async(e,t,n)=>{if(e){const t=this.serviceContainer.get(d.IApplicationShell);await t.showErrorMessage(e)}else r.show(),t&&(r.appendLine(""),r.append(t)),n&&(r.appendLine(""),r.append("Warning: "+n))})}async processInstallArgs(e,t){const n=e.findIndex(e=>"PYLINT"===e.toUpperCase());if(-1===n)return e;const r=this.serviceContainer.get(a.IInterpreterService),i=b.isResource(t)?await r.getActiveInterpreter(t):t;if(i&&i.version&&2===i.version.major){const t=[...e];return t[n]='"pylint<2.0.0"',t}return e}};S=r([i.injectable()],S),t.ModuleInstaller=S},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IThemeFinder=t.ICodeCssGenerator=t.IStartPageMapping=t.StartPageMessages=t.IStartPage=void 0,t.IStartPage=Symbol("IStartPage"),function(e){e.Started="started",e.UpdateSettings="update_settings",e.RequestShowAgainSetting="RequestShowAgainSetting",e.SendSetting="SendSetting",e.OpenBlankNotebook="OpenBlankNotebook",e.OpenBlankPythonFile="OpenBlankPythonFile",e.OpenInteractiveWindow="OpenInteractiveWindow",e.OpenCommandPalette="OpenCommandPalette",e.OpenCommandPaletteWithOpenNBSelected="OpenCommandPaletteWithOpenNBSelected",e.OpenSampleNotebook="OpenSampleNotebook",e.OpenFileBrowser="OpenFileBrowser",e.OpenFolder="OpenFolder",e.OpenWorkspace="OpenWorkspace"}(r=t.StartPageMessages||(t.StartPageMessages={}));t.IStartPageMapping=class{},r.RequestShowAgainSetting,r.SendSetting,r.Started,r.UpdateSettings,r.OpenBlankNotebook,r.OpenBlankPythonFile,r.OpenInteractiveWindow,r.OpenCommandPalette,r.OpenCommandPaletteWithOpenNBSelected,r.OpenSampleNotebook,r.OpenFileBrowser,r.OpenFolder,r.OpenWorkspace,t.ICodeCssGenerator=Symbol("ICodeCssGenerator"),t.IThemeFinder=Symbol("IThemeFinder")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IChildProcessAttachService=t.IDebugSessionEventHandlers=void 0,t.IDebugSessionEventHandlers=Symbol("IDebugSessionEventHandlers"),t.IChildProcessAttachService=Symbol("IChildProcessAttachService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVirtualEnvironmentManager=void 0,t.IVirtualEnvironmentManager=Symbol("VirtualEnvironmentManager")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFormatter=void 0;const r=n(4),i=n(2),o=n(3),s=n(10);n(11);const a=n(144),c=n(5),l=n(6),u=n(18),d=n(1),h=n(14),p=n(143),f=n(212);t.BaseFormatter=class{constructor(e,t,n){this.Id=e,this.product=t,this.serviceContainer=n,this.outputChannel=n.get(d.IOutputChannel,s.STANDARD_OUTPUT_CHANNEL),this.helper=n.get(f.IFormatterHelper),this.workspace=n.get(o.IWorkspaceService)}getDocumentPath(e,t){return r.basename(e.uri.fsPath)===e.uri.fsPath?t:r.dirname(e.fileName)}getWorkspaceUri(e){const t=this.workspace.getWorkspaceFolder(e.uri);if(t)return t.uri;const n=this.workspace.workspaceFolders;return Array.isArray(n)&&n.length>0?n[0].uri:i.Uri.file(__dirname)}async provideDocumentFormattingEdits(e,t,n,r,i){"string"==typeof i&&0!==i.length||(i=this.getWorkspaceUri(e).fsPath);const s=await this.createTempFile(e);if(this.checkCancellation(e.fileName,s,n))return[];const a=this.helper.getExecutionInfo(this.product,r,e.uri);a.args.push(s);const c=this.serviceContainer.get(u.IPythonToolExecutionService).exec(a,{cwd:i,throwOnStdErr:!1,token:n},e.uri).then(e=>e.stdout).then(t=>this.checkCancellation(e.fileName,s,n)?[]:p.getTextEditsFromPatch(e.getText(),t)).catch(t=>(this.checkCancellation(e.fileName,s,n)||this.handleError(this.Id,t,e.uri).catch(()=>{}),[])).then(t=>(this.deleteTempFile(e.fileName,s).ignoreErrors(),t)),l=this.serviceContainer.get(o.IApplicationShell),h=this.serviceContainer.get(d.IDisposableRegistry),f=l.setStatusBarMessage("Formatting with "+this.Id,c);return h.push(f),c}async handleError(e,t,n){let r=`Formatting with ${this.Id} failed.`;if(a.isNotInstalledError(t)){const e=this.serviceContainer.get(d.IInstaller);await e.isInstalled(this.product,n)||(r+=`\nYou could either install the '${this.Id}' formatter, turn it off or use another formatter.`,e.promptToInstall(this.product,n).catch(e=>c.traceError("Python Extension: promptToInstall",e)))}this.outputChannel.appendLine(`\n${r}\n${t}`)}async createTempFile(e){const t=this.serviceContainer.get(l.IFileSystem);return e.isDirty||h.isNotebookCell(e)?p.getTempFileWithDocumentContents(e,t):e.fileName}deleteTempFile(e,t){if(e!==t){return this.serviceContainer.get(l.IFileSystem).deleteFile(t)}return Promise.resolve()}checkCancellation(e,t,n){return!(!n||!n.isCancellationRequested)&&(this.deleteTempFile(e,t).ignoreErrors(),!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITerminalAutoActivation=t.ICodeExecutionManager=t.ICodeExecutionHelper=t.ICodeExecutionService=void 0,t.ICodeExecutionService=Symbol("ICodeExecutionService"),t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper"),t.ICodeExecutionManager=Symbol("ICodeExecutionManager"),t.ITerminalAutoActivation=Symbol("ITerminalAutoActivation")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseShellDetector=void 0;const o=n(0),s=n(5),a=n(25),c=new Map;c.set(a.TerminalShellType.powershell,/(powershell.exe$|powershell$)/i),c.set(a.TerminalShellType.gitbash,/(gitbash.exe$)/i),c.set(a.TerminalShellType.bash,/(bash.exe$|bash$)/i),c.set(a.TerminalShellType.wsl,/(wsl.exe$)/i),c.set(a.TerminalShellType.zsh,/(zsh$)/i),c.set(a.TerminalShellType.ksh,/(ksh$)/i),c.set(a.TerminalShellType.commandPrompt,/(cmd.exe$|cmd$)/i),c.set(a.TerminalShellType.fish,/(fish$)/i),c.set(a.TerminalShellType.tcshell,/(tcsh$)/i),c.set(a.TerminalShellType.cshell,/(csh$)/i),c.set(a.TerminalShellType.powershellCore,/(pwsh.exe$|pwsh$)/i),c.set(a.TerminalShellType.xonsh,/(xonsh$)/i);let l=class{constructor(e){this.priority=e}identifyShellFromShellPath(e){const t=Array.from(c.keys()).reduce((t,n)=>{if(t===a.TerminalShellType.other){const t=c.get(n);if(t&&t.test(e))return n}return t},a.TerminalShellType.other);return s.traceVerbose(`Shell path '${e}'`),s.traceVerbose(`Shell path identified as shell '${t}'`),t}};l=r([o.injectable(),i(0,o.unmanaged())],l),t.BaseShellDetector=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubDirs=t.resolveSymbolicLink=t.getFileInfo=t.getGlobalPersistentStore=t.arePathsSame=t.normCasePath=t.readFile=t.pathExists=t.shellExecute=t.initializeExternalDependencies=void 0;const r=n(109),i=n(4),o=n(18),s=n(1),a=n(15),c=n(27);let l;function u(e){return c.getOSType()===c.OSType.Windows?i.normalize(e).toUpperCase():i.normalize(e)}t.initializeExternalDependencies=function(e){l=e},t.shellExecute=async function(e,t){return(await l.get(o.IProcessServiceFactory).create()).shellExec(e,{timeout:t})},t.pathExists=function(e){return r.pathExists(e)},t.readFile=function(e){return r.readFile(e,"utf-8")},t.normCasePath=u,t.arePathsSame=function(e,t){return u(e)===u(t)},t.getGlobalPersistentStore=function(e){const t=l.get(s.IPersistentStateFactory).createGlobalPersistentState(e,void 0);return{get:()=>t.value,set:e=>t.updateValue(e)}},t.getFileInfo=async function(e){const t=await r.lstat(e);return{ctime:t.ctime.valueOf(),mtime:t.mtime.valueOf()}},t.resolveSymbolicLink=async function e(t){if((await r.lstat(t)).isSymbolicLink()){return e(await r.readlink(t))}return t},t.getSubDirs=async function*(e){const t=(await r.readdir(e)).map(t=>async function*(){(await r.lstat(i.join(e,t))).isDirectory()&&(yield t)}());yield*a.iterable(a.chain(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterHashProviderFactory=t.IPipEnvServiceHelper=t.IPythonInPathCommandProvider=void 0,t.IPythonInPathCommandProvider=Symbol("IPythonInPathCommandProvider"),t.IPipEnvServiceHelper=Symbol("IPipEnvServiceHelper"),t.IInterpreterHashProviderFactory=Symbol("IInterpreterHashProviderFactory")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCondaInfo=t.AnacondaIdentifiers=t.AnacondaDisplayName=t.AnacondaCompanyName=t.AnacondaCompanyNames=void 0;const r=n(28);t.AnacondaCompanyNames=["Anaconda, Inc.","Continuum Analytics, Inc."],t.AnacondaCompanyName="Anaconda, Inc.",t.AnacondaDisplayName="Anaconda",t.AnacondaIdentifiers=["Anaconda","Conda","Continuum"],t.parseCondaInfo=async function(e,n,i,o){const s=Array.isArray(e.envs)?e.envs:[];e.default_prefix&&e.default_prefix.length>0&&s.push(e.default_prefix);const a=s.map(async e=>{const s=n(e);if(!await i(s))return;const a=await o(s);return a?{...a,path:s,companyDisplayName:t.AnacondaCompanyName,envType:r.EnvironmentType.Conda,envPath:e}:void 0});return Promise.all(a).then(e=>e.filter(e=>null!=e)).then(e=>e.map(e=>e))}},function(e,t,n){"use strict";const{Colorizer:r}=n(120);e.exports=e=>(r.addColors(e.colors||e),e)},function(e,t,n){"use strict";const{configs:r,LEVEL:i,MESSAGE:o}=n(21);class s{constructor(e={levels:r.npm.levels}){this.paddings=s.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){const t=Object.keys(e).map(e=>e.length);return Math.max(...t)}static paddingForLevel(e,t,n){const r=n+1-e.length,i=Math.floor(r/t.length);return`${t}${t.repeat(i)}`.slice(0,r)}static paddingForLevels(e,t=" "){const n=s.getLongestLevel(e);return Object.keys(e).reduce((e,r)=>(e[r]=s.paddingForLevel(r,t,n),e),{})}transform(e,t){return e.message=`${this.paddings[e[i]]}${e.message}`,e[o]&&(e[o]=`${this.paddings[e[i]]}${e[o]}`),e}}e.exports=e=>new s(e),e.exports.Padder=e.exports.Format=s},function(e,t,n){"use strict";const r=n(39),{MESSAGE:i}=n(21),o=n(92);function s(e,t){return t instanceof Buffer?t.toString("base64"):t}e.exports=r((e,t={})=>(e[i]=o(e,t.replacer||s,t.space),e))},function(e,t,n){"use strict";var r=n(36);e.exports=r((function(e){return e.message="\t".concat(e.message),e}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(103).Colorizer,s=n(123).Padder,a=n(21),c=a.configs,l=a.MESSAGE,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t.levels||(t.levels=c.npm.levels),this.colorizer=new o(t),this.padder=new s(t),this.options=t}var t,n,a;return t=e,(n=[{key:"transform",value:function(e,t){return this.colorizer.transform(this.padder.transform(e,t),t),e[l]="".concat(e.level,":").concat(e.message),e}}])&&i(t.prototype,n),a&&i(t,a),e}();e.exports=function(e){return new u(e)},e.exports.Format=u},function(e,t,n){"use strict";var r=n(36);function i(e){if(e.every(o))return function(t){for(var n=t,r=0;r<e.length;r++)if(!(n=e[r].transform(n,e[r].options)))return!1;return n}}function o(e){if("function"!=typeof e.transform)throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"));return!0}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=r(i(t)),s=o();return s.Format=o.Format,s},e.exports.cascade=i},function(e,t,n){"use strict";var r=n(36),i=n(21).MESSAGE,o=n(92);function s(e,t){return t instanceof Buffer?t.toString("base64"):t}e.exports=r((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i]=o(e,t.replacer||s,t.space),e}))},function(e,t,n){"use strict";var r=n(36);e.exports=r((function(e,t){return t.message?(e.message="[".concat(t.label,"] ").concat(e.message),e):(e.label=t.label,e)}))},function(e,t,n){"use strict";var r=n(36),i=n(21).MESSAGE,o=n(92);e.exports=r((function(e){var t={};return e.message&&(t["@message"]=e.message,delete e.message),e.timestamp&&(t["@timestamp"]=e.timestamp,delete e.timestamp),t["@fields"]=e,e[i]=o(t),e}))},function(e,t,n){"use strict";var r=n(36);function i(e,t,n){var r,i,o,s=t.reduce((function(t,n){return t[n]=e[n],delete e[n],t}),{}),a=Object.keys(e).reduce((function(t,n){return t[n]=e[n],delete e[n],t}),{});return Object.assign(e,s,(o=a,(i=n)in(r={})?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r)),e}function o(e,t,n){return e[n]=t.reduce((function(t,n){return t[n]=e[n],delete e[n],t}),{}),e}e.exports=r((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="metadata";t.key&&(n=t.key);var r=[];return t.fillExcept||t.fillWith||(r.push("level"),r.push("message")),t.fillExcept&&(r=t.fillExcept),r.length>0?i(e,r,n):t.fillWith?o(e,t.fillWith,n):e}))},function(e,t,n){"use strict";var r=n(22).inspect,i=n(36),o=n(21),s=o.LEVEL,a=o.MESSAGE,c=o.SPLAT;e.exports=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);return delete n[s],delete n[a],delete n[c],e[a]=r(n,!1,t.depth||null,t.colorize),e}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(21).MESSAGE,o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.template=t}var t,n,o;return t=e,(n=[{key:"transform",value:function(e){return e[i]=this.template(e),e}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=function(e){return new o(e)},e.exports.Printf=e.exports.Format=o},function(e,t,n){"use strict";var r=n(36),i=n(21).MESSAGE,o=n(92);e.exports=r((function(e){var t=o(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),n=e.padding&&e.padding[e.level]||"";return e[i]="{}"!==t?"".concat(e.level,":").concat(n," ").concat(e.message," ").concat(t):"".concat(e.level,":").concat(n," ").concat(e.message),e}))},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(22),s=n(21).SPLAT,a=/%[scdjifoO%]/g,c=/%%/g,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}var t,n,l;return t=e,(n=[{key:"_splat",value:function(e,t){var n=e.message,i=e[s]||e.splat||[],a=n.match(c),l=a&&a.length||0,u=t.length-l-i.length,d=u<0?i.splice(u,-1*u):[],h=d.length;if(h)for(var p=0;p<h;p++)Object.assign(e,d[p]);return e.message=o.format.apply(o,[n].concat(r(i))),e}},{key:"transform",value:function(e){var t=e.message,n=e[s]||e.splat;if(!n||!n.length)return e;var r=t&&t.match&&t.match(a);if(!r&&(n||n.length)){var i=n.length>1?n.splice(0):n,o=i.length;if(o)for(var c=0;c<o;c++)Object.assign(e,i[c]);return e}return r?this._splat(e,r):e}}])&&i(t.prototype,n),l&&i(t,l),e}();e.exports=function(e){return new l(e)}},function(e,t,n){"use strict";var r=n(247),i=n(36);e.exports=i((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.format&&(e.timestamp="function"==typeof t.format?t.format():r.format(new Date,t.format)),e.timestamp||(e.timestamp=(new Date).toISOString()),t.alias&&(e[t.alias]=e.timestamp),e}))},function(e,t,n){"use strict";var r=n(121),i=n(36),o=n(21).MESSAGE;e.exports=i((function(e,t){return!1!==t.level&&(e.level=r.strip(e.level)),!1!==t.message&&(e.message=r.strip(e.message)),!1!==t.raw&&e[o]&&(e[o]=r.strip(e[o])),e}))},function(e,t){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(176).Symbol;e.exports=r},function(e,t,n){var r=n(260),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=e[t+i];return r},e.exports=t.default},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(93).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",f),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},function(e,t){e.exports=require("string_decoder")},function(e,t,n){"use strict";const r=n(65),{configs:i}=n(21);t.cli=r.levels(i.cli),t.npm=r.levels(i.npm),t.syslog=r.levels(i.syslog),t.addColors=r.levels},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,r.default)(e,(0,i.default)((0,o.default)(t)),n)};var r=s(n(484)),i=s(n(485)),o=s(n(129));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryInterpreterSpecificCache=t.InMemoryCache=t.clearCache=t.getCacheKeyFromFunctionArgs=t.getGlobalCacheStore=void 0,n(11);const r=n(10),i=n(24),o=n(1),s=new Map;function a(t,a=n(2),c){const l=function(t,s=n(2),a){const c=s.workspace.getConfiguration("python",s.Uri.file(e));if(!c)return"python";let l,u;if(a){l=a.get(o.IInterpreterPathService);const e=a.get(o.IExperimentsManager);u=e.inExperiment(i.DeprecatePythonPath.experiment),e.sendTelemetryIfInExperiment(i.DeprecatePythonPath.control)}const d=u&&l?l.inspect(s.Uri.file(e)).globalValue||r.DEFAULT_INTERPRETER_SETTING:c.inspect("pythonPath").globalValue||r.DEFAULT_INTERPRETER_SETTING;if(!t||!Array.isArray(s.workspace.workspaceFolders)||0===s.workspace.workspaceFolders.length)return d;const h=t?s.workspace.getWorkspaceFolder(t):s.workspace.workspaceFolders[0];if(!h)return d;const p=u&&l?l.get(t):s.workspace.getConfiguration("python",t).get("pythonPath")||r.DEFAULT_INTERPRETER_SETTING;return`${h.uri.fsPath}-${p}`}(t,a,c);return s.has(l)||s.set(l,new Map),s.get(l)}const c=new Map;function l(e,t){return`KeyPrefix=${e}-Args=${t.map(e=>""+JSON.stringify(e)).join("-Arg-Separator-")}`}t.getGlobalCacheStore=function(){return c},t.getCacheKeyFromFunctionArgs=l,t.clearCache=function(){c.clear(),s.clear()};class u{constructor(e,t=""){this.expiryDurationMs=e,this.cacheKey=t,this._store=new Map}get store(){return this._store}get hasData(){return!(!this.store.get(this.cacheKey)||this.hasExpired(this.store.get(this.cacheKey).expiry))||(this.store.delete(this.cacheKey),!1)}get data(){var e;if(this.hasData&&this.store.has(this.cacheKey))return null===(e=this.store.get(this.cacheKey))||void 0===e?void 0:e.value}set data(e){this.store.set(this.cacheKey,{expiry:this.calculateExpiry(),value:e})}clear(){this.store.clear()}hasExpired(e){return e<=Date.now()}calculateExpiry(){return Date.now()+this.expiryDurationMs}}t.InMemoryCache=u;t.InMemoryInterpreterSpecificCache=class extends u{constructor(e,t,r,i,o=n(2)){super(t,l(e,r.slice(1))),this.serviceContainer=i,this.vscode=o,this.resource=r[0]}get store(){return a(this.resource,this.vscode,this.serviceContainer)}}}).call(this,"/index.js")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37);t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var i="DiagnosticChannel";if(t.IsInitialized){var o=n(494),s=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),a={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston};for(var c in a)-1===s.indexOf(c)&&(a[c].enable(),r.info(i,"Subscribed to "+c+" events"));s.length>0&&r.info(i,"Some modules will not be patched",s)}else r.info(i,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");t.registerContextPreservation=function(e){t.IsInitialized&&n(31).channel.addContextPreservation(e)}},function(e,t,n){"use strict";var r=n(186),i=r.wrap,o=r.unwrap,s="wrap@before";function a(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function c(e,t){var n;return n=e._events&&e._events[t],Array.isArray(n)||(n=n?[n]:[]),n}function l(e,t,n){var r=c(e,t).filter((function(e){return-1===n.indexOf(e)}));r.length>0&&function(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r],o=e[s];if("function"==typeof o)o(i);else if(Array.isArray(o))for(var a=o.length,c=0;c<a;c++)o[c](i)}}(e,r)}function u(e,t){if(e){var n=e;if("function"==typeof e)n=t(e);else if(Array.isArray(e)){n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r])}return n}}e.exports=function(e,t,n){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function r(e){return function(t,n){var o=c(this,t).slice();try{var s=e.call(this,t,n);return l(this,t,o),s}finally{this.on.__wrapped||i(this,"on",r),this.addListener.__wrapped||i(this,"addListener",r)}}}e[s]?"function"==typeof e[s]?a(e,s,[e[s],t]):Array.isArray(e[s])&&e[s].push(t):a(e,s,t),e.__wrapped||(i(e,"addListener",r),i(e,"on",r),i(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var r=this._events[t];function s(e){return function(){this._events[t]=r;try{return e.apply(this,arguments)}finally{r=this._events[t],this._events[t]=u(r,n)}}}i(this,"removeListener",s);try{return this._events[t]=u(r,n),e.apply(this,arguments)}finally{o(this,"removeListener"),this._events[t]=r}}})),a(e,"__unwrap",(function(){o(e,"addListener"),o(e,"on"),o(e,"emit"),delete e[s],delete e.__wrapped})),a(e,"__wrapped",!0))}},function(e,t,n){"use strict";function r(e){return"function"==typeof e}var i=console.error.bind(console);function o(e,t,n){var r=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}function s(e){e&&e.logger&&(r(e.logger)?i=e.logger:i("new logger isn't a function, not replacing"))}function a(e,t,n){if(e&&e[t]){if(!n)return i("no wrapper function"),void i((new Error).stack);if(r(e[t])&&r(n)){var s=e[t],a=n(s,t);return o(a,"__original",s),o(a,"__unwrap",(function(){e[t]===a&&o(e,t,s)})),o(a,"__wrapped",!0),o(e,t,a),a}i("original object and wrapper must be functions")}else i("no original function "+t+" to wrap")}function c(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void i("no original to unwrap to -- has "+t+" already been unwrapped?"):(i("no function to unwrap."),void i((new Error).stack))}s.wrap=a,s.massWrap=function(e,t,n){if(!e)return i("must provide one or more modules to patch"),void i((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t,n)}))})):i("must provide one or more functions to wrap on modules")},s.unwrap=c,s.massUnwrap=function(e,t){if(!e)return i("must provide one or more modules to patch"),void i((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){c(e,t)}))})):i("must provide one or more functions to unwrap on modules")},e.exports=s},function(e,t){e.exports=require("net")},function(e,t,n){"use strict";var r=n(20),i=n(107),o=function(){function e(t,n,r){void 0===n&&(n=6e4),void 0===r&&(r=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=n,this._enableLiveMetricsCounters=r}return e.prototype.enable=function(t,n){var i=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=n||this._collectionInterval,this._handle=setInterval((function(){return i.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalRequestExecutionTime+=r,!1===n&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,n){var r;if(e.isEnabled()){if("string"==typeof t)r=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;r=t}e._intervalDependencyExecutionTime+=r,!1===n&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],d=(l.model,l.speed,l.times),h=u.times;t+=d.user-h.user||0,n+=d.sys-h.sys||0,o+=d.nice-h.nice||0,s+=d.idle-h.idle||0,a+=d.irq-h.irq||0}var p=void 0;if("function"==typeof process.cpuUsage){var f=process.cpuUsage(),g=process.hrtime(),m=f.user-this._lastAppCpuUsage.user+(f.system-this._lastAppCpuUsage.system)||0;if(void 0!==this._lastHrtime&&2===this._lastHrtime.length)p=100*m/((1e6*(g[0]-this._lastHrtime[0])+(g[1]-this._lastHrtime[1])/1e3||0)*e.length);this._lastAppCpuUsage=f,this._lastHrtime=g}var v=t+n+o+s+a||1;this._client.trackMetric({name:i.PerformanceCounter.PROCESSOR_TIME,value:(v-s)/v*100}),this._client.trackMetric({name:i.PerformanceCounter.PROCESS_TIME,value:p||t/v*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.freemem(),t=process.memoryUsage().rss,n=r.totalmem()-e;this._client.trackMetric({name:i.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:i.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,o=n.totalFailedRequestCount-t.totalFailedRequestCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/r||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,s>0){var l=r/a,u=o/a;this._client.trackMetric({name:i.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:i.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=n},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,n={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},r=n.totalDependencyCount-t.totalDependencyCount||0,o=n.totalFailedDependencyCount-t.totalFailedDependencyCount||0,s=n.time-t.time,a=s/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/r||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,s>0){var l=r/a,u=o/a;this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||r>0)&&this._client.trackMetric({name:i.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=n}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,n={totalExceptionCount:e._totalExceptionCount,time:+new Date},r=n.totalExceptionCount-t.totalExceptionCount||0,o=n.time-t.time;if(o>0){var s=r/(o/1e3);this._client.trackMetric({name:i.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=n}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._lastRequestExecutionTime=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._lastDependencyExecutionTime=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();e.exports=o},function(e,t){e.exports=require("constants")},function(e,t,n){"use strict";var r=n(96),i=n(556),o=n(107),s=n(83),a=function(){function e(t){var n=this;this.endpointBase=o.DEFAULT_BREEZE_ENDPOINT;var r=process.env[e.ENV_connectionString],a=i.parse(t),c=i.parse(r),l=!a.instrumentationkey&&Object.keys(a).length>0?null:t;this.instrumentationKey=a.instrumentationkey||l||c.instrumentationkey||e._getInstrumentationKey(),this.endpointUrl=(a.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return n.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=a.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=a.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||o.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=s.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!0,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();e.exports=a},function(e,t,n){"use strict";var r=n(20),i=n(29),o=n(4),s=n(49),a=n(37),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.sdkVersion=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.getHashString=t.FileSystemUtils=t.RawFileSystem=t.convertStat=t.convertFileType=void 0;const i=n(73),o=n(109),s=n(309),a=n(0),c=n(22),l=n(2);n(11);const u=n(5),d=n(627),h=n(137),p=n(628),f=n(6);function g(e){return e.isFile()?f.FileType.File:e.isDirectory()?f.FileType.Directory:e.isSymbolicLink()?f.FileType.SymbolicLink:f.FileType.Unknown}function m(e,t){return{type:t,size:e.size,ctime:Math.round(e.ctimeMs),mtime:Math.round(e.mtimeMs)}}function v(e,t){return t===f.FileType.Unknown?e.filter(([e,t])=>t===f.FileType.Unknown||t===(f.FileType.SymbolicLink&f.FileType.Unknown)):e.filter(([e,n])=>(n&t)>0)}t.convertFileType=g,t.convertStat=m;class y{constructor(e,t,n){this.paths=e,this.vscfs=t,this.fsExtra=n}static withDefaults(e,t,n){return new y(e||h.FileSystemPaths.withDefaults(),t||l.workspace.fs,n||o)}async stat(e){const t=l.Uri.file(e);return this.vscfs.stat(t)}async lstat(e){const t=await this.fsExtra.lstat(e);return m(t,g(t))}async chmod(e,t){return this.fsExtra.chmod(e,t)}async move(e,t){const n=l.Uri.file(e),r=l.Uri.file(t);await this.vscfs.stat(l.Uri.file(this.paths.dirname(t)));const i={overwrite:!1};try{await this.vscfs.rename(n,r,i)}catch(e){if(!d.isFileExistsError(e))throw e;if((await this.vscfs.stat(r)).type===f.FileType.Directory)throw e;i.overwrite=!0,await this.vscfs.rename(n,r,i)}}async readData(e){const t=l.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n)}async readText(e){const t=l.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n).toString("utf8")}async writeText(e,t){const n=l.Uri.file(e),r=Buffer.from(t);await this.vscfs.writeFile(n,r)}async appendText(e,t){return this.fsExtra.appendFile(e,t)}async copyFile(e,t){const n=l.Uri.file(e),r=l.Uri.file(t);await this.vscfs.stat(l.Uri.file(this.paths.dirname(t))),await this.vscfs.copy(n,r,{overwrite:!0})}async rmfile(e){const t=l.Uri.file(e);return this.vscfs.delete(t,{recursive:!1,useTrash:!1})}async rmdir(e){const t=l.Uri.file(e),n=await this.vscfs.readDirectory(t);if(n&&n.length>0)throw d.createDirNotEmptyError(e);return this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async rmtree(e){const t=l.Uri.file(e);return await this.vscfs.stat(t),this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async mkdirp(e){const t=l.Uri.file(e);await this.vscfs.createDirectory(t)}async listdir(e){const t=l.Uri.file(e);return(await this.vscfs.readDirectory(t)).map(([t,n])=>[this.paths.join(e,t),n])}statSync(e){let t=this.fsExtra.lstatSync(e),n=f.FileType.Unknown;return t.isSymbolicLink()&&(n=f.FileType.SymbolicLink,t=this.fsExtra.statSync(e)),n|=g(t),m(t,n)}readTextSync(e){return this.fsExtra.readFileSync(e,"utf8")}createReadStream(e){return this.fsExtra.createReadStream(e)}createWriteStream(e){return this.fsExtra.createWriteStream(e)}}t.RawFileSystem=y;class b{constructor(e,t,n,r,i,o){this.raw=e,this.pathUtils=t,this.paths=n,this.tmp=r,this.getHash=i,this.globFiles=o}static withDefaults(e,t,n,r,i){return t=t||h.FileSystemPathUtils.withDefaults(),new b(e||y.withDefaults(t.paths),t,t.paths,n||p.TemporaryFileSystem.withDefaults(),r||S,i||c.promisify(s))}async createDirectory(e){return this.raw.mkdirp(e)}async deleteDirectory(e){return this.raw.rmdir(e)}async deleteFile(e){return this.raw.rmfile(e)}async pathExists(e,t){let n;try{n=await this.raw.stat(e)}catch(t){return d.isFileNotFoundError(t)||u.traceError(`stat() failed for "${e}"`,t),!1}return void 0===t||(t===f.FileType.Unknown?n.type===f.FileType.Unknown:(n.type&t)===t)}async fileExists(e){return this.pathExists(e,f.FileType.File)}async directoryExists(e){return this.pathExists(e,f.FileType.Directory)}async listdir(e){try{return await this.raw.listdir(e)}catch(t){if(!await this.pathExists(e))return[];throw t}}async getSubDirectories(e){return v(await this.listdir(e),f.FileType.Directory).map(([e,t])=>e)}async getFiles(e){return v(await this.listdir(e),f.FileType.File).map(([e,t])=>e)}async isDirReadonly(e){const t=`${e}${this.paths.sep}___vscpTest___`;try{await this.raw.stat(e),await this.raw.writeText(t,"")}catch(e){if(d.isNoPermissionsError(e))return!0;throw e}return this.raw.rmfile(t).ignoreErrors(),!1}async getFileHash(e){const t=await this.raw.lstat(e),n=`${t.ctime}-${t.mtime}`;return this.getHash(n)}async search(e,t,n){let r;t&&(r={...r,cwd:t}),n&&(r={...r,dot:n});const i=await this.globFiles(e,r);return Array.isArray(i)?i:[]}fileExistsSync(e){try{this.raw.statSync(e)}catch(e){if(d.isFileNotFoundError(e))return!1;throw e}return!0}}function S(e){const t=i.createHash("sha512");return t.update(e),t.digest("hex")}t.FileSystemUtils=b,t.getHashString=S;let E=class{constructor(){this.utils=b.withDefaults()}get directorySeparatorChar(){return this.utils.paths.sep}arePathsSame(e,t){return this.utils.pathUtils.arePathsSame(e,t)}getDisplayName(e){return this.utils.pathUtils.getDisplayName(e)}async stat(e){return this.utils.raw.stat(e)}async createDirectory(e){return this.utils.createDirectory(e)}async deleteDirectory(e){return this.utils.deleteDirectory(e)}async listdir(e){return this.utils.listdir(e)}async readFile(e){return this.utils.raw.readText(e)}async readData(e){return this.utils.raw.readData(e)}async writeFile(e,t){return this.utils.raw.writeText(e,t)}async appendFile(e,t){return this.utils.raw.appendText(e,t)}async copyFile(e,t){return this.utils.raw.copyFile(e,t)}async deleteFile(e){return this.utils.deleteFile(e)}async chmod(e,t){return this.utils.raw.chmod(e,t)}async move(e,t){await this.utils.raw.move(e,t)}readFileSync(e){return this.utils.raw.readTextSync(e)}createReadStream(e){return this.utils.raw.createReadStream(e)}createWriteStream(e){return this.utils.raw.createWriteStream(e)}async fileExists(e){return this.utils.fileExists(e)}fileExistsSync(e){return this.utils.fileExistsSync(e)}async directoryExists(e){return this.utils.directoryExists(e)}async getSubDirectories(e){return this.utils.getSubDirectories(e)}async getFiles(e){return this.utils.getFiles(e)}async getFileHash(e){return this.utils.getFileHash(e)}async search(e,t,n){return this.utils.search(e,t,n)}async createTemporaryFile(e,t){return this.utils.tmp.createFile(e,t)}async isDirReadonly(e){return this.utils.isDirReadonly(e)}};E=r([a.injectable()],E),t.FileSystem=E},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(582);e.exports={readJson:r(i.readFile),readJsonSync:i.readFileSync,writeJson:r(i.writeFile),writeJsonSync:i.writeFileSync}},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||r)}e.exports="win32"===process.platform?i:r,e.exports.posix=r,e.exports.win32=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(196),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(195),i=n(319),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOSDotNetCompatibilityService=t.IDotNetCompatibilityService=void 0,t.IDotNetCompatibilityService=Symbol("IDotNetCompatibilityService"),t.IOSDotNetCompatibilityService=Symbol("IOSDotNetCompatibilityService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationDiagnostics=void 0,t.IApplicationDiagnostics=Symbol("IApplicationDiagnostics")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnvFileTelemetryTests=t.sendActivationTelemetry=t.sendFileCreationTelemetry=t.sendSettingTelemetry=void 0;const r=n(99),i=n(7),o=n(9);let s,a=!1;function c(e=!1){i.sendTelemetryEvent(o.EventName.ENVFILE_WORKSPACE,void 0,{hasCustomEnvPath:e}),a=!0}function l(){return!a}function u(e){var t;if(!s){const n=e.getConfiguration("python");s=(null===(t=n.inspect("envFile"))||void 0===t?void 0:t.defaultValue)||""}return s}t.sendSettingTelemetry=function(e,t){l()&&t!==u(e)&&c(!0)},t.sendFileCreationTelemetry=function(){l()&&c()},t.sendActivationTelemetry=async function(e,t,n){if(l()){const i=new r.SystemVariables(n,void 0,t).resolveAny(u(t));await e.fileExists(i)&&c()}},function(e){e.setState=function({telemetrySent:e,defaultSetting:t}){void 0!==e&&(a=e),void 0!==u&&(s=t)},e.resetState=function(){s=void 0,a=!1}}(t.EnvFileTelemetryTests||(t.EnvFileTelemetryTests={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerAnalysisOptionsBase=void 0;const i=n(0),o=n(2),s=n(47),a=n(10),c=n(5),l=n(23);let u=class{constructor(e,t){this.envVarsProvider=e,this.disposables=[],this.didChange=new o.EventEmitter,this.envPythonPath="",this.output=t.channel}async initialize(e,t){const n=this.envVarsProvider.onDidEnvironmentVariablesChange(this.onEnvVarChange,this);this.disposables.push(n)}get onDidChange(){return this.didChange.event}dispose(){this.disposables.forEach(e=>e.dispose()),this.didChange.dispose()}async getAnalysisOptions(){const e=this.getWorkspaceFolder();return{documentSelector:this.getDocumentFilters(e),workspaceFolder:e,synchronize:{configurationSection:a.PYTHON_LANGUAGE},outputChannel:this.output,revealOutputChannelOn:s.RevealOutputChannelOn.Never,initializationOptions:await this.getInitializationOptions()}}getWorkspaceFolder(){}getDocumentFilters(e){return a.PYTHON}async getInitializationOptions(){}async getEnvPythonPath(){const e=await this.envVarsProvider.getEnvironmentVariables();return this.envPythonPath=e.PYTHONPATH||"",this.envPythonPath}onEnvVarChange(){this.notifyifEnvPythonPathChanged().ignoreErrors()}async notifyifEnvPythonPathChanged(){const e=(await this.envVarsProvider.getEnvironmentVariables()).PYTHONPATH||"";this.envPythonPath!==e&&this.didChange.fire()}};r([c.traceDecorators.error("Failed to get analysis options")],u.prototype,"getAnalysisOptions",null),r([l.debounceSync(1e3)],u.prototype,"onEnvVarChange",null),u=r([i.injectable()],u),t.LanguageServerAnalysisOptionsBase=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i extends r.CompletionItem{constructor(e){super(e)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReporting=void 0;const r=n(2),i=n(15);t.ProgressReporting=class{constructor(e){this.languageClient=e,this.languageClient.onNotification("python/setStatusBarMessage",e=>{this.statusBarMessage&&this.statusBarMessage.dispose(),this.statusBarMessage=r.window.setStatusBarMessage(e)}),this.languageClient.onNotification("python/beginProgress",e=>{this.progressDeferred||this.beginProgress()}),this.languageClient.onNotification("python/reportProgress",e=>{this.progress||this.beginProgress(),this.progress.report({message:e})}),this.languageClient.onNotification("python/endProgress",e=>{this.progressDeferred&&(this.progressDeferred.resolve(),this.progressDeferred=void 0,this.progress=void 0)})}dispose(){this.statusBarMessage&&this.statusBarMessage.dispose()}beginProgress(){this.progressDeferred=i.createDeferred(),r.window.withProgress({location:r.ProgressLocation.Window,title:""},e=>(this.progress=e,this.progressDeferred.promise))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientMiddleware=void 0;const i=n(4),o=n(2),s=n(47),a=n(3),c=n(10),l=n(24),u=n(6),d=n(1),h=n(15),p=n(30),f=n(699),g=n(7),m=n(9),v=n(16);class y{constructor(e,t,n,r){let i;if(this.serviceContainer=e,this.serverVersion=r,this.lastCaptured=new Map,this.nextWindow=0,this.eventCount=0,this.workspace={configuration:(e,t,n)=>{const r=this.serviceContainer.get(d.IConfigurationService),i=n(e,t),a=t=>(t instanceof s.ResponseError||e.items.forEach((e,n)=>{if("python"===e.section){const i=e.scopeUri?o.Uri.parse(e.scopeUri):void 0;t[n].pythonPath=r.getSettings(i).pythonPath}}),t);return h.isThenable(i)?i.then(a):a(i)}},this.connected=!1,this.handleDiagnostics=this.handleDiagnostics.bind(this),this.didOpen=this.didOpen.bind(this),this.didSave=this.didSave.bind(this),this.didChange=this.didChange.bind(this),this.didClose=this.didClose.bind(this),this.willSave=this.willSave.bind(this),this.willSaveWaitUntil=this.willSaveWaitUntil.bind(this),t===v.LanguageServerType.Microsoft)this.eventName=m.EventName.PYTHON_LANGUAGE_SERVER_REQUEST,i=l.CollectLSRequestTiming;else{if(t!==v.LanguageServerType.Node)return;this.eventName=m.EventName.LANGUAGE_SERVER_REQUEST,i=l.CollectNodeLSRequestTiming}const p=this.serviceContainer.get(d.IExperimentsManager),g=this.serviceContainer.get(a.IJupyterExtensionDependencyManager),y=this.serviceContainer.get(a.IVSCodeNotebook),b=this.serviceContainer.get(d.IDisposableRegistry)||[],S=this.serviceContainer.get(d.IExtensions),E=this.serviceContainer.get(u.IFileSystem);p&&!p.inExperiment(i.experiment)&&(this.eventName=void 0,p.sendTelemetryIfInExperiment(i.control)),g&&g.isJupyterExtensionInstalled&&(this.notebookAddon=new f.NotebookMiddlewareAddon(y,n,E,c.PYTHON_LANGUAGE,/.*\.ipynb/m)),b.push(null==S?void 0:S.onDidChange(()=>{g&&(this.notebookAddon&&!g.isJupyterExtensionInstalled?this.notebookAddon=void 0:!this.notebookAddon&&g.isJupyterExtensionInstalled&&(this.notebookAddon=new f.NotebookMiddlewareAddon(y,n,E,c.PYTHON_LANGUAGE,/.*\.ipynb/m)))}))}connect(){this.connected=!0}disconnect(){this.connected=!1}didChange(){if(this.connected)return this.callNext("didChange",arguments)}didOpen(){return this.callNext("didOpen",arguments)}didClose(){return this.callNext("didClose",arguments)}didSave(){if(this.connected)return this.callNext("didSave",arguments)}willSave(){if(this.connected)return this.callNext("willSave",arguments)}willSaveWaitUntil(){if(this.connected)return this.callNext("willSaveWaitUntil",arguments)}provideCompletionItem(){if(this.connected)return this.callNext("provideCompletionItem",arguments)}provideHover(){if(this.connected)return this.callNext("provideHover",arguments)}handleDiagnostics(e,t,n){if(this.connected){const t=e.fsPath,n=t?i.basename(t):void 0;if(!n||!n.startsWith(c.HiddenFilePrefix))return this.callNext("handleDiagnostics",arguments)}}resolveCompletionItem(){if(this.connected)return this.callNext("resolveCompletionItem",arguments)}provideSignatureHelp(){if(this.connected)return this.callNext("provideSignatureHelp",arguments)}provideDefinition(){if(this.connected)return this.callNext("provideDefinition",arguments)}provideReferences(){if(this.connected)return this.callNext("provideReferences",arguments)}provideDocumentHighlights(){if(this.connected)return this.callNext("provideDocumentHighlights",arguments)}provideDocumentSymbols(){if(this.connected)return this.callNext("provideDocumentSymbols",arguments)}provideWorkspaceSymbols(){if(this.connected)return this.callNext("provideWorkspaceSymbols",arguments)}provideCodeActions(){if(this.connected)return this.callNext("provideCodeActions",arguments)}provideCodeLenses(){if(this.connected)return this.callNext("provideCodeLenses",arguments)}resolveCodeLens(){if(this.connected)return this.callNext("resolveCodeLens",arguments)}provideDocumentFormattingEdits(){if(this.connected)return this.callNext("provideDocumentFormattingEdits",arguments)}provideDocumentRangeFormattingEdits(){if(this.connected)return this.callNext("provideDocumentRangeFormattingEdits",arguments)}provideOnTypeFormattingEdits(){if(this.connected)return this.callNext("provideOnTypeFormattingEdits",arguments)}provideRenameEdits(){if(this.connected)return this.callNext("provideRenameEdits",arguments)}prepareRename(){if(this.connected)return this.callNext("prepareRename",arguments)}provideDocumentLinks(){if(this.connected)return this.callNext("provideDocumentLinks",arguments)}resolveDocumentLink(){if(this.connected)return this.callNext("resolveDocumentLink",arguments)}provideDeclaration(){if(this.connected)return this.callNext("provideDeclaration",arguments)}callNext(e,t){return this.notebookAddon?this.notebookAddon[e](...t):t[t.length-1](...t)}}function b(e,t){return function(n,r,i){const o=i.value;return i.value=function(...n){const r=this.eventName;if(!r)return o.apply(this,n);const i=Date.now();if(i>this.nextWindow)this.nextWindow=i+36e5,this.eventCount=0;else if(this.eventCount>=100)return o.apply(this,n);const s=this.lastCaptured.get(e);if(s&&i-s<t)return o.apply(this,n);this.lastCaptured.set(e,i),this.eventCount+=1;const a=e.replace(/\//g,"."),c={lsVersion:this.serverVersion||"unknown",method:a},l=new p.StopWatch,u=o.apply(this,n);return u&&h.isThenable(u)?u.then(()=>{g.sendTelemetryEvent(r,l.elapsedTime,c)}):g.sendTelemetryEvent(r,l.elapsedTime,c),u},i}}r([b("textDocument/completion",3e5)],y.prototype,"provideCompletionItem",null),r([b("textDocument/hover",3e5)],y.prototype,"provideHover",null),r([b("completionItem/resolve",3e5)],y.prototype,"resolveCompletionItem",null),r([b("textDocument/signatureHelp",3e5)],y.prototype,"provideSignatureHelp",null),r([b("textDocument/definition",6e4)],y.prototype,"provideDefinition",null),r([b("textDocument/references",6e4)],y.prototype,"provideReferences",null),r([b("textDocument/documentSymbol",3e5)],y.prototype,"provideDocumentSymbols",null),r([b("workspace/symbol",6e4)],y.prototype,"provideWorkspaceSymbols",null),r([b("textDocument/codeAction",3e5)],y.prototype,"provideCodeActions",null),r([b("textDocument/codeLens",3e5)],y.prototype,"provideCodeLenses",null),r([b("codeLens/resolve",3e5)],y.prototype,"resolveCodeLens",null),r([b("textDocument/rename",6e4)],y.prototype,"provideRenameEdits",null),r([b("textDocument/prepareRename",6e4)],y.prototype,"prepareRename",null),r([b("textDocument/declaration",6e4)],y.prototype,"provideDeclaration",null),t.LanguageClientMiddleware=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPositionInsideStringOrComment=t.getDocumentTokens=void 0;const r=n(2),i=n(339),o=n(116);function s(e,t,n){const o=e.getText(new r.Range(new r.Position(0,0),t));return(new i.Tokenizer).tokenize(o,0,o.length,n)}t.getDocumentTokens=s,t.isPositionInsideStringOrComment=function(e,t){const n=s(e,t.translate(1,0),o.TokenizerMode.CommentsAndStrings),r=e.offsetAt(t),i=n.getItemContaining(r-1);if(i>=0){const e=n.getItemAt(i);return e.type===o.TokenType.String||e.type===o.TokenType.Comment}if(r>0&&i>=0){const e=n.getItemAt(i);return e.end===r&&e.type===o.TokenType.Comment}return!1}},function(e,t,n){var r,i,o,s,a;r=n(728),i=n(343).utf8,o=n(729),s=n(343).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=a._ff,g=a._gg,m=a._hh,v=a._ii;for(p=0;p<n.length;p+=16){var y=l,b=u,S=d,E=h;l=f(l,u,d,h,n[p+0],7,-680876936),h=f(h,l,u,d,n[p+1],12,-389564586),d=f(d,h,l,u,n[p+2],17,606105819),u=f(u,d,h,l,n[p+3],22,-1044525330),l=f(l,u,d,h,n[p+4],7,-176418897),h=f(h,l,u,d,n[p+5],12,1200080426),d=f(d,h,l,u,n[p+6],17,-1473231341),u=f(u,d,h,l,n[p+7],22,-45705983),l=f(l,u,d,h,n[p+8],7,1770035416),h=f(h,l,u,d,n[p+9],12,-1958414417),d=f(d,h,l,u,n[p+10],17,-42063),u=f(u,d,h,l,n[p+11],22,-1990404162),l=f(l,u,d,h,n[p+12],7,1804603682),h=f(h,l,u,d,n[p+13],12,-40341101),d=f(d,h,l,u,n[p+14],17,-1502002290),l=g(l,u=f(u,d,h,l,n[p+15],22,1236535329),d,h,n[p+1],5,-165796510),h=g(h,l,u,d,n[p+6],9,-1069501632),d=g(d,h,l,u,n[p+11],14,643717713),u=g(u,d,h,l,n[p+0],20,-373897302),l=g(l,u,d,h,n[p+5],5,-701558691),h=g(h,l,u,d,n[p+10],9,38016083),d=g(d,h,l,u,n[p+15],14,-660478335),u=g(u,d,h,l,n[p+4],20,-405537848),l=g(l,u,d,h,n[p+9],5,568446438),h=g(h,l,u,d,n[p+14],9,-1019803690),d=g(d,h,l,u,n[p+3],14,-187363961),u=g(u,d,h,l,n[p+8],20,1163531501),l=g(l,u,d,h,n[p+13],5,-1444681467),h=g(h,l,u,d,n[p+2],9,-51403784),d=g(d,h,l,u,n[p+7],14,1735328473),l=m(l,u=g(u,d,h,l,n[p+12],20,-1926607734),d,h,n[p+5],4,-378558),h=m(h,l,u,d,n[p+8],11,-2022574463),d=m(d,h,l,u,n[p+11],16,1839030562),u=m(u,d,h,l,n[p+14],23,-35309556),l=m(l,u,d,h,n[p+1],4,-1530992060),h=m(h,l,u,d,n[p+4],11,1272893353),d=m(d,h,l,u,n[p+7],16,-155497632),u=m(u,d,h,l,n[p+10],23,-1094730640),l=m(l,u,d,h,n[p+13],4,681279174),h=m(h,l,u,d,n[p+0],11,-358537222),d=m(d,h,l,u,n[p+3],16,-722521979),u=m(u,d,h,l,n[p+6],23,76029189),l=m(l,u,d,h,n[p+9],4,-640364487),h=m(h,l,u,d,n[p+12],11,-421815835),d=m(d,h,l,u,n[p+15],16,530742520),l=v(l,u=m(u,d,h,l,n[p+2],23,-995338651),d,h,n[p+0],6,-198630844),h=v(h,l,u,d,n[p+7],10,1126891415),d=v(d,h,l,u,n[p+14],15,-1416354905),u=v(u,d,h,l,n[p+5],21,-57434055),l=v(l,u,d,h,n[p+12],6,1700485571),h=v(h,l,u,d,n[p+3],10,-1894986606),d=v(d,h,l,u,n[p+10],15,-1051523),u=v(u,d,h,l,n[p+1],21,-2054922799),l=v(l,u,d,h,n[p+8],6,1873313359),h=v(h,l,u,d,n[p+15],10,-30611744),d=v(d,h,l,u,n[p+6],15,-1560198380),u=v(u,d,h,l,n[p+13],21,1309151649),l=v(l,u,d,h,n[p+4],6,-145523070),h=v(h,l,u,d,n[p+11],10,-1120210379),d=v(d,h,l,u,n[p+2],15,718787259),u=v(u,d,h,l,n[p+9],21,-343485551),l=l+y>>>0,u=u+b>>>0,d=d+S>>>0,h=h+E>>>0}return r.endian([l,u,d,h])})._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedError=t.ErrorUtils=void 0;const r=n(20);t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf("No module named "+e)>0||t.indexOf(`No module named '${e}'`)>0))}};class i extends Error{constructor(e,t){super(e),this.stack=`${new Error("").stack}${r.EOL}${r.EOL}${t.stack}`}}t.WrappedError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNotInstalledError=void 0;class r extends Error{constructor(e){super(`Module '${e}' not installed.`)}}t.ModuleNotInstalledError=r},function(e,t,n){var r=n(743);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerActivatorBase=void 0;const i=n(47),o=n(0),s=n(5);let a=class{constructor(e,t,n,r){this.manager=e,this.workspace=t,this.fs=n,this.configurationService=r}async start(e,t){e||(e=this.workspace.hasWorkspaceFolders?this.workspace.workspaceFolders[0].uri:void 0),this.resource=e,await this.ensureLanguageServerIsAvailable(e),await this.manager.start(e,t)}dispose(){this.manager.dispose()}activate(){this.manager.connect()}deactivate(){this.manager.disconnect()}get connection(){const e=this.getLanguageClient();if(e)return{sendNotification:e.sendNotification.bind(e),sendRequest:e.sendRequest.bind(e),sendProgress:e.sendProgress.bind(e),onRequest:e.onRequest.bind(e),onNotification:e.onNotification.bind(e),onProgress:e.onProgress.bind(e)}}get capabilities(){var e;const t=this.getLanguageClient();if(t)return null===(e=t.initializeResult)||void 0===e?void 0:e.capabilities}provideRenameEdits(e,t,n,r){return this.handleProvideRenameEdits(e,t,n,r)}provideDefinition(e,t,n){return this.handleProvideDefinition(e,t,n)}provideHover(e,t,n){return this.handleProvideHover(e,t,n)}provideReferences(e,t,n,r){return this.handleProvideReferences(e,t,n,r)}provideCompletionItems(e,t,n,r){return this.handleProvideCompletionItems(e,t,n,r)}provideCodeLenses(e,t){return this.handleProvideCodeLenses(e,t)}provideDocumentSymbols(e,t){return this.handleProvideDocumentSymbols(e,t)}provideSignatureHelp(e,t,n,r){return this.handleProvideSignatureHelp(e,t,n,r)}getLanguageClient(){const e=this.manager.languageProxy;if(e)return e.languageClient}async handleProvideRenameEdits(e,t,n,r){const o=this.getLanguageClient();if(o){const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),newName:n},a=await o.sendRequest(i.RenameRequest.type,s,r);if(a)return o.protocol2CodeConverter.asWorkspaceEdit(a)}}async handleProvideDefinition(e,t,n){const r=this.getLanguageClient();if(r){const o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),position:r.code2ProtocolConverter.asPosition(t)},s=await r.sendRequest(i.DefinitionRequest.type,o,n);if(s)return r.protocol2CodeConverter.asDefinitionResult(s)}}async handleProvideHover(e,t,n){const r=this.getLanguageClient();if(r){const o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),position:r.code2ProtocolConverter.asPosition(t)},s=await r.sendRequest(i.HoverRequest.type,o,n);if(s)return r.protocol2CodeConverter.asHover(s)}}async handleProvideReferences(e,t,n,r){const o=this.getLanguageClient();if(o){const s={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),context:n},a=await o.sendRequest(i.ReferencesRequest.type,s,r);if(a)return a.map(e=>o.protocol2CodeConverter.asLocation(e))}}async handleProvideCodeLenses(e,t){const n=this.getLanguageClient();if(n){const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)},o=await n.sendRequest(i.CodeLensRequest.type,r,t);if(o)return n.protocol2CodeConverter.asCodeLenses(o)}}async handleProvideCompletionItems(e,t,n,r){const o=this.getLanguageClient();if(o){const s=o.code2ProtocolConverter.asCompletionParams(e,t,r),a=await o.sendRequest(i.CompletionRequest.type,s,n);if(a)return o.protocol2CodeConverter.asCompletionResult(a)}}async handleProvideDocumentSymbols(e,t){const n=this.getLanguageClient();if(n){const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)},o=await n.sendRequest(i.DocumentSymbolRequest.type,r,t);if(o&&o.length){if(o[0].range){const e=o;return n.protocol2CodeConverter.asDocumentSymbols(e)}{const e=o;return n.protocol2CodeConverter.asSymbolInformations(e)}}}}async handleProvideSignatureHelp(e,t,n,r){const o=this.getLanguageClient();if(o){const r={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t)},s=await o.sendRequest(i.SignatureHelpRequest.type,r,n);if(s)return o.protocol2CodeConverter.asSignatureHelp(s)}}};r([s.traceDecorators.error("Failed to activate language server")],a.prototype,"start",null),a=r([o.injectable()],a),t.LanguageServerActivatorBase=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticCommand=void 0;t.BaseDiagnosticCommand=class{constructor(e){this.diagnostic=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(1);t.ProductNames=new Map,t.ProductNames.set(r.Product.autopep8,"autopep8"),t.ProductNames.set(r.Product.bandit,"bandit"),t.ProductNames.set(r.Product.black,"black"),t.ProductNames.set(r.Product.flake8,"flake8"),t.ProductNames.set(r.Product.mypy,"mypy"),t.ProductNames.set(r.Product.nosetest,"nosetest"),t.ProductNames.set(r.Product.pycodestyle,"pycodestyle"),t.ProductNames.set(r.Product.pylama,"pylama"),t.ProductNames.set(r.Product.prospector,"prospector"),t.ProductNames.set(r.Product.pydocstyle,"pydocstyle"),t.ProductNames.set(r.Product.pylint,"pylint"),t.ProductNames.set(r.Product.pytest,"pytest"),t.ProductNames.set(r.Product.yapf,"yapf"),t.ProductNames.set(r.Product.rope,"rope")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFormatterHelper=void 0,t.IFormatterHelper=Symbol("IFormatterHelper")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseVersion=t.parseVersionInfo=t.validateVersionInfo=t.normalizeVersionInfo=t.isVersionInfoEmpty=t.parseBasicVersionInfo=t.getVersionString=t.validateBasicVersionInfo=t.normalizeBasicVersionInfo=t.EMPTY_VERSION=void 0;const r=n(38),i=n(352);function o(e){if("number"==typeof e)return isNaN(e)?[-1,"missing"]:e<0?[-1,""]:[e,""];if("string"==typeof e){const t=parseInt(e,10);return isNaN(t)?[-1,"string not numeric"]:t<0?[-1,""]:[t,""]}return null==e?[-1,"missing"]:[-1,"unsupported type"]}function s(e){if(!e)return t.EMPTY_VERSION;const n={...e},r=n;return void 0===r.unnormalized&&(r.unnormalized={},[n.major,r.unnormalized.major]=o(n.major),[n.minor,r.unnormalized.minor]=o(n.minor),[n.micro,r.unnormalized.micro]=o(n.micro)),n}function a(e,t,n){if(!(0===t||t>0)&&n&&""!==n)throw Error(`invalid ${e} version (failed to normalize; ${n})`)}function c(e){var t,n,r;const i=e;if(a("major",e.major,null===(t=i.unnormalized)||void 0===t?void 0:t.major),a("minor",e.minor,null===(n=i.unnormalized)||void 0===n?void 0:n.minor),a("micro",e.micro,null===(r=i.unnormalized)||void 0===r?void 0:r.micro),e.major<0)throw Error("missing major version");if(e.minor<0&&(0===e.micro||e.micro>0))throw Error("missing minor version")}t.EMPTY_VERSION={major:-1,minor:-1,micro:-1,unnormalized:{major:void 0,minor:void 0,micro:void 0}},t.normalizeBasicVersionInfo=s,t.validateBasicVersionInfo=c,t.getVersionString=function(e){return e.major<0?"":e.minor<0?""+e.major:e.micro<0?`${e.major}.${e.minor}`:`${e.major}.${e.minor}.${e.micro}`};const l=i.verboseRegExp("\n    ^\n    (.*?)  # <before>\n    (\\d+)  # <major>\n    (?:\n        [.]\n        (\\d+)  # <minor>\n        (?:\n            [.]\n            (\\d+)  # <micro>\n        )?\n    )?\n    ([^\\d].*)?  # <after>\n    $\n","s");function u(e){const t=e.match(l);if(!t)return;const[,n,r,i,o,s]=t;if(n&&n.endsWith("."))return;if(s&&""!==s){if("."===s)return;if(!(n&&""!==n||o&&""!==o))return}return{version:{major:parseInt(r,10),minor:i?parseInt(i,10):-1,micro:o?parseInt(o,10):-1},before:n||"",after:s||""}}t.parseBasicVersionInfo=u,t.isVersionInfoEmpty=function(e){return!!e&&("number"==typeof e.major&&"number"==typeof e.minor&&"number"==typeof e.micro&&(e.major<0&&e.minor<0&&e.micro<0))},t.normalizeVersionInfo=function(e){const t=s(e);if(!e)return t.raw="",t;const n={...e,...t};return n.raw||(n.raw=""),n},t.validateVersionInfo=function(e){c(e)},t.parseVersionInfo=function(e){const t=u(e);if(void 0!==t)return t.version.raw=e,t},t.parseVersion=function(e){e=e.replace(/\.00*(?=[1-9]|0\.)/,".");const t=r.coerce(e);return null!==t&&r.valid(t)?t:new r.SemVer("0.0.0")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.getArchitectureDisplayName=t.RegistryImplementation=void 0;const i=n(0),o=n(5),s=n(27),a=n(6);var c;!function(e){e.x86="x86",e.x64="x64"}(c||(c={}));let l=class{async getKeys(e,t,r){return async function(e){const t=n(215);return new Promise(n=>{new t(e).keys((e,t)=>{if(e||!Array.isArray(t))return n([]);n(t.filter(e=>"string"==typeof e.key).map(e=>e.key))})})}({hive:d(t),arch:u(r),key:e}).catch(e=>(o.traceError("Fetching keys from windows registry resulted in an error",e),[]))}async getValue(e,t,r,i=""){return async function(e,t=""){const r=n(215);return new Promise(n=>{new r(e).get(t,(e,t)=>{if(e||!t||"string"!=typeof t.value)return n(void 0);n(t.value)})})}({hive:d(t),arch:u(r),key:e},i).catch(e=>{o.traceError("Fetching key value from windows registry resulted in an error",e)})}};function u(e){switch(e){case s.Architecture.x86:return c.x86;case s.Architecture.x64:return c.x64;default:return}}function d(e){const t=n(215);switch(e){case a.RegistryHive.HKCU:return t.HKCU;case a.RegistryHive.HKLM:return t.HKLM;default:return}}l=r([i.injectable()],l),t.RegistryImplementation=l,t.getArchitectureDisplayName=function(e){switch(e){case s.Architecture.x64:return"64-bit";case s.Architecture.x86:return"32-bit";default:return""}}},function(e,t,n){var r=n(22),i=n(4),o=n(55).spawn,s=["HKLM","HKCU","HKCR","HKU","HKCC"],a=["REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE"],c=/(\\[a-zA-Z0-9_\s]+)*/,l=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,u=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function d(e,t){if(!(this instanceof d))return new d(e,t);Error.captureStackTrace(this,d),this.__defineGetter__("name",(function(){return d.name})),this.__defineGetter__("message",(function(){return e})),this.__defineGetter__("code",(function(){return t}))}function h(e){var t={stdout:"",stderr:""};return e.stdout.on("data",(function(e){t.stdout+=e.toString()})),e.stderr.on("data",(function(e){t.stderr+=e.toString()})),t}function p(e,t,n){var i=n.stdout.trim(),o=n.stderr.trim();return new d(r.format("%s command exited with code %d:\n%s\n%s",e,t,i,o),t)}function f(e,t){t&&e.push("/reg:"+function(e){if("x64"==e)return"64";if("x86"==e)return"32";throw new Error("illegal architecture: "+e+" (use x86 or x64)")}(t))}function g(){return"win32"===process.platform?i.join(process.env.windir,"system32","reg.exe"):"REG"}function m(e,t,n,r,i,o,s){if(!(this instanceof m))return new m(e,t,n,r,i,o,s);var a=e,c=t,l=n,u=r,d=i,h=o,p=s;this.__defineGetter__("host",(function(){return a})),this.__defineGetter__("hive",(function(){return c})),this.__defineGetter__("key",(function(){return l})),this.__defineGetter__("name",(function(){return u})),this.__defineGetter__("type",(function(){return d})),this.__defineGetter__("value",(function(){return h})),this.__defineGetter__("arch",(function(){return p}))}function v(e){if(!(this instanceof v))return new v(e);var t=e||{},n=""+(t.host||""),r=""+(t.hive||"HKLM"),i=""+(t.key||""),o=t.arch||null;if(this.__defineGetter__("host",(function(){return n})),this.__defineGetter__("hive",(function(){return r})),this.__defineGetter__("key",(function(){return i})),this.__defineGetter__("path",(function(){return(0==n.length?"":"\\\\"+n+"\\")+r+i})),this.__defineGetter__("arch",(function(){return o})),this.__defineGetter__("parent",(function(){var e=i.lastIndexOf("\\");return new v({host:this.host,hive:this.hive,key:-1==e?"":i.substring(0,e),arch:this.arch})})),-1==s.indexOf(r))throw new Error("illegal hive specified.");if(!c.test(i))throw new Error("illegal key specified.");if(o&&"x64"!=o&&"x86"!=o)throw new Error("illegal architecture specified (use x86 or x64)")}r.inherits(d,Error),r.inherits(m,Object),v.HKLM="HKLM",v.HKCU="HKCU",v.HKCR="HKCR",v.HKU="HKU",v.HKCC="HKCC",v.HIVES=s,v.REG_SZ="REG_SZ",v.REG_MULTI_SZ="REG_MULTI_SZ",v.REG_EXPAND_SZ="REG_EXPAND_SZ",v.REG_DWORD="REG_DWORD",v.REG_QWORD="REG_QWORD",v.REG_BINARY="REG_BINARY",v.REG_NONE="REG_NONE",v.REG_TYPES=a,v.DEFAULT_VALUE="",v.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];f(t,this.arch);var n=o(g(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=h(n);return n.on("close",(function(t){if(!s)if(0!==t)e(p("QUERY",t,a),null);else{for(var n=[],o=[],c=r.split("\n"),l=0,d=0,h=c.length;d<h;d++){var f=c[d].trim();f.length>0&&(0!=l&&n.push(f),++l)}for(d=0,h=n.length;d<h;d++){var g,v,y,b=u.exec(n[d]);b&&(g=b[1].trim(),v=b[2].trim(),y=b[3],o.push(new m(i.host,i.hive,i.key,g,v,y,i.arch)))}e(null,o)}})),n.stdout.on("data",(function(e){r+=e.toString()})),n.on("error",(function(t){s=t,e(t)})),this},v.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];f(t,this.arch);var n=o(g(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=h(n);return n.on("close",(function(t){s||0!==t&&e(p("QUERY",t,a),null)})),n.stdout.on("data",(function(e){r+=e.toString()})),n.stdout.on("end",(function(){for(var t=[],n=[],o=r.split("\n"),s=0,a=o.length;s<a;s++){var c=o[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var u,d=l.exec(t[s]);d&&(d[1],(u=d[2])&&u!==i.key&&n.push(new v({host:i.host,hive:i.hive,key:u,arch:i.arch})))}e(null,n)})),n.on("error",(function(t){s=t,e(t)})),this},v.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=["QUERY",this.path];""==e?n.push("/ve"):n=n.concat(["/v",e]),f(n,this.arch);var r=o(g(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",s=this,a=null,c=h(r);return r.on("close",(function(e){if(!a)if(0!==e)t(p("QUERY",e,c),null);else{for(var n=[],r=null,o=i.split("\n"),l=0,d=0,h=o.length;d<h;d++){var f=o[d].trim();f.length>0&&(0!=l&&n.push(f),++l)}var g,v,y,b=n[n.length-1]||"",S=u.exec(b);S&&(g=S[1].trim(),v=S[2].trim(),y=S[3],r=new m(s.host,s.hive,s.key,g,v,y,s.arch)),t(null,r)}})),r.stdout.on("data",(function(e){i+=e.toString()})),r.on("error",(function(e){a=e,t(e)})),this},v.prototype.set=function(e,t,n,r){if("function"!=typeof r)throw new TypeError("must specify a callback");if(-1==a.indexOf(t))throw Error("illegal type specified.");var i=["ADD",this.path];""==e?i.push("/ve"):i=i.concat(["/v",e]),f(i=i.concat(["/t",t,"/d",n,"/f"]),this.arch);var s=o(g(),i,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),c=null,l=h(s);return s.on("close",(function(e){c||r(0!==e?p("ADD",e,l):null)})),s.stdout.on("data",(function(e){})),s.on("error",(function(e){c=e,r(e)})),this},v.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];f(n,this.arch);var r=o(g(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,s=h(r);return r.on("close",(function(e){i||(0!==e?t(p("DELETE",e,s),null):t(null))})),r.stdout.on("data",(function(e){})),r.on("error",(function(e){i=e,t(e)})),this},v.prototype.clear=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];f(t,this.arch);var n=o(g(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=h(n);return n.on("close",(function(t){r||(0!==t?e(p("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},v.prototype.erase=v.prototype.clear,v.prototype.destroy=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];f(t,this.arch);var n=o(g(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=h(n);return n.on("close",(function(t){r||(0!==t?e(p("DELETE",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},v.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];f(t,this.arch);var n=o(g(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=h(n);return n.on("close",(function(t){r||(0!==t?e(p("ADD",t,i),null):e(null))})),n.stdout.on("data",(function(e){})),n.on("error",(function(t){r=t,e(t)})),this},v.prototype.keyExists=function(e){return this.values((function(t,n){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)})),this},v.prototype.valueExists=function(e,t){return this.get(e,(function(e,n){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)})),this},e.exports=v},function(e){e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_BUTTON_ICON=t.IAttachProcessProviderFactory=void 0,t.IAttachProcessProviderFactory=Symbol("IAttachProcessProviderFactory"),t.REFRESH_BUTTON_ICON="refresh.svg"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiStepInputFactory=t.IMultiStepInputFactory=t.MultiStepInput=t.InputFlowAction=void 0;const o=n(0),s=n(2),a=n(3);class c{constructor(){}}t.InputFlowAction=c,c.back=new c,c.cancel=new c,c.resume=new c;class l{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}async showQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:o,buttons:a,shouldResume:l,matchOnDescription:u,matchOnDetail:d,acceptFilterBoxTextAsSelection:h}){const p=[];try{return await new Promise((f,g)=>{const m=this.shell.createQuickPick();m.title=e,m.step=t,m.totalSteps=n,m.placeholder=o,m.ignoreFocusOut=!0,m.items=r,m.matchOnDescription=u||!1,m.matchOnDetail=d||!1,m.activeItems=i?[i]:[],m.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...a||[]],p.push(m.onDidTriggerButton(e=>{e===s.QuickInputButtons.Back?g(c.back):f(e)}),m.onDidChangeSelection(e=>f(e[0])),m.onDidHide(()=>{(async()=>{g(l&&await l()?c.resume:c.cancel)})().catch(g)})),h&&p.push(m.onDidAccept(()=>{f(m.value)})),this.current&&this.current.dispose(),this.current=m,this.current.show()})}finally{p.forEach(e=>e.dispose())}}async showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:o,password:a,buttons:l,shouldResume:u}){const d=[];try{return await new Promise((h,p)=>{const f=this.shell.createInputBox();f.title=e,f.step=t,f.totalSteps=n,f.password=!!a,f.value=r||"",f.prompt=i,f.ignoreFocusOut=!0,f.buttons=[...this.steps.length>1?[s.QuickInputButtons.Back]:[],...l||[]];let g=o("");d.push(f.onDidTriggerButton(e=>{e===s.QuickInputButtons.Back?p(c.back):h(e)}),f.onDidAccept(async()=>{const e=f.value;f.enabled=!1,f.busy=!0,await o(e)||h(e),f.enabled=!0,f.busy=!1}),f.onDidChangeValue(async e=>{const t=o(e);g=t;const n=await t;t===g&&(f.validationMessage=n)}),f.onDidHide(()=>{(async()=>{p(u&&await u()?c.resume:c.cancel)})().catch(p)})),this.current&&this.current.dispose(),this.current=f,this.current.show()})}finally{d.forEach(e=>e.dispose())}}async stepThrough(e,t){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=await n(this,t)}catch(e){if(e===c.back)this.steps.pop(),n=this.steps.pop();else if(e===c.resume)n=this.steps.pop();else{if(e!==c.cancel)throw e;n=void 0}}}this.current&&this.current.dispose()}}t.MultiStepInput=l,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let u=class{constructor(e){this.shell=e}create(){return new l(this.shell)}};u=r([o.injectable(),i(0,o.inject(a.IApplicationShell))],u),t.MultiStepInputFactory=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugConfigurationProviderFactory=t.IDebugConfigurationResolver=void 0,t.IDebugConfigurationResolver=Symbol("IDebugConfigurationResolver"),t.IDebugConfigurationProviderFactory=Symbol("IDebugConfigurationProviderFactory")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpeterHashProviderFactory=void 0;const o=n(0),s=n(1),a=n(362),c=n(98);let l=class{constructor(e,t,n,r){this.configService=e,this.windowsStoreInterpreter=t,this.windowsStoreHashProvider=n,this.hashProvider=r}async create(e){const t="pythonPath"in e?e.pythonPath:this.configService.getSettings(e.resource).pythonPath;return await this.windowsStoreInterpreter.isWindowsStoreInterpreter(t)?this.windowsStoreHashProvider:this.hashProvider}};l=r([o.injectable(),i(0,o.inject(s.IConfigurationService)),i(1,o.inject(c.WindowsStoreInterpreter)),i(2,o.inject(c.WindowsStoreInterpreter)),i(3,o.inject(a.InterpreterHashProvider))],l),t.InterpeterHashProviderFactory=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseInterpreterSelectorCommand=void 0;const o=n(0),s=n(4),a=n(2),c=n(13);let l=class{constructor(e,t,n,r){this.pythonPathUpdaterService=e,this.commandManager=t,this.applicationShell=n,this.workspaceService=r,this.disposables=[],this.disposables.push(this)}dispose(){this.disposables.forEach(e=>e.dispose())}async getConfigTarget(){if(!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length)return{folderUri:void 0,configTarget:a.ConfigurationTarget.Global};if(!this.workspaceService.workspaceFile&&1===this.workspaceService.workspaceFolders.length)return{folderUri:this.workspaceService.workspaceFolders[0].uri,configTarget:a.ConfigurationTarget.WorkspaceFolder};const e=[...this.workspaceService.workspaceFolders.map(e=>({label:e.name,description:s.dirname(e.uri.fsPath),uri:e.uri})),{label:c.Interpreters.entireWorkspace(),uri:this.workspaceService.workspaceFolders[0].uri}],t=await this.applicationShell.showQuickPick(e,{placeHolder:"Select the workspace to set the interpreter"});return t?t.label===c.Interpreters.entireWorkspace()?{folderUri:t.uri,configTarget:a.ConfigurationTarget.Workspace}:{folderUri:t.uri,configTarget:a.ConfigurationTarget.WorkspaceFolder}:void 0}};l=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged()),i(3,o.unmanaged())],l),t.BaseInterpreterSelectorCommand=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInstaller=t.DataScienceInstaller=t.RefactoringLibraryInstaller=t.TestFrameworkInstaller=t.LinterInstaller=t.FormatterInstaller=t.CTagsInstaller=t.BaseInstaller=t.CTagsInstallationScript=t.Product=void 0;const o=n(0),s=n(20);n(11);const a=n(12),c=n(8),l=n(43),u=n(7),d=n(9),h=n(3),p=n(10),f=n(24),g=n(5),m=n(6),v=n(18),y=n(25),b=n(1),S=n(13),E=n(14),w=n(211),_=n(146);var P=n(1);Object.defineProperty(t,"Product",{enumerable:!0,get:function(){return P.Product}}),t.CTagsInstallationScript="darwin"===s.platform()?"brew install ctags":"sudo apt-get install exuberant-ctags";class C{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.appShell=e.get(h.IApplicationShell),this.configService=e.get(b.IConfigurationService),this.workspaceService=e.get(h.IWorkspaceService),this.productService=e.get(_.IProductService)}promptToInstall(e,t,n){const r=t&&E.isResource(t)?this.workspaceService.getWorkspaceFolder(t):void 0,i=`${e}${r?r.uri.fsPath:""}`;if(C.PromptPromises.has(i))return C.PromptPromises.get(i);const o=this.promptToInstallImplementation(e,t,n);return C.PromptPromises.set(i,o),o.then(()=>C.PromptPromises.delete(i)).ignoreErrors(),o.catch(()=>C.PromptPromises.delete(i)).ignoreErrors(),o}async install(e,t,n){if(e===b.Product.unittest)return b.InstallerResponse.Installed;const r=this.serviceContainer.get(_.IInstallationChannelManager),i=await r.getInstallationChannel(e,t);if(!i)return b.InstallerResponse.Ignore;const o=A(e,b.ModuleNamePurpose.install);return await i.installModule(o,t,n).catch(e=>g.traceError(`Error in installing the module '${o}', ${e}`)),this.isInstalled(e,t).then(e=>e?b.InstallerResponse.Installed:b.InstallerResponse.Ignore)}async isInstalled(e,t){if(e===b.Product.unittest)return!0;const n=E.isResource(t)?void 0:t,r=E.isResource(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);if(this.isExecutableAModule(e,r)){return(await this.serviceContainer.get(v.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0})).isModuleInstalled(i)}return(await this.serviceContainer.get(v.IProcessServiceFactory).create(r)).exec(i,["--version"],{mergeStdOutErr:!0}).then(()=>!0).catch(()=>!1)}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(_.IProductPathService,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(_.IProductPathService,n).isExecutableAModule(e,t)}}t.BaseInstaller=C,C.PromptPromises=new Map;class T extends C{constructor(e,t){super(e,t)}async install(e,n){if(this.serviceContainer.get(m.IPlatformService).isWindows)this.outputChannel.appendLine("Install Universal Ctags Win32 to enable support for Workspace Symbols"),this.outputChannel.appendLine("Download the CTags binary from the Universal CTags site."),this.outputChannel.appendLine("Option 1: Extract ctags.exe from the downloaded zip to any folder within your PATH so that Visual Studio Code can run it."),this.outputChannel.appendLine("Option 2: Extract to any folder and add the path to this folder to the command setting."),this.outputChannel.appendLine("Option 3: Extract to any folder and define that path in the python.workspaceSymbols.ctagsPath setting of your user settings file (settings.json)."),this.outputChannel.show();else{this.serviceContainer.get(y.ITerminalServiceFactory).getTerminalService(n).sendCommand(t.CTagsInstallationScript,[]).catch(e=>g.traceError(`Failed to install ctags. Script sent '${t.CTagsInstallationScript}', ${e}`))}return b.InstallerResponse.Ignore}async promptToInstallImplementation(e,t,n){return"Yes"===await this.appShell.showErrorMessage("Install CTags to enable Python workspace symbols?","Yes","No")?this.install(e,t):b.InstallerResponse.Ignore}}t.CTagsInstaller=T;class I extends C{async promptToInstallImplementation(e,t,n){const r=[b.Product.autopep8,b.Product.black,b.Product.yapf],i=r.map(e=>w.ProductNames.get(e)),o=w.ProductNames.get(e);i.splice(i.indexOf(o),1);const s=[...i.map(e=>"Use "+e)];let a=`Formatter ${o} is not installed. Install?`;if(this.isExecutableAModule(e,t))s.splice(0,0,"Yes");else{a=`Path to the ${o} formatter is invalid (${this.getExecutableNameFromSettings(e,t)})`}const c=await this.appShell.showErrorMessage(a,...s);if("Yes"===c)return this.install(e,t,n);if("string"==typeof c)for(const e of r){const r=w.ProductNames.get(e);if(c.endsWith(r))return await this.configService.updateSetting("formatting.provider",r,t),this.install(e,t,n)}return b.InstallerResponse.Ignore}}t.FormatterInstaller=I;class O extends C{constructor(e,t){super(e,t),this.serviceContainer=e,this.outputChannel=t,this.experimentsManager=e.get(b.IExperimentsManager),this.linterManager=e.get(l.ILinterManager)}static reset(){O.promptSeen=!1}async promptToInstallImplementation(e,t,n){if(O.promptSeen)return b.InstallerResponse.Ignore;if(O.promptSeen=!0,!this.isLinterSetInAnyScope()&&e===b.Product.pylint){if(this.experimentsManager.inExperiment(f.LinterInstallationPromptVariants.noPrompt)){u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT,void 0,{prompt:"noPrompt"});const t=w.ProductNames.get(e);return g.traceInfo(`Linter ${t} is not installed.`),b.InstallerResponse.Ignore}if(this.experimentsManager.inExperiment(f.LinterInstallationPromptVariants.pylintFirst))return this.newPromptForInstallation(!0,t,n);if(this.experimentsManager.inExperiment(f.LinterInstallationPromptVariants.flake8First))return this.newPromptForInstallation(!1,t,n)}return u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT,void 0,{prompt:"old"}),this.oldPromptForInstallation(e,t,n)}getStoredResponse(e){return!0===this.serviceContainer.get(b.IPersistentStateFactory).createGlobalPersistentState(e,void 0).value}async newPromptForInstallation(e,t,n){const r=w.ProductNames.get(b.Product.pylint)+"_DisableLinterInstallPrompt";if(!0===this.getStoredResponse(r))return b.InstallerResponse.Ignore;if(!this.isExecutableAModule(b.Product.pylint,t)||!this.isExecutableAModule(b.Product.flake8,t))return this.oldPromptForInstallation(b.Product.pylint,t,n);const i=S.Linters.installPylint(),o=S.Linters.installFlake8(),s=S.Common.doNotShowAgain(),a=e?[i,o,s]:[o,i,s],c=S.Linters.installMessage(),l=e?"pylintFirst":"flake8first";u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT,void 0,{prompt:l});const h=await this.appShell.showInformationMessage(c,...a);return h===i?(u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT_ACTION,void 0,{prompt:l,action:"installPylint"}),this.install(b.Product.pylint,t,n)):h===o?(u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT_ACTION,void 0,{prompt:l,action:"installFlake8"}),await this.linterManager.setActiveLintersAsync([b.Product.flake8],t),this.install(b.Product.flake8,t,n)):h===s?(u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT_ACTION,void 0,{prompt:l,action:"disablePrompt"}),await this.setStoredResponse(r,!0),b.InstallerResponse.Ignore):(u.sendTelemetryEvent(d.EventName.LINTER_INSTALL_PROMPT_ACTION,void 0,{prompt:l,action:"close"}),b.InstallerResponse.Ignore)}async oldPromptForInstallation(e,t,n){const r=e===b.Product.pylint,i=w.ProductNames.get(e),o=S.Common.install(),s=S.Common.doNotShowAgain(),a=i+"_DisableLinterInstallPrompt",c=S.Linters.selectLinter();if(r&&!0===this.getStoredResponse(a))return b.InstallerResponse.Ignore;const l=r?[c,s]:[c];let f=`Linter ${i} is not installed.`;if(this.isExecutableAModule(e,t))l.splice(0,0,o);else{f=`Path to the ${i} linter is invalid (${this.getExecutableNameFromSettings(e,t)})`}const g=await this.appShell.showErrorMessage(f,...l);if(g===o)return u.sendTelemetryEvent(d.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{tool:i,action:"install"}),this.install(e,t,n);if(g===s)return await this.setStoredResponse(a,!0),u.sendTelemetryEvent(d.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{tool:i,action:"disablePrompt"}),b.InstallerResponse.Ignore;if(g===c){u.sendTelemetryEvent(d.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{action:"select"});const e=this.serviceContainer.get(h.ICommandManager);await e.executeCommand(p.Commands.Set_Linter)}return b.InstallerResponse.Ignore}isLinterSetInAnyScope(){const e=this.workspaceService.getConfiguration("python");if(e){return["linting.pylintEnabled","linting.flake8Enabled","linting.banditEnabled","linting.mypyEnabled","linting.pycodestyleEnabled","linting.prospectorEnabled","linting.pydocstyleEnabled","linting.pylamaEnabled"].map(t=>{const n=e.inspect(t);return n&&(n.globalValue||n.workspaceValue||n.workspaceFolderValue)?"linter set":"no info"}).includes("linter set")}return!1}async setStoredResponse(e,t){const n=this.serviceContainer.get(b.IPersistentStateFactory).createGlobalPersistentState(e,void 0);n&&n.value!==t&&await n.updateValue(t)}}t.LinterInstaller=O,O.promptSeen=!1;class R extends C{async promptToInstallImplementation(e,t,n){const r=w.ProductNames.get(e),i=[];let o=`Test framework ${r} is not installed. Install?`;if(this.isExecutableAModule(e,t))i.push("Yes","No");else{o=`Path to the ${r} test framework is invalid (${this.getExecutableNameFromSettings(e,t)})`}return"Yes"===await this.appShell.showErrorMessage(o,...i)?this.install(e,t,n):b.InstallerResponse.Ignore}}t.TestFrameworkInstaller=R;class D extends C{async promptToInstallImplementation(e,t,n){const r=w.ProductNames.get(e);return"Yes"===await this.appShell.showErrorMessage(`Refactoring library ${r} is not installed. Install?`,"Yes","No")?this.install(e,t,n):b.InstallerResponse.Ignore}}t.RefactoringLibraryInstaller=D;class x extends C{async install(e,t,n){if(E.isResource(t))throw new Error("All data science packages require an interpreter be passed in");const r=t,i=await this.serviceContainer.get(_.IInstallationChannelManager).getInstallationChannels();let o;o="Conda"===r.envType?i.find(e=>"Conda"===e.name):i.find(e=>"Pip"===e.name);const s=A(e,b.ModuleNamePurpose.install);return o?(await o.installModule(s,r,n).catch(e=>g.traceError(`Error in installing the module '${s}', ${e}`)),this.isInstalled(e,r).then(e=>e?b.InstallerResponse.Installed:b.InstallerResponse.Ignore)):(this.appShell.showErrorMessage(S.Installer.couldNotInstallLibrary().format(s)).then(E.noop,E.noop),b.InstallerResponse.Ignore)}async promptToInstallImplementation(e,t,n){const r=w.ProductNames.get(e);return"Yes"===await this.appShell.showErrorMessage(S.Installer.dataScienceInstallPrompt().format(r),"Yes","No")?this.install(e,t,n):b.InstallerResponse.Ignore}}t.DataScienceInstaller=x;let k=class{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.productService=e.get(_.IProductService),this.interpreterService=this.serviceContainer.get(a.IInterpreterService)}dispose(){}async promptToInstall(e,t,n){return(E.isResource(t)?await this.interpreterService.getActiveInterpreter(t):t)?this.createInstaller(e).promptToInstall(e,t,n):b.InstallerResponse.Ignore}async install(e,t,n){return this.createInstaller(e).install(e,t,n)}async isInstalled(e,t){return this.createInstaller(e).isInstalled(e,t)}translateProductToModuleName(e,t){return A(e,t)}createInstaller(e){switch(this.productService.getProductType(e)){case b.ProductType.Formatter:return new I(this.serviceContainer,this.outputChannel);case b.ProductType.Linter:return new O(this.serviceContainer,this.outputChannel);case b.ProductType.WorkspaceSymbols:return new T(this.serviceContainer,this.outputChannel);case b.ProductType.TestFramework:return new R(this.serviceContainer,this.outputChannel);case b.ProductType.RefactoringLibrary:return new D(this.serviceContainer,this.outputChannel);case b.ProductType.DataScience:return new x(this.serviceContainer,this.outputChannel)}throw new Error("Unknown product "+e)}};function A(e,t){switch(e){case b.Product.mypy:return"mypy";case b.Product.nosetest:return t===b.ModuleNamePurpose.install?"nose":"nosetests";case b.Product.pylama:return"pylama";case b.Product.prospector:return"prospector";case b.Product.pylint:return"pylint";case b.Product.pytest:return"pytest";case b.Product.autopep8:return"autopep8";case b.Product.black:return"black";case b.Product.pycodestyle:return"pycodestyle";case b.Product.pydocstyle:return"pydocstyle";case b.Product.yapf:return"yapf";case b.Product.flake8:return"flake8";case b.Product.unittest:return"unittest";case b.Product.rope:return"rope";case b.Product.bandit:return"bandit";case b.Product.jupyter:return"jupyter";case b.Product.notebook:return"notebook";case b.Product.pandas:return"pandas";case b.Product.ipykernel:return"ipykernel";case b.Product.nbconvert:return"nbconvert";case b.Product.kernelspec:return"kernelspec";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}k=r([o.injectable(),i(0,o.inject(c.IServiceContainer)),i(1,o.inject(b.IOutputChannel)),i(1,o.named(p.STANDARD_OUTPUT_CHANNEL))],k),t.ProductInstaller=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0;t.ContextKey=class{constructor(e,t){this.name=e,this.commandManager=t}get value(){return this.lastValue}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalCodeExecutionProvider=void 0;const o=n(0),s=n(4),a=n(3);n(11);const c=n(6),l=n(25),u=n(1),d=n(88);let h=class{constructor(e,t,n,r,i){this.terminalServiceFactory=e,this.configurationService=t,this.workspace=n,this.disposables=r,this.platformService=i}async executeFile(e){await this.setCwdForFileExecution(e);const{command:t,args:n}=await this.getExecuteFileArgs(e,[e.fsPath.fileToCommandArgument()]);await this.getTerminalService(e).sendCommand(t,n)}async execute(e,t){e&&0!==e.trim().length&&(await this.initializeRepl(),await this.getTerminalService(t).sendText(e))}async initializeRepl(e){this.replActive&&await this.replActive?await this._terminalService.show():(this.replActive=new Promise(async t=>{const n=await this.getExecutableInfo(e);await this.getTerminalService(e).sendCommand(n.command,n.args),setTimeout(()=>t(!0),1e3)}),await this.replActive)}async getExecutableInfo(e,t=[]){const n=this.configurationService.getSettings(e),r=this.platformService.isWindows?n.pythonPath.replace(/\\/g,"/"):n.pythonPath,i=n.terminal.launchArgs;return d.buildPythonExecInfo(r,[...i,...t])}async getExecuteFileArgs(e,t=[]){return this.getExecutableInfo(e,t)}getTerminalService(e){return this._terminalService||(this._terminalService=this.terminalServiceFactory.getTerminalService(e,this.terminalTitle),this.disposables.push(this._terminalService.onDidCloseTerminal(()=>{this.replActive=void 0}))),this._terminalService}async setCwdForFileExecution(e){if(!this.configurationService.getSettings(e).terminal.executeInFileDir)return;const t=s.dirname(e.fsPath),n=this.workspace.getWorkspaceFolder(e);(!n||t!==n.uri.fsPath)&&t.length>0&&await this.getTerminalService(e).sendText("cd "+t.fileToCommandArgument())}};h=r([o.injectable(),i(0,o.inject(l.ITerminalServiceFactory)),i(1,o.inject(u.IConfigurationService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(u.IDisposableRegistry)),i(4,o.inject(c.IPlatformService))],h),t.TerminalCodeExecutionProvider=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestConfigurationManager=void 0;const r=n(4),i=n(3),o=n(5),s=n(6),a=n(1),c=n(15),l=n(19),u=n(26);t.TestConfigurationManager=class{constructor(e,t,n,r){this.workspace=e,this.product=t,this.serviceContainer=n,this.outputChannel=n.get(a.IOutputChannel,u.TEST_OUTPUT_CHANNEL),this.installer=n.get(a.IInstaller),this.testConfigSettingsService=r||n.get(l.ITestConfigSettingsService)}async enable(){await Promise.all(u.UNIT_TEST_PRODUCTS.filter(e=>e!==this.product).map(e=>this.testConfigSettingsService.disable(this.workspace,e))),await this.testConfigSettingsService.enable(this.workspace,this.product)}async disable(){return this.testConfigSettingsService.enable(this.workspace,this.product)}selectTestDir(e,t,n=[]){let o=t.map(t=>{const n=r.relative(e,t);if(0!==n.indexOf("."))return{label:n,description:""}}).filter(e=>void 0!==e).map(e=>e);o=[{label:".",description:"Root directory"},...o],o=n.concat(o);const s=c.createDeferred();return this.serviceContainer.get(i.IApplicationShell).showQuickPick(o,{ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the directory containing the tests"}).then(e=>{e?s.resolve(e.label):this.handleCancelled()}),s.promise}selectTestFilePattern(){const e=c.createDeferred();return this.serviceContainer.get(i.IApplicationShell).showQuickPick([{label:"*test.py",description:"Python Files ending with 'test'"},{label:"*_test.py",description:"Python Files ending with '_test'"},{label:"test*.py",description:"Python Files beginning with 'test'"},{label:"test_*.py",description:"Python Files beginning with 'test_'"},{label:"*test*.py",description:"Python Files containing the word 'test'"}],{ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the pattern to identify test files"}).then(t=>{t?e.resolve(t.label):this.handleCancelled()}),e.promise}getTestDirs(e){return this.serviceContainer.get(s.IFileSystem).getSubDirectories(e).then(e=>{e.sort();const t=e.filter(e=>e.match(/test/i)),n=e.filter(e=>-1===t.indexOf(e));return t.push(...n),t})}handleCancelled(){throw o.traceInfo("testing configuration (in UI) cancelled"),Error("cancelled")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTestManager=void 0;const r=n(2),i=n(3);n(11);const o=n(144),s=n(5),a=n(6),c=n(1),l=n(984),u=n(14),d=n(9),h=n(7),p=n(19),f=n(53),g=n(26),m=n(17);var v;!function(e){e[e.testDiscovery=0]="testDiscovery",e[e.testRunner=1]="testRunner"}(v||(v={}));t.BaseTestManager=class{constructor(e,t,n,o,s){this.testProvider=e,this.product=t,this.workspaceFolder=n,this.rootDirectory=o,this.serviceContainer=s,this._status=m.TestStatus.Unknown,this._onDidStatusChange=new r.EventEmitter,this.updateStatus(m.TestStatus.Unknown);const a=s.get(c.IConfigurationService);this.settings=a.getSettings(this.rootDirectory?r.Uri.file(this.rootDirectory):void 0);const l=s.get(c.IDisposableRegistry);this._outputChannel=this.serviceContainer.get(c.IOutputChannel,g.TEST_OUTPUT_CHANNEL),this.testCollectionStorage=this.serviceContainer.get(m.ITestCollectionStorageService),this._testResultsService=this.serviceContainer.get(m.ITestResultsService),this.workspaceService=this.serviceContainer.get(i.IWorkspaceService),this.diagnosticCollection=r.languages.createDiagnosticCollection(this.testProvider),this.unitTestDiagnosticService=s.get(p.ITestDiagnosticService),this.testsStatusUpdaterService=s.get(m.ITestsStatusUpdaterService),this.commandManager=s.get(i.ICommandManager),l.push(this)}get outputChannel(){return this._outputChannel}get testResultsService(){return this._testResultsService}get installer(){return this._installer||(this._installer=this.serviceContainer.get(c.IInstaller)),this._installer}get testDiscoveryCancellationToken(){return this.testDiscoveryCancellationTokenSource?this.testDiscoveryCancellationTokenSource.token:void 0}get testRunnerCancellationToken(){return this.testRunnerCancellationTokenSource?this.testRunnerCancellationTokenSource.token:void 0}dispose(){this.stop()}get status(){return this._status}get onDidStatusChange(){return this._onDidStatusChange.event}get workingDirectory(){return this.settings.testing.cwd&&this.settings.testing.cwd.length>0?this.settings.testing.cwd:this.rootDirectory}stop(){this.testDiscoveryCancellationTokenSource&&this.testDiscoveryCancellationTokenSource.cancel(),this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.cancel()}reset(){this.tests=void 0,this.updateStatus(m.TestStatus.Unknown)}resetTestResults(){this.tests&&this.testResultsService.resetResults(this.tests)}async discoverTests(e,t=!1,n=!1,r=!1,i=!1){return this.discoverTestsPromise||(this.discoverTestsPromise=this._discoverTests(e,t,n,r,i),this.discoverTestsPromise.catch(u.noop).then(()=>this.discoverTestsPromise=void 0).ignoreErrors()),this.discoverTestsPromise}async _discoverTests(e,t=!1,n=!1,i=!1,a=!1){if(!t&&this.tests&&this.tests.testFunctions.length>0)return this.updateStatus(m.TestStatus.Idle),Promise.resolve(this.tests);i&&this.testsStatusUpdaterService.updateStatusAsDiscovering(this.workspaceFolder,this.tests),this.updateStatus(m.TestStatus.Discovering),i&&this.stop();const c={tool:this.testProvider,trigger:e,failed:!1};this.commandManager.executeCommand("setContext","testsDiscovered",!0).then(u.noop,u.noop),this.createCancellationToken(v.testDiscovery);const l=this.getDiscoveryOptions(t);return this.serviceContainer.get(m.ITestDiscoveryService,this.testProvider).discoverTests(l).then(e=>{const t=this.workspaceService.getWorkspaceFolder(r.Uri.file(this.rootDirectory)).uri,i=this.testCollectionStorage.getTests(t);a?this.resetTestResults():i&&(f.copyDesiredTestResults(i,e),this._testResultsService.updateResults(e)),this.testCollectionStorage.storeTests(t,e),this.tests=e,this.updateStatus(m.TestStatus.Idle),this.discoverTestsPromise=void 0;let o=!1;if(e.testFiles.forEach(e=>{e.errorsWhenDiscovering&&e.errorsWhenDiscovering.length>0&&(o=!0,this.outputChannel.append("_".repeat(10)),this.outputChannel.append("There was an error in identifying unit tests in "+e.nameToRun),this.outputChannel.appendLine("_".repeat(10)),this.outputChannel.appendLine(e.errorsWhenDiscovering))}),o&&!n){this.serviceContainer.get(m.ITestsHelper).displayTestErrorMessage("There were some errors in discovering unit tests")}return this.disposeCancellationToken(v.testDiscovery),h.sendTelemetryEvent(d.EventName.UNITTEST_DISCOVER,void 0,c),e}).catch(async e=>{i&&this.testsStatusUpdaterService.updateStatusAsUnknown(this.workspaceFolder,this.tests),!o.isNotInstalledError(e)||n||await this.installer.isInstalled(this.product,this.workspaceFolder)||this.installer.promptToInstall(this.product,this.workspaceFolder).catch(e=>s.traceError("isNotInstalledError",e)),this.tests=void 0,this.discoverTestsPromise=void 0,this.testDiscoveryCancellationToken&&this.testDiscoveryCancellationToken.isCancellationRequested?(e=g.CANCELLATION_REASON,this.updateStatus(m.TestStatus.Idle)):(c.failed=!0,h.sendTelemetryEvent(d.EventName.UNITTEST_DISCOVER,void 0,c),this.updateStatus(m.TestStatus.Error),this.outputChannel.appendLine("Test Discovery failed: "),this.outputChannel.appendLine(e.toString()));const t=this.workspaceService.getWorkspaceFolder(r.Uri.file(this.rootDirectory)).uri;return this.testCollectionStorage.storeTests(t,void 0),this.disposeCancellationToken(v.testDiscovery),Promise.reject(e)})}async runTest(e,t,n,r){const i={Test_Provider:this.testProvider,Run_Failed_Tests:"false",Run_Specific_File:"false",Run_Specific_Class:"false",Run_Specific_Function:"false"},o=l.getNamesAndValues(g.CommandSource).map(e=>e.value),s={tool:this.testProvider,scope:"all",debugging:!0===r,triggerSource:-1===o.indexOf(e)?"commandpalette":e,failed:!1};n||t||this.testsStatusUpdaterService.updateStatusAsRunning(this.workspaceFolder,this.tests),this.updateStatus(m.TestStatus.Running),this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.cancel(),!0===n&&(i.Run_Failed_Tests=n.toString(),s.scope="failed",this.testsStatusUpdaterService.updateStatusAsRunningFailedTests(this.workspaceFolder,this.tests)),t&&"object"==typeof t&&(Array.isArray(t.testFile)&&t.testFile.length>0&&(s.scope="file",i.Run_Specific_File="true"),Array.isArray(t.testSuite)&&t.testSuite.length>0&&(s.scope="class",i.Run_Specific_Class="true"),Array.isArray(t.testFunction)&&t.testFunction.length>0&&(s.scope="function",i.Run_Specific_Function="true"),this.testsStatusUpdaterService.updateStatusAsRunningSpecificTests(this.workspaceFolder,t,this.tests)),this.testsStatusUpdaterService.triggerUpdatesToTests(this.workspaceFolder,this.tests);const a=!(n||i.Run_Specific_File||i.Run_Specific_Class||i.Run_Specific_Function);return this.discoverTests(e,a,!0,!0).catch(e=>{if(this.testDiscoveryCancellationToken&&this.testDiscoveryCancellationToken.isCancellationRequested)return Promise.reject(e);return this.serviceContainer.get(m.ITestsHelper).displayTestErrorMessage("Errors in discovering tests, continuing with tests"),{rootTestFolders:[],testFiles:[],testFolders:[],testFunctions:[],testSuites:[],summary:{errors:0,failures:0,passed:0,skipped:0}}}).then(e=>(this.updateStatus(m.TestStatus.Running),this.createCancellationToken(v.testRunner),this.runTestImpl(e,t,n,r))).then(()=>(this.updateStatus(m.TestStatus.Idle),this.disposeCancellationToken(v.testRunner),h.sendTelemetryEvent(d.EventName.UNITTEST_RUN,void 0,s),this.testsStatusUpdaterService.updateStatusOfRunningTestsAsIdle(this.workspaceFolder,this.tests),this.testsStatusUpdaterService.triggerUpdatesToTests(this.workspaceFolder,this.tests),this.tests)).catch(e=>(this.testsStatusUpdaterService.updateStatusOfRunningTestsAsIdle(this.workspaceFolder,this.tests),this.testsStatusUpdaterService.triggerUpdatesToTests(this.workspaceFolder,this.tests),this.testRunnerCancellationToken&&this.testRunnerCancellationToken.isCancellationRequested?(e=g.CANCELLATION_REASON,this.updateStatus(m.TestStatus.Idle)):(this.updateStatus(m.TestStatus.Error),s.failed=!0,h.sendTelemetryEvent(d.EventName.UNITTEST_RUN,void 0,s)),this.disposeCancellationToken(v.testRunner),Promise.reject(e)))}async updateDiagnostics(e,t){await this.stripStaleDiagnostics(e,t);const n=t.reduce((e,t)=>(-1===e.indexOf(t.testFilePath)&&void 0!==t.testFilePath&&e.push(t.testFilePath),e),[]),i=this.serviceContainer.get(a.IFileSystem);for(const e of n){const n=r.Uri.file(e);if(!this.diagnosticCollection.has(n)){const e=[];this.diagnosticCollection.set(n,e)}const o=this.diagnosticCollection.get(n),s=[];for(const e of o)s.push(e);for(const e of t)if(i.arePathsSame(n.fsPath,r.Uri.file(e.testFilePath).fsPath)&&e.status!==m.TestStatus.Pass){const t=this.createDiagnostics(e);s.push(t)}this.diagnosticCollection.set(n,s)}}updateStatus(e){this._status=e,setTimeout(()=>this._onDidStatusChange.fire({workspace:this.workspaceFolder,status:e}),1)}createCancellationToken(e){this.disposeCancellationToken(e),e===v.testDiscovery?this.testDiscoveryCancellationTokenSource=new r.CancellationTokenSource:this.testRunnerCancellationTokenSource=new r.CancellationTokenSource}disposeCancellationToken(e){e===v.testDiscovery?(this.testDiscoveryCancellationTokenSource&&this.testDiscoveryCancellationTokenSource.dispose(),this.testDiscoveryCancellationTokenSource=void 0):(this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.dispose(),this.testRunnerCancellationTokenSource=void 0)}async stripStaleDiagnostics(e,t){this.diagnosticCollection.forEach((n,r,i)=>{const o=[];for(const n of r){if(void 0===t.find(e=>e.code===n.code)){void 0!==e.testFunctions.find(e=>e.testFunction.nameToRun===n.code)&&o.push(n)}}i.set(n,o)})}createDiagnostics(e){const t=e.locationStack[0],n=this.unitTestDiagnosticService.getMessagePrefix(e.status),i=this.unitTestDiagnosticService.getSeverity(e.severity),o=e.message?e.message.split("\n")[0]:"",s=new r.Diagnostic(t.location.range,`${n?n+": ":"Ok"}${o}`,i);s.code=e.code,s.source=e.provider;const a=[];for(const t of e.locationStack){const e=new r.DiagnosticRelatedInformation(t.location,t.lineText);a.push(e)}return s.relatedInformation=a,s}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonSettings=void 0;const i=n(55),o=n(4),s=n(2),a=n(16);n(11);const c=n(95),l=n(7),u=n(9),d=n(199),h=n(377),p=n(10),f=n(24),g=n(86),m=n(59),v=n(23),y=n(99),b=n(97);class S{constructor(e,t,n,r,i,o){this.interpreterAutoSelectionService=t,this.experimentsManager=r,this.interpreterPathService=i,this.interpreterSecurityService=o,this.showStartPage=!0,this.downloadLanguageServer=!0,this.jediPath="",this.jediMemoryLimit=1024,this.envFile="",this.venvPath="",this.venvFolders=[],this.condaPath="",this.pipenvPath="",this.poetryPath="",this.devOptions=[],this.disableInstallationChecks=!1,this.globalModuleInstallation=!1,this.autoUpdateLanguageServer=!0,this.languageServer=a.LanguageServerType.Microsoft,this.logging={level:c.LogLevel.Error},this.changed=new s.EventEmitter,this.disposables=[],this._pythonPath="",this._defaultInterpreterPath="",this.workspace=n||new h.WorkspaceService,this.workspaceRoot=e,this.initialize()}get onDidChange(){return this.changed.event}get pythonPath(){return this._pythonPath}set pythonPath(e){if(this._pythonPath!==e)try{this._pythonPath=this.getPythonExecutable(e)}catch(t){this._pythonPath=e}}get defaultInterpreterPath(){return this._defaultInterpreterPath}set defaultInterpreterPath(e){if(this._defaultInterpreterPath!==e)try{this._defaultInterpreterPath=this.getPythonExecutable(e)}catch(t){this._defaultInterpreterPath=e}}static getInstance(e,t,n,r,i,o){n=n||new h.WorkspaceService;const s=S.getSettingsUriAndTarget(e,n).uri,a=s?s.fsPath:"";if(!S.pythonSettings.has(a)){const c=new S(s,t,n,r,i,o);S.pythonSettings.set(a,c);const d=n.getConfiguration("editor",e||null),h=!!d&&d.get("formatOnType",!1);l.sendTelemetryEvent(u.EventName.COMPLETION_ADD_BRACKETS,void 0,{enabled:!!c.autoComplete&&c.autoComplete.addBrackets}),l.sendTelemetryEvent(u.EventName.FORMAT_ON_TYPE,void 0,{enabled:h})}return S.pythonSettings.get(a)}static getSettingsUriAndTarget(e,t){t=t||new h.WorkspaceService;const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri);return{uri:r,target:r?s.ConfigurationTarget.WorkspaceFolder:s.ConfigurationTarget.Global}}static dispose(){if(!p.isTestExecution())throw new Error("Dispose can only be called from unit tests");S.pythonSettings.forEach(e=>e&&e.dispose()),S.pythonSettings.clear()}static toSerializable(e){const t={};return Object.entries(e).forEach(e=>{const[n,r]=e;n.includes("Manager")||n.includes("Service")||n.includes("onDid")||(t[n]=r)}),t}dispose(){this.disposables.forEach(e=>e&&e.dispose()),this.disposables=[]}update(e){var t,n;const r=null===(t=this.workspaceRoot)||void 0===t?void 0:t.fsPath,i=new y.SystemVariables(void 0,r,this.workspace);this.pythonPath=this.getPythonPath(e,i,r);const l=i.resolveAny(e.get("defaultInterpreterPath"));this.defaultInterpreterPath=l||p.DEFAULT_INTERPRETER_SETTING,this.defaultInterpreterPath=E(this.defaultInterpreterPath,r),this.venvPath=i.resolveAny(e.get("venvPath")),this.venvFolders=i.resolveAny(e.get("venvFolders"));const u=i.resolveAny(e.get("condaPath"));this.condaPath=u&&u.length>0?E(u,r):u;const h=i.resolveAny(e.get("pipenvPath"));this.pipenvPath=h&&h.length>0?E(h,r):h;const f=i.resolveAny(e.get("poetryPath"));this.poetryPath=f&&f.length>0?E(f,r):f,this.downloadLanguageServer=i.resolveAny(e.get("downloadLanguageServer",!0)),this.autoUpdateLanguageServer=i.resolveAny(e.get("autoUpdateLanguageServer",!0));let g=null!==(n=e.get("languageServer"))&&void 0!==n?n:a.LanguageServerType.Jedi;g=i.resolveAny(g),Object.values(a.LanguageServerType).includes(g)||(g=a.LanguageServerType.Jedi),this.languageServer=g,this.jediPath=i.resolveAny(e.get("jediPath")),"string"==typeof this.jediPath&&this.jediPath.length>0?this.jediPath=E(i.resolveAny(this.jediPath),r):this.jediPath="",this.jediMemoryLimit=e.get("jediMemoryLimit");const m=e.get("envFile");this.envFile=i.resolveAny(m),d.sendSettingTelemetry(this.workspace,m),this.devOptions=i.resolveAny(e.get("devOptions")),this.devOptions=Array.isArray(this.devOptions)?this.devOptions:[];const v=i.resolveAny(e.get("logging"));v.level=function(e){switch(e){case"info":return c.LogLevel.Info;case"warn":return c.LogLevel.Warn;case"off":return"off";case"debug":return c.LogLevel.Debug;default:return c.LogLevel.Error}}(v.level),this.logging?Object.assign(this.logging,v):this.logging=v;const b=i.resolveAny(e.get("linting"));this.linting?Object.assign(this.linting,b):this.linting=b;const S=i.resolveAny(e.get("analysis"));this.analysis?Object.assign(this.analysis,S):this.analysis=S,this.disableInstallationChecks=!0===e.get("disableInstallationCheck"),this.globalModuleInstallation=!0===e.get("globalModuleInstallation");const w=i.resolveAny(e.get("sortImports"));this.sortImports?Object.assign(this.sortImports,w):this.sortImports=w,this.sortImports=this.sortImports?this.sortImports:{path:"",args:[]},this.linting=this.linting?this.linting:{enabled:!1,ignorePatterns:[],flake8Args:[],flake8Enabled:!1,flake8Path:"flake",lintOnSave:!1,maxNumberOfProblems:100,mypyArgs:[],mypyEnabled:!1,mypyPath:"mypy",banditArgs:[],banditEnabled:!1,banditPath:"bandit",pycodestyleArgs:[],pycodestyleEnabled:!1,pycodestylePath:"pycodestyle",pylamaArgs:[],pylamaEnabled:!1,pylamaPath:"pylama",prospectorArgs:[],prospectorEnabled:!1,prospectorPath:"prospector",pydocstyleArgs:[],pydocstyleEnabled:!1,pydocstylePath:"pydocstyle",pylintArgs:[],pylintEnabled:!1,pylintPath:"pylint",pylintCategorySeverity:{convention:s.DiagnosticSeverity.Hint,error:s.DiagnosticSeverity.Error,fatal:s.DiagnosticSeverity.Error,refactor:s.DiagnosticSeverity.Hint,warning:s.DiagnosticSeverity.Warning},pycodestyleCategorySeverity:{E:s.DiagnosticSeverity.Error,W:s.DiagnosticSeverity.Warning},flake8CategorySeverity:{E:s.DiagnosticSeverity.Error,W:s.DiagnosticSeverity.Warning,F:s.DiagnosticSeverity.Warning},mypyCategorySeverity:{error:s.DiagnosticSeverity.Error,note:s.DiagnosticSeverity.Hint},pylintUseMinimalCheckers:!1},this.linting.pylintPath=E(i.resolveAny(this.linting.pylintPath),r),this.linting.flake8Path=E(i.resolveAny(this.linting.flake8Path),r),this.linting.pycodestylePath=E(i.resolveAny(this.linting.pycodestylePath),r),this.linting.pylamaPath=E(i.resolveAny(this.linting.pylamaPath),r),this.linting.prospectorPath=E(i.resolveAny(this.linting.prospectorPath),r),this.linting.pydocstylePath=E(i.resolveAny(this.linting.pydocstylePath),r),this.linting.mypyPath=E(i.resolveAny(this.linting.mypyPath),r),this.linting.banditPath=E(i.resolveAny(this.linting.banditPath),r);const _=i.resolveAny(e.get("formatting"));this.formatting?Object.assign(this.formatting,_):this.formatting=_,this.formatting=this.formatting?this.formatting:{autopep8Args:[],autopep8Path:"autopep8",provider:"autopep8",blackArgs:[],blackPath:"black",yapfArgs:[],yapfPath:"yapf"},this.formatting.autopep8Path=E(i.resolveAny(this.formatting.autopep8Path),r),this.formatting.yapfPath=E(i.resolveAny(this.formatting.yapfPath),r),this.formatting.blackPath=E(i.resolveAny(this.formatting.blackPath),r);const P=i.resolveAny(e.get("autoComplete"));this.autoComplete?Object.assign(this.autoComplete,P):this.autoComplete=P,this.autoComplete=this.autoComplete?this.autoComplete:{extraPaths:[],addBrackets:!1,showAdvancedMembers:!1,typeshedPaths:[]};const C=i.resolveAny(e.get("workspaceSymbols"));this.workspaceSymbols?Object.assign(this.workspaceSymbols,C):this.workspaceSymbols=C,this.workspaceSymbols=this.workspaceSymbols?this.workspaceSymbols:{ctagsPath:"ctags",enabled:!0,exclusionPatterns:[],rebuildOnFileSave:!0,rebuildOnStart:!0,tagFilePath:r?o.join(r,"tags"):""},this.workspaceSymbols.tagFilePath=E(i.resolveAny(this.workspaceSymbols.tagFilePath),r);const T=i.resolveAny(e.get("testing"));this.testing?Object.assign(this.testing,T):(this.testing=T,p.isTestExecution()&&!this.testing&&(this.testing={nosetestArgs:[],pytestArgs:[],unittestArgs:[],promptToConfigure:!0,debugPort:3e3,nosetestsEnabled:!1,pytestEnabled:!1,unittestEnabled:!1,nosetestPath:"nosetests",pytestPath:"pytest",autoTestDiscoverOnSaveEnabled:!0})),this.testing=this.testing?this.testing:{promptToConfigure:!0,debugPort:3e3,nosetestArgs:[],nosetestPath:"nosetest",nosetestsEnabled:!1,pytestArgs:[],pytestEnabled:!1,pytestPath:"pytest",unittestArgs:[],unittestEnabled:!1,autoTestDiscoverOnSaveEnabled:!0},this.testing.pytestPath=E(i.resolveAny(this.testing.pytestPath),r),this.testing.nosetestPath=E(i.resolveAny(this.testing.nosetestPath),r),this.testing.cwd&&(this.testing.cwd=E(i.resolveAny(this.testing.cwd),r)),this.testing.nosetestArgs=this.testing.nosetestArgs.map(e=>i.resolveAny(e)),this.testing.pytestArgs=this.testing.pytestArgs.map(e=>i.resolveAny(e)),this.testing.unittestArgs=this.testing.unittestArgs.map(e=>i.resolveAny(e));const I=i.resolveAny(e.get("terminal"));this.terminal?Object.assign(this.terminal,I):(this.terminal=I,p.isTestExecution()&&!this.terminal&&(this.terminal={})),this.terminal=this.terminal?this.terminal:{executeInFileDir:!0,launchArgs:[],activateEnvironment:!0,activateEnvInCurrentTerminal:!1};const O=i.resolveAny(e.get("experiments"));this.experiments?Object.assign(this.experiments,O):this.experiments=O,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]};const R=e.get("showStartPage");void 0!==R&&(this.showStartPage=R),this.insidersChannel=e.get("insidersChannel")}getPythonExecutable(e){return function(e){if("python"===(e=b(e))||-1===e.indexOf(o.sep)||o.basename(e)===o.dirname(e))return e;if(w(e))return e;const t=["python","python4","python3.6","python3.5","python3","python2.7","python2"];for(let n of t)if(g.IS_WINDOWS){if(n+=".exe",w(o.join(e,n)))return o.join(e,n);if(w(o.join(e,"scripts",n)))return o.join(e,"scripts",n)}else{if(w(o.join(e,n)))return o.join(e,n);if(w(o.join(e,"bin",n)))return o.join(e,"bin",n)}return e}(e)}onWorkspaceFoldersChanged(){const e=this.workspace.workspaceFolders.map(e=>e.uri.fsPath),t=Array.from(S.pythonSettings.keys()).filter(t=>e.indexOf(t)<0);if(t.length>0)for(const e of t)S.pythonSettings.delete(e)}initialize(){const e=()=>{const e=this.workspace.getConfiguration("python",this.workspaceRoot);this.update(e),this.debounceChangeNotification()};this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this.disposables.push(this.interpreterAutoSelectionService.onDidChangeAutoSelectedInterpreter(e.bind(this))),this.interpreterSecurityService&&this.disposables.push(this.interpreterSecurityService.onDidChangeSafeInterpreters(e.bind(this))),this.disposables.push(this.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("python")&&e()})),this.interpreterPathService&&this.disposables.push(this.interpreterPathService.onDidChange(e.bind(this)));const t=this.workspace.getConfiguration("python",this.workspaceRoot);t&&this.update(t)}debounceChangeNotification(){this.changed.fire()}getPythonPath(e,t,n){var r,i;const o=null===(r=this.experimentsManager)||void 0===r?void 0:r.inExperiment(f.DeprecatePythonPath.experiment);if(null===(i=this.experimentsManager)||void 0===i||i.sendTelemetryIfInExperiment(f.DeprecatePythonPath.control),this.pythonPath=t.resolveAny(o&&this.interpreterPathService?this.interpreterPathService.get(this.workspaceRoot):e.get("pythonPath")),!process.env.CI_DISABLE_AUTO_SELECTION&&(0===this.pythonPath.length||"python"===this.pythonPath)&&this.interpreterAutoSelectionService){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);o&&this.interpreterSecurityService?e&&this.interpreterSecurityService.isSafe(e)&&this.workspaceRoot&&(this.pythonPath=e.path,this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors()):e&&this.workspaceRoot&&(this.pythonPath=e.path,this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors())}return o&&this.pythonPath===p.DEFAULT_INTERPRETER_SETTING&&(this.pythonPath=""),E(this.pythonPath,n)}}function E(e,t){return t||(t=__dirname),e=b(e),p.isTestExecution()&&!e?t:-1===e.indexOf(o.sep)||o.isAbsolute(e)?e:o.resolve(t,e)}function w(e){const[t,n]=m.isValid();try{return n(i.execFileSync(e,t,{encoding:"utf8"}))}catch(e){return!1}}S.pythonSettings=new Map,r([v.debounceSync(1)],S.prototype,"debounceChangeNotification",null),t.PythonSettings=S},function(e,t,n){"use strict";var r=n(44);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";var r=n(383);e.exports=function(e,t,n,i,o){var s=new Error(e);return r(s,t,n,i,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionChannel=t.IInsiderExtensionPrompt=t.IExtensionChannelService=t.IExtensionChannelRule=void 0,t.IExtensionChannelRule=Symbol("IExtensionChannelRule"),t.IExtensionChannelService=Symbol("IExtensionChannelService"),t.IInsiderExtensionPrompt=Symbol("IInsiderExtensionPrompt"),function(e){e.off="off",e.weekly="weekly",e.daily="daily"}(t.ExtensionChannel||(t.ExtensionChannel={}))},function(e,t){e.exports=require("./node_modules/request")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeEnvironments=t.comparePythonVersionSpecificity=t.areSameEnv=t.getMinimalPartialInfo=t.copyEnvInfo=t.buildEnvInfo=void 0;const r=n(111),i=n(4),o=n(233),s=n(27),a=n(154),c=n(391);function l(e,t){void 0!==t.kind&&(e.kind=t.kind),void 0!==t.executable&&(e.executable.filename=t.executable),void 0!==t.location&&(e.location=t.location),void 0!==t.version&&(e.version=t.version)}function u(e){if("string"==typeof e){if(""===e)return;return{executable:{filename:e,sysPrefix:"",ctime:-1,mtime:-1}}}if(void 0!==e.executable&&""!==e.executable.filename)return e}function d(e){var t,n;let r=0;return e.major>0&&(r+=20),e.minor>=0&&(r+=10),e.micro>=0&&(r+=5),(null===(t=e.release)||void 0===t?void 0:t.level)&&(r+=3),((null===(n=e.release)||void 0===n?void 0:n.serial)||e.sysVersion)&&(r+=1),r}function h(e){let t=0;return e.filename.length>0&&(t+=5),e.mtime&&(t+=2),e.ctime&&(t+=1),t}function p(e){let t=0;return e.org.length>0&&(t+=20),e.defaultDisplayName&&(t+=10),e.binDir&&(t+=5),e.version&&(t+=2),t}t.buildEnvInfo=function(e){var t,n,r,i,a,c;const u={name:"",location:"",kind:o.PythonEnvKind.Unknown,executable:{filename:"",sysPrefix:"",ctime:null!==(n=null===(t=null==e?void 0:e.fileInfo)||void 0===t?void 0:t.ctime)&&void 0!==n?n:-1,mtime:null!==(i=null===(r=null==e?void 0:e.fileInfo)||void 0===r?void 0:r.mtime)&&void 0!==i?i:-1},searchLocation:void 0,defaultDisplayName:void 0,version:{major:-1,minor:-1,micro:-1,release:{level:o.PythonReleaseLevel.Final,serial:0}},arch:null!==(a=null==e?void 0:e.arch)&&void 0!==a?a:s.Architecture.Unknown,distro:{org:null!==(c=null==e?void 0:e.org)&&void 0!==c?c:""}};return void 0!==e&&l(u,e),u},t.copyEnvInfo=function(e,t){const n=r.cloneDeep(e);return void 0!==t&&l(n,t),n},t.getMinimalPartialInfo=u,t.areSameEnv=function(e,t,n=!0){const r=u(e),o=u(t);if(void 0===r||void 0===o)return;const s=r.executable.filename,l=o.executable.filename;if(a.arePathsSame(s,l))return!0;if(a.arePathsSame(i.dirname(s),i.dirname(l))){const r="string"==typeof e?void 0:e.version,i="string"==typeof t?void 0:t.version;if(r&&i&&(c.areEqualVersions(r,i)||n&&c.areEquivalentVersions(r,i)))return!0}return!1},t.comparePythonVersionSpecificity=function(e,t){return Math.sign(d(e)-d(t))},t.mergeEnvironments=function(e,t){var n,i,o;const a=r.cloneDeep(e),c=r.cloneDeep(d(e.version)>d(t.version)?e.version:t.version),l=r.cloneDeep(h(e.executable)>h(t.executable)?e.executable:t.executable);l.sysPrefix=null!==(n=e.executable.sysPrefix)&&void 0!==n?n:t.executable.sysPrefix;const u=r.cloneDeep(p(e.distro)>p(t.distro)?e.distro:t.distro);return a.arch=a.arch===s.Architecture.Unknown?t.arch:e.arch,a.defaultDisplayName=null!==(i=a.defaultDisplayName)&&void 0!==i?i:t.defaultDisplayName,a.distro=u,a.executable=l,a.kind=e.kind,a.location=a.location.length?a.location:t.location,a.name=a.name.length?a.name:t.name,a.searchLocation=null!==(o=a.searchLocation)&&void 0!==o?o:t.searchLocation,a.version=c,a}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UNKNOWN_PYTHON_VERSION=t.PythonReleaseLevel=t.PythonEnvKind=void 0,function(e){e.Unknown="unknown",e.System="global-system",e.MacDefault="global-mac-default",e.WindowsStore="global-windows-store",e.Pyenv="global-pyenv",e.CondaBase="global-conda-base",e.Poetry="global-poetry",e.Custom="global-custom",e.OtherGlobal="global-other",e.Venv="virt-venv",e.VirtualEnv="virt-virtualenv",e.VirtualEnvWrapper="virt-virtualenvwrapper",e.Pipenv="virt-pipenv",e.Conda="virt-conda",e.OtherVirtual="virt-other"}(t.PythonEnvKind||(t.PythonEnvKind={})),function(e){e.Alpha="alpha",e.Beta="beta",e.Candidate="candidate",e.Final="final"}(r=t.PythonReleaseLevel||(t.PythonReleaseLevel={})),t.UNKNOWN_PYTHON_VERSION={major:-1,minor:-1,micro:-1,release:{level:r.Final,serial:-1},sysVersion:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvsWatcher=void 0;const r=n(2);t.PythonEnvsWatcher=class{constructor(){this.didChange=new r.EventEmitter,this.onChanged=this.didChange.event}fire(e){this.didChange.fire(e)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterLocatorHelper=t.lookForInterpretersInDirectory=void 0;const o=n(109),s=n(0),a=n(4),c=n(5),l=n(86),u=n(6),d=n(155),h=n(28),p=l.IS_WINDOWS?/^python(\d+(.\d+)?)?\.exe$/:/^python(\d+(.\d+)?)?$/;t.lookForInterpretersInDirectory=async function(e){try{return(await o.readdir(e)).map(t=>a.join(e,t)).filter(e=>p.test(a.basename(e)))}catch(e){return c.traceError("Python Extension (lookForInterpretersInDirectory.fs.readdir):",e),[]}};let f=class{constructor(e,t){this.fs=e,this.pipEnvServiceHelper=t}async mergeInterpreters(e){const t=e.map(e=>({...e})).map(e=>(e.path=a.normalize(e.path),e)).reduce((e,t)=>{const n=t&&t.version?t.version.raw:void 0;let r=e.find(e=>!!(e.version&&e.version.raw===n&&e.path&&t.path&&this.fs.arePathsSame(a.dirname(e.path),a.dirname(t.path))));if(r){r.envType===h.EnvironmentType.Unknown&&t.envType!==h.EnvironmentType.Unknown&&(r.envType=t.envType);["envName","envPath","path","sysPrefix","architecture","sysVersion","version"].forEach(e=>{r&&!r[e]&&t[e]&&(r={...r,[e]:t[e]})})}else e.push(t);return e},[]);return await Promise.all(t.map(async e=>{const t=await this.pipEnvServiceHelper.getPipEnvInfo(e.path);t&&(e.envType=h.EnvironmentType.Pipenv,e.pipEnvWorkspaceFolder=t.workspaceFolder.fsPath,e.envName=t.envName||e.envName)})),t}};f=r([s.injectable(),i(0,s.inject(u.IFileSystem)),i(1,s.inject(d.IPipEnvServiceHelper))],f),t.InterpreterLocatorHelper=f},function(e,t,n){"use strict";const r=n(39);e.exports=r(e=>(e.message="\t"+e.message,e))},function(e,t,n){"use strict";const{Colorizer:r}=n(120),{Padder:i}=n(158),{configs:o,MESSAGE:s}=n(21);class a{constructor(e={}){e.levels||(e.levels=o.npm.levels),this.colorizer=new r(e),this.padder=new i(e),this.options=e}transform(e,t){return this.colorizer.transform(this.padder.transform(e,t),t),e[s]=`${e.level}:${e.message}`,e}}e.exports=e=>new a(e),e.exports.Format=a},function(e,t,n){"use strict";const r=n(39);function i(e){if(e.every(o))return t=>{let n=t;for(let t=0;t<e.length;t++)if(n=e[t].transform(n,e[t].options),!n)return!1;return n}}function o(e){if("function"!=typeof e.transform)throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"));return!0}e.exports=(...e)=>{const t=r(i(e)),n=t();return n.Format=t.Format,n},e.exports.cascade=i},function(e,t,n){"use strict";const r=n(39);e.exports=r((e,t)=>t.message?(e.message=`[${t.label}] ${e.message}`,e):(e.label=t.label,e))},function(e,t,n){"use strict";const r=n(39),{MESSAGE:i}=n(21),o=n(92);e.exports=r(e=>{const t={};return e.message&&(t["@message"]=e.message,delete e.message),e.timestamp&&(t["@timestamp"]=e.timestamp,delete e.timestamp),t["@fields"]=e,e[i]=o(t),e})},function(e,t,n){"use strict";const r=n(39);e.exports=r((e,t={})=>{let n="metadata";t.key&&(n=t.key);let r=[];return t.fillExcept||t.fillWith||(r.push("level"),r.push("message")),t.fillExcept&&(r=t.fillExcept),r.length>0?function(e,t,n){const r=t.reduce((t,n)=>(t[n]=e[n],delete e[n],t),{}),i=Object.keys(e).reduce((t,n)=>(t[n]=e[n],delete e[n],t),{});return Object.assign(e,r,{[n]:i}),e}(e,r,n):t.fillWith?function(e,t,n){return e[n]=t.reduce((t,n)=>(t[n]=e[n],delete e[n],t),{}),e}(e,t.fillWith,n):e})},function(e,t,n){"use strict";const r=n(22).inspect,i=n(39),{LEVEL:o,MESSAGE:s,SPLAT:a}=n(21);e.exports=i((e,t={})=>{const n=Object.assign({},e);return delete n[o],delete n[s],delete n[a],e[s]=r(n,!1,t.depth||null,t.colorize),e})},function(e,t,n){"use strict";const{MESSAGE:r}=n(21);class i{constructor(e){this.template=e}transform(e){return e[r]=this.template(e),e}}e.exports=e=>new i(e),e.exports.Printf=e.exports.Format=i},function(e,t,n){"use strict";const r=n(39),{MESSAGE:i}=n(21),o=n(92);e.exports=r(e=>{const t=o(Object.assign({},e,{level:void 0,message:void 0,splat:void 0})),n=e.padding&&e.padding[e.level]||"";return e[i]="{}"!==t?`${e.level}:${n} ${e.message} ${t}`:`${e.level}:${n} ${e.message}`,e})},function(e,t,n){"use strict";const r=n(22),{SPLAT:i}=n(21),o=/%[scdjifoO%]/g,s=/%%/g;class a{constructor(e){this.options=e}_splat(e,t){const n=e.message,o=e[i]||e.splat||[],a=n.match(s),c=a&&a.length||0,l=t.length-c-o.length,u=l<0?o.splice(l,-1*l):[],d=u.length;if(d)for(let t=0;t<d;t++)Object.assign(e,u[t]);return e.message=r.format(n,...o),e}transform(e){const t=e.message,n=e[i]||e.splat;if(!n||!n.length)return e;const r=t&&t.match&&t.match(o);if(!r&&(n||n.length)){const t=n.length>1?n.splice(0):n,r=t.length;if(r)for(let n=0;n<r;n++)Object.assign(e,t[n]);return e}return r?this._splat(e,r):e}}e.exports=e=>new a(e)},function(e,t,n){"use strict";const r=n(247),i=n(39);e.exports=i((e,t={})=>(t.format&&(e.timestamp="function"==typeof t.format?t.format():r.format(new Date,t.format)),e.timestamp||(e.timestamp=(new Date).toISOString()),t.alias&&(e[t.alias]=e.timestamp),e))},function(e,t,n){var r;!function(i){"use strict";var o={},s=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a=/\d\d?/,c=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,l=/\[([^]*?)\]/gm,u=function(){};function d(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}function h(e){return function(t,n,r){var i=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(t.month=i)}}function p(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],m=d(g,3),v=d(f,3);o.i18n={dayNamesShort:v,dayNames:f,monthNamesShort:m,monthNames:g,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10)*e%10]}};var y={D:function(e){return e.getDate()},DD:function(e){return p(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return p(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return p(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return String(e.getFullYear()).substr(2)},YYYY:function(e){return p(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return p(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return p(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return p(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return p(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return p(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return p(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+p(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},b={D:[a,function(e,t){e.day=t}],Do:[new RegExp(a.source+c.source),function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],YY:[a,function(e,t){var n=+(""+(new Date).getFullYear()).substr(0,2);e.year=""+(t>68?n-1:n)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],YYYY:[/\d{4}/,function(e,t){e.year=t}],S:[/\d/,function(e,t){e.millisecond=100*t}],SS:[/\d{2}/,function(e,t){e.millisecond=10*t}],SSS:[/\d{3}/,function(e,t){e.millisecond=t}],d:[a,u],ddd:[c,u],MMM:[c,h("monthNamesShort")],MMMM:[c,h("monthNames")],a:[c,function(e,t,n){var r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(e,t){"Z"===t&&(t="+00:00");var n,r=(t+"").match(/([\+\-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),e.timezoneOffset="+"===r[0]?n:-n)}]};b.dd=b.d,b.dddd=b.ddd,b.DD=b.D,b.mm=b.m,b.hh=b.H=b.HH=b.h,b.MM=b.M,b.ss=b.s,b.A=b.a,o.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,t,n){var r=n||o.i18n;if("number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=o.masks[t]||t||o.masks.default;var i=[];return(t=(t=t.replace(l,(function(e,t){return i.push(t),"??"}))).replace(s,(function(t){return t in y?y[t](e,r):t.slice(1,t.length-1)}))).replace(/\?\?/g,(function(){return i.shift()}))},o.parse=function(e,t,n){var r=n||o.i18n;if("string"!=typeof t)throw new Error("Invalid format in fecha.parse");if(t=o.masks[t]||t,e.length>1e3)return!1;var i=!0,a={};if(t.replace(s,(function(t){if(b[t]){var n=b[t],o=e.search(n[0]);~o?e.replace(n[0],(function(t){return n[1](a,t,r),e=e.substr(o+t.length),t})):i=!1}return b[t]?"":t.slice(1,t.length-1)})),!i)return!1;var c,l=new Date;return!0===a.isPm&&null!=a.hour&&12!=+a.hour?a.hour=+a.hour+12:!1===a.isPm&&12==+a.hour&&(a.hour=0),null!=a.timezoneOffset?(a.minute=+(a.minute||0)-+a.timezoneOffset,c=new Date(Date.UTC(a.year||l.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0))):c=new Date(a.year||l.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0),c},e.exports?e.exports=o:void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";const r=n(121),i=n(39),{MESSAGE:o}=n(21);e.exports=i((e,t)=>(!1!==t.level&&(e.level=r.strip(e.level)),!1!==t.message&&(e.message=r.strip(e.message)),!1!==t.raw&&e[o]&&(e[o]=r.strip(e[o])),e))},function(e,t,n){"use strict";var r=t.format=n(36);t.levels=n(122),Object.defineProperty(r,"align",{value:n(160)}),Object.defineProperty(r,"cli",{value:n(161)}),Object.defineProperty(r,"combine",{value:n(162)}),Object.defineProperty(r,"colorize",{value:n(103)}),Object.defineProperty(r,"json",{value:n(163)}),Object.defineProperty(r,"label",{value:n(164)}),Object.defineProperty(r,"logstash",{value:n(165)}),Object.defineProperty(r,"metadata",{value:n(166)}),Object.defineProperty(r,"padLevels",{value:n(123)}),Object.defineProperty(r,"prettyPrint",{value:n(167)}),Object.defineProperty(r,"printf",{value:n(168)}),Object.defineProperty(r,"simple",{value:n(169)}),Object.defineProperty(r,"splat",{value:n(170)}),Object.defineProperty(r,"timestamp",{value:n(171)}),Object.defineProperty(r,"uncolorize",{value:n(172)})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(36),o=n(21),s=o.LEVEL,a=o.MESSAGE;e.exports=i((function(e,t){var n=t.stack;if(e instanceof Error){var i,o=Object.assign({},e,(r(i={level:e.level},s,e[s]||e.level),r(i,"message",e.message),r(i,a,e[a]||e.message),i));return n&&(o.stack=e.stack),o}if(!(e.message instanceof Error))return e;Object.assign(e,e.message);var c=e.message;return e.message=c.message,e[a]=c.message,n&&(e.stack=c.stack),e}))},function(e,t,n){"use strict";var r=t.format=n(36);function i(e,t){t=t||e,Object.defineProperty(r,e,{get:function(){return n(417)("./".concat(t,".js"))},configurable:!0})}t.levels=n(122),i("align"),i("errors"),i("cli"),i("combine"),i("colorize"),i("json"),i("label"),i("logstash"),i("metadata"),i("ms"),i("padLevels","pad-levels"),i("prettyPrint","pretty-print"),i("printf"),i("simple"),i("splat"),i("timestamp"),i("uncolorize")},function(e,t,n){"use strict";var r=n(36),i=n(253);e.exports=r((function(e){var t=+new Date;return(void 0).diff=t-((void 0).prevTime||t),(void 0).prevTime=t,e.ms="+".concat(i((void 0).diff)),e}))},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return s(e,t,o,"day");if(t>=i)return s(e,t,i,"hour");if(t>=r)return s(e,t,r,"minute");if(t>=n)return s(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";const{format:r}=n(22);t.warn={deprecated:e=>()=>{throw new Error(r("{ %s } was removed in winston@3.0.0.",e))},useFormat:e=>()=>{throw new Error([r("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))},forFunctions(e,n,r){r.forEach(r=>{e[r]=t.warn[n](r)})},moved(e,t,n){function i(){return()=>{throw new Error([r("winston.%s was moved in winston@3.0.0.",n),r("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,n,{get:i,set:i})},forProperties(e,n,r){r.forEach(r=>{const i=t.warn[n](r);Object.defineProperty(e,r,{get:i,set:i})})}}},function(e,t,n){"use strict";var r=n(124);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var o,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;m.WritableState=g;var a=n(173);a.inherits=n(60);var c={deprecate:n(256)},l=n(257),u=n(104).Buffer,d=global.Uint8Array||function(){};var h,p=n(258);function f(){}function g(e,t){o=o||n(125),e=e||{};var a=t instanceof o;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var c=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:a&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),w(e,t))}(e,n,i,t,o);else{var a=S(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),i?s(y,e,n,a,o):y(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function m(e){if(o=o||n(125),!(h.call(m,this)||this instanceof o))return new m(e);this._writableState=new g(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function v(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function y(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),w(e,t)}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,v(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=S(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}a.inherits(m,l),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===m&&(e&&e._writableState instanceof g)}})):h=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof d);return a&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=f),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(i,s),o=!1),o}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,a,r,i,o);return c}(this,o,a,e,t,n)),s},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=p.destroy,m.prototype._undestroy=p.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}},function(e,t,n){e.exports=n(22).deprecate},function(e,t,n){e.exports=n(54)},function(e,t,n){"use strict";var r=n(124);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(104).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){(0,r.default)(t)(e,(0,i.default)(n),o)};var r=o(n(444)),i=o(n(129));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}},e.exports=t.default},function(e,t,n){var r=n(450),i=n(130),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n,r,i){return e(n,t,r,i)}},e.exports=t.default},function(e,t,n){"use strict";var r;e.exports=_,_.ReadableState=w;n(72).EventEmitter;var i=function(e,t){return e.listeners(t).length},o=n(270),s=n(66).Buffer,a=global.Uint8Array||function(){};var c,l=n(22);c=l&&l.debuglog?l.debuglog("stream"):function(){};var u,d,h=n(462),p=n(271),f=n(272).getHighWaterMark,g=n(93).codes,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S=n(463).emitExperimentalWarning;n(60)(_,o);var E=["error","close","destroy","pause","resume"];function w(e,t,i){r=r||n(94),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(274).StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||n(94),!(this instanceof _))return new _(e);var t=this instanceof r;this._readableState=new w(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function P(e,t,n,r,i){c("readableAddChunk",t);var o,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?I(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,l);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new m("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(l,t)),o)e.emit("error",o);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)l.endEmitted?e.emit("error",new b):C(e,l,t,!0);else if(l.ended)e.emit("error",new v);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?C(e,l,t,!1):R(e,l)):C(e,l,t,!1)}else r||(l.reading=!1,R(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&I(e)),R(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=p.destroy,_.prototype._undestroy=p.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),P(this,e,t,!1,n)},_.prototype.unshift=function(e){return P(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return u||(u=n(274).StringDecoder),this._readableState.decoder=new u(e),this._readableState.encoding=this._readableState.decoder.encoding,this};function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function I(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(O,e))}function O(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function R(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function x(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){c("readable nexttick read 0"),e.read(0)}function A(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(M,t,e))}function M(e,t){c("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):I(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new y("_read()"))},_.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,c("pipe count=%d opts=%j",r.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:g;function s(t,i){c("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",g),n.removeListener("data",d),u=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function a(){c("onend"),e.end()}r.endEmitted?process.nextTick(o):n.once("end",o),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",l);var u=!1;function d(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==L(r.pipes,e))&&!u&&(c("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",f),g()}function f(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",f),e.emit("pipe",n),r.flowing||(c("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=L(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,c("on readable",r.length,r.reading),r.length?I(this):r.reading||process.nextTick(k,this))),n},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(x,this),n},_.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(x,this),t},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(A,e,t))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return S("Readable[Symbol.asyncIterator]"),void 0===d&&(d=n(464)),d(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=j,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})},function(e,t,n){e.exports=n(54)},function(e,t,n){"use strict";function r(e,t){o(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(process.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t?(process.nextTick(i,n),t(e)):process.nextTick(i,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(93).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=_,_.WritableState=w;var o={deprecate:n(256)},s=n(270),a=n(66).Buffer,c=global.Uint8Array||function(){};var l,u=n(271),d=n(272).getHighWaterMark,h=n(93).codes,p=h.ERR_INVALID_ARG_TYPE,f=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,S=h.ERR_UNKNOWN_ENCODING;function E(){}function w(e,t,o){i=i||n(94),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),R(e,t))}(e,n,r,t,i);else{var o=I(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?process.nextTick(C,e,n,o,i):C(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function _(e){var t=this instanceof(i=i||n(94));if(!t&&!l.call(_,this))return new _(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function P(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),R(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(P(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var n=I(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}n(60)(_,s),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===_&&(e&&e._writableState instanceof w)}})):l=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new m)},_.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,a.isBuffer(r)||r instanceof c);return s&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=E),i.ending?function(e,t){var n=new b;e.emit("error",n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i;return null===n?i=new y:"string"==typeof n||t.objectMode||(i=new p("chunk",["string","Buffer"],n)),!i||(e.emit("error",i),process.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var c=t.objectMode?1:r.length;t.length+=c;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,c,r,i,o);return l}(this,i,s,e,t,n)),o},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,n){n(new f("_write()"))},_.prototype._writev=null,_.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,R(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=u.destroy,_.prototype._undestroy=u.undestroy,_.prototype._destroy=function(e,t){t(e)}},function(e,t,n){"use strict";var r=n(104).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=u;var r=n(93).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(94);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(60)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new i("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(276),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var c=s[a].channels,l=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:c}),Object.defineProperty(s[a],"labels",{value:l})}s.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),c=a-s;return a===s?t=0:r===a?t=(i-o)/c:i===a?t=2+(o-r)/c:o===a&&(t=4+(r-i)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+a)/2,[t,100*(a===s?0:n<=.5?c/(a+s):c/(2-a-s)),100*n]},s.rgb.hsv=function(e){var t,n,r,i,o,s=e[0]/255,a=e[1]/255,c=e[2]/255,l=Math.max(s,a,c),u=l-Math.min(s,a,c),d=function(e){return(l-e)/6/u+.5};return 0===u?i=o=0:(o=u/l,t=d(s),n=d(a),r=d(c),s===l?i=r-n:a===l?i=1/3+t-r:c===l&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*l]},s.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},s.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=i[e];if(t)return t;var n,o,s,a=1/0;for(var c in r)if(r.hasOwnProperty(c)){var l=r[c],u=(o=e,s=l,Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));u<a&&(a=u,n=c)}return n},s.keyword.rgb=function(e){return r[e]},s.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},s.hsl.rgb=function(e){var t,n,r,i,o,s=e[0]/360,a=e[1]/100,c=e[2]/100;if(0===a)return[o=255*c,o,o];t=2*c-(n=c<.5?c*(1+a):c+a-c*a),i=[0,0,0];for(var l=0;l<3;l++)(r=s+1/3*-(l-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[l]=255*o;return i},s.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*o),c=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,c,s];case 1:return[a,r,s];case 2:return[s,r,c];case 3:return[s,a,r];case 4:return[c,s,r];case 5:return[r,s,a]}},s.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return r=(2-o)*s,n=o*a,[i,100*(n=(n/=(t=(2-o)*a)<=1?t:2-t)||0),100*(r/=2)]},s.hwb.rgb=function(e){var t,n,r,i,o,s,a,c=e[0]/360,l=e[1]/100,u=e[2]/100,d=l+u;switch(d>1&&(l/=d,u/=d),r=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(r=1-r),i=l+r*((n=1-u)-l),t){default:case 6:case 0:o=n,s=i,a=l;break;case 1:o=i,s=n,a=l;break;case 2:o=l,s=n,a=i;break;case 3:o=l,s=i,a=n;break;case 4:o=i,s=l,a=n;break;case 5:o=n,s=l,a=i}return[255*o,255*s,255*a]},s.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},s.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,s=e[2]/100;return n=-.9689*i+1.8758*o+.0415*s,r=.0557*i+-.204*o+1.057*s,t=(t=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},s.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),s=Math.pow(t,3),a=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=s>.008856?s:(t-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},s.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},s.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),s=Math.min(Math.min(n,r),i),a=o-s;return t=a<=0?0:o===n?(r-i)/a%6:o===r?2+(i-n)/a:4+(n-r)/a+4,t/=6,[360*(t%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},s.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},s.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],s=t%1*6,a=s%1,c=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},s.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},s.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},s.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},s.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";var r=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};r.writable=function(e){return r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},r.readable=function(e){return r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},r.duplex=function(e){return r.writable(e)&&r.readable(e)},r.transform=function(e){return r.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t,n){"use strict";const{LEVEL:r}=n(21),i=n(181),o=n(483),s=n(132)("winston:create-logger");e.exports=function(e={}){e.levels=e.levels||i.npm.levels;class t extends o{constructor(e){super(e)}}const n=new t(e);return Object.keys(e.levels).forEach((function(e){s('Define prototype method for "%s"',e),"log"!==e?(t.prototype[e]=function(...t){const i=this||n;if(1===t.length){const[o]=t,s=o&&o.message&&o||{message:o};return s.level=s[r]=e,i._addDefaultMeta(s),i.write(s),this||n}return 0===t.length?(i.log(e,""),i):i.log(e,...t)},t.prototype[function(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}(e)]=function(){return(this||n).isLevelEnabled(e)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')})),n}},function(e,t,n){"use strict";const r=n(20),i=n(182),o=n(132)("winston:exception"),s=n(282),a=n(283),c=n(284);e.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(e=>{if(Array.isArray(e))return e.forEach(e=>this._addHandler(e));this._addHandler(e)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let{message:t}=e;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["uncaughtException: "+(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:r.loadavg(),uptime:r.uptime()}}getTrace(e){return(e?a.parse(e):a.get()).map(e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;const t=new c(e);this.handlers.set(e,t),this.logger.pipe(t)}}_uncaughtException(e){const t=this.getAllInfo(e),n=this._getExceptionHandlers();let r,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function c(){o("doExit",a),o("process._exiting",process._exiting),a&&!process._exiting&&(r&&clearTimeout(r),process.exit(1))}if(!n.length&&a&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),a=!1),!n||0===n.length)return process.nextTick(c);i(n,(e,t)=>{const n=s(t),r=e.transport||e;function i(e){return()=>{o(e),n()}}r._ending=!0,r.once("finish",i("finished")),r.once("error",i("error"))},()=>a&&c()),this.logger.log(t),a&&(r=setTimeout(c,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}},function(e,t,n){"use strict";e.exports=function(e){var t,n=0;function r(){return n||(n=1,t=e.apply(this,arguments),e=null),t}return r.displayName=e.displayName||e.name||r.displayName||r.name,r}},function(e,t){function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(r,e||t.get);var o=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=n,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map((function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var r=null,i=null,o=null,s=null,a=null,c="native"===n[5];if(n[1]){var l=(o=n[1]).lastIndexOf(".");if("."==o[l-1]&&l--,l>0){r=o.substr(0,l),i=o.substr(l+1);var u=r.indexOf(".Module");u>0&&(o=o.substr(u+1),r=r.substr(0,u))}s=null}i&&(s=r,a=i),"<anonymous>"===i&&(a=null,o=null);var d={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(d)}})).filter((function(e){return!!e}))};["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach((function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),["topLevel","eval","native","constructor"].forEach((function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}})),t._createParsedCallSite=function(e){return new n(e)}},function(e,t,n){"use strict";const{Writable:r}=n(105);e.exports=class extends r{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,t,n){return e.exception?this.transport.log(e,n):(n(),!0)}}},function(e,t,n){"use strict";const r=n(20),i=n(182),o=n(132)("winston:rejection"),s=n(282),a=n(283),c=n(284);e.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(e=>{if(Array.isArray(e))return e.forEach(e=>this._addHandler(e));this._addHandler(e)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let{message:t}=e;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["unhandledRejection: "+(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:r.loadavg(),uptime:r.uptime()}}getTrace(e){return(e?a.parse(e):a.get()).map(e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;const t=new c(e);this.handlers.set(e,t),this.logger.pipe(t)}}_unhandledRejection(e){const t=this.getAllInfo(e),n=this._getRejectionHandlers();let r,a="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function c(){o("doExit",a),o("process._exiting",process._exiting),a&&!process._exiting&&(r&&clearTimeout(r),process.exit(1))}if(!n.length&&a&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),a=!1),!n||0===n.length)return process.nextTick(c);i(n,(e,t)=>{const n=s(t),r=e.transport||e;function i(e){return()=>{o(e),n()}}r._ending=!0,r.once("finish",i("finished")),r.once("error",i("error"))},()=>a&&c()),this.logger.log(t),a&&(r=setTimeout(c,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormatter=void 0;const r=n(102),i=n(10),o=n(95),s={[o.LogLevel.Error]:"Error",[o.LogLevel.Warn]:"Warn",[o.LogLevel.Info]:"Info",[o.LogLevel.Debug]:"Debug",[o.LogLevel.Trace]:"Trace"};function a(e){const t=o.getLevel(e);if(t){const e=s[t];if(e)return e}return`${e.substring(0,1).toUpperCase()}${e.substring(1).toLowerCase()}`}function c(){return r.format.combine(r.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),r.format.printf(({level:e,message:t,timestamp:n})=>function(e,t,n){const r=a(e);return i.isTestExecution()?`${process.pid} ${r} ${t}: ${n}`:`${r} ${t}: ${n}`}(e,n,t)))}function l(e){return r.format.combine(r.format.label({label:e}),r.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),r.format.printf(({level:e,message:t,label:n,timestamp:r})=>function(e,t,n,r){const o=a(e);return i.isTestExecution()?`${process.pid} ${o} ${n} ${t}: ${r}`:`${o} ${n} ${t}: ${r}`}(e,r,n,t)))}t.getFormatter=function(e={}){return e.label?l(e.label):c()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logToAll=t.configureLogger=t.getPreDefinedConfiguration=t.createLogger=void 0;const r=n(22),i=n(102),o=n(286),s=n(95),a=n(288);function c(e,t){if(t.level){const n=s.resolveLevelName(t.level);n&&(e.level=n)}if(t.file){const n=o.getFormatter(),r=a.getFileTransport(t.file.logfile,n);e.add(r)}if(t.console){const n=o.getFormatter({label:t.console.label}),r=a.getConsoleTransport(n);e.add(r)}}function l(e){for(const t of e.transports)if(a.isConsoleTransport(t))return!0;return!1}function u(e,t,n){const r=s.resolveLevelName(e,t);return r||(n?"silly":s.resolveLevelName(s.LogLevel.Info,t)||"info")}t.createLogger=function(e){const t=i.createLogger({});return e&&c(t,e),t},t.getPreDefinedConfiguration=function(){const e={};if(process.env.VSC_PYTHON_FORCE_LOGGING){e.console={};"true"===process.env.TRAVIS||void 0!==process.env.TF_BUILD||(e.console.label="Python Extension:")}return process.env.VSC_PYTHON_LOG_FILE&&(e.file={logfile:process.env.VSC_PYTHON_LOG_FILE}),e},t.configureLogger=c,t.logToAll=function(e,t,n){const i=0===n.length?"":r.format(n[0],...n.slice(1));for(const n of e)if(n.transports.length>0){const e=u(t,n.levels,l(n));n.log(e,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileTransport=t.getPythonOutputChannelTransport=t.getConsoleTransport=t.isConsoleTransport=void 0;const r=n(4),i=n(102),o=n(80),s=n(95),a=r.dirname(__dirname),c="client"===r.basename(a)?r.join(a,"..",".."):r.join(a,"..","..","..",".."),l=Symbol.for("message");t.isConsoleTransport=function(e){return e.isConsole};class u extends o{constructor(e,t){super(e),this.levels=t,this.isConsole=!0}log(e,t){setImmediate(()=>this.emit("logged",e));const n=s.resolveLevel(e.level,this.levels),r=e[l]||e.message;this.logToConsole(n,r),t&&t()}logToConsole(e,t){let n=u.defaultFunc;e&&(n=u.funcByLevel[e]||n),n(t)}}u.funcByLevel={[s.LogLevel.Error]:console.error,[s.LogLevel.Warn]:console.warn,[s.LogLevel.Info]:console.info,[s.LogLevel.Debug]:console.debug,[s.LogLevel.Trace]:console.trace},u.defaultFunc=console.log,t.getConsoleTransport=function(e){return new u({format:e})};class d extends o{constructor(e,t){super(t),this.channel=e}log(e,t){setImmediate(()=>this.emit("logged",e)),this.channel.appendLine(e[l]||e.message),t&&t()}}t.getPythonOutputChannelTransport=function(e,t){return new d(e,{format:t})},t.getFileTransport=function(e,t){return r.isAbsolute(e)||(e=r.join(c,e)),new i.transports.File({format:t,filename:e,handleExceptions:!0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tracing=t.createTracingDecorator=t.TraceOptions=void 0;const r=n(23),i=n(14),o=n(7),s=n(95),a=n(287),c=n(568);var l;function u(e,t,n,r){const i=function(e,t,n){n=function(e){let{kind:t,name:n,args:r}=e;return t&&""!==t||(t="Function"),n&&""!==n||(n="<anon>"),r||(r=[]),{kind:t,name:n,args:r}}(n);const r=[e.message];return r.push(`${n.kind} name = ${n.name}`.trim(),`completed in ${t.elapsed}ms`,`has a ${t.returnValue?"truthy":"falsy"} return value`),(e.opts&l.Arguments)===l.Arguments&&r.push(c.argsToLogString(n.args)),(e.opts&l.ReturnValue)===l.ReturnValue&&r.push(c.returnValueToLogString(t.returnValue)),r.join(", ")}(t,n,r);void 0===n.err?(!t.level||t.level>s.LogLevel.Error)&&a.logToAll(e,s.LogLevel.Info,[i]):(a.logToAll(e,s.LogLevel.Error,[i,n.err]),o.sendTelemetryEvent("ERROR",void 0,void 0,n.err))}!function(e){e[e.None=0]="None",e[e.Arguments=1]="Arguments",e[e.ReturnValue=2]="ReturnValue"}(l=t.TraceOptions||(t.TraceOptions={})),t.createTracingDecorator=function(e,t){return r.trace((n,r)=>u(e,t,r,n))},t.tracing=function(e,t,n,r){return i.tracing(n=>u(e,t,n,r),n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var r=n(29),i=n(20),o=n(4),s=n(2),a=n(493),c=function(){function e(e,t,n,i){var a=this;this.extensionId=e,this.extensionVersion=t,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!i;var c=process.env.VSCODE_LOGS||"";c&&e&&"trace"===process.env.VSCODE_LOG_LEVEL&&(c=o.join(c,e+".txt"),this.logStream=r.createWriteStream(c,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(n),this.configListener=s.workspace.onDidChangeConfiguration((function(){return a.updateUserOptIn(n)}))}return e.prototype.updateUserOptIn=function(t){var n=s.workspace.getConfiguration(e.TELEMETRY_CONFIG_ID);this.userOptIn!==n.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=n.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(t):this.dispose())},e.prototype.createAppInsightsClient=function(e){a.defaultClient?(this.appInsightsClient=new a.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(a.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=a.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),s&&s.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=s.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=s.env.sessionId),e&&0===e.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},e.prototype.getCommonProperties=function(){var e=Object.create(null);if(e["common.os"]=i.platform(),e["common.platformversion"]=(i.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,s&&s.env){switch(e["common.vscodemachineid"]=s.env.machineId,e["common.vscodesessionid"]=s.env.sessionId,e["common.vscodeversion"]=s.version,s.env.uiKind){case s.UIKind.Web:e["common.uikind"]="web";break;case s.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(s.env.remoteName)}return e},e.prototype.cleanRemoteName=function(e){if(!e)return"none";var t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach((function(n){0===e.indexOf(n+"+")&&(t=n)})),t},e.prototype.shouldSendErrorTelemetry=function(){return!this.firstParty||("other"!==this.cleanRemoteName(s.env.remoteName)||void 0!==this.extension&&this.extension.extensionKind!==s.ExtensionKind.Workspace&&s.env.uiKind!==s.UIKind.Web)},Object.defineProperty(e.prototype,"extension",{get:function(){return void 0===this._extension&&(this._extension=s.extensions.getExtension(this.extensionId)),this._extension},enumerable:!0,configurable:!0}),e.prototype.cloneAndChange=function(e,t){if(null===e||"object"!=typeof e)return e;if("function"!=typeof t)return e;var n={};for(var r in e)n[r]=t(e[r]);return n},e.prototype.anonymizeFilePaths=function(e,t){var n=[new RegExp(s.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var r=e;if(t){for(var i=[],o=0,a=n;o<a.length;o++)for(var c=a[o];;){var l=c.exec(e);if(!l)break;i.push([l.index,c.lastIndex])}var u=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,d=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,h=0;r="";for(var p=function(){var t=d.exec(e);if(!t)return"break";!u.test(t[0])&&i.every((function(e){var n=e[0],r=e[1];return t.index<n||t.index>=r}))&&(r+=e.substring(h,t.index)+"<REDACTED: user-file-path>",h=d.lastIndex)};;){if("break"===p())break}h<e.length&&(r+=e.substr(h))}for(var f=0,g=n;f<g.length;f++){c=g[f];r=r.replace(c,"")}return r},e.prototype.sendTelemetryEvent=function(e,t,n){var r=this;if(this.userOptIn&&e&&this.appInsightsClient){var i=this.cloneAndChange(t,(function(e){return r.anonymizeFilePaths(e,r.firstParty)}));this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:i,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:n})+"\n")}},e.prototype.sendTelemetryErrorEvent=function(e,t,n,r){var i=this;if(this.userOptIn&&e&&this.appInsightsClient){var o=this.cloneAndChange(t,(function(e){return i.shouldSendErrorTelemetry()?i.anonymizeFilePaths(e,i.firstParty):void 0===r||-1!==r.indexOf(e)?"REDACTED":i.anonymizeFilePaths(e,i.firstParty)}));this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:o,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:n})+"\n")}},e.prototype.sendTelemetryException=function(e,t,n){var r=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&e&&this.appInsightsClient){var i=this.cloneAndChange(t,(function(e){return r.anonymizeFilePaths(e,r.firstParty)}));this.appInsightsClient.trackException({exception:e,properties:i,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e.name+" "+e.message+" "+JSON.stringify({properties:t,measurements:n})+"\n")}},e.prototype.dispose=function(){var e=this;this.configListener.dispose();var t=new Promise((function(t){if(!e.logStream)return t(void 0);e.logStream.on("finish",t),e.logStream.end()})),n=new Promise((function(t){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,t(void 0)}}):t(void 0)}));return Promise.all([n,t])},e.TELEMETRY_CONFIG_ID="telemetry",e.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(38),o=n(292),s=Object.keys(process.binding("natives")),a=o.prototype.require;t.makePatchingRequire=function(e){var t={};return function(n){var c=a.apply(this,arguments);if(e[n]){var l=o._resolveFilename(n,this);if(t.hasOwnProperty(l))return t[l];var u=void 0;if(s.indexOf(n)<0)try{u=a.call(this,r.join(n,"package.json")).version}catch(e){return c}else u=process.version.substring(1);var d=u.indexOf("-");d>=0&&(u=u.substring(0,d));for(var h=c,p=0,f=e[n];p<f.length;p++){var g=f[p];i.satisfies(u,g.versionSpecifier)&&(h=g.patch(h,l))}return t[l]=h}return c}}},function(e,t){e.exports=require("module")},function(e,t){e.exports=require("timers")},function(e){e.exports=JSON.parse('{"name":"async-hook-jl","description":"Inspect the life of handle objects in node","version":"1.7.6","author":"Andreas Madsen <amwebdk@gmail.com>","main":"./index.js","scripts":{"test":"node ./test/runner.js && eslint ."},"repository":{"type":"git","url":"git://github.com/jeff-lewis/async-hook-jl.git"},"keywords":["async","async hooks","inspect","async wrap"],"license":"MIT","dependencies":{"stack-chain":"^1.3.7"},"devDependencies":{"async":"1.5.x","cli-color":"1.1.x","eslint":"^3.4.0","endpoint":"0.4.x"},"engines":{"node":"^4.7 || >=6.9 || >=7.3"},"_resolved":"https://registry.npmjs.org/async-hook-jl/-/async-hook-jl-1.7.6.tgz","_integrity":"sha512-gFaHkFfSxTjvoxDMYqDuGHlcRyUuamF8s+ZTtJdDzqjws4mCt7v0vuV79/E2Wr2/riMQgtG4/yUtXWs1gZ7JMg==","_from":"async-hook-jl@1.7.6"}')},function(e,t,n){if(global._stackChain){if(global._stackChain.version!==n(296).version)throw new Error("Conflicting version of stack-chain found");e.exports=global._stackChain}else e.exports=global._stackChain=n(519)},function(e){e.exports=JSON.parse('{"name":"stack-chain","description":"API for combining call site modifiers","version":"1.3.7","author":"Andreas Madsen <amwebdk@gmail.com>","scripts":{"test":"tap ./test/simple"},"repository":{"type":"git","url":"git://github.com/AndreasMadsen/stack-chain.git"},"keywords":["stack","chain","trace","call site","concat","format"],"devDependencies":{"tap":"2.x.x","uglify-js":"2.5.x"},"license":"MIT","_resolved":"https://registry.npmjs.org/stack-chain/-/stack-chain-1.3.7.tgz","_integrity":"sha1-0ZLJ/06moiyUxN1FkXHj8AzqEoU=","_from":"stack-chain@1.3.7"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=n(529),t.Base=n(298),t.ContextTagKeys=n(530),t.Data=n(531),t.DataPoint=n(532),t.DataPointType=n(299),t.Domain=n(74),t.Envelope=n(533),t.EventData=n(300),t.ExceptionData=n(534),t.ExceptionDetails=n(535),t.MessageData=n(536),t.MetricData=n(537),t.PageViewData=n(538),t.RemoteDependencyData=n(539),t.RequestData=n(540),t.SeverityLevel=n(541),t.StackFrame=n(542)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";var r;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=r},function(e,t,n){"use strict";var r=n(62),i=n(96),o=function(){function e(t,n){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var o=t.trim().split("-"),s=o.length;s>=4?(this.version=o[0],this.traceId=o[1],this.spanId=o[2],this.traceFlag=o[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),"00"===this.version&&4!==s&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(n){this.parentId=n.slice();var a=i.getRootId(n);e.isValidTraceId(a)||(this.legacyRootId=a,a=r.w3cTraceId()),-1!==n.indexOf("|")&&(n=n.substring(1+n.substring(0,n.length-1).lastIndexOf("."),n.length-1)),this.traceId=a,this.spanId=n}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();e.exports=o},function(e,t,n){"use strict";var r=n(81),i=n(82),o=n(37),s=n(62),a=n(108),c=n(553),l=n(106),u=n(188),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,i){l.CorrelationContextManager.wrapEmitter(r),l.CorrelationContextManager.wrapEmitter(i);var o=r&&!r[e.alreadyAutoCollectedFlag];if(r&&o){var s=new c(r),a=t._generateCorrelationContext(s);l.CorrelationContextManager.runWithContext(a,(function(){t._isEnabled&&(r[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:r,response:i},s)),"function"==typeof n&&n(r,i)}))}else"function"==typeof n&&n(r,i)}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},s=r.createServer;r.createServer=function(e){var t=s(n(e));return o(t),t};var a=i.createServer;i.createServer=function(e,t){var r=a(e,n(t));return o(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=l.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var i=l.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",(function(){e.endRequest(t,a,n,null,null)})),n.request.on&&n.request.on("error",(function(r){e.endRequest(t,a,n,null,r)}))}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);s.safeIncludeCorrelationHeader(e,t,n)}},e.endRequest=function(e,t,n,r,i){i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];var a=t.getLegacyRootId();a&&(o.properties.ai_legacyRootId=a),o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=d},function(e,t,n){const r=n(45).fromCallback,i=n(32),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof i[e]);Object.keys(i).forEach(e=>{t[e]=i[e]}),o.forEach(e=>{t[e]=r(i[e])}),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise(t=>i.exists(e,t))},t.read=function(e,t,n,r,o,s){return"function"==typeof s?i.read(e,t,n,r,o,s):new Promise((s,a)=>{i.read(e,t,n,r,o,(e,t,n)=>{if(e)return a(e);s({bytesRead:t,buffer:n})})})},t.write=function(e,t,n,r,o,s){return"function"==typeof arguments[arguments.length-1]?i.write(e,t,n,r,o,s):new Promise("string"==typeof t?(o,s)=>{i.write(e,t,n,r,(e,t,n)=>{if(e)return s(e);o({bytesWritten:t,buffer:n})})}:(s,a)=>{i.write(e,t,n,r,o,(e,t,n)=>{if(e)return a(e);s({bytesWritten:t,buffer:n})})})}},function(e,t,n){var r=n(32),i=n(4),o=n(575);e.exports=function(e,t,n,s){s||(s=n,n={});var a=process.cwd(),c=i.resolve(a,e),l=i.resolve(a,t),u=n.filter,d=n.transform,h=n.overwrite;void 0===h&&(h=n.clobber),void 0===h&&(h=!0);var p=n.errorOnExist,f=n.dereference,g=!0===n.preserveTimestamps,m=0,v=0,y=0,b=!1;function S(e){if(m++,u)if(u instanceof RegExp){if(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),!u.test(e))return I(!0)}else if("function"==typeof u&&!u(e,t))return I(!0);return function(e){var t=f?r.stat:r.lstat;y++,t(e,(function(t,n){if(t)return T(t);var o,s,u={name:e,mode:n.mode,mtime:n.mtime,atime:n.atime,stats:n};if(!n.isDirectory())return n.isFile()||n.isCharacterDevice()||n.isBlockDevice()?function(e){var t=e.name.replace(c,l.replace("$","$$$$"));C(t,(function(n){n?E(e,t):h?w(t,(function(){E(e,t)})):p?T(new Error(t+" already exists")):I()}))}(u):n.isSymbolicLink()?function(e){var t=e.replace(c,l);r.readlink(e,(function(e,n){if(e)return T(e);!function(e,t){f&&(e=i.resolve(a,e));C(t,(function(n){if(n)return P(e,t);r.readlink(t,(function(n,r){return n?T(n):(f&&(r=i.resolve(a,r)),r===e?I():w(t,(function(){P(e,t)})))}))}))}(n,t)}))}(e):void 0;C(s=(o=u).name.replace(c,l.replace("$","$$$$")),(function(e){if(e)return function(e,t){r.mkdir(t,e.mode,(function(n){if(n)return T(n);r.chmod(t,e.mode,(function(t){if(t)return T(t);_(e.name)}))}))}(o,s);_(o.name)}))}))}(e)}function E(e,t){var n=r.createReadStream(e.name),i=r.createWriteStream(t,{mode:e.mode});n.on("error",T),i.on("error",T),d?d(n,i,e):i.on("open",(function(){n.pipe(i)})),i.once("close",(function(){r.chmod(t,e.mode,(function(n){if(n)return T(n);g?o.utimesMillis(t,e.atime,e.mtime,(function(e){return e?T(e):I()})):I()}))}))}function w(e,t){r.unlink(e,(function(e){return e?T(e):t()}))}function _(e){r.readdir(e,(function(t,n){return t?T(t):(n.forEach((function(t){S(i.join(e,t))})),I())}))}function P(e,t){r.symlink(e,t,(function(e){return e?T(e):I()}))}function C(e,t){r.lstat(e,(function(e){return e&&"ENOENT"===e.code?t(!0):t(!1)}))}function T(e){if(!b&&void 0!==s)return b=!0,s(e)}function I(e){if(e||y--,v++,m===v&&0===y&&void 0!==s)return s(null)}S(c)}},function(e,t,n){"use strict";const r=n(4);function i(e){return(e=r.normalize(r.resolve(e)).split(r.sep)).length>0?e[0]:null}const o=/[<>:"|?*]/;e.exports={getRootPath:i,invalidWin32Path:function(e){const t=i(e);return e=e.replace(t,""),o.test(e)}}},function(e,t,n){e.exports={copySync:n(578)}},function(e,t){e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},function(e,t,n){e.exports=b;var r=n(29),i=n(310),o=n(136),s=(o.Minimatch,n(60)),a=n(72).EventEmitter,c=n(4),l=n(67),u=n(194),d=n(599),h=n(311),p=(h.alphasort,h.alphasorti,h.setopts),f=h.ownProp,g=n(600),m=(n(22),h.childrenIgnored),v=h.isIgnored,y=n(313);function b(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new E(e,t,n)}b.sync=d;var S=b.GlobSync=d.GlobSync;function E(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new S(e,t)}if(!(this instanceof E))return new E(e,t,n);p(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=y(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return s();for(var o=0;o<r;o++)this._process(this.minimatch.set[o],o,!1,s);function s(){--i._processing,i._processing<=0&&i._finish()}}b.glob=b,b.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}({},t);n.noprocess=!0;var r=new E(e,n).minimatch.set;if(!e)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},b.Glob=E,s(E,a),E.prototype._finish=function(){if(l(this instanceof E),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},E.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--e&&t._finish()}},E.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),o=this,s=r.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);r.forEach((function(n,r){n=o._makeAbs(n),i.realpath(n,o.realpathCache,(function(r,i){r?"stat"===r.syscall?a[n]=!0:o.emit("error",r):a[i]=!0,0==--s&&(o.matches[e]=a,t())}))}))},E.prototype._mark=function(e){return h.mark(this,e)},E.prototype._makeAbs=function(e){return h.makeAbs(this,e)},E.prototype.abort=function(){this.aborted=!0,this.emit("abort")},E.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},E.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},E.prototype._process=function(e,t,n,r){if(l(this instanceof E),l("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,r]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,r);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":u(i)||u(e.join("/"))?(i&&u(i)||(i="/"+i),a=i):a=i;var d=this._makeAbs(a);if(m(this,a))return r();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,d,c,t,n,r):this._processReaddir(i,a,d,c,t,n,r)}},E.prototype._processReaddir=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,l){return a._processReaddir2(e,t,n,r,i,o,l,s)}))},E.prototype._processReaddir2=function(e,t,n,r,i,o,s,a){if(!s)return a();for(var l=r[0],u=!!this.minimatch.negate,d=l._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<s.length;f++){if("."!==(m=s[f]).charAt(0)||h)(u&&!e?!m.match(l):m.match(l))&&p.push(m)}var g=p.length;if(0===g)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<g;f++){var m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=c.join(this.root,m)),this._emitMatch(i,m)}return a()}r.shift();for(f=0;f<g;f++){m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(r),i,o,a)}a()},E.prototype._emitMatch=function(e,t){if(!this.aborted&&!v(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=u(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}},E.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,i=g("lstat\0"+e,(function(r,i){if(r&&"ENOENT"===r.code)return t();var o=i&&i.isSymbolicLink();n.symlinks[e]=o,o||!i||i.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));i&&r.lstat(e,i)}},E.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=g("readdir\0"+e+"\0"+t,n))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,n);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return n();if(Array.isArray(i))return n(null,i)}r.readdir(e,function(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}(this,e,n))}},E.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}},E.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},E.prototype._processGlobStar=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,(function(c,l){a._processGlobStar2(e,t,n,r,i,o,l,s)}))},E.prototype._processGlobStar2=function(e,t,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),l=e?[e]:[],u=l.concat(c);this._process(u,i,!1,a);var d=this.symlinks[n],h=s.length;if(d&&o)return a();for(var p=0;p<h;p++){if("."!==s[p].charAt(0)||this.dot){var f=l.concat(s[p],c);this._process(f,i,!0,a);var g=l.concat(s[p],r);this._process(g,i,!0,a)}}a()},E.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,(function(i,o){r._processSimple2(e,t,i,o,n)}))},E.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&u(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},E.prototype._stat=function(e,t){var n=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[n];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,l=g("stat\0"+n,(function(i,o){if(o&&o.isSymbolicLink())return r.stat(n,(function(r,i){r?c._stat2(e,n,null,o,t):c._stat2(e,n,r,i,t)}));c._stat2(e,n,i,o,t)}));l&&r.lstat(n,l)},E.prototype._stat2=function(e,t,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=r,"/"===t.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,r)}},function(e,t,n){e.exports=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=function(){r.realpath=u,r.realpathSync=d},u.unmonkeypatch=function(){r.realpath=i,r.realpathSync=o};var r=n(29),i=r.realpath,o=r.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(595);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function u(e,t,n){if(a)return i(e,t,n);"function"==typeof t&&(n=t,t=null),i(e,t,(function(r,i){l(r)?c.realpath(e,t,n):n(r,i)}))}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(l(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=l,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(u))}(e,n),e.changedCwd=!1;var o=process.cwd();r(n,"cwd")?(e.cwd=i.resolve(n.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=n.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=r,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var o=e.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[r];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:l));if(e.mark){for(r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),r=e.cache[t]||e.cache[d(e,t)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n})))}e.ignore.length&&(n=n.filter((function(t){return!h(e,t)})));e.found=n},t.mark=function(e,t){var n=d(e,t),r=e.cache[n],i=t;if(r){var o="DIR"===r||Array.isArray(r),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=d(e,i);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return i},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=n(4),o=n(136),s=n(194),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function l(e,t){return e.localeCompare(t)}function u(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var n=t;return n="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},function(e,t,n){var r=n(312);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(33),o=n(56),s=n(76),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(i.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(84),o=n(56),s=n(608),a=function(){function e(e,t,n,a){this.guid=i.guid(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(r.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG}))},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===r.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(195),i=n(196),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(r.NAMED_TAG);t.namedConstraint=a;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDebugpyPackagePath=t.getDebugpyLauncherArgs=void 0;const r=n(4),i=n(10);n(11);const o=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles","lib","python"),s=r.join(o,"debugpy");t.getDebugpyLauncherArgs=function(e,t=s){const n=e.waitUntilDebuggerAttaches?["--wait-for-client"]:[];return[t.fileToCommandArgument(),"--listen",`${e.host}:${e.port}`,...n]},t.getDebugpyPackagePath=function(){return s}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposePylanceBanner=t.ProposeLSStateKeys=t.getPylanceExtensionUri=void 0;const o=n(0),s=n(16),a=n(3),c=n(10),l=n(24);n(11);const u=n(1),d=n(13),h=n(7),p=n(9);function f(e){return`${e.uriScheme}:extension/${c.PYLANCE_EXTENSION_ID}`}var g;t.getPylanceExtensionUri=f,function(e){e.ShowBanner="TryPylanceBanner"}(g=t.ProposeLSStateKeys||(t.ProposeLSStateKeys={}));let m=class{constructor(e,t,n,r,i,o){this.appShell=e,this.appEnv=t,this.persistentState=n,this.configuration=r,this.experiments=i,this.extensions=o,this.disabledInCurrentSession=!1}get enabled(){return this.persistentState.createGlobalPersistentState(g.ShowBanner,!0).value}async showBanner(){if(!this.enabled)return;const e=await this.getPromptMessage();if(!e)return;const t=await this.appShell.showInformationMessage(e,d.Pylance.tryItNow(),d.Common.bannerLabelNo(),d.Pylance.remindMeLater());let n;t===d.Pylance.tryItNow()?(this.appShell.openUrl(f(this.appEnv)),n="yes",await this.disable()):t===d.Common.bannerLabelNo()?(await this.disable(),n="no"):(this.disabledInCurrentSession=!0,n="later"),h.sendTelemetryEvent(p.EventName.LANGUAGE_SERVER_TRY_PYLANCE,void 0,{userAction:n})}async disable(){await this.persistentState.createGlobalPersistentState(g.ShowBanner,!1).updateValue(!1)}async getPromptMessage(){var e;if(this.disabledInCurrentSession)return;if(this.extensions.getExtension(c.PYLANCE_EXTENSION_ID))return;const t=null!==(e=this.configuration.getSettings().languageServer)&&void 0!==e?e:s.LanguageServerType.Jedi;if(t===s.LanguageServerType.Jedi){if(await this.experiments.inExperiment(l.TryPylance.jediPrompt1))return this.experiments.getExperimentValue(l.TryPylance.jediPrompt1);if(await this.experiments.inExperiment(l.TryPylance.jediPrompt2))return this.experiments.getExperimentValue(l.TryPylance.jediPrompt2)}else if((t===s.LanguageServerType.Microsoft||t===s.LanguageServerType.None)&&await this.experiments.inExperiment(l.TryPylance.experiment))return d.Pylance.proposePylanceMessage()}};m=r([o.injectable(),i(0,o.inject(a.IApplicationShell)),i(1,o.inject(a.IApplicationEnvironment)),i(2,o.inject(u.IPersistentStateFactory)),i(3,o.inject(u.IConfigurationService)),i(4,o.inject(u.IExperimentService)),i(5,o.inject(u.IExtensions))],m),t.ProposePylanceBanner=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areFunctions=t.isFunction=t.isEmptyObject=t.isUndefinedOrNull=t.isUndefined=t.isBoolean=t.isNumber=t.isObject=t.isStringArray=t.isString=t.isArray=void 0;const r="number",i="string",o="undefined",s="object",a="function";function c(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==r||e.constructor!==Array)}function l(e){return typeof e===i||e instanceof String}function u(e){return!(typeof e!==s||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function d(e){return typeof e===o}t.isArray=c,t.isString=l,t.isStringArray=function(e){return c(e)&&e.every(e=>l(e))},t.isObject=u,t.isNumber=function(e){return(typeof e===r||e instanceof Number)&&!isNaN(e)},t.isBoolean=function(e){return!0===e||!1===e},t.isUndefined=d,t.isUndefinedOrNull=function(e){return d(e)||null===e};const h=Object.prototype.hasOwnProperty;function p(e){return typeof e===a}t.isEmptyObject=function(e){if(!u(e))return!1;for(let t in e)if(h.call(e,t))return!1;return!0},t.isFunction=p,t.areFunctions=function(...e){return e&&e.length>0&&e.every(p)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LSNotSupportedDiagnosticService=t.LSNotSupportedDiagnosticServiceId=t.LSNotSupportedDiagnostic=void 0;const o=n(0),s=n(2),a=n(16),c=n(1),l=n(13),u=n(8),d=n(69),h=n(70),p=n(71),f=n(63),g=n(34);class m extends d.BaseDiagnostic{constructor(e,t){super(p.DiagnosticCodes.LSNotSupportedDiagnostic,e,s.DiagnosticSeverity.Warning,g.DiagnosticScope.Global,t)}}t.LSNotSupportedDiagnostic=m,t.LSNotSupportedDiagnosticServiceId="LSNotSupportedDiagnosticServiceId";let v=class extends d.BaseDiagnosticsService{constructor(e,t,n,r){super([p.DiagnosticCodes.LSNotSupportedDiagnostic],e,r,!1),this.lsCompatibility=t,this.messageService=n}async diagnose(e){return await this.lsCompatibility.isSupported()?[]:[new m(l.Diagnostics.lsNotSupported(),e)]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(h.IDiagnosticsCommandFactory),r=[{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/pythonlsrequirements"})},{prompt:"Do not show again",command:n.createCommand(t,{type:"ignore",options:g.DiagnosticScope.Global})}];await this.messageService.handle(t,{commandPrompts:r})}};v=r([i(0,o.inject(u.IServiceContainer)),i(1,o.inject(a.ILanguageServerCompatibilityService)),i(2,o.inject(g.IDiagnosticHandlerService)),i(2,o.named(f.DiagnosticCommandPromptHandlerServiceId)),i(3,o.inject(c.IDisposableRegistry))],v),t.LSNotSupportedDiagnosticService=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerChangeHandler=t.promptForPylanceInstall=void 0;const r=n(10),i=n(15),o=n(13),s=n(321),a=n(16);async function c(e,t){await e.showWarningMessage(o.Pylance.installPylanceMessage(),o.Common.bannerLabelYes(),o.Common.bannerLabelNo())===o.Common.bannerLabelYes()&&e.openUrl(s.getPylanceExtensionUri(t))}t.promptForPylanceInstall=c;t.LanguageServerChangeHandler=class{constructor(e,t,n,r,o){this.currentLsType=e,this.extensions=t,this.appShell=n,this.appEnv=r,this.commands=o,this.pylanceInstallCompletedDeferred=i.createDeferred(),this.disposables=[],this.pylanceInstalled=!1,this.pylanceInstalled=this.isPylanceInstalled(),this.disposables.push(t.onDidChange(async()=>{await this.extensionsChangeHandler()}))}dispose(){for(var e;this.disposables.length;)null===(e=this.disposables.pop())||void 0===e||e.dispose()}get pylanceInstallCompleted(){return this.pylanceInstallCompletedDeferred.promise}async handleLanguageServerChange(e){if(this.currentLsType===e)return;let t;e!==a.LanguageServerType.Node||this.isPylanceInstalled()?(t=await this.appShell.showInformationMessage(o.LanguageService.reloadAfterLanguageServerChange(),o.Common.reload()),t===o.Common.reload()&&this.commands.executeCommand("workbench.action.reloadWindow")):await c(this.appShell,this.appEnv),this.currentLsType=e}async extensionsChangeHandler(){const e=this.pylanceInstalled;if(this.pylanceInstalled=this.isPylanceInstalled(),e===this.pylanceInstalled)return void this.pylanceInstallCompletedDeferred.resolve();const t=await this.appShell.showWarningMessage(o.Pylance.pylanceInstalledReloadPromptMessage(),o.Common.bannerLabelYes(),o.Common.bannerLabelNo());this.pylanceInstallCompletedDeferred.resolve(),t===o.Common.bannerLabelYes()&&this.commands.executeCommand("workbench.action.reloadWindow")}isPylanceInstalled(){return!!this.extensions.getExtension(r.PYLANCE_EXTENSION_ID)}}},function(e,t){e.exports=require("querystring")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(58),i=n(680),o=n(332),s=n(681),a=n(682),c=n(683),l=n(684),u=n(685),d=n(686),h=n(687),p=n(688),f=n(689);class g extends r.BaseLanguageClient{constructor(e,t,n){super(e,t,n)}registerProposedFeatures(){this.registerFeatures(m.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new o.ConfigurationFeature(this)),this.registerFeature(new a.TypeDefinitionFeature(this)),this.registerFeature(new s.ImplementationFeature(this)),this.registerFeature(new i.ColorProviderFeature(this)),this.registerFeature(new c.WorkspaceFoldersFeature(this)),this.registerFeature(new l.FoldingRangeFeature(this)),this.registerFeature(new u.DeclarationFeature(this)),this.registerFeature(new d.SelectionRangeFeature(this)),this.registerFeature(new h.ProgressFeature(this)),this.registerFeature(new p.CallHierarchyFeature(this)),this.registerFeature(new f.SemanticTokensFeature(this))}}var m;t.CommonLanguageClient=g,function(e){e.createAll=function(e){return[]}}(m=t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t,n){"use strict";e.exports=n(51)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(330);t.RequestType=r.RequestType,t.RequestType0=r.RequestType0,t.RequestType1=r.RequestType1,t.RequestType2=r.RequestType2,t.RequestType3=r.RequestType3,t.RequestType4=r.RequestType4,t.RequestType5=r.RequestType5,t.RequestType6=r.RequestType6,t.RequestType7=r.RequestType7,t.RequestType8=r.RequestType8,t.RequestType9=r.RequestType9,t.ResponseError=r.ResponseError,t.ErrorCodes=r.ErrorCodes,t.NotificationType=r.NotificationType,t.NotificationType0=r.NotificationType0,t.NotificationType1=r.NotificationType1,t.NotificationType2=r.NotificationType2,t.NotificationType3=r.NotificationType3,t.NotificationType4=r.NotificationType4,t.NotificationType5=r.NotificationType5,t.NotificationType6=r.NotificationType6,t.NotificationType7=r.NotificationType7,t.NotificationType8=r.NotificationType8,t.NotificationType9=r.NotificationType9,t.ParameterStructures=r.ParameterStructures;const i=n(328);t.Disposable=i.Disposable;const o=n(115);t.Event=o.Event,t.Emitter=o.Emitter;const s=n(331);t.CancellationTokenSource=s.CancellationTokenSource,t.CancellationToken=s.CancellationToken;const a=n(656);t.MessageReader=a.MessageReader,t.AbstractMessageReader=a.AbstractMessageReader,t.ReadableStreamMessageReader=a.ReadableStreamMessageReader;const c=n(657);t.MessageWriter=c.MessageWriter,t.AbstractMessageWriter=c.AbstractMessageWriter,t.WriteableStreamMessageWriter=c.WriteableStreamMessageWriter;const l=n(659);t.ConnectionStrategy=l.ConnectionStrategy,t.ConnectionOptions=l.ConnectionOptions,t.NullLogger=l.NullLogger,t.createMessageConnection=l.createMessageConnection,t.ProgressType=l.ProgressType,t.Trace=l.Trace,t.TraceFormat=l.TraceFormat,t.SetTraceNotification=l.SetTraceNotification,t.LogTraceNotification=l.LogTraceNotification,t.ConnectionErrors=l.ConnectionErrors,t.ConnectionError=l.ConnectionError,t.CancellationReceiverStrategy=l.CancellationReceiverStrategy,t.CancellationSenderStrategy=l.CancellationSenderStrategy,t.CancellationStrategy=l.CancellationStrategy;const u=n(78);t.RAL=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(114);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.ContentModified=-32801,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e){this.kind=e}static is(e){return e===s.auto||e===s.byName||e===s.byPosition}toString(){return this.kind}}t.ParameterStructures=s,s.auto=new s("auto"),s.byPosition=new s("byPosition"),s.byName=new s("byName");class a{constructor(e,t){this._method=e,this._numberOfParams=t}get method(){return this._method}get numberOfParams(){return this._numberOfParams}get parameterStructures(){return s.auto}}t.AbstractMessageSignature=a;t.RequestType0=class extends a{constructor(e){super(e,0)}};t.RequestType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.RequestType2=class extends a{constructor(e){super(e,2)}};t.RequestType3=class extends a{constructor(e){super(e,3)}};t.RequestType4=class extends a{constructor(e){super(e,4)}};t.RequestType5=class extends a{constructor(e){super(e,5)}};t.RequestType6=class extends a{constructor(e){super(e,6)}};t.RequestType7=class extends a{constructor(e){super(e,7)}};t.RequestType8=class extends a{constructor(e){super(e,8)}};t.RequestType9=class extends a{constructor(e){super(e,9)}};t.NotificationType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t,this._=void 0}get parameterStructures(){return this._parameterStructures}};t.NotificationType0=class extends a{constructor(e){super(e,0)}};t.NotificationType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};t.NotificationType2=class extends a{constructor(e){super(e,2)}};t.NotificationType3=class extends a{constructor(e){super(e,3)}};t.NotificationType4=class extends a{constructor(e){super(e,4)}};t.NotificationType5=class extends a{constructor(e){super(e,5)}};t.NotificationType6=class extends a{constructor(e){super(e,6)}};t.NotificationType7=class extends a{constructor(e){super(e,7)}};t.NotificationType8=class extends a{constructor(e){super(e,8)}};t.NotificationType9=class extends a{constructor(e){super(e,9)}},t.isRequestMessage=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78),i=n(114),o=n(115);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=r.default().timer.setTimeout(e.bind(t),0);return{dispose(){r.default().timer.clearTimeout(n)}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35);function o(e){if(e){if(Array.isArray(e))return e.map(o);if("object"==typeof e){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=o(e[n]));return t}}return e}t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,(t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(-1===i)n=o(r.workspace.getConfiguration(void 0,e).get(t));else{let s=r.workspace.getConfiguration(t.substr(0,i),e);s&&(n=o(s.get(t.substr(i+1))))}}else{let t=r.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=o(t.get(e)))}return void 0===n&&(n=null),n}},t.toJSONObject=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i extends r.CodeLens{constructor(e){super(e)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i extends r.DocumentLink{constructor(e,t){super(e,t)}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends r{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function o(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=o;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return s.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return o().asHex()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(113);t.ProgressPart=class{constructor(e,t){this._client=e,this._token=t,this._reported=0,this._disposable=this._client.onProgress(i.WorkDoneProgress.type,this._token,e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done()}})}begin(e){let t=e.cancellable?r.ProgressLocation.Notification:r.ProgressLocation.Window;r.window.withProgress({location:t,cancellable:e.cancellable,title:e.title},async(t,n)=>(this._progress=t,this._infinite=void 0===e.percentage,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(i.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((e,t)=>{this._resolve=e,this._reject=t})))}report(e){if(this._infinite&&o.string(e.message))this._progress.report({message:e.message});else if(o.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}}},function(e,t,n){"use strict";e.exports=n(35)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBasedCancellationStrategy=void 0;const r=n(73),i=n(29),o=n(20),s=n(4),a=n(47);function c(e){return s.join(o.tmpdir(),"python-languageserver-cancellation",e)}function l(e,t){return s.join(c(e),`cancellation-${String(t)}.tmp`)}function u(e){try{e()}catch(e){}}class d{constructor(e){this.folderName=e;const t=c(e);u(()=>i.mkdirSync(t,{recursive:!0}))}sendCancellation(e,t){const n=l(this.folderName,t);u(()=>i.writeFileSync(n,"",{flag:"w"}))}cleanup(e){u(()=>i.unlinkSync(l(this.folderName,e)))}dispose(){const e=c(this.folderName);u(()=>function e(t){const n=i.lstatSync(t);if(n)if(n.isDirectory()&&!n.isSymbolicLink()){for(const n of i.readdirSync(t))e(s.join(t,n));i.rmdirSync(t)}else i.unlinkSync(t)}(e))}}t.FileBasedCancellationStrategy=class{constructor(){const e=r.randomBytes(21).toString("hex");this._sender=new d(e)}get receiver(){return a.CancellationReceiverStrategy.Message}get sender(){return this._sender}getCommandLineArguments(){return["--cancellationReceive=file:"+this._sender.folderName]}dispose(){this._sender.dispose()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;const r=n(142),i=n(721),o=n(340),s=n(116);var a;!function(e){e[e.None=0]="None",e[e.Single=1]="Single",e[e.Double=2]="Double",e[e.TripleSingle=3]="TripleSingle",e[e.TripleDouble=4]="TripleDouble"}(a||(a={}));class c extends s.TextRange{constructor(e,t,n){super(t,n),this.type=e}}t.Tokenizer=class{constructor(){this.cs=new i.CharacterStream(""),this.tokens=[],this.mode=s.TokenizerMode.Full}tokenize(e,t,n,r){if(void 0===t)t=0;else if(t<0||t>=e.length)throw new Error("Invalid range start");if(void 0===n)n=e.length;else if(n<0||t+n>e.length)throw new Error("Invalid range length");this.mode=void 0!==r?r:s.TokenizerMode.Full,this.cs=new i.CharacterStream(e),this.cs.position=t;const a=t+n;for(;!(this.cs.isEndOfStream()||(this.AddNextToken(),this.cs.position>=a)););return new o.TextRangeCollection(this.tokens)}AddNextToken(){this.cs.skipWhitespace(),this.cs.isEndOfStream()||this.handleCharacter()||this.cs.moveNext()}handleCharacter(){const e=this.getStringPrefixLength();if(e>=0){this.cs.advance(e);const t=this.getQuoteType();if(t!==a.None)return this.handleString(t,e),!0}if(35===this.cs.currentChar)return this.handleComment(),!0;if(this.mode===s.TokenizerMode.CommentsAndStrings)return!1;switch(this.cs.currentChar){case 40:this.tokens.push(new c(s.TokenType.OpenBrace,this.cs.position,1));break;case 41:this.tokens.push(new c(s.TokenType.CloseBrace,this.cs.position,1));break;case 91:this.tokens.push(new c(s.TokenType.OpenBracket,this.cs.position,1));break;case 93:this.tokens.push(new c(s.TokenType.CloseBracket,this.cs.position,1));break;case 123:this.tokens.push(new c(s.TokenType.OpenCurly,this.cs.position,1));break;case 125:this.tokens.push(new c(s.TokenType.CloseCurly,this.cs.position,1));break;case 44:this.tokens.push(new c(s.TokenType.Comma,this.cs.position,1));break;case 59:this.tokens.push(new c(s.TokenType.Semicolon,this.cs.position,1));break;case 58:this.tokens.push(new c(s.TokenType.Colon,this.cs.position,1));break;default:if(this.isPossibleNumber()&&this.tryNumber())return!0;if(46===this.cs.currentChar){this.tokens.push(new c(s.TokenType.Operator,this.cs.position,1));break}return this.tryIdentifier()||this.tryOperator()||this.handleUnknown(),!0}return!1}tryIdentifier(){const e=this.cs.position;if(r.isIdentifierStartChar(this.cs.currentChar))for(this.cs.moveNext();r.isIdentifierChar(this.cs.currentChar);)this.cs.moveNext();return this.cs.position>e&&(this.tokens.push(new c(s.TokenType.Identifier,e,this.cs.position-e)),!0)}isPossibleNumber(){if(r.isDecimal(this.cs.currentChar))return!0;if(46===this.cs.currentChar&&r.isDecimal(this.cs.nextChar))return!0;const e=45===this.cs.currentChar||43===this.cs.currentChar?1:0;if(r.isDecimal(this.cs.lookAhead(e))||46===this.cs.lookAhead(e)){if(0===this.tokens.length)return!0;const e=this.tokens[this.tokens.length-1];if(e.type===s.TokenType.OpenBrace||e.type===s.TokenType.OpenBracket||e.type===s.TokenType.Comma||e.type===s.TokenType.Colon||e.type===s.TokenType.Semicolon||e.type===s.TokenType.Operator)return!0}if(48===this.cs.lookAhead(e)){const t=this.cs.lookAhead(e+1);if(120===t||88===t)return!0;if(98===t||66===t)return!0;if(111===t||79===t)return!0}return!1}tryNumber(){const e=this.cs.position;let t=0;if(45!==this.cs.currentChar&&43!==this.cs.currentChar||(this.cs.moveNext(),t=1),48===this.cs.currentChar){let n=0;if((120===this.cs.nextChar||88===this.cs.nextChar)&&r.isHex(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isHex(this.cs.currentChar);)this.cs.moveNext();n=16}if((98===this.cs.nextChar||66===this.cs.nextChar)&&r.isBinary(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isBinary(this.cs.currentChar);)this.cs.moveNext();n=2}if((111===this.cs.nextChar||79===this.cs.nextChar)&&r.isOctal(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isOctal(this.cs.currentChar);)this.cs.moveNext();n=8}if(n>0){const r=this.cs.getText().substr(e+t,this.cs.position-e-t);if(!isNaN(parseInt(r,n)))return this.tokens.push(new c(s.TokenType.Number,e,r.length+t)),!0}}let n=!1;if(this.cs.currentChar>=49&&this.cs.currentChar<=57){for(;r.isDecimal(this.cs.currentChar);)this.cs.moveNext();n=46!==this.cs.currentChar&&101!==this.cs.currentChar&&69!==this.cs.currentChar}if(48===this.cs.currentChar){for(;48===this.cs.currentChar||95===this.cs.currentChar;)this.cs.moveNext();n=46!==this.cs.currentChar&&101!==this.cs.currentChar&&69!==this.cs.currentChar}if(n){const n=this.cs.getText().substr(e+t,this.cs.position-e-t);if(!isNaN(parseInt(n,10)))return this.tokens.push(new c(s.TokenType.Number,e,n.length+t)),!0}if((this.cs.currentChar>=48&&this.cs.currentChar<=57||46===this.cs.currentChar&&this.cs.nextChar>=48&&this.cs.nextChar<=57)&&this.skipFloatingPointCandidate(!1)){const t=this.cs.getText().substr(e,this.cs.position-e);if(!isNaN(parseFloat(t)))return this.tokens.push(new c(s.TokenType.Number,e,this.cs.position-e)),!0}return this.cs.position=e,!1}tryOperator(){let e=0;const t=this.cs.nextChar;switch(this.cs.currentChar){case 43:case 38:case 124:case 94:case 61:case 33:case 37:case 126:e=61===t?2:1;break;case 45:e=61===t||62===t?2:1;break;case 42:e=42===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 47:e=47===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 60:e=62===t?2:60===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 62:e=62===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 64:e=61===t?2:1;break;default:return!1}return this.tokens.push(new c(s.TokenType.Operator,this.cs.position,e)),this.cs.advance(e),e>0}handleUnknown(){const e=this.cs.position;this.cs.skipToWhitespace();const t=this.cs.position-e;return t>0&&(this.tokens.push(new c(s.TokenType.Unknown,e,t)),!0)}handleComment(){const e=this.cs.position;this.cs.skipToEol(),this.tokens.push(new c(s.TokenType.Comment,e,this.cs.position-e))}getStringPrefixLength(){if(39===this.cs.currentChar||34===this.cs.currentChar)return 0;if(39===this.cs.nextChar||34===this.cs.nextChar)switch(this.cs.currentChar){case 102:case 70:case 114:case 82:case 98:case 66:case 117:case 85:return 1}if(39===this.cs.lookAhead(2)||34===this.cs.lookAhead(2)){switch(this.cs.getText().substr(this.cs.position,2).toLowerCase()){case"rf":case"ur":case"br":return 2}}return-1}getQuoteType(){return 39===this.cs.currentChar?39===this.cs.nextChar&&39===this.cs.lookAhead(2)?a.TripleSingle:a.Single:34===this.cs.currentChar?34===this.cs.nextChar&&34===this.cs.lookAhead(2)?a.TripleDouble:a.Double:a.None}handleString(e,t){const n=this.cs.position-t;e===a.Single||e===a.Double?(this.cs.moveNext(),this.skipToSingleEndQuote(e===a.Single?39:34)):(this.cs.advance(3),this.skipToTripleEndQuote(e===a.TripleSingle?39:34)),this.tokens.push(new c(s.TokenType.String,n,this.cs.position-n))}skipToSingleEndQuote(e){for(;!this.cs.isEndOfStream();){if(10===this.cs.currentChar||13===this.cs.currentChar)return;if(92!==this.cs.currentChar||this.cs.nextChar!==e){if(this.cs.currentChar===e)break;this.cs.moveNext()}else this.cs.advance(2)}this.cs.moveNext()}skipToTripleEndQuote(e){for(;!this.cs.isEndOfStream()&&(this.cs.currentChar!==e||this.cs.nextChar!==e||this.cs.lookAhead(2)!==e);)this.cs.moveNext();this.cs.advance(3)}skipFloatingPointCandidate(e){const t=this.cs.position;return this.skipFractionalNumber(e),this.cs.position>t&&(101!==this.cs.currentChar&&69!==this.cs.currentChar||this.cs.moveNext(),this.skipDecimalNumber(!0)),this.cs.position>t}skipFractionalNumber(e){this.skipDecimalNumber(e),46===this.cs.currentChar&&this.cs.moveNext(),this.skipDecimalNumber(!1)}skipDecimalNumber(e){for(!e||45!==this.cs.currentChar&&43!==this.cs.currentChar||this.cs.moveNext();r.isDecimal(this.cs.currentChar);)this.cs.moveNext()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextRangeCollection=void 0;t.TextRangeCollection=class{constructor(e){this.items=e}get start(){return this.items.length>0?this.items[0].start:0}get end(){return this.items.length>0?this.items[this.items.length-1].end:0}get length(){return this.end-this.start}get count(){return this.items.length}contains(e){return e>=this.start&&e<this.end}getItemAt(e){if(e<0||e>=this.items.length)throw new Error("index is out of range");return this.items[e]}getItemAtPosition(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>=this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const r=Math.floor(t+(n-t)/2),i=this.items[r];if(i.start===e)return r;e<i.start?n=r-1:t=r+1}return-1}getItemContaining(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const r=Math.floor(t+(n-t)/2),i=this.items[r];if(i.contains(e))return r;if(r<this.count-1&&i.end<=e&&e<this.items[r+1].start)return-1;e<i.start?n=r-1:t=r+1}return-1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemInfoSource=t.LanguageItemInfo=void 0;const r=n(20),i=n(2),o=n(723),s=n(85);class a{constructor(e,t,n){this.tooltip=e,this.detail=t,this.signature=n}}t.LanguageItemInfo=a;t.ItemInfoSource=class{constructor(e){this.jediFactory=e,this.textConverter=new o.RestTextConverter}async getItemInfoFromText(e,t,n,r,i){const o=await this.getHoverResultFromTextRange(e,t,n,r,i);if(o&&o.items.length)return this.getItemInfoFromHoverResult(o,"")}async getItemInfoFromDocument(e,t,n){const r=e.getWordRangeAtPosition(t);if(!r||r.isEmpty)return;const i=await this.getHoverResultFromDocument(e,t,n);if(!i||!i.items.length)return;const o=e.getText(r);return this.getItemInfoFromHoverResult(i,o)}async getHoverResultFromDocument(e,t,n){if(t.character<=0||e.lineAt(t.line).text.match(/^\s*\/\//))return;const r=e.getWordRangeAtPosition(t);return r&&!r.isEmpty?this.getHoverResultFromDocumentRange(e,r,n):void 0}async getHoverResultFromDocumentRange(e,t,n){const r={command:s.CommandType.Hover,fileName:e.fileName,columnIndex:t.end.character,lineIndex:t.end.line};return e.isDirty&&(r.source=e.getText()),this.jediFactory.getJediProxyHandler(e.uri).sendCommand(r,n)}async getHoverResultFromTextRange(e,t,n,r,i){const o={command:s.CommandType.Hover,fileName:t,columnIndex:n.end.character,lineIndex:n.end.line,source:r};return this.jediFactory.getJediProxyHandler(e).sendCommand(o,i)}getItemInfoFromHoverResult(e,t){const n=[];return e.items.forEach(e=>{const o=this.getSignature(e,t);let s=new i.MarkdownString;if(e.docstring){let c=e.docstring.split(/\r?\n/);if(c.length>0&&0===e.signature.indexOf(c[0])){c.shift();const t=c.findIndex(t=>e.signature.endsWith(t));t>=0&&(c=c.filter((e,n)=>n>t))}c.length>0&&t.length>0&&e.signature.startsWith(t)&&c[0].startsWith(t)&&c[0].endsWith(")")&&c.shift(),o.length>0&&(s=s.appendMarkdown(["```python",o,"```",""].join(r.EOL)));const l=this.textConverter.toMarkdown(c.join(r.EOL));return s=s.appendMarkdown(l),void n.push(new a(s,e.description,new i.MarkdownString(o)))}if(e.description){o.length>0&&s.appendMarkdown(["```python",o,"```",""].join(r.EOL));const t=this.textConverter.toMarkdown(e.description);return s.appendMarkdown(t),void n.push(new a(s,e.description,new i.MarkdownString(o)))}if(e.text){const o=t&&t.length>0?`${t}: ${e.text}`:e.text;s.appendMarkdown(["```python",o,"```",""].join(r.EOL)),n.push(new a(s,"",new i.MarkdownString))}}),n}getSignature(e,t){let{signature:n}=e;switch(e.kind){case i.SymbolKind.Constructor:case i.SymbolKind.Function:case i.SymbolKind.Method:n="def "+n;break;case i.SymbolKind.Class:n="class "+n;break;case i.SymbolKind.Module:n.length>0&&(n="module "+n);break;default:n="string"==typeof e.text&&e.text.length>0?e.text:t}return n}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonDefinitionProvider=void 0;const i=n(2),o=n(7),s=n(9),a=n(85);class c{constructor(e){this.jediFactory=e}static parseData(e,t){if(e&&Array.isArray(e.definitions)&&e.definitions.length>0){const n=e.definitions.filter(e=>e.text===t),r=n.length>0?n[0]:e.definitions[e.definitions.length-1],o=i.Uri.file(r.fileName),s=new i.Range(r.range.startLine,r.range.startColumn,r.range.endLine,r.range.endColumn);return new i.Location(o,s)}}async provideDefinition(e,t,n){const r=e.fileName;if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const i=e.getWordRangeAtPosition(t);if(!i)return;const o=i.isEmpty?t.character:i.end.character,s={command:a.CommandType.Definitions,fileName:r,columnIndex:o,lineIndex:t.line};e.isDirty&&(s.source=e.getText());const l=e.getText(i),u=await this.jediFactory.getJediProxyHandler(e.uri).sendCommand(s,n);return u?c.parseData(u,l):void 0}}r([o.captureTelemetry(s.EventName.DEFINITION)],c.prototype,"provideDefinition",null),t.PythonDefinitionProvider=c},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefactorProxy=void 0;const r=n(2);n(11);const i=n(5),o=n(86),s=n(41),a=n(15),c=n(730);class l extends r.Disposable{constructor(e,t){super(()=>{}),this.workspaceRoot=e,this.getPythonExecutionService=t,this._previousOutData="",this._previousStdErrData="",this._startedSuccessfully=!1}dispose(){try{this._process.kill()}catch(e){}this._process=void 0}getOffsetAt(e,t){if(!o.IS_WINDOWS)return e.offsetAt(t);const n=e.offsetAt(t);return n-c.getWindowsLineEndingCount(e,n)}rename(e,t,n,i,o){o||(o=r.window.activeTextEditor.options);const s={lookup:"rename",file:n,start:this.getOffsetAt(e,i.start).toString(),id:"1",name:t,indent_size:o.tabSize};return this.sendCommand(JSON.stringify(s))}extractVariable(e,t,n,i,o){o||(o=r.window.activeTextEditor.options);const s={lookup:"extract_variable",file:n,start:this.getOffsetAt(e,i.start).toString(),end:this.getOffsetAt(e,i.end).toString(),id:"1",name:t,indent_size:o.tabSize};return this.sendCommand(JSON.stringify(s))}extractMethod(e,t,n,i,o){if(o||(o=r.window.activeTextEditor.options),!e.lineAt(e.lineCount-1).isEmptyOrWhitespace&&i.start.line===e.lineCount-1)return Promise.reject("Missing blank line at the end of document (PEP8).");const s={lookup:"extract_method",file:n,start:this.getOffsetAt(e,i.start).toString(),end:this.getOffsetAt(e,i.end).toString(),id:"1",name:t,indent_size:o.tabSize};return this.sendCommand(JSON.stringify(s))}sendCommand(e){return this.initialize().then(()=>new Promise((t,n)=>{this._commandResolve=t,this._commandReject=n,this._process.stdin.write(e+"\n")}))}async initialize(){const e=await this.getPythonExecutionService();this.initialized=a.createDeferred();const[t,n]=s.refactor(this.workspaceRoot),r=e.execObservable(t,{});return this._process=r.proc,r.out.subscribe(e=>{if("stdout"===e.source){if(!this._startedSuccessfully&&e.out.startsWith("STARTED"))return this._startedSuccessfully=!0,this.initialized.resolve();this.onData(e.out,n)}else this.handleStdError(e.out)},e=>this.handleError(e)),this.initialized.promise}handleStdError(e){let t,n=this._previousStdErrData=this._previousStdErrData+e+"";try{t=n.split(/\r?\n/g).filter(e=>e.length>0).map(e=>JSON.parse(e)),this._previousStdErrData=""}catch(e){return void i.traceError(e)}"string"==typeof t[0].message&&0!==t[0].message.length||(t[0].message=t[0].traceback.splitLines().pop());let r=t[0].message+"\n"+t[0].traceback;if(this._startedSuccessfully)this._commandReject("Refactor failed. "+r);else{if("string"==typeof t[0].type&&"ModuleNotFoundError"===t[0].type)return void this.initialized.reject("Not installed");this.initialized.reject("Refactor failed. "+r)}}handleError(e){if(this._startedSuccessfully)return this._commandReject(e);this.initialized.reject(e)}onData(e,t){if(!this._commandResolve)return;let n,r=this._previousOutData=this._previousOutData+e+"";try{n=t(r),this._previousOutData=""}catch(e){return}this.dispose(),this._commandResolve(n[0]),this._commandResolve=void 0}}t.RefactorProxy=l},function(e,t,n){"use strict";!function(t){var n,r=/^[$_a-z][$_a-z0-9]*$/i;function i(e){var t,n,i,o,s,a,c,l={},u=0,d="",h=!1;for(t=0;t<e.length;++t)if(n=e[t],o=(i=e[t+1])+e[t+2],d+=n,"\\"===n)if(h||"k<"!==o)d+=i,++t;else{if((s=e.indexOf(">",t+3))<0)throw new Error("'>' missing in named backreference.");if(!(c=l[a=e.substring(t+3,s)]))throw new Error("Named group '"+a+"' is not defined in backreference.");if("number"!=typeof c)throw new Error("Named backreference referencing duplicate named group '"+a+"'.");t=s,d+=c}else if(h)"]"===n&&(h=!1);else if("["===n)h=!0;else if("("===n&&"?:"!==o&&"?="!==o&&"?!"!==o&&(u++,"?<"===o||":<"===o)){if((s=e.indexOf(">",t+3))<0)throw new Error("'>' missing in named group.");if(a=e.substring(t+3,s),!r.test(a))throw new Error("Invalide group name '"+a+"'. Regexp group name should start with '_$a-zA-Z' and can contain only '_$a-zA-Z0-9'.");void 0===(c=l[a])?l[a]=u:"number"==typeof c?l[a]=[c,u]:c.push(u),t=s}return{mapper:l,regexText:d}}e.exports=function(e,t){if("boolean"!=typeof e){"string"!=typeof e&&(t=(e.global?"g":"")+(e.multiline?"m":"")+(e.ignoreCase?"i":""),e=e.source);var r=n?n[e]||(n[e]=i(e)):i(e),o=new RegExp(r.regexText,t);return o.groupsIndices=r.mapper,o.exec=function(e){var t=RegExp.prototype.exec.call(this,e);return t&&s(t),t},o.execGroups=function(e,t){var n=this.exec(e);return n?n.groups(t):null},o.replace=function(e,t){if("function"==typeof t)return e.replace(o,(function(){var e=Array.prototype.slice.call(arguments,0,arguments.length-2);return s(e),t.apply(e,arguments)}));var n=function(e,t){var n,r,i,o,s,a,c="";for(n=0;n<e.length;++n)if(r=e[n],i=e[n+1],c+=r,"$"===r)if("$"===i)c+=i,++n;else if("{"===i){if((s=e.indexOf("}",n+2))<0)throw new Error("'>' missing in replacement named group.");if(void 0===(a=t[o=e.substring(n+2,s)]))throw new Error("Named group '"+o+"' is not defined in replacement text.");if("number"!=typeof a)throw new Error("Named replacement referencing duplicate named group '"+o+"'.");c+=a,n=s}return c}(t,this.groupsIndices);return e.replace(this,n)},o}function s(e){var t,n,i=r.mapper;return e.group=function(t,n){var r=i[t];if("number"==typeof r)return e[r];if(n)return r.map((function(t){return e[t]}));if(r)for(var o=0;o<r.length;++o){var s=e[r[o]];if(void 0!==s)return s}},e.groups=function(r){var o=r?n:t;if(o)return o;for(var s in o={},i)o[s]=e.group(s,r);return r?n=o:t=o},e}!1===e?n=void 0:n||(n={})}}("undefined"==typeof window||window)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerFolderService=void 0;const o=n(0),s=n(4),a=n(38),c=n(10),l=n(5),u=n(6),d=n(1),h=n(8),p=n(16);let f=class{constructor(e,t){this.serviceContainer=e,this.languageServerFolder=t}async skipDownload(){return!1}async getLanguageServerFolderName(e){const t=await this.getCurrentLanguageServerDirectory();let n;const r=await this.shouldLookForNewLanguageServer(t);if(t&&!r)return s.basename(t.path);try{n=await this.getLatestLanguageServerVersion(e)}catch(e){n=void 0}return t&&(!n||n.version.compare(t.version)<=0)?s.basename(t.path):`${this.languageServerFolder}.${n.version.raw}`}getLatestLanguageServerVersion(e){const t=this.getMinimalLanguageServerVersion();return this.serviceContainer.get(p.ILanguageServerPackageService).getLatestNugetPackageVersion(e,t)}async shouldLookForNewLanguageServer(e){const t=this.serviceContainer.get(d.IConfigurationService),n=t.getSettings().autoUpdateLanguageServer,r=t.getSettings().downloadLanguageServer;if(e&&(!n||!r))return!1;const i=this.getDownloadChannel();return this.serviceContainer.get(p.IDownloadChannelRule,i).shouldLookForNewLanguageServer(e)}async getCurrentLanguageServerDirectory(){if(!this.serviceContainer.get(d.IConfigurationService).getSettings().downloadLanguageServer)return{path:this.languageServerFolder,version:new a.SemVer("0.0.0")};const e=await this.getExistingLanguageServerDirectories();return 0!==e.length?(e.sort((e,t)=>e.version.compare(t.version)),e[e.length-1]):void 0}async getExistingLanguageServerDirectories(){const e=this.serviceContainer.get(u.IFileSystem);return(await e.getSubDirectories(c.EXTENSION_ROOT_DIR)).filter(e=>s.basename(e).startsWith(this.languageServerFolder)).map(e=>({path:e,version:this.getFolderVersion(s.basename(e))}))}getFolderVersion(e){const t=e.substring(this.languageServerFolder.length+1);return 0===t.length?new a.SemVer("0.0.0"):a.parse(t,!0)||new a.SemVer("0.0.0")}getDownloadChannel(){return this.serviceContainer.get(p.ILanguageServerPackageService).getLanguageServerDownloadChannel()}};r([l.traceDecorators.verbose("Get language server folder name")],f.prototype,"getLanguageServerFolderName",null),r([l.traceDecorators.verbose("Get latest version of language server")],f.prototype,"getLatestLanguageServerVersion",null),f=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.unmanaged())],f),t.LanguageServerFolderService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerPackageService=t.maxMajorVersion=void 0;const i=n(0),o=n(38),s=n(10),a=n(5),c=n(138),l=n(1),u=n(140);t.maxMajorVersion=0;let d=class{constructor(e,n,r){this.serviceContainer=e,this.appEnv=n,this.platform=r,this.maxMajorVersion=t.maxMajorVersion}async getLatestNugetPackageVersion(e,t){const n=this.getLanguageServerDownloadChannel(),r=this.serviceContainer.get(c.INugetRepository,n),i=this.getNugetPackageName();a.traceVerbose(`Listing packages for ${n} for ${i}`);const o=await r.getPackages(i,e);return this.getValidPackage(o,t)}getLanguageServerDownloadChannel(){const e=this.serviceContainer.get(l.IConfigurationService).getSettings();if(e.analysis.downloadChannel)return e.analysis.downloadChannel;if("daily"===e.insidersChannel||"weekly"===e.insidersChannel)return"beta";return this.isAlphaVersionOfExtension()?"beta":"stable"}isAlphaVersionOfExtension(){const e=this.serviceContainer.get(l.IExtensions).getExtension(s.PVSC_EXTENSION_ID),t=o.parse(e.packageJSON.version);return t.prerelease.length>0&&"alpha"===t.prerelease[0]}getValidPackage(e,t){const n=this.serviceContainer.get(c.INugetService),r=e.filter(e=>e.version.major===this.maxMajorVersion).filter(e=>n.isReleaseVersion(e.version)).sort((e,t)=>e.version.compare(t.version));return t=t||"0.0.0",r[r.length-1].version.compare(t)>=0?r[r.length-1]:{version:new o.SemVer(t),package:u.LanguageServerDownloadChannel.stable,uri:`${u.azureCDNBlobStorageAccount}/${u.LanguageServerDownloadChannel.stable}/${this.getNugetPackageName()}.${t}.nupkg`}}};r([a.traceDecorators.verbose("Get latest language server nuget package version")],d.prototype,"getLatestNugetPackageVersion",null),d=r([i.injectable()],d),t.LanguageServerPackageService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonPathInDebuggerService=t.InvalidPythonPathInDebuggerServiceId=t.InvalidPythonPathInDebuggerDiagnostic=void 0;const o=n(0),s=n(4),a=n(2),c=n(3);n(11);const l=n(5),u=n(1),d=n(13),h=n(99),p=n(42),f=n(12),g=n(8),m=n(69),v=n(70),y=n(71),b=n(63),S=n(34),E={[y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic]:d.Diagnostics.invalidPythonPathInDebuggerSettings(),[y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic]:d.Diagnostics.invalidPythonPathInDebuggerLaunch()};class w extends m.BaseDiagnostic{constructor(e,t){super(e,E[e],a.DiagnosticSeverity.Error,S.DiagnosticScope.WorkspaceFolder,t,"always")}}t.InvalidPythonPathInDebuggerDiagnostic=w,t.InvalidPythonPathInDebuggerServiceId="InvalidPythonPathInDebuggerServiceId";let _=class extends m.BaseDiagnosticsService{constructor(e,t,n,r,i,o,s,a){super([y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic],e,s,!0),this.workspace=t,this.commandFactory=n,this.interpreterHelper=r,this.documentManager=i,this.configService=o,this.messageService=a}async diagnose(e){return[]}async validatePythonPath(e,t,n){return"${command:python.interpreterPath}"!==(e=e?this.resolveVariables(e,n):void 0)&&e||(e=this.configService.getSettings(n).pythonPath),!!await this.interpreterHelper.getInterpreterInformation(e).catch(()=>{})||(l.traceError(`Invalid Python Path '${e}'`),t===p.PythonPathSource.launchJson?this.handle([new w(y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic,n)]).catch(e=>l.traceError("Failed to handle invalid python path in launch.json debugger",e)).ignoreErrors():this.handle([new w(y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,n)]).catch(e=>l.traceError("Failed to handle invalid python path in settings.json debugger",e)).ignoreErrors(),!1)}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0],n=this.getCommandPrompts(t);await this.messageService.handle(t,{commandPrompts:n})}resolveVariables(e,t){return new h.SystemVariables(t,void 0,this.workspace).resolveAny(e)}getCommandPrompts(e){switch(e.code){case y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic:return[{prompt:"Select Python Interpreter",command:this.commandFactory.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];case y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic:return[{prompt:"Open launch.json",command:{diagnostic:e,invoke:async()=>{const e=this.getLaunchJsonFile(a.workspace.workspaceFolders[0]),t=await this.documentManager.openTextDocument(e);await this.documentManager.showTextDocument(t)}}}];default:throw new Error("Invalid diagnostic for 'InvalidPythonPathInDebuggerService'")}}getLaunchJsonFile(e){return s.join(e.uri.fsPath,".vscode","launch.json")}};_=r([o.injectable(),i(0,o.inject(g.IServiceContainer)),i(1,o.inject(c.IWorkspaceService)),i(2,o.inject(v.IDiagnosticsCommandFactory)),i(3,o.inject(f.IInterpreterHelper)),i(4,o.inject(c.IDocumentManager)),i(5,o.inject(u.IConfigurationService)),i(6,o.inject(u.IDisposableRegistry)),i(7,o.inject(S.IDiagnosticHandlerService)),i(7,o.named(b.DiagnosticCommandPromptHandlerServiceId))],_),t.InvalidPythonPathInDebuggerService=_},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowerShellActivationHackDiagnosticsService=t.PowerShellActivationHackDiagnosticsServiceId=t.PowershellActivationNotAvailableDiagnostic=void 0;const o=n(0),s=n(2);n(11);const a=n(5),c=n(777),l=n(1),u=n(8),d=n(7),h=n(9),p=n(69),f=n(70),g=n(71),m=n(63),v=n(34);class y extends p.BaseDiagnostic{constructor(e){super(g.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic,"Activation of the selected Python environment is not supported in PowerShell. Consider changing your shell to Command Prompt.",s.DiagnosticSeverity.Warning,v.DiagnosticScope.Global,e,"always")}}t.PowershellActivationNotAvailableDiagnostic=y,t.PowerShellActivationHackDiagnosticsServiceId="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic";let b=class extends p.BaseDiagnosticsService{constructor(e,t){super([g.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic],e,t,!0),this.messageService=e.get(v.IDiagnosticHandlerService,m.DiagnosticCommandPromptHandlerServiceId)}async diagnose(e){return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(f.IDiagnosticsCommandFactory),r=this.serviceContainer.get(l.ICurrentProcess),i=this.serviceContainer.get(l.IConfigurationService),o=[{prompt:"Use Command Prompt",command:{diagnostic:t,invoke:async()=>{d.sendTelemetryEvent(h.EventName.DIAGNOSTICS_ACTION,void 0,{action:"switchToCommandPrompt"}),c.useCommandPromptAsDefaultShell(r,i).catch(e=>a.traceError("Use Command Prompt as default shell",e))}}},{prompt:"Ignore"},{prompt:"Always Ignore",command:n.createCommand(t,{type:"ignore",options:v.DiagnosticScope.Global})},{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/CondaPwsh"})}];await this.messageService.handle(t,{commandPrompts:o})}};b=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(l.IDisposableRegistry))],b),t.PowerShellActivationHackDiagnosticsService=b},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugService=void 0;const o=n(0),s=n(2);let a=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return s.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return s.debug.startDebugging(e,t,n)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}registerDebugAdapterDescriptorFactory(e,t){return s.debug.registerDebugAdapterDescriptorFactory(e,t)}};a.instance=new r,a=r=i([o.injectable()],a),t.DebugService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.createPromiseFromCancellation=t.CancellationError=void 0;const r=n(2),i=n(15),o=n(13);class s extends Error{constructor(){super(o.Common.canceled())}}t.CancellationError=s,t.createPromiseFromCancellation=function(e){return new Promise((t,n)=>{if(!e.token)return;e.token.onCancellationRequested(()=>{if(e.token.isCancellationRequested){if("resolve"===e.cancelAction)return t(e.defaultValue);if("reject"===e.cancelAction)return n(new s)}})})},t.wrapCancellationTokens=function(...e){const t=new r.CancellationTokenSource;for(const n of e)if(n){if(n.isCancellationRequested)return n;n.onCancellationRequested(()=>t.cancel())}return t.token},function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=i.createDeferred();return t.onCancellationRequested(()=>{n.completed||n.reject(new s)}),t.isCancellationRequested?n.reject(new s):e(t).then(e=>{n.completed||n.resolve(e)}).catch(e=>{n.completed||n.reject(e)}),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new s}}(t.Cancellation||(t.Cancellation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verboseRegExp=void 0,t.verboseRegExp=function(e,t){return e=(e=e.replace(/(^| {2})# .*$/gm,"")).replace(/\s+?/g,""),RegExp(e,t)}},function(e){e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENCODING=void 0,t.DEFAULT_ENCODING="utf8"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessService=void 0;const r=n(55),i=n(72),o=n(825),s=n(15),a=n(355),c=n(18);class l extends i.EventEmitter{constructor(e,t){super(),this.decoder=e,this.env=t,this.processesToKill=new Set}static isAlive(e){try{return process.kill(e,0),!0}catch(e){return!1}}static kill(e){try{"win32"===process.platform?r.execSync(`taskkill /pid ${e} /T /F`):process.kill(e)}catch(e){}}dispose(){this.removeAllListeners(),this.processesToKill.forEach(e=>{try{e.dispose()}catch(e){}})}execObservable(e,t,n={}){const i=this.getDefaultOptions(n),s=i.encoding?i.encoding:"utf8",a=r.spawn(e,t,i);let u=!1;const d={dispose:function(){!a||a.killed||u||l.kill(a.pid),a&&a.unref()}};this.processesToKill.add(d);const h=new o.Observable(e=>{const t=[],r=(e,n,r)=>{e.on(n,r),t.push({dispose:()=>e.removeListener(n,r)})};n.token&&t.push(n.token.onCancellationRequested(()=>{u||a.killed||(a.kill(),u=!0)}));const i=(t,r)=>{const i=this.decoder.decode([r],s);"stderr"===t&&n.throwOnStdErr?e.error(new c.StdErrError(i)):e.next({source:t,out:i})};r(a.stdout,"data",e=>i("stdout",e)),r(a.stderr,"data",e=>i("stderr",e)),a.once("close",()=>{u=!0,e.complete(),t.forEach(e=>e.dispose())}),a.once("exit",()=>{u=!0,e.complete(),t.forEach(e=>e.dispose())}),a.once("error",n=>{u=!0,e.error(n),t.forEach(e=>e.dispose())})});return this.emit("exec",e,t,n),{proc:a,out:h,dispose:d.dispose}}exec(e,t,n={}){const i=this.getDefaultOptions(n),o=i.encoding?i.encoding:"utf8",a=r.spawn(e,t,i),l=s.createDeferred(),u={dispose:()=>{a.killed||l.completed||a.kill()}};this.processesToKill.add(u);const d=[],h=(e,t,n)=>{e.on(t,n),d.push({dispose:()=>e.removeListener(t,n)})};n.token&&d.push(n.token.onCancellationRequested(u.dispose));const p=[];h(a.stdout,"data",e=>p.push(e));const f=[];return h(a.stderr,"data",e=>{n.mergeStdOutErr?(p.push(e),f.push(e)):f.push(e)}),a.once("close",()=>{if(l.completed)return;const e=0===f.length?void 0:this.decoder.decode(f,o);if(e&&e.length>0&&n.throwOnStdErr)l.reject(new c.StdErrError(e));else{const t=this.decoder.decode(p,o);l.resolve({stdout:t,stderr:e})}d.forEach(e=>e.dispose())}),a.once("error",e=>{l.reject(e),d.forEach(e=>e.dispose())}),this.emit("exec",e,t,n),l.promise}shellExec(e,t={}){const n=this.getDefaultOptions(t);return new Promise((t,i)=>{const o=r.exec(e,n,(e,r,o)=>{e&&null!==e?i(e):n.throwOnStdErr&&o&&o.length?i(new Error(o)):t({stderr:o&&o.length>0?o:void 0,stdout:r})}),s={dispose:()=>{o.killed||o.kill()}};this.processesToKill.add(s)})}getDefaultOptions(e){const t={...e},n=t;if(n){const e=n.encoding="string"==typeof n.encoding&&n.encoding.length>0?n.encoding:a.DEFAULT_ENCODING;delete n.encoding,n.encoding=e}if(t.env&&0!==Object.keys(t.env).length)t.env={...t.env};else{const e=this.env?this.env:process.env;t.env={...e}}return n&&n.extraVariables&&(t.env={...t.env,...n.extraVariables}),t.env.PYTHONUNBUFFERED="1",t.env.PYTHONIOENCODING||(t.env.PYTHONIOENCODING="utf-8"),t}}t.ProcessService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIcon=void 0;const r=n(4),i=n(2),o=n(61),s=r.join(o.EXTENSION_ROOT_DIR,"resources","dark"),a=r.join(o.EXTENSION_ROOT_DIR,"resources","light");t.getIcon=function(e){return{dark:i.Uri.file(r.join(s,e)),light:i.Uri.file(r.join(a,e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugOptions=void 0,function(e){e.RedirectOutput="RedirectOutput",e.Django="Django",e.Jinja="Jinja",e.DebugStdLib="DebugStdLib",e.Sudo="Sudo",e.Pyramid="Pyramid",e.FixFilePathCase="FixFilePathCase",e.WindowsClient="WindowsClient",e.UnixClient="UnixClient",e.StopOnEntry="StopOnEntry",e.ShowReturnValue="ShowReturnValue",e.SubProcess="Multiprocess"}(t.DebugOptions||(t.DebugOptions={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseConfigurationResolver=void 0;const i=n(0),o=n(4),s=n(2),a=n(10),c=n(99),l=n(7),u=n(9),d=n(42);let h=class{constructor(e,t,n,r){this.workspaceService=e,this.documentManager=t,this.platformService=n,this.configurationService=r,this.pythonPathSource=d.PythonPathSource.launchJson}async resolveDebugConfiguration(e,t,n){return t}getWorkspaceFolder(e){if(e)return e.uri;const t=this.getProgram();if(!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length)return t?s.Uri.file(o.dirname(t)):void 0;if(1===this.workspaceService.workspaceFolders.length)return this.workspaceService.workspaceFolders[0].uri;if(t){const e=this.workspaceService.getWorkspaceFolder(s.Uri.file(t));if(e)return e.uri}}getProgram(){const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===a.PYTHON_LANGUAGE)return e.document.fileName}resolveAndUpdatePaths(e,t){this.resolveAndUpdateEnvFilePath(e,t),this.resolveAndUpdatePythonPath(e,t)}resolveAndUpdateEnvFilePath(e,t){if(t&&t.envFile&&(e||t.cwd)){const n=new c.SystemVariables(void 0,(e?e.fsPath:void 0)||t.cwd);t.envFile=n.resolveAny(t.envFile)}}resolveAndUpdatePythonPath(e,t){if(t)if("${command:python.interpreterPath}"!==t.pythonPath&&t.pythonPath)this.pythonPathSource=d.PythonPathSource.launchJson;else{const n=this.configurationService.getSettings(e).pythonPath;t.pythonPath=n,this.pythonPathSource=d.PythonPathSource.settingsJson}}debugOption(e,t){e.indexOf(t)>=0||e.push(t)}isLocalHost(e){return!!(e&&["localhost","127.0.0.1","::1"].indexOf(e.toLowerCase())>=0)}fixUpPathMappings(e,t,n){if(!t)return[];if(n||(n=t),0===e.length)e=[{localRoot:t,remoteRoot:n}];else{const n=new c.SystemVariables(void 0,t);e=e.map(({localRoot:e,remoteRoot:t})=>({localRoot:n.resolveAny(e),remoteRoot:t}))}return this.platformService.isWindows&&(e=e.map(({localRoot:e,remoteRoot:t})=>{let n=e;return e.match(/^[A-Z]:/)&&(n=`${e[0].toLowerCase()}${e.substr(1)}`),{localRoot:n,remoteRoot:t}})),e}isDebuggingFlask(e){return!(!e.module||"FLASK"!==e.module.toUpperCase())}sendTelemetry(e,t){const n=t.name||"",r=t.module||"",i={trigger:e,console:t.console,hasEnvVars:"object"==typeof t.env&&Object.keys(t.env).length>0,django:!!t.django,flask:this.isDebuggingFlask(t),hasArgs:Array.isArray(t.args)&&t.args.length>0,isLocalhost:this.isLocalHost(t.host),isModule:r.length>0,isSudo:!!t.sudo,jinja:!!t.jinja,pyramid:!!t.pyramid,stopOnEntry:!!t.stopOnEntry,showReturnValue:!!t.showReturnValue,subProcess:!!t.subProcess,watson:n.toLowerCase().indexOf("watson")>=0,pyspark:n.toLowerCase().indexOf("pyspark")>=0,gevent:n.toLowerCase().indexOf("gevent")>=0,scrapy:"scrapy"===r.toLowerCase()};l.sendTelemetryEvent(u.EventName.DEBUGGER,void 0,i)}};h=r([i.injectable()],h),t.BaseConfigurationResolver=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugEnvironmentVariablesHelper=t.IDebugEnvironmentVariablesService=void 0;const o=n(0),s=n(1),a=n(57);t.IDebugEnvironmentVariablesService=Symbol("IDebugEnvironmentVariablesService");let c=class{constructor(e,t,n){this.envParser=e,this.pathUtils=t,this.process=n}async getEnvironmentVariables(e){const t=this.pathUtils.getPathVariableName(),n=e.env&&Object.keys(e.env).length>0?{...e.env}:{},r=await this.envParser.parseFile(e.envFile,n),i=r?{...r}:{};return this.envParser.mergeVariables(n,i),this.envParser.appendPath(i,n[t]),this.envParser.appendPythonPath(i,n.PYTHONPATH),"string"==typeof i[t]&&i[t].length>0&&this.envParser.appendPath(i,this.process.env[t]),"string"==typeof i.PYTHONPATH&&i.PYTHONPATH.length>0&&this.envParser.appendPythonPath(i,this.process.env.PYTHONPATH),"internalConsole"===e.console&&(this.envParser.mergeVariables(this.process.env,i),void 0===i[t]&&"string"==typeof this.process.env[t]&&(i[t]=this.process.env[t]),void 0===i.PYTHONPATH&&"string"==typeof this.process.env.PYTHONPATH&&(i.PYTHONPATH=this.process.env.PYTHONPATH)),i.hasOwnProperty("PYTHONIOENCODING")||(i.PYTHONIOENCODING="UTF-8"),i.hasOwnProperty("PYTHONUNBUFFERED")||(i.PYTHONUNBUFFERED="1"),e.gevent&&(i.GEVENT_SUPPORT="True"),i}};c=r([o.injectable(),i(0,o.inject(a.IEnvironmentVariablesService)),i(1,o.inject(s.IPathUtils)),i(2,o.inject(s.ICurrentProcess))],c),t.DebugEnvironmentVariablesHelper=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterHelper=t.isInterpreterLocatedInWorkspace=t.getFirstNonEmptyLineFromMultilineString=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(137),u=n(18),d=n(1),h=n(8),p=n(873),f=n(220),g=n(28),m=n(12);t.getFirstNonEmptyLineFromMultilineString=function(e){if(!e)return"";const t=e.split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0);return t.length>0?t[0]:""},t.isInterpreterLocatedInWorkspace=function(e,t){const n=l.FileSystemPaths.withDefaults(),r=n.normCase(e.path),i=n.normCase(t.fsPath);return r.startsWith(i)};let v=class{constructor(e,t,n){this.serviceContainer=e,this.hashProviderFactory=t,this.pyenvs=n,this.persistentFactory=this.serviceContainer.get(d.IPersistentStateFactory)}getActiveWorkspaceUri(e){const t=this.serviceContainer.get(a.IWorkspaceService);if(!t.hasWorkspaceFolders)return;if(Array.isArray(t.workspaceFolders)&&1===t.workspaceFolders.length)return{folderUri:t.workspaceFolders[0].uri,configTarget:s.ConfigurationTarget.Workspace};if(e){const n=t.getWorkspaceFolder(e);if(n)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:n.uri}}const n=this.serviceContainer.get(a.IDocumentManager);if(n.activeTextEditor){const e=t.getWorkspaceFolder(n.activeTextEditor.document.uri);if(e)return{configTarget:s.ConfigurationTarget.WorkspaceFolder,folderUri:e.uri}}}async getInterpreterInformation(e){const t=await this.pyenvs.getInterpreterInformation(e);if(void 0!==t)return t;const n=await this.hashProviderFactory.create({pythonPath:e}).then(t=>t.getInterpreterHash(e)).catch(t=>(c.traceError("Failed to create File hash for interpreter "+e,t),"")),r=this.persistentFactory.createGlobalPersistentState(e+".v3",void 0,864e5);if(r.value&&n&&r.value.fileHash===n)return r.value;const i=await this.serviceContainer.get(u.IPythonExecutionFactory).create({pythonPath:e});try{const e=await i.getInterpreterInformation().catch(()=>{});if(!e)return;const t={...e,fileHash:n};return await r.updateValue(t),t}catch(t){return void c.traceError(`Failed to get interpreter information for '${e}'`,t)}}async isMacDefaultPythonPath(e){const t=await this.pyenvs.isMacDefaultPythonPath(e);return void 0!==t?t:p.isMacDefaultPythonPath(e)}getInterpreterTypeDisplayName(e){return g.getEnvironmentTypeName(e)}getBestInterpreter(e){if(!Array.isArray(e)||0===e.length)return;const t=g.sortInterpreters(e);return t[t.length-1]}};v=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.inject(f.InterpeterHashProviderFactory)),i(2,o.inject(m.IComponentAdapter))],v),t.InterpreterHelper=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterHashProvider=void 0;const o=n(0),s=n(6);let a=class{constructor(e){this.fs=e}async getInterpreterHash(e){return this.fs.getFileHash(e)}};a=r([o.injectable(),i(0,o.inject(s.IFileSystem))],a),t.InterpreterHashProvider=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.learnMoreOnInterpreterSecurityURI=t.flaggedWorkspacesKeysStorageKey=t.safeInterpretersKey=t.unsafeInterpretersKey=t.unsafeInterpreterPromptKey=void 0,t.unsafeInterpreterPromptKey="unsafeInterpreterPromptKey",t.unsafeInterpretersKey="unsafeInterpretersKey",t.safeInterpretersKey="safeInterpretersKey",t.flaggedWorkspacesKeysStorageKey="flaggedWorkspacesKeysInterpreterSecurityStorageKey",t.learnMoreOnInterpreterSecurityURI="https://aka.ms/AA7jfor"},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Bash=t.getAllScripts=void 0;const i=n(0);n(11);const o=n(25),s=n(365),a={[o.TerminalShellType.wsl]:["activate.sh","activate"],[o.TerminalShellType.ksh]:["activate.sh","activate"],[o.TerminalShellType.zsh]:["activate.sh","activate"],[o.TerminalShellType.gitbash]:["activate.sh","activate"],[o.TerminalShellType.bash]:["activate.sh","activate"],[o.TerminalShellType.tcshell]:["activate.csh"],[o.TerminalShellType.cshell]:["activate.csh"],[o.TerminalShellType.fish]:["activate.fish"]};t.getAllScripts=function(){const e=[];for(const t of Object.keys(a)){const n=t;for(const t of a[n])e.includes(t)||e.push(t)}return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return["source "+n.fileToCommandArgument()]}};c=r([i.injectable()],c),t.Bash=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvBaseActivationCommandProvider=t.BaseActivationCommandProvider=void 0;const o=n(0),s=n(4),a=n(8),c=n(366),l=n(6),u=n(1);let d=class{constructor(e){this.serviceContainer=e}getActivationCommands(e,t){const n=this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath;return this.getActivationCommandsForInterpreter(n,t)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.BaseActivationCommandProvider=d;t.VenvBaseActivationCommandProvider=class extends d{isShellSupported(e){return void 0!==this.scripts[e]}async findScriptFile(e,t){const n=this.serviceContainer.get(l.IFileSystem),r=this.scripts[t];if(!r)return;return c.getVenvExecutableFinder(r,s.dirname,s.join,e=>n.fileExists(e))(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPipenvTypeFinder=t.getVirtualenvTypeFinder=t.getVenvExecutableFinder=t.getVenvTypeFinder=t.getTypeFinders=t.getNameFinders=t.getType=t.getName=void 0;const r=n(28),i=n(367);function o(e,t,n){return async i=>{const o=e(i),s=["pyvenv.cfg",t("..","pyvenv.cfg")].map(e=>t(o,e));for(const e of s)if(await n(e))return r.EnvironmentType.Venv}}function s(e,t,n,r){const i="string"==typeof e?[e]:e;return async e=>{const o=t(e);for(const e of i){const t=n(o,e);if(await r(t))return t}}}function a(e,t,n,i){const o=s(e,t,n,i);return async e=>void 0!==await o(e)?r.EnvironmentType.VirtualEnv:void 0}function c(e,t){return async n=>{const i=await e();if(i&&await t(i,n))return r.EnvironmentType.Pipenv}}t.getName=async function(e,t){for(const n of t){const t=await n(e);if(t&&""!==t)return t}},t.getType=async function(e,t){for(const n of t){const t=await n(e);if(t&&t!==r.EnvironmentType.Unknown)return t}},t.getNameFinders=function(e,t,n,r){return[async i=>e&&await r(e,i)?n(e):n(t(t(i)))]},t.getTypeFinders=function(e,t,n,r,s,l,u,d,h,p){return[o(s,r,h),i.getPyenvTypeFinder(e,n,r,d,p),c(l,u),a(t,s,r,h)]},t.getVenvTypeFinder=o,t.getVenvExecutableFinder=s,t.getVirtualenvTypeFinder=a,t.getPipenvTypeFinder=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPyenvRootFinder=t.getPyenvTypeFinder=void 0;const r=n(119),i=n(28);function o(e,t,n,i){return async()=>{const o=n("PYENV_ROOT");if(o)return o;try{const e=(await i("pyenv",["root"])).stdout.trim();if(e.length>0)return e}catch(e){r.logVerbose(`"pyenv root" failed (${e})`)}return t(e,".pyenv")}}t.getPyenvTypeFinder=function(e,t,n,r,s){const a=o(e,n,r,s);return async e=>{const n=await a();if(n&&e.startsWith(`${n}${t}`))return i.EnvironmentType.Pyenv}},t.getPyenvRootFinder=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPromptAndPowerShell=t.getAllScripts=void 0;const o=n(0),s=n(4),a=n(8);n(11);const c=n(25),l=n(365),u={[c.TerminalShellType.commandPrompt]:["activate.bat","Activate.ps1"],[c.TerminalShellType.powershell]:["Activate.ps1","activate.bat"],[c.TerminalShellType.powershellCore]:["Activate.ps1","activate.bat"]};t.getAllScripts=function(e){const t=[];for(const n of Object.keys(u)){const r=n;for(const n of u[r])t.includes(n)||t.push(n,e("Scripts",n),e("scripts",n))}return t};let d=class extends l.VenvBaseActivationCommandProvider{constructor(e){super(e),this.scripts={};for(const e of Object.keys(u)){const t=e,n=[];for(const e of u[t])n.push(e,s.join("Scripts",e),s.join("scripts",e));this.scripts[t]=n}}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return t===c.TerminalShellType.commandPrompt&&n.endsWith("activate.bat")?[n.fileToCommandArgument()]:t!==c.TerminalShellType.powershell&&t!==c.TerminalShellType.powershellCore||!n.endsWith("Activate.ps1")?t===c.TerminalShellType.commandPrompt&&n.endsWith("Activate.ps1")?[]:void 0:["& "+n.fileToCommandArgument()]}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.CommandPromptAndPowerShell=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageConfiguration=void 0;const r=n(2),i=n(352);t.getLanguageConfiguration=function(){return{onEnterRules:[{beforeText:i.verboseRegExp("\n                    ^\n                    (?! \\s+ \\\\ )\n                    [^#\n]+\n                    \\\\\n                    $\n                "),action:{indentAction:r.IndentAction.Indent}},{beforeText:/^\s*#.*/,afterText:/.+$/,action:{indentAction:r.IndentAction.None,appendText:"# "}},{beforeText:i.verboseRegExp("\n                    ^\n                    \\s*\n                    (?:\n                        (?:\n                            (?:\n                                class |\n                                def |\n                                async \\s+ def |\n                                except |\n                                for |\n                                async \\s+ for |\n                                if |\n                                elif |\n                                while |\n                                with |\n                                async \\s+ with\n                            )\n                            \\b .*\n                        ) |\n                        else |\n                        try |\n                        finally\n                    )\n                    \\s*\n                    [:]\n                    \\s*\n                    (?: [#] .* )?\n                    $\n                "),action:{indentAction:r.IndentAction.Indent}},{beforeText:i.verboseRegExp("\n                    ^\n                    (?:\n                        (?:\n                            \\s*\n                            (?:\n                                pass |\n                                raise \\s+ [^#\\s] [^#]*\n                            )\n                        ) |\n                        (?:\n                            \\s+\n                            (?:\n                                raise |\n                                break |\n                                continue\n                            )\n                        )\n                    )\n                    \\s*\n                    (?: [#] .* )?\n                    $\n                "),action:{indentAction:r.IndentAction.Outdent}}]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseErrorHandler=void 0;const r=n(1);t.BaseErrorHandler=class{constructor(e,t,n){this.product=e,this.outputChannel=t,this.serviceContainer=n,this.installer=this.serviceContainer.get(r.IInstaller)}get nextHandler(){return this.handler}setNextHandler(e){this.handler=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISortImportsEditingProvider=void 0,t.ISortImportsEditingProvider=Symbol("ISortImportsEditingProvider")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedTestConfigSettingsService=t.TestConfigSettingsService=void 0;const o=n(0),s=n(2),a=n(3),c=n(1),l=n(8);let u=class{constructor(e){this.workspaceService=e.get(a.IWorkspaceService)}async updateTestArgs(e,t,n){const r=this.getTestArgSetting(t);return this.updateSetting(e,r,n)}async enable(e,t){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!0)}async disable(e,t){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!1)}getTestEnablingSetting(e){switch(e){case c.Product.unittest:return"testing.unittestEnabled";case c.Product.pytest:return"testing.pytestEnabled";case c.Product.nosetest:return"testing.nosetestsEnabled";default:throw new Error("Invalid Test Product")}}getTestArgSetting(e){switch(e){case c.Product.unittest:return"testing.unittestArgs";case c.Product.pytest:return"testing.pytestArgs";case c.Product.nosetest:return"testing.nosetestArgs";default:throw new Error("Invalid Test Product")}}async updateSetting(e,t,n){let r;const i="string"==typeof e?s.Uri.file(e):e;if(this.workspaceService.hasWorkspaceFolders)if(1===this.workspaceService.workspaceFolders.length)r=this.workspaceService.getConfiguration("python",this.workspaceService.workspaceFolders[0].uri);else{const t=this.workspaceService.getWorkspaceFolder(i);if(!t)throw new Error(`Test directory does not belong to any workspace (${e})`);r=this.workspaceService.getConfiguration("python",t.uri)}else r=this.workspaceService.getConfiguration("python");return r.update(t,n)}};u=r([o.injectable(),i(0,o.inject(l.IServiceContainer))],u),t.TestConfigSettingsService=u;t.BufferedTestConfigSettingsService=class{constructor(){this.ops=[]}async updateTestArgs(e,t,n){this.ops.push(["updateTestArgs",e,t,n])}async enable(e,t){this.ops.push(["enable",e,t,[]])}async disable(e,t){this.ops.push(["disable",e,t,[]])}async apply(e){const t=this.ops;this.ops=[];for(const[n,r,i,o]of t)switch(n){case"updateTestArgs":await e.updateTestArgs(r,i,o);break;case"enable":await e.enable(r,i);break;case"disable":await e.disable(r,i)}}getTestEnablingSetting(e){throw new Error("Method not implemented.")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITestDiscoveredTestParser=void 0,t.ITestDiscoveredTestParser=Symbol("ITestDiscoveredTestParser")},function(e,t,n){"use strict";var r=n(64).rotr32;function i(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function s(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?i(t,n,r):1===e||3===e?s(t,n,r):2===e?o(t,n,r):void 0},t.ch32=i,t.maj32=o,t.p32=s,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,n){"use strict";var r=n(64),i=n(118),o=n(374),s=n(117),a=r.sum32,c=r.sum32_4,l=r.sum32_5,u=o.ch32,d=o.maj32,h=o.s0_256,p=o.s1_256,f=o.g0_256,g=o.g1_256,m=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(y,m),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=c(g(n[r-2]),n[r-7],f(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],m=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],S=this.h[6],E=this.h[7];for(s(this.k.length===n.length),r=0;r<n.length;r++){var w=l(E,p(y),u(y,b,S),this.k[r],n[r]),_=a(h(i),d(i,o,m));E=S,S=b,b=y,y=a(v,w),v=m,m=o,o=i,i=a(w,_)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],S),this.h[7]=a(this.h[7],E)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(64),i=n(118),o=n(117),s=r.rotr64_hi,a=r.rotr64_lo,c=r.shr64_hi,l=r.shr64_lo,u=r.sum64,d=r.sum64_hi,h=r.sum64_lo,p=r.sum64_4_hi,f=r.sum64_4_lo,g=r.sum64_5_hi,m=r.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function S(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function E(e,t,n,r,i,o){var s=t&r^~t&o;return s<0&&(s+=4294967296),s}function w(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function _(e,t,n,r,i,o){var s=t&r^t&o^r&o;return s<0&&(s+=4294967296),s}function P(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function C(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function T(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function O(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function R(e,t){var n=a(e,t,1)^a(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function D(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}function x(e,t){var n=a(e,t,19)^a(t,e,29)^l(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(b,v),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=D(n[r-4],n[r-3]),o=x(n[r-4],n[r-3]),s=n[r-14],a=n[r-13],c=O(n[r-30],n[r-29]),l=R(n[r-30],n[r-29]),u=n[r-32],d=n[r-31];n[r]=p(i,o,s,a,c,l,u,d),n[r+1]=f(i,o,s,a,c,l,u,d)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],p=this.h[6],f=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],O=this.h[11],R=this.h[12],D=this.h[13],x=this.h[14],k=this.h[15];o(this.k.length===n.length);for(var A=0;A<n.length;A+=2){var N=x,j=k,F=T(v,y),M=I(v,y),L=S(v,y,b,O,R),U=E(v,y,b,O,R,D),W=this.k[A],B=this.k[A+1],V=n[A],H=n[A+1],q=g(N,j,F,M,L,U,W,B,V,H),G=m(N,j,F,M,L,U,W,B,V,H);N=P(r,i),j=C(r,i),F=w(r,i,s,a,c),M=_(r,i,s,a,c,l);var $=d(N,j,F,M),K=h(N,j,F,M);x=R,k=D,R=b,D=O,b=v,O=y,v=d(p,f,q,G),y=h(f,f,q,G),p=c,f=l,c=s,l=a,s=r,a=i,r=d(q,G,$,K),i=h(q,G,$,K)}u(this.h,0,r,i),u(this.h,2,s,a),u(this.h,4,c,l),u(this.h,6,p,f),u(this.h,8,v,y),u(this.h,10,b,O),u(this.h,12,R,D),u(this.h,14,x,k)},b.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const i=n(0),o=n(4),s=n(2),a=n(27);let c=class{get onDidChangeConfiguration(){return s.workspace.onDidChangeConfiguration}get rootPath(){return Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0].uri.fsPath:void 0}get workspaceFolders(){return s.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return s.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0}get workspaceFile(){return s.workspace.workspaceFile}getConfiguration(e,t){return s.workspace.getConfiguration(e,t||null)}getWorkspaceFolder(e){return e?s.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return s.workspace.asRelativePath(e,t)}createFileSystemWatcher(e,t,n,r){return s.workspace.createFileSystemWatcher(e,n,n,r)}findFiles(e,t,n,r){return s.workspace.findFiles(e,t,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?s.workspace.getWorkspaceFolder(e):void 0;return n?o.normalize(a.getOSType()===a.OSType.Windows?n.uri.fsPath.toUpperCase():n.uri.fsPath):t}};c=r([i.injectable()],c),t.WorkspaceService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);var i;t.VSCodeFilterProvider=class{constructor(e,t,n){this.extensionName=e,this.extensionVersion=t,this.targetPopulation=n}getFilterValue(e){switch(e){case i.ApplicationVersion:return r.version;case i.Build:return r.env.appName;case i.ClientId:return r.env.machineId;case i.ExtensionName:return this.extensionName;case i.ExtensionVersion:return this.extensionVersion;case i.Language:return r.env.language;case i.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(i);for(let n of t)e.set(n,this.getFilterValue(n));return e}},function(e){e.Market="X-MSEdge-Market",e.CorpNet="X-FD-Corpnet",e.ApplicationVersion="X-VSCode-AppVersion",e.Build="X-VSCode-Build",e.ClientId="X-MSEdge-ClientId",e.ExtensionName="X-VSCode-ExtensionName",e.ExtensionVersion="X-VSCode-ExtensionVersion",e.Language="X-VSCode-Language",e.TargetPopulation="X-VSCode-TargetPopulation"}(i=t.Filters||(t.Filters={})),function(e){e.Team="team",e.Internal="internal",e.Insiders="insider",e.Public="public"}(t.TargetPopulation||(t.TargetPopulation={}))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(44),i=n(1048),o={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=n(1049):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(a=n(1055)),a),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c},function(e,t,n){"use strict";var r=n(229);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(1050),i=n(1051);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){var r=n(83),i=n(81),o=n(82),s=n(67),a=n(54).Writable,c=n(1056)("follow-redirects"),l={GET:!0,HEAD:!0,OPTIONS:!0,TRACE:!0},u=Object.create(null);function d(e,t){a.call(this),e.headers=e.headers||{},this._options=e,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e.host&&(e.hostname||(e.hostname=e.host),delete e.host),t&&this.on("response",t);var n=this;if(this._onNativeResponse=function(e){n._processResponse(e)},!e.pathname&&e.path){var r=e.path.indexOf("?");r<0?e.pathname=e.path:(e.pathname=e.path.substring(0,r),e.search=e.path.substring(r))}this._performRequest()}function h(e){var t={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(e).forEach((function(i){var o=i+":",a=n[o]=e[i],l=t[i]=Object.create(a);l.request=function(e,i){return"string"==typeof e?(e=r.parse(e)).maxRedirects=t.maxRedirects:e=Object.assign({protocol:o,maxRedirects:t.maxRedirects,maxBodyLength:t.maxBodyLength},e),e.nativeProtocols=n,s.equal(e.protocol,o,"protocol mismatch"),c("options",e),new d(e,i)},l.get=function(e,t){var n=l.request(e,t);return n.end(),n}})),t}["abort","aborted","error","socket","timeout"].forEach((function(e){u[e]=function(t){this._redirectable.emit(e,t)}})),d.prototype=Object.create(a.prototype),d.prototype.write=function(e,t,n){if(!("string"==typeof e||"object"==typeof e&&"length"in e))throw new Error("data should be a string, Buffer or Uint8Array");"function"==typeof t&&(n=t,t=null),0!==e.length?this._requestBodyLength+e.length<=this._options.maxBodyLength?(this._requestBodyLength+=e.length,this._requestBodyBuffers.push({data:e,encoding:t}),this._currentRequest.write(e,t,n)):(this.emit("error",new Error("Request body larger than maxBodyLength limit")),this.abort()):n&&n()},d.prototype.end=function(e,t,n){"function"==typeof e?(n=e,e=t=null):"function"==typeof t&&(n=t,t=null);var r=this._currentRequest;this.write(e||"",t,(function(){r.end(null,null,n)}))},d.prototype.setHeader=function(e,t){this._options.headers[e]=t,this._currentRequest.setHeader(e,t)},d.prototype.removeHeader=function(e){delete this._options.headers[e],this._currentRequest.removeHeader(e)},["abort","flushHeaders","getHeader","setNoDelay","setSocketKeepAlive","setTimeout"].forEach((function(e){d.prototype[e]=function(t,n){return this._currentRequest[e](t,n)}})),["aborted","connection","socket"].forEach((function(e){Object.defineProperty(d.prototype,e,{get:function(){return this._currentRequest[e]}})})),d.prototype._performRequest=function(){var e=this._options.protocol,t=this._options.nativeProtocols[e];if(t){if(this._options.agents){var n=e.substr(0,e.length-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=t.request(this._options,this._onNativeResponse);for(var o in this._currentUrl=r.format(this._options),i._redirectable=this,u)o&&i.on(o,u[o]);if(this._isRedirect){var s=0,a=this._requestBodyBuffers;!function e(){if(s<a.length){var t=a[s++];i.write(t.data,t.encoding,e)}else i.end()}()}}else this.emit("error",new Error("Unsupported protocol "+e))},d.prototype._processResponse=function(e){this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:e.headers,statusCode:e.statusCode});var t=e.headers.location;if(t&&!1!==this._options.followRedirects&&e.statusCode>=300&&e.statusCode<400){if(++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new Error("Max redirects exceeded."));var n,i=this._options.headers;if(307!==e.statusCode&&!(this._options.method in l))for(n in this._options.method="GET",this._requestBodyBuffers=[],i)/^content-/i.test(n)&&delete i[n];if(!this._isRedirect)for(n in i)/^host$/i.test(n)&&delete i[n];var o=r.resolve(this._currentUrl,t);c("redirecting to",o),Object.assign(this._options,r.parse(o)),this._isRedirect=!0,this._performRequest(),e.destroy()}else e.responseUrl=this._currentUrl,e.redirects=this._redirects,this.emit("response",e),this._requestBodyBuffers=[]},e.exports=h({http:i,https:o}),e.exports.wrap=h},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var l=r.log||t.log||console.log.bind(console);l.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(1058),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(s,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var a=i.concat(o).concat(s),c=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(0),o=n(2);function s(e){o.env.openExternal(o.Uri.parse(e))}t.launch=s;let a=class{launch(e){s(e)}};a=r([i.injectable()],a),t.BrowserService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedMessages=t.CssMessages=void 0,function(e){e.GetCssRequest="get_css_request",e.GetCssResponse="get_css_response",e.GetMonacoThemeRequest="get_monaco_theme_request",e.GetMonacoThemeResponse="get_monaco_theme_response"}(t.CssMessages||(t.CssMessages={})),function(e){e.UpdateSettings="update_settings",e.Started="started",e.LocInit="loc_init",e.StyleUpdate="style_update"}(t.SharedMessages||(t.SharedMessages={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areEquivalentVersions=t.areEqualVersions=t.parseVersionInfo=t.parseVersion=t.getPythonVersionFromPath=void 0;const r=n(4),i=n(233),o=n(5),s=n(213);function a(e){const t=s.parseBasicVersionInfo(e);if(!t){if(""===e)return s.EMPTY_VERSION;throw Error("invalid version "+e)}const{version:n,after:r}=t,o=r.match(/^(a|b|rc)(\d+)$/);if(o){const[,e,t]=o;let r;if("a"===e)r=i.PythonReleaseLevel.Alpha;else if("b"===e)r=i.PythonReleaseLevel.Beta;else{if("rc"!==e)throw Error("unreachable!");r=i.PythonReleaseLevel.Candidate}n.release={level:r,serial:parseInt(t,10)}}return n}t.getPythonVersionFromPath=function(e){let t=i.UNKNOWN_PYTHON_VERSION;try{t=a(r.basename(e))}catch(t){o.traceError("Failed to parse version from path: "+e,t)}return t},t.parseVersion=a,t.parseVersionInfo=function(e){const t=e.split("."),n=i.UNKNOWN_PYTHON_VERSION;if(t.length>=2&&(n.major=parseInt(t[0],10),n.minor=parseInt(t[1],10)),t.length>=3&&(n.micro=parseInt(t[2],10)),t.length>=4&&n.release){const e=["alpha","beta","candidate","final"],r=t[3].toLowerCase();e.includes(r)&&(n.release.level=r)}return t.length>=5&&n.release&&(n.release.serial=parseInt(t[4],10)),n},t.areEqualVersions=function(e,t){return e===t},t.areEquivalentVersions=function(e,t){return 2===e.major&&2===t.major||e.major===t.major&&e.minor===t.minor}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvs=t.getQueryFilter=void 0;const r=n(15),i=n(14);t.getQueryFilter=function(e){const t=void 0!==e.kinds&&e.kinds.length>0?e.kinds:void 0;let n=!0;void 0!==e.searchLocations&&(n=void 0!==e.searchLocations.includeNonRooted&&e.searchLocations.includeNonRooted);const r=function(e){if(void 0===e.searchLocations)return;if(0===e.searchLocations.roots.length)return[];return e.searchLocations.roots.map(e=>i.getURIFilter(e,{checkParent:!0,checkExact:!0}))}(e);return e=>!!function(e){return void 0===t||t.includes(e.kind)}(e)&&!!function(e){if(void 0===e.searchLocation)return n;const t=e.searchLocation;return void 0===r||r.some(e=>e(t))}(e)},t.getEnvs=async function(e){const t=[],n=r.createDeferred();void 0===e.onUpdated?n.resolve():e.onUpdated(e=>{if(null===e)return void n.resolve();void 0===t[e.index]||(t[e.index]=e.update)});let i=await e.next();for(;!i.done;)t.push(i.value),i=await e.next();return await n.promise,t}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonInterpreterLocatorService=t.WorkspaceLocators=t.ExtensionLocators=void 0;const o=n(0),s=n(111),a=n(2),c=n(5),l=n(6),u=n(1),d=n(15),h=n(14),p=n(27),f=n(12),g=n(8),m=n(394),v=n(1115),y=n(1117);class b extends v.Locators{constructor(e,t){super([...e,t])}}t.ExtensionLocators=b;class S extends m.Locator{constructor(e){super(),this.factories=e,this.locators={},this.roots={}}activate(e){e.roots.forEach(e=>{this.addRoot(e)}),e.onAdded(e=>this.addRoot(e)),e.onRemoved(e=>this.removeRoot(e))}iterEnvs(e){if(null===(null==e?void 0:e.searchLocations))return m.NOOP_ITERATOR;const t=Object.keys(this.locators).map(t=>{if(void 0!==(null==e?void 0:e.searchLocations)){const n=this.roots[t],r=h.getURIFilter(n,{checkParent:!0,checkChild:!0,checkExact:!0});if(!e.searchLocations.roots.some(r))return m.NOOP_ITERATOR}return this.locators[t].iterEnvs(e)});return v.combineIterators(t)}async resolveEnv(e){if("string"!=typeof e&&e.searchLocation){const t=this.locators[e.searchLocation.toString()];if(t)return t.resolveEnv(e)}for(const t of Object.keys(this.locators)){const n=await this.locators[t].resolveEnv(e);if(void 0!==n)return n}}addRoot(e){this.removeRoot(e);const t=[];this.factories.forEach(n=>{t.push(...n(e))});const n=new v.DisableableLocator(new v.Locators(t)),r=e.toString();this.locators[r]=n,this.roots[r]=e,this.emitter.fire({searchLocation:e}),n.onChanged(t=>{void 0===t.searchLocation&&(t.searchLocation=e),this.emitter.fire(t)})}removeRoot(e){const t=e.toString(),n=this.locators[t];void 0!==n&&(delete this.locators[t],delete this.roots[t],n.disable(),this.emitter.fire({searchLocation:e}))}}t.WorkspaceLocators=S;let E=class{constructor(e,t){this.serviceContainer=e,this.pyenvs=t,this.disposables=[],this.onLocatingEmitter=new a.EventEmitter,this._hasInterpreters=d.createDeferred(),e.get(u.IDisposableRegistry).push(this),this.platform=e.get(l.IPlatformService),this.interpreterLocatorHelper=e.get(f.IInterpreterLocatorHelper),this.didTriggerInterpreterSuggestions=!1}get onLocating(){return this.onLocatingEmitter.event}get hasInterpreters(){return this.pyenvs.hasInterpreters.then(e=>void 0!==e?e:this._hasInterpreters.completed?this._hasInterpreters.promise:Promise.resolve(!1))}dispose(){this.disposables.forEach(e=>e.dispose())}async getInterpreters(e,t){const n=await this.pyenvs.getInterpreters(e,t);if(void 0!==n)return n;const r=this.getLocators(t),i=r.map(async t=>t.getInterpreters(e));r.forEach(e=>{e.hasInterpreters.then(e=>{e&&this._hasInterpreters.resolve(!0)}).ignoreErrors()});const o=await Promise.all(i),a=s.flatten(o).filter(e=>!!e).map(e=>e).filter(e=>!y.isHiddenInterpreter(e));return this._hasInterpreters.resolve(a.length>0),this.interpreterLocatorHelper.mergeInterpreters(a)}getLocators(e){const t=[[f.WINDOWS_REGISTRY_SERVICE,p.OSType.Windows],[f.CONDA_ENV_SERVICE,void 0],[f.CONDA_ENV_FILE_SERVICE,void 0],[f.PIPENV_SERVICE,void 0],[f.GLOBAL_VIRTUAL_ENV_SERVICE,void 0],[f.WORKSPACE_VIRTUAL_ENV_SERVICE,void 0],[f.KNOWN_PATH_SERVICE,void 0],[f.CURRENT_PATH_SERVICE,void 0]].filter(e=>void 0===e[1]||e[1]===this.platform.osType).map(e=>this.serviceContainer.get(f.IInterpreterLocatorService,e[0]));return this.didTriggerInterpreterSuggestions||!0!==(null==e?void 0:e.onSuggestion)||(this.didTriggerInterpreterSuggestions=!0,t.forEach(e=>{e.didTriggerInterpreterSuggestions=!0})),t}};r([c.traceDecorators.verbose("Get Interpreters")],E.prototype,"getInterpreters",null),E=r([o.injectable(),i(0,o.inject(g.IServiceContainer)),i(1,o.inject(f.IComponentAdapter))],E),t.PythonInterpreterLocatorService=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Locator=t.NOOP_ITERATOR=void 0;const r=n(1114),i=n(15),o=n(234);t.NOOP_ITERATOR=i.iterEmpty();t.Locator=class extends class{constructor(e){this.disposables=new r.DisposableRegistry,this.emitter=e,this.onChanged=this.emitter.onChanged}async resolveEnv(e){}dispose(){this.disposables.dispose()}}{constructor(){super(new o.PythonEnvsWatcher)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentInfoService=t.IEnvironmentInfoService=t.EnvironmentInfoServiceQueuePriority=void 0;const i=n(0),o=n(15),s=n(1118),a=n(1119),c=n(154),l=n(88);var u;async function d(e){const t=await a.getInterpreterInfo(l.buildPythonExecInfo(e),c.shellExecute).catch(()=>{});if(void 0!==t&&void 0!==t.version)return t}!function(e){e[e.Default=0]="Default",e[e.High=1]="High"}(u=t.EnvironmentInfoServiceQueuePriority||(t.EnvironmentInfoServiceQueuePriority={})),t.IEnvironmentInfoService=Symbol("IEnvironmentInfoService");let h=class{constructor(){this.cache=new Map,this.workerPool=s.createWorkerPool(d)}async getEnvironmentInfo(e,t){const n=this.cache.get(e);if(void 0!==n)return n.promise;const r=o.createDeferred();return this.cache.set(e,r),(t===u.High?this.workerPool.addToQueue(e,s.QueuePosition.Front):this.workerPool.addToQueue(e,s.QueuePosition.Back)).then(t=>(r.resolve(t),void 0===t&&this.cache.delete(e),t))}isInfoProvided(e){const t=this.cache.get(e);return!(!t||!t.completed)}};h=r([i.injectable()],h),t.EnvironmentInfoService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseVirtualEnvService=void 0;const o=n(0),s=n(111),a=n(4),c=n(5),l=n(6),u=n(12),d=n(150),h=n(235),p=n(90);let f=class extends p.CacheableLocatorService{constructor(e,t,n,r=!1){super(n,t,r),this.searchPathsProvider=e,this.virtualEnvMgr=t.get(d.IVirtualEnvironmentManager),this.helper=t.get(u.IInterpreterHelper),this.fileSystem=t.get(l.IFileSystem)}dispose(){s.noop()}getInterpretersImplementation(e){return this.suggestionsFromKnownVenvs(e)}async suggestionsFromKnownVenvs(e){const t=await this.searchPathsProvider.getSearchPaths(e);return Promise.all(t.map(t=>this.lookForInterpretersInVenvs(t,e))).then(e=>s.flatten(e))}async lookForInterpretersInVenvs(e,t){return this.fileSystem.getSubDirectories(e).then(e=>Promise.all(this.getProspectiveDirectoriesForLookup(e))).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(e=>h.lookForInterpretersInDirectory(e)))).then(e=>s.flatten(e)).then(e=>Promise.all(e.map(e=>this.getVirtualEnvDetails(e,t)))).then(e=>e.filter(e=>!!e).map(e=>e)).catch(e=>(c.traceError("Python Extension (lookForInterpretersInVenvs):",e),[]))}getProspectiveDirectoriesForLookup(e){const t=this.serviceContainer.get(l.IPlatformService).virtualEnvBinName;return e.map(e=>this.fileSystem.getSubDirectories(e).then(e=>{const n=e.filter(e=>{const n=a.basename(e);return this.fileSystem.arePathsSame(n,t)});return 1===n.length?n[0]:""}).catch(e=>(c.traceError("Python Extension (getProspectiveDirectoriesForLookup):",e),"")))}async getVirtualEnvDetails(e,t){return Promise.all([this.helper.getInterpreterInformation(e),this.virtualEnvMgr.getEnvironmentName(e,t),this.virtualEnvMgr.getEnvironmentType(e,t)]).then(([e,t,n])=>e?(this._hasInterpreters.resolve(!0),Promise.resolve({...e,envName:t,type:n})):Promise.resolve(void 0))}};f=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged()),i(3,o.unmanaged())],f),t.BaseVirtualEnvService=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0,void 0===Reflect.metadata&&n(398);n(399).initialize(n(2)),n(5);const r={},i=new(n(30).StopWatch),o=n(2),s=n(632),a=n(3),c=n(5),l=n(1),u=n(15),d=n(13),h=n(634),p=n(1001),f=n(1135);let g;r.codeLoadingTime=i.elapsedTime,t.activate=async function(e){let t,n,l;try{[t,n,l]=await async function(e,t,n){const r=u.createDeferred();(function(e){const t={location:o.ProgressLocation.Window,title:d.Common.loadingExtension()};o.window.withProgress(t,()=>e)})(r.promise),n.startActivateTime=t.elapsedTime;const[i,a]=p.initializeGlobals(e);g=a,p.initializeCommon(e,i,a),p.initializeComponents(e,i,a);const{activationPromise:c}=await h.activateComponents(e,i,a);n.endActivateTime=t.elapsedTime,r.resolve();return[s.buildApi(c,i,a),c,a]}(e,i,r)}catch(e){throw await async function(e,t){(function(e){try{let t=o.window;g&&(t=g.get(a.IApplicationShell)),t.showErrorMessage(e).ignoreErrors()}catch(e){c.traceError("failed to notify user",e)}})("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),c.traceError("extension activation failed",e),await f.sendErrorTelemetry(e,t,g)}(e,r),e}return f.sendStartupTelemetry(n,r,i,l).ignoreErrors(),t},t.deactivate=function(){if(g){const e=g.get(l.IAsyncDisposableRegistry);if(e)return e.dispose()}return Promise.resolve()}},function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return k(Object.create(null))}:s?function(){return k({__proto__:null})}:function(){return k({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,h=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,p=new(u||"function"!=typeof WeakMap?function(){var e=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+s()}while(c.has(e,t));return e[t]=!0,t}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function s(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function f(e,t,n){var r=p.get(e);if(S(r)){if(!n)return;r=new d,p.set(e,r)}var i=r.get(t);if(S(i)){if(!n)return;i=new d,r.set(t,i)}return i}function g(e,t,n){var r=f(t,n,!1);return!S(r)&&!!r.has(e)}function m(e,t,n){var r=f(t,n,!1);if(!S(r))return r.get(e)}function v(e,t,n,r){f(n,r,!0).set(e,t)}function y(e,t){var n=[],r=f(e,t,!1);if(S(r))return n;for(var o=function(e){var t=O(e,i);if(!T(t))throw new TypeError;var n=t.call(e);if(!w(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=R(o);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{D(o)}finally{throw e}}s++}}function b(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function E(e){return null===e}function w(e){return"object"==typeof e?null!==e:"function"==typeof e}function _(e,t){switch(b(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=O(e,r);if(void 0!==i){var o=i.call(e,n);if(w(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(T(n))if(!w(i=n.call(e)))return i;if(T(r=e.valueOf))if(!w(i=r.call(e)))return i}else{var r;if(T(r=e.valueOf))if(!w(i=r.call(e)))return i;var i,o=e.toString;if(T(o))if(!w(i=o.call(e)))return i}throw new TypeError}(e,"default"===n?"number":n)}function P(e){var t=_(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function C(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function T(e){return"function"==typeof e}function I(e){return"function"==typeof e}function O(e,t){var n=e[t];if(null!=n){if(!T(n))throw new TypeError;return n}}function R(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function x(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function k(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(S(n)){if(!C(e))throw new TypeError;if(!I(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!S(r)&&!E(r)){if(!I(r))throw new TypeError;t=r}}return t}(e,t)}if(!C(e))throw new TypeError;if(!w(t))throw new TypeError;if(!w(r)&&!S(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,n,r);if(!S(o)&&!E(o)){if(!w(o))throw new TypeError;r=o}}return r}(e,t,n=P(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!w(n))throw new TypeError;if(!S(r)&&!function(e){switch(b(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;v(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!w(n))throw new TypeError;return S(r)||(r=P(r)),v(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!w(t))throw new TypeError;return S(n)||(n=P(n)),function e(t,n,r){if(g(t,n,r))return!0;var i=x(n);return!E(i)&&e(t,i,r)}(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!w(t))throw new TypeError;return S(n)||(n=P(n)),g(e,t,n)})),e("getMetadata",(function(e,t,n){if(!w(t))throw new TypeError;return S(n)||(n=P(n)),function e(t,n,r){if(g(t,n,r))return m(t,n,r);var i=x(n);return E(i)?void 0:e(t,i,r)}(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!w(t))throw new TypeError;return S(n)||(n=P(n)),m(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!w(e))throw new TypeError;return S(t)||(t=P(t)),function e(t,n){var r=y(t,n),i=x(t);if(null===i)return r;var o=e(i,n);if(o.length<=0)return r;if(r.length<=0)return o;for(var s=new h,a=[],c=0,l=r;c<l.length;c++){var u=l[c];s.has(u)||(s.add(u),a.push(u))}for(var d=0,p=o;d<p.length;d++){u=p[d];s.has(u)||(s.add(u),a.push(u))}return a}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!w(e))throw new TypeError;return S(t)||(t=P(t)),y(e,t)})),e("deleteMetadata",(function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=P(n));var r=f(t,n,!1);if(S(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||p.delete(t),!0}))}(r)}()}(n||(n={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=t.SourceMapSupport=void 0;const r=n(4);n(11);const i=n(5),o=n(192),s=n(61);class a{constructor(e){this.vscode=e,this.config=this.vscode.workspace.getConfiguration("python.diagnostics",null)}async initialize(){if(!this.enabled)return;await this.enableSourceMaps(!0),n(631).install();const e=n(13),t=e.Diagnostics.disableSourceMaps();this.vscode.window.showWarningMessage(e.Diagnostics.warnSourceMaps(),t).then(e=>{e===t&&this.disable().ignoreErrors()})}get enabled(){return this.config.get("sourceMapsEnabled",!1)}async disable(){this.enabled&&await this.config.update("sourceMapsEnabled",!1,this.vscode.ConfigurationTarget.Global),await this.enableSourceMaps(!1)}async enableSourceMaps(e){const t=r.join(s.EXTENSION_ROOT_DIR,"out","client","extension.js"),n=r.join(s.EXTENSION_ROOT_DIR,"out","client","debugger","debugAdapter","main.js");await Promise.all([this.enableSourceMap(e,t),this.enableSourceMap(e,n)])}async enableSourceMap(e,t){const n=t+".map",r=t+".map.disabled";e?await this.rename(r,n):await this.rename(n,r)}async rename(e,t){const n=new o.FileSystem;await n.fileExists(t)||await n.move(e,t)}}t.SourceMapSupport=a,t.initialize=function(e=n(2)){e.workspace.getConfiguration("python.diagnostics",null).get("sourceMapsEnabled",!1)?new a(e).initialize().catch(e=>{i.traceError("Failed to initialize source map support in extension")}):new a(e).disable().ignoreErrors()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traceDecorators=t.tracing=t.logWarning=t.logInfo=t.logError=t.logVerbose=t.log=t.addOutputChannelLogging=t.setLoggingLevel=void 0;const r=n(102),i=n(286),o=n(95),s=n(287),a=n(289),c=n(288),l=s.createLogger();function u(e,...t){s.logToAll([l],e,t)}s.configureLogger(l,s.getPreDefinedConfiguration()),t.setLoggingLevel=function(e){if("off"===e)l.clear();else{const t=o.resolveLevelName(e,r.config.npm.levels);t&&(l.level=t)}},t.addOutputChannelLogging=function(e){const t=i.getFormatter(),n=c.getPythonOutputChannelTransport(e,t);l.add(n)},t.log=u,t.logVerbose=function(...e){u(o.LogLevel.Info,...e)},t.logError=function(...e){u(o.LogLevel.Error,...e)},t.logInfo=function(...e){u(o.LogLevel.Info,...e)},t.logWarning=function(...e){u(o.LogLevel.Warn,...e)},t.tracing=function(e,t,n){return a.tracing([l],e,t,n)},function(e){const t=a.TraceOptions.Arguments|a.TraceOptions.ReturnValue;e.verbose=function(e,n=t){return a.createTracingDecorator([l],{message:e,opts:n})},e.error=function(e){const n=t,r=o.LogLevel.Error;return a.createTracingDecorator([l],{message:e,opts:n,level:r})},e.info=function(e){const t=a.TraceOptions.None;return a.createTracingDecorator([l],{message:e,opts:t})},e.warn=function(e){const n=t,r=o.LogLevel.Warn;return a.createTracingDecorator([l],{message:e,opts:n,level:r})}}(t.traceDecorators||(t.traceDecorators={}))},function(e,t,n){var r={};e.exports=r,r.themes={};var i=n(22),o=r.styles=n(402),s=Object.defineProperties,a=new RegExp(/[\r\n]+/g);r.supportsColor=n(403).supportsColor,void 0===r.enabled&&(r.enabled=!1!==r.supportsColor()),r.enable=function(){r.enabled=!0},r.disable=function(){r.enabled=!1},r.stripColors=r.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};r.stylize=function(e,t){return r.enabled?o[t].open+e+o[t].close:e+""};var c=/[|\\{}()[\]^$+*?.]/g;function l(e){var t=function e(){return p.apply(e,arguments)};return t._styles=e,t.__proto__=h,t}var u,d=(u={},o.grey=o.gray,Object.keys(o).forEach((function(e){o[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(c,"\\$&")}(o[e].close),"g"),u[e]={get:function(){return l(this._styles.concat(e))}}})),u),h=s((function(){}),d);function p(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return void 0!==e&&e.constructor===String?e:i.inspect(e)})).join(" ");if(!r.enabled||!t)return t;for(var n=-1!=t.indexOf("\n"),s=this._styles,c=s.length;c--;){var l=o[s[c]];t=l.open+t.replace(l.closeRe,l.open)+l.close,n&&(t=t.replace(a,(function(e){return l.close+e+l.open})))}return t}r.setTheme=function(e){if("string"!=typeof e)for(var t in e)!function(t){r[t]=function(n){if("object"==typeof e[t]){var i=n;for(var o in e[t])i=r[e[t][o]](i);return i}return r[e[t]](n)}}(t);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var f=function(e,t){var n=t.split("");return(n=n.map(e)).join("")};for(var g in r.trap=n(405),r.zalgo=n(406),r.maps={},r.maps.america=n(407)(r),r.maps.zebra=n(408)(r),r.maps.rainbow=n(409)(r),r.maps.random=n(410)(r),r.maps)!function(e){r[e]=function(t){return f(r.maps[e],t)}}(g);s(r,function(){var e={};return Object.keys(d).forEach((function(t){e[t]={get:function(){return l([t])}}})),e}())},function(e,t){var n={};e.exports=n;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var t=r[e],i=n[e]=[];i.open="["+t[0]+"m",i.close="["+t[1]+"m"}))},function(e,t,n){"use strict";var r=n(20),i=n(404),o=process.env,s=void 0;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;var t=s?1:0;if("win32"===process.platform){var n=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in o}))||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in o){var a=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=function(e,t){var n=(t=t||process.argv).indexOf("--"),r=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(r+e);return-1!==i&&(-1===n||i<n)}},function(e,t){e.exports=function(e,t){var n="";e=(e=e||"Run the trap, drop the bass").split("");var r={a:["@","","","","","",""],b:["","","","","",""],c:["","",""],d:["","","","","",""],e:["","","","","","","",""],f:[""],g:[""],h:["","","","","",""],i:[""],j:[""],k:["","","",""],l:[""],m:["","","","","",""],n:["","","","","",""],o:["","","","","","","","",""],p:["",""],q:[""],r:["","","","","",""],s:["","","",""],t:["","",""],u:["",""],v:[""],w:["","","",""],x:["","","",""],y:["","",""],z:["",""]};return e.forEach((function(e){e=e.toLowerCase();var t=r[e]||[" "],i=Math.floor(Math.random()*t.length);n+=void 0!==r[e]?r[e][i]:e})),n}},function(e,t){e.exports=function(e,t){e=e||"   he is here   ";var n={up:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],down:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mid:["","","","","","","","","","","","","","","","","","","","",""," "]},r=[].concat(n.up,n.down,n.mid);function i(e){return Math.floor(Math.random()*e)}function o(e){var t=!1;return r.filter((function(n){t=n===e})),t}return function(e,t){var r,s,a="";for(s in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!o(s)){switch(a+=e[s],r={up:0,down:0,mid:0},t.size){case"mini":r.up=i(8),r.mid=i(2),r.down=i(8);break;case"maxi":r.up=i(16)+3,r.mid=i(4)+1,r.down=i(64)+3;break;default:r.up=i(8)+1,r.mid=i(6)/2,r.down=i(8)+1}var c=["up","mid","down"];for(var l in c)for(var u=c[l],d=0;d<=r[u];d++)t[u]&&(a+=n[u][i(n[u].length)])}return a}(e,t)}},function(e,t){e.exports=function(e){return function(t,n,r){if(" "===t)return t;switch(n%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},function(e,t){e.exports=function(e){return function(t,n,r){return n%2==0?t:e.inverse(t)}}},function(e,t){e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(n,r,i){return" "===n?n:e[t[r++%t.length]](n)}}},function(e,t){e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"];return function(n,r,i){return" "===n?n:e[t[Math.round(Math.random()*(t.length-2))]](n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"cli",{value:n(412)}),Object.defineProperty(t,"npm",{value:n(413)}),Object.defineProperty(t,"syslog",{value:n(414)})},function(e,t,n){"use strict";t.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9},t.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},function(e,t,n){"use strict";t.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6},t.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},function(e,t,n){"use strict";t.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7},t.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},function(e,t,n){var r={"./align.js":236,"./browser.js":416,"./cli.js":237,"./colorize.js":120,"./combine.js":238,"./dist/align.js":160,"./dist/browser.js":249,"./dist/cli.js":161,"./dist/colorize.js":103,"./dist/combine.js":162,"./dist/errors.js":250,"./dist/format.js":36,"./dist/index.js":251,"./dist/json.js":163,"./dist/label.js":164,"./dist/levels.js":122,"./dist/logstash.js":165,"./dist/metadata.js":166,"./dist/ms.js":252,"./dist/pad-levels.js":123,"./dist/pretty-print.js":167,"./dist/printf.js":168,"./dist/simple.js":169,"./dist/splat.js":170,"./dist/timestamp.js":171,"./dist/uncolorize.js":172,"./errors.js":418,"./examples/combine.js":419,"./examples/filter.js":420,"./examples/invalid.js":421,"./examples/metadata.js":422,"./examples/padLevels.js":423,"./examples/volume.js":424,"./format.js":39,"./index.js":65,"./json.js":159,"./label.js":239,"./levels.js":157,"./logstash.js":240,"./metadata.js":241,"./ms.js":425,"./pad-levels.js":158,"./pretty-print.js":242,"./printf.js":243,"./simple.js":244,"./splat.js":245,"./timestamp.js":246,"./uncolorize.js":248};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=415},function(e,t,n){"use strict";const r=t.format=n(39);t.levels=n(157),Object.defineProperty(r,"align",{value:n(236)}),Object.defineProperty(r,"cli",{value:n(237)}),Object.defineProperty(r,"combine",{value:n(238)}),Object.defineProperty(r,"colorize",{value:n(120)}),Object.defineProperty(r,"json",{value:n(159)}),Object.defineProperty(r,"label",{value:n(239)}),Object.defineProperty(r,"logstash",{value:n(240)}),Object.defineProperty(r,"metadata",{value:n(241)}),Object.defineProperty(r,"padLevels",{value:n(158)}),Object.defineProperty(r,"prettyPrint",{value:n(242)}),Object.defineProperty(r,"printf",{value:n(243)}),Object.defineProperty(r,"simple",{value:n(244)}),Object.defineProperty(r,"splat",{value:n(245)}),Object.defineProperty(r,"timestamp",{value:n(246)}),Object.defineProperty(r,"uncolorize",{value:n(248)})},function(e,t,n){var r={"./align.js":160,"./browser.js":249,"./cli.js":161,"./colorize.js":103,"./combine.js":162,"./errors.js":250,"./format.js":36,"./index.js":251,"./json.js":163,"./label.js":164,"./levels.js":122,"./logstash.js":165,"./metadata.js":166,"./ms.js":252,"./pad-levels.js":123,"./pretty-print.js":167,"./printf.js":168,"./simple.js":169,"./splat.js":170,"./timestamp.js":171,"./uncolorize.js":172};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=417},function(e,t,n){"use strict";const r=n(39),{LEVEL:i,MESSAGE:o}=n(21);e.exports=r((e,{stack:t})=>{if(e instanceof Error){const n=Object.assign({},e,{level:e.level,[i]:e[i]||e.level,message:e.message,[o]:e[o]||e.message});return t&&(n.stack=e.stack),n}if(!(e.message instanceof Error))return e;Object.assign(e,e.message);const n=e.message;return e.message=n.message,e[o]=n.message,t&&(e.stack=n.stack),e})},function(e,t,n){const{format:r}=n(65),{combine:i,timestamp:o,label:s}=r,a=i(s({label:"right meow!"}),o()).transform({level:"info",message:"What time is the testing at?"});console.dir(a)},function(e,t,n){const{format:r}=n(65),{combine:i,timestamp:o,label:s}=r,a=r((e,t)=>!e.private&&e)();console.dir(a.transform({level:"error",message:"Public error to share"})),console.dir(a.transform({level:"error",private:!0,message:"This is super secret - hide it."}));const c=r.combine(r(e=>!1)(),r(e=>{throw new Error("Never reached")})());console.dir(c.transform({level:"info",message:"wow such testing"}))},function(e,t,n){const{format:r}=n(65);r((function(e,t,n,r){return e}))},function(e,t,n){const{format:r}=n(65),{combine:i,json:o,metadata:s,timestamp:a}=r,c=i(a(),s(),o()).transform({level:"info",message:"This should be a message.",application:"Microsoft Office",store:"Big Box Store",purchaseAmount:"9.99"});console.dir(c);const l=i(a(),s({fillExcept:["message","level","timestamp"]}),o()).transform({level:"info",message:"This should have attached metadata",category:"movies",subCategory:"action"});console.dir(l);const u=i(a(),s({fillWith:["publisher","author","book"],key:"bookInfo"}),o()).transform({level:"debug",message:"This message should be outside of the bookInfo object",publisher:"Lorem Press",author:"Albert Einstein",book:"4D Chess for Dummies",label:"myCustomLabel"});console.dir(u);const d=i(a(),s({fillWith:["publisher","author","book"],key:"bookInfo"}),s({fillWith:["purchasePrice","purchaseDate","transactionId"],key:"transactionInfo"}),s({fillExcept:["level","message","label","timestamp"]}),o()).transform({level:"debug",message:"This message should be outside of the bookInfo object",publisher:"Lorem Press",author:"Albert Einstein",book:"4D Chess for Dummies",label:"myCustomLabel",purchasePrice:"9.99",purchaseDate:"2.10.2018",transactionId:"123ABC"});console.dir(d)},function(e,t,n){const{format:r}=n(65),{combine:i,padLevels:o,simple:s}=r,{MESSAGE:a}=n(21),c=i(o({levels:{error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6}}),s()),l=c.transform({level:"info",message:"This is an info level message."}),u=c.transform({level:"error",message:"This is an error level message."}),d=c.transform({level:"verbose",message:"This is a verbose level message."});console.dir(l[a]),console.dir(u[a]),console.dir(d[a])},function(e,t,n){const{format:r}=n(65),i=r((e,t)=>(t.yell?e.message=e.message.toUpperCase():t.whisper&&(e.message=e.message.toLowerCase()),e)),o=i({yell:!0});console.dir(o.transform({level:"info",message:"sorry for making you YELL in your head!"},o.options));const s=i({whisper:!0});console.dir(s.transform({level:"info",message:"WHY ARE THEY MAKING US YELL SO MUCH!"},s.options))},function(e,t,n){"use strict";const r=n(39),i=n(253);e.exports=r(e=>{const t=+new Date;return this.diff=t-(this.prevTime||t),this.prevTime=t,e.ms="+"+i(this.diff),e})},function(e){e.exports=JSON.parse('{"name":"winston","description":"A logger for just about everything.","version":"3.2.1","author":"Charlie Robbins <charlie.robbins@gmail.com>","maintainers":["Jarrett Cruger <jcrugzz@gmail.com>","Chris Alderson <chrisalderson@protonmail.com>","David Hyde <dabh@stanford.edu>"],"repository":{"type":"git","url":"https://github.com/winstonjs/winston.git"},"keywords":["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],"dependencies":{"async":"^2.6.1","diagnostics":"^1.1.1","is-stream":"^1.1.0","logform":"^2.1.1","one-time":"0.0.4","readable-stream":"^3.1.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.3.0"},"devDependencies":{"@babel/cli":"^7.2.3","@babel/core":"^7.2.2","@babel/preset-env":"^7.3.1","@types/node":"^10.12.19","abstract-winston-transport":">= 0.5.1","assume":"^2.1.0","colors":"^1.3.3","cross-spawn-async":"^2.2.5","eslint-config-populist":"^4.2.0","hock":"^1.3.3","mocha":"^5.2.0","nyc":"^13.1.0","rimraf":"^2.6.3","split2":"^3.1.0","std-mocks":"^1.0.1","through2":"^3.0.0","winston-compat":"^0.1.4"},"main":"./lib/winston","browser":"./dist/winston","types":"./index.d.ts","scripts":{"lint":"populist lib/*.js lib/winston/*.js lib/winston/**/*.js","pretest":"npm run lint","test":"nyc --reporter=text --reporter lcov npm run test:mocha","test:mocha":"mocha test/*.test.js test/**/*.test.js --exit","build":"./node_modules/.bin/rimraf dist && babel lib -d dist","prepublishOnly":"npm run build"},"engines":{"node":">= 6.4.0"},"license":"MIT","_resolved":"https://registry.npmjs.org/winston/-/winston-3.2.1.tgz","_integrity":"sha512-zU6vgnS9dAWCEKg/QYigd6cgMVVNwyTzKs81XZtTFuRwJOcDdBg7AU0mXVyNbs7O5RH2zdv+BdNZUlx7mXPuOw==","_from":"winston@3.2.1"}')},function(e,t,n){"use strict";Object.defineProperty(t,"Console",{configurable:!0,enumerable:!0,get:()=>n(428)}),Object.defineProperty(t,"File",{configurable:!0,enumerable:!0,get:()=>n(434)}),Object.defineProperty(t,"Http",{configurable:!0,enumerable:!0,get:()=>n(481)}),Object.defineProperty(t,"Stream",{configurable:!0,enumerable:!0,get:()=>n(482)})},function(e,t,n){"use strict";const r=n(20),{LEVEL:i,MESSAGE:o}=n(21),s=n(80);e.exports=class extends s{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=e.eol||r.EOL,this.setMaxListeners(30)}log(e,t){return setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[i]]?(console._stderr?console._stderr.write(`${e[o]}${this.eol}`):console.error(e[o]),void(t&&t())):this.consoleWarnLevels[e[i]]?(console._stderr?console._stderr.write(`${e[o]}${this.eol}`):console.warn(e[o]),void(t&&t())):(console._stdout?console._stdout.write(`${e[o]}${this.eol}`):console.log(e[o]),void(t&&t()))}_stringArrayToSet(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce((e,n)=>{if("string"!=typeof n)throw new Error(t);return e[n]=!0,e},{})}}},function(e,t,n){var r=n(54),i=n(255);"disable"===process.env.READABLE_STREAM?e.exports=r&&r.Writable||i:e.exports=i},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";var r=n(124);e.exports=y;var i,o=n(432);y.ReadableState=v;n(72).EventEmitter;var s=function(e,t){return e.listeners(t).length},a=n(257),c=n(104).Buffer,l=global.Uint8Array||function(){};var u=n(173);u.inherits=n(60);var d=n(22),h=void 0;h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,f=n(433),g=n(258);u.inherits(y,a);var m=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(i=i||n(125));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(259).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function y(e){if(i=i||n(125),!(this instanceof y))return new y(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function b(e,t,n,r,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,w(e)}(e,s)):(i||(o=function(e,t){var n;r=t,c.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?S(e,s,t,!1):P(e,s)):S(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),P(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},y.prototype.unshift=function(e){return b(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return p||(p=n(259).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function w(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(_,e):_(e))}function _(e){h("emit readable"),e.emit("readable"),O(e)}function P(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(C,e,t))}function C(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function T(e){h("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),0===(e-=s)){s===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function D(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?D(this):w(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&D(this),null;var r,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&D(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var a=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?l:y;function c(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",m),e.removeListener("finish",v),e.removeListener("drain",u),e.removeListener("error",g),e.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",y),n.removeListener("data",f),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function l(){h("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",c);var u=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,O(e))}}(n);e.on("drain",u);var d=!1;var p=!1;function f(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==k(i.pipes,e))&&!d&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){h("onerror",t),y(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",v),y()}function v(){h("onfinish"),e.removeListener("close",m),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",m),e.once("finish",v),e.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=k(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&w(this):r.nextTick(T,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(I,e,t))}(this,e)),this},y.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<m.length;o++)e.on(m[o],this.emit.bind(this,m[o]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=R},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(104).Buffer,i=n(22);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,o=r.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,i=a,t.copy(n,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t,n){"use strict";const r=n(29),i=n(4),o=n(435),s=n(131),{MESSAGE:a}=n(21),{Stream:c,PassThrough:l}=n(105),u=n(80),d=n(132)("winston:file"),h=n(20),p=n(480);e.exports=class extends u{constructor(e={}){function t(t,...n){n.slice(1).forEach(n=>{if(e[n])throw new Error(`Cannot set ${n} and ${t} together`)})}if(super(e),this.name=e.name||"file",this._stream=new l,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)t("filename or dirname","stream"),this._basename=this.filename=e.filename?i.basename(e.filename):"winston.log",this.dirname=e.dirname||i.dirname(e.filename),this.options=e.options||{flags:"a"};else{if(!e.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),t("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=i.dirname(this._dest.path)}this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=e.eol||h.EOL,this.tailable=e.tailable||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,t=(()=>{})){if(this.silent)return t(),!0;if(this._drain)return void this._stream.once("drain",()=>{this._drain=!1,this.log(e,t)});if(this._rotate)return void this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,t)});const n=`${e[a]}${this.eol}`,r=Buffer.byteLength(n);this._pendingSize+=r,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);const i=this._stream.write(n,function(){this._size+=r,this._pendingSize-=r,d("logged %s %s",this._size,n),this.emit("logged",e),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream(()=>this._rotateFile()))}.bind(this));return i?t():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,t()})),d("written",i,this._drain),this.finishIfEnding(),i}query(e,t){"function"==typeof e&&(t=e,e={}),e=function(e){(e=e||{}).rows=e.rows||e.limit||10,e.start=e.start||0,e.until=e.until||new Date,"object"!=typeof e.until&&(e.until=new Date(e.until));e.from=e.from||e.until-864e5,"object"!=typeof e.from&&(e.from=new Date(e.from));return e.order=e.order||"desc",e.fields=e.fields,e}(e);const n=i.join(this.dirname,this.filename);let o="",s=[],a=0;const c=r.createReadStream(n,{encoding:"utf8"});function l(t,n){try{const n=JSON.parse(t);(function(t){if(!t)return;if("object"!=typeof t)return;const n=new Date(t.timestamp);if(e.from&&n<e.from||e.until&&n>e.until||e.level&&e.level!==t.level)return;return!0})(n)&&function(t){if(e.rows&&s.length>=e.rows&&"desc"!==e.order)return void(c.readable&&c.destroy());e.fields&&(t=e.fields.reduce((e,n)=>(e[n]=t[n],e),{}));"desc"===e.order&&s.length>=e.rows&&s.shift();s.push(t)}(n)}catch(e){n||c.emit("error",e)}}c.on("error",e=>{if(c.readable&&c.destroy(),t)return"ENOENT"!==e.code?t(e):t(null,s)}),c.on("data",t=>{const n=(t=(o+t).split(/\n+/)).length-1;let r=0;for(;r<n;r++)(!e.start||a>=e.start)&&l(t[r]),a++;o=t[n]}),c.on("close",()=>{o&&l(o,!0),"desc"===e.order&&(s=s.reverse()),t&&t(null,s)})}stream(e={}){const t=i.join(this.dirname,this.filename),n=new c,r={file:t,start:e.start};return n.destroy=p(r,(e,t)=>{if(e)return n.emit("error",e);try{n.emit("data",t),t=JSON.parse(t),n.emit("log",t)}catch(e){n.emit("error",e)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,t)=>{if(e)return this.emit("error",e);d("stat done: %s { size: %s }",this.filename,t),this._size=t,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(e){const t=this._getFile(),n=i.join(this.dirname,t);r.stat(n,(r,i)=>r&&"ENOENT"===r.code?(d("ENOENTok",n),this.filename=t,e(null,0)):r?(d(`err ${r.code} ${n}`),e(r)):!i||this._needsNewFile(i.size)?this._incFile(()=>this.stat(e)):(this.filename=t,void e(null,i.size)))}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=(()=>{})){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){const t=i.join(this.dirname,this.filename);d("create stream start",t,this.options);const n=r.createWriteStream(t,this.options).on("error",e=>d(e)).on("close",()=>d("close",n.path,n.bytesWritten)).on("open",()=>{d("file open ok",t),this.emit("open",t),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new l,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});if(d("create stream ok",t),this.zippedArchive){const e=s.createGzip();return e.pipe(n),e}return n}_incFile(e){d("_incFile",this.filename);const t=i.extname(this._basename),n=i.basename(this._basename,t);this.tailable?this._checkMaxFilesTailable(t,n,e):(this._created+=1,this._checkMaxFilesIncrementing(t,n,e))}_getFile(){const e=i.extname(this._basename),t=i.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created,r=!this.tailable&&this._created?`${t}${n}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?r+".gz":r}_checkMaxFilesIncrementing(e,t,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);const o=this._created-this.maxFiles,s=`${t}${0!==o?o:""}${e}${this.zippedArchive?".gz":""}`,a=i.join(this.dirname,s);r.unlink(a,n)}_checkMaxFilesTailable(e,t,n){const s=[];if(!this.maxFiles)return;const a=this.zippedArchive?".gz":"";for(let n=this.maxFiles-1;n>1;n--)s.push(function(n,o){let s=`${t}${n-1}${e}${a}`;const c=i.join(this.dirname,s);r.exists(c,l=>{if(!l)return o(null);s=`${t}${n}${e}${a}`,r.rename(c,i.join(this.dirname,s),o)})}.bind(this,n));o(s,()=>{r.rename(i.join(this.dirname,`${t}${e}`),i.join(this.dirname,`${t}1${e}${a}`),n)})}_createLogDirIfNotExist(e){r.existsSync(e)||r.mkdirSync(e,{recursive:!0})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(i.default,e,t)};var r=o(n(436)),i=o(n(443));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=n||r.default;var a=(0,i.default)(t)?[]:{};e(t,(function(e,t,n){(0,s.default)(e)((function(e,r){arguments.length>2&&(r=(0,o.default)(arguments,1)),a[t]=r,n(e)}))}),(function(e){n(e,a)}))};var r=a(n(174)),i=a(n(126)),o=a(n(177)),s=a(n(129));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){var r=n(127),i=n(128);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(175),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)((function(t,n){var i;try{i=e.apply(this,t)}catch(e){return n(e)}(0,r.default)(i)&&"function"==typeof i.then?i.then((function(e){a(n,null,e)}),(function(e){a(n,e.message?e:new Error(e))})):n(null,i)}))};var r=s(n(128)),i=s(n(441)),o=s(n(442));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){try{e(t,n)}catch(e){(0,o.default)(c,e)}}function c(e){throw e}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,o.default)(arguments),n=t.pop();e.call(this,t,n)}};var r,i=n(177),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=l,t.wrap=u;var r,i=n(177),o=(r=i)&&r.__esModule?r:{default:r};var s,a=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,c=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;function l(e){setTimeout(e,0)}function u(e){return function(t){var n=(0,o.default)(arguments,1);e((function(){t.apply(null,n)}))}}s=a?setImmediate:c?process.nextTick:l,t.default=u(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(262)),i=o(n(268));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)(r.default,1),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,c){if(c=(0,i.default)(c||r.default),e<=0||!t)return c(null);var l=(0,o.default)(t),u=!1,d=0,h=!1;function p(e,t){if(d-=1,e)u=!0,c(e);else{if(t===a.default||u&&d<=0)return u=!0,c(null);h||f()}}function f(){for(h=!0;d<e&&!u;){var t=l();if(null===t)return u=!0,void(d<=0&&c(null));d+=1,n(t.value,t.key,(0,s.default)(p))}h=!1}f()}};var r=c(n(174)),i=c(n(263)),o=c(n(445)),s=c(n(266)),a=c(n(267));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t=(0,i.default)(e);return t?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(t):(n=e,s=(0,o.default)(n),a=-1,c=s.length,function(){var e=s[++a];return a<c?{value:n[e],key:e}:null});var n,s,a,c};var r=s(n(126)),i=s(n(446)),o=s(n(447));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r&&e[r]&&e[r]()};var r="function"==typeof Symbol&&Symbol.iterator;e.exports=t.default},function(e,t,n){var r=n(448),i=n(458),o=n(126);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(449),i=n(264),o=n(265),s=n(451),a=n(453),c=n(454),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),d=!n&&!u&&s(e),h=!n&&!u&&!d&&c(e),p=n||u||d||h,f=p?r(e.length,String):[],g=f.length;for(var m in e)!t&&!l.call(e,m)||p&&("length"==m||d&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(127),i=n(130);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t,n){(function(e){var r=n(176),i=n(452),o=t&&!t.nodeType&&t,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;e.exports=c}).call(this,n(178)(e))},function(e,t){e.exports=function(){return!1}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(455),i=n(456),o=n(457),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},function(e,t,n){var r=n(127),i=n(261),o=n(130),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(260),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(this,n(178)(e))},function(e,t,n){var r=n(459),i=n(460),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(461)(Object.keys,Object);e.exports=r},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(66).Buffer,o=n(22).inspect,s=o&&o.custom||"inspect";e.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,o=i.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,r=a,i.prototype.copy.call(t,n,r),a+=s.data.length,s=s.next;return o},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r},t._getBuffer=function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,s),0===(e-=s)){s===o.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++r}return this.length-=r,t},t[s]=function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t,n){"use strict";var r=new Set;e.exports.emitExperimentalWarning=process.emitWarning?function(e){if(!r.has(e)){var t=e+" is an experimental feature. This feature could change at any time";r.add(e),process.emitWarning(t,"ExperimentalWarning")}}:function(){}},function(e,t,n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(179),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[s]=null,e[a]=null,t(p(n,!1)))}}function g(e){process.nextTick(f,e)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[c]?n(e[c]):t(p(void 0,!0))}))}));var n,r=this[u];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[d](n,r)}),r)}}(r,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(p(i,!1));n=new Promise(this[d])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),r),m);e.exports=function(e){var t,n=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var r=n[h].read();r?(n[u]=null,n[s]=null,n[a]=null,e(p(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[u]=null,n[s]=null,n[a]=null,t(e)),void(n[c]=e)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[a]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",g.bind(null,n)),n}},function(e,t,n){"use strict";e.exports=i;var r=n(275);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(60)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(93).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(179)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return c(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(l),o||(s.forEach(l),i(r))}))}));return t.reduce(u)}},function(e,t,n){"use strict";var r=n(468),i=n(474);e.exports=function(e,t){var n=e.split(t||":"),o=i(n[0]);if(!n.length)return o;for(var s=0,a=n.length-1;s<a;s++)o=r(o).mix(r(i(n[s+1]))).saturate(1).hex();return o}},function(e,t,n){"use strict";var r=n(469),i=n(472),o=[].slice,s=["keyword","gray","hex"],a={};Object.keys(i).forEach((function(e){a[o.call(i[e].labels).sort().join("")]=e}));var c={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in s&&(t=null),t&&!(t in i))throw new Error("Unknown model: "+t);var n,u;if(e)if(e instanceof l)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var d=r.get(e);if(null===d)throw new Error("Unable to parse color from string: "+e);this.model=d.model,u=i[this.model].channels,this.color=d.value.slice(0,u),this.valpha="number"==typeof d.value[u]?d.value[u]:1}else if(e.length){this.model=t||"rgb",u=i[this.model].channels;var h=o.call(e,0,u);this.color=p(h,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var f=Object.keys(e);"alpha"in e&&(f.splice(f.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var g=f.sort().join("");if(!(g in a))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=a[g];var m=i[this.model].labels,v=[];for(n=0;n<m.length;n++)v.push(e[m[n]]);this.color=p(v)}else this.model="rgb",this.color=[0,0,0],this.valpha=1;if(c[this.model])for(u=i[this.model].channels,n=0;n<u;n++){var y=c[this.model][n];y&&(this.color[n]=y(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(c[e]||(c[e]=[]))[t]=n})),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[e]()).color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function d(e){return function(t){return Math.max(0,Math.min(e,t))}}function h(e){return Array.isArray(e)?e:[e]}function p(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=i[this.model].channels,n=i[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new l(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,d(255)),green:u("rgb",1,d(255)),blue:u("rgb",2,d(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,d(100)),lightness:u("hsl",2,d(100)),saturationv:u("hsv",1,d(100)),value:u("hsv",2,d(100)),chroma:u("hcg",1,d(100)),gray:u("hcg",2,d(100)),white:u("hwb",1,d(100)),wblack:u("hwb",2,d(100)),cyan:u("cmyk",0,d(100)),magenta:u("cmyk",1,d(100)),yellow:u("cmyk",2,d(100)),black:u("cmyk",3,d(100)),x:u("xyz",0,d(100)),y:u("xyz",1,d(100)),z:u("xyz",2,d(100)),l:u("lab",0,d(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new l(e):i[this.model].keyword(this.color)},hex:function(e){return arguments.length?new l(e):r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,o=2*i-1,s=n.alpha()-r.alpha(),a=((o*s==-1?o:(o+s)/(1+o*s))+1)/2,c=1-a;return l.rgb(a*n.red()+c*r.red(),a*n.green()+c*r.green(),a*n.blue()+c*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(i).forEach((function(e){if(-1===s.indexOf(e)){var t=i[e].channels;l.prototype[e]=function(){if(this.model===e)return new l(this);if(arguments.length)return new l(arguments,e);var n="number"==typeof arguments[t]?t:this.valpha;return new l(h(i[this.model][e].raw(this.color)).concat(n),e)},l[e]=function(n){return"number"==typeof n&&(n=p(o.call(arguments),t)),new l(n,e)}}})),e.exports=l},function(e,t,n){var r=n(276),i=n(470),o={};for(var s in r)r.hasOwnProperty(s)&&(o[r[s]]=s);var a=e.exports={to:{},get:{}};function c(e,t,n){return Math.min(Math.max(t,e),n)}function l(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}a.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=a.get.hsl(e),n="hsl";break;case"hwb":t=a.get.hwb(e),n="hwb";break;default:t=a.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},a.get.rgb=function(e){if(!e)return null;var t,n,i,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=t[2],t=t[1],n=0;n<3;n++){var s=2*n;o[n]=parseInt(t.slice(s,s+2),16)}i&&(o[3]=Math.round(parseInt(i,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(i=(t=t[1])[3],n=0;n<3;n++)o[n]=parseInt(t[n]+t[n],16);i&&(o[3]=Math.round(parseInt(i+i,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(t[n+1],0);t[4]&&(o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(o=r[t[1]])?(o[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(o[3]=parseFloat(t[4]))}for(n=0;n<3;n++)o[n]=c(o[n],0,255);return o[3]=c(o[3],0,1),o},a.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},a.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(n)?1:n,0,1)]}return null},a.to.hex=function(){var e=i(arguments);return"#"+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(255*e[3])):"")},a.to.rgb=function(){var e=i(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},a.to.rgb.percent=function(){var e=i(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},a.to.hsl=function(){var e=i(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},a.to.hwb=function(){var e=i(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},a.to.keyword=function(e){return o[e.slice(0,3)]}},function(e,t,n){"use strict";var r=n(471),i=Array.prototype.concat,o=Array.prototype.slice,s=e.exports=function(e){for(var t=[],n=0,s=e.length;n<s;n++){var a=e[n];r(a)?t=i.call(t,o.call(a)):t.push(a)}return t};s.wrap=function(e){return function(){return e(s(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,n){var r=n(277),i=n(473),o={};Object.keys(r).forEach((function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:r[e].channels}),Object.defineProperty(o[e],"labels",{value:r[e].labels});var t=i(e);Object.keys(t).forEach((function(n){var r=t[n];o[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),o[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)}))})),e.exports=o},function(e,t,n){var r=n(277);function i(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,i=0;i<n;i++)e[t[i]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),s=o.length,a=0;a<s;a++){var c=o[a],l=t[c];-1===l.distance&&(l.distance=t[i].distance+1,l.parent=i,n.unshift(c))}return t}function o(e,t){return function(n){return t(e(n))}}function s(e,t){for(var n=[t[e].parent,e],i=r[t[e].parent][e],s=t[e].parent;t[s].parent;)n.unshift(t[s].parent),i=o(r[t[s].parent][s],i),s=t[s].parent;return i.conversion=n,i}e.exports=function(e){for(var t=i(e),n={},r=Object.keys(t),o=r.length,a=0;a<o;a++){var c=r[a];null!==t[c].parent&&(n[c]=s(c,t))}return n}},function(e,t,n){"use strict";e.exports=function(e){for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));var r=Math.floor(Math.abs(1e4*Math.sin(n)%1*16777216)).toString(16);return"#"+Array(6-r.length+1).join("0")+r}},function(e,t,n){"use strict";var r=n(476);e.exports=function(e,t){var n,i=r(),o=0;for(t=t||["diagnostics","debug"];o<t.length&&!(n=i[t[o]]);o++);if(!n)return!1;for(t=n.split(/[\s,]+/),o=0;o<t.length;o++)if("-"!==(n=t[o].replace("*",".*?")).charAt(0)){if(new RegExp("^"+n+"$").test(e))return!0}else if(new RegExp("^"+n.substr(1)+"$").test(e))return!1;return!1}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){if(e=e||{},"object"==typeof process&&"object"==typeof process.env&&i.merge(e,process.env),"undefined"!=typeof window){if("string"===window.name&&window.name.length&&i.merge(e,i.parse(window.name)),window.localStorage)try{i.merge(e,i.parse(window.localStorage.env||window.localStorage.debug))}catch(e){}"object"==typeof window.location&&"string"==typeof window.location.hash&&window.location.hash.length&&i.merge(e,i.parse("#"===window.location.hash.charAt(0)?window.location.hash.slice(1):window.location.hash))}var t,n;for(t in e)(n=t.toLowerCase())in e||(e[n]=e[t]);return e}i.merge=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},i.parse=function(e){var t,n=/([^=?&]+)=([^&]*)/g,r={};if(!e)return r;for(;t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r.env||r},e.exports=i},function(e,t,n){"use strict";var r=n(478);function i(e,t){return t?new i(e).style(t):this instanceof i?void(this.text=e):new i(e)}i.prototype.prefix="[",i.prototype.suffix="m",i.prototype.hex=function(e){3===(e="#"===e[0]?e.substring(1):e).length&&((e=e.split(""))[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var t=e.substring(0,2),n=e.substring(2,4),r=e.substring(4,6);return[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},i.prototype.rgb=function(e,t,n){var r=e/255*5,i=t/255*5,o=n/255*5;return this.ansi(r,i,o)},i.prototype.ansi=function(e,t,n){return 16+36*Math.round(e)+6*Math.round(t)+Math.round(n)},i.prototype.reset=function(){return this.prefix+"39;49"+this.suffix},i.prototype.style=function(e){return/^#?(?:[0-9a-fA-F]{3}){1,2}$/.test(e)||(e=r(e)),this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()},e.exports=i},function(e,t,n){var r=n(479),i=r.filter((function(e){return!!e.css})),o=r.filter((function(e){return!!e.vga}));e.exports=function(t){var n=e.exports.get(t);return n&&n.value},e.exports.get=function(e){return e=(e=e||"").trim().toLowerCase(),r.filter((function(t){return t.name.toLowerCase()===e})).pop()},e.exports.all=e.exports.get.all=function(){return r},e.exports.get.css=function(e){return e?(e=(e=e||"").trim().toLowerCase(),i.filter((function(t){return t.name.toLowerCase()===e})).pop()):i},e.exports.get.vga=function(e){return e?(e=(e=e||"").trim().toLowerCase(),o.filter((function(t){return t.name.toLowerCase()===e})).pop()):o}},function(e,t){e.exports=[{value:"#B0171F",name:"indian red"},{value:"#DC143C",css:!0,name:"crimson"},{value:"#FFB6C1",css:!0,name:"lightpink"},{value:"#FFAEB9",name:"lightpink 1"},{value:"#EEA2AD",name:"lightpink 2"},{value:"#CD8C95",name:"lightpink 3"},{value:"#8B5F65",name:"lightpink 4"},{value:"#FFC0CB",css:!0,name:"pink"},{value:"#FFB5C5",name:"pink 1"},{value:"#EEA9B8",name:"pink 2"},{value:"#CD919E",name:"pink 3"},{value:"#8B636C",name:"pink 4"},{value:"#DB7093",css:!0,name:"palevioletred"},{value:"#FF82AB",name:"palevioletred 1"},{value:"#EE799F",name:"palevioletred 2"},{value:"#CD6889",name:"palevioletred 3"},{value:"#8B475D",name:"palevioletred 4"},{value:"#FFF0F5",name:"lavenderblush 1"},{value:"#FFF0F5",css:!0,name:"lavenderblush"},{value:"#EEE0E5",name:"lavenderblush 2"},{value:"#CDC1C5",name:"lavenderblush 3"},{value:"#8B8386",name:"lavenderblush 4"},{value:"#FF3E96",name:"violetred 1"},{value:"#EE3A8C",name:"violetred 2"},{value:"#CD3278",name:"violetred 3"},{value:"#8B2252",name:"violetred 4"},{value:"#FF69B4",css:!0,name:"hotpink"},{value:"#FF6EB4",name:"hotpink 1"},{value:"#EE6AA7",name:"hotpink 2"},{value:"#CD6090",name:"hotpink 3"},{value:"#8B3A62",name:"hotpink 4"},{value:"#872657",name:"raspberry"},{value:"#FF1493",name:"deeppink 1"},{value:"#FF1493",css:!0,name:"deeppink"},{value:"#EE1289",name:"deeppink 2"},{value:"#CD1076",name:"deeppink 3"},{value:"#8B0A50",name:"deeppink 4"},{value:"#FF34B3",name:"maroon 1"},{value:"#EE30A7",name:"maroon 2"},{value:"#CD2990",name:"maroon 3"},{value:"#8B1C62",name:"maroon 4"},{value:"#C71585",css:!0,name:"mediumvioletred"},{value:"#D02090",name:"violetred"},{value:"#DA70D6",css:!0,name:"orchid"},{value:"#FF83FA",name:"orchid 1"},{value:"#EE7AE9",name:"orchid 2"},{value:"#CD69C9",name:"orchid 3"},{value:"#8B4789",name:"orchid 4"},{value:"#D8BFD8",css:!0,name:"thistle"},{value:"#FFE1FF",name:"thistle 1"},{value:"#EED2EE",name:"thistle 2"},{value:"#CDB5CD",name:"thistle 3"},{value:"#8B7B8B",name:"thistle 4"},{value:"#FFBBFF",name:"plum 1"},{value:"#EEAEEE",name:"plum 2"},{value:"#CD96CD",name:"plum 3"},{value:"#8B668B",name:"plum 4"},{value:"#DDA0DD",css:!0,name:"plum"},{value:"#EE82EE",css:!0,name:"violet"},{value:"#FF00FF",vga:!0,name:"magenta"},{value:"#FF00FF",vga:!0,css:!0,name:"fuchsia"},{value:"#EE00EE",name:"magenta 2"},{value:"#CD00CD",name:"magenta 3"},{value:"#8B008B",name:"magenta 4"},{value:"#8B008B",css:!0,name:"darkmagenta"},{value:"#800080",vga:!0,css:!0,name:"purple"},{value:"#BA55D3",css:!0,name:"mediumorchid"},{value:"#E066FF",name:"mediumorchid 1"},{value:"#D15FEE",name:"mediumorchid 2"},{value:"#B452CD",name:"mediumorchid 3"},{value:"#7A378B",name:"mediumorchid 4"},{value:"#9400D3",css:!0,name:"darkviolet"},{value:"#9932CC",css:!0,name:"darkorchid"},{value:"#BF3EFF",name:"darkorchid 1"},{value:"#B23AEE",name:"darkorchid 2"},{value:"#9A32CD",name:"darkorchid 3"},{value:"#68228B",name:"darkorchid 4"},{value:"#4B0082",css:!0,name:"indigo"},{value:"#8A2BE2",css:!0,name:"blueviolet"},{value:"#9B30FF",name:"purple 1"},{value:"#912CEE",name:"purple 2"},{value:"#7D26CD",name:"purple 3"},{value:"#551A8B",name:"purple 4"},{value:"#9370DB",css:!0,name:"mediumpurple"},{value:"#AB82FF",name:"mediumpurple 1"},{value:"#9F79EE",name:"mediumpurple 2"},{value:"#8968CD",name:"mediumpurple 3"},{value:"#5D478B",name:"mediumpurple 4"},{value:"#483D8B",css:!0,name:"darkslateblue"},{value:"#8470FF",name:"lightslateblue"},{value:"#7B68EE",css:!0,name:"mediumslateblue"},{value:"#6A5ACD",css:!0,name:"slateblue"},{value:"#836FFF",name:"slateblue 1"},{value:"#7A67EE",name:"slateblue 2"},{value:"#6959CD",name:"slateblue 3"},{value:"#473C8B",name:"slateblue 4"},{value:"#F8F8FF",css:!0,name:"ghostwhite"},{value:"#E6E6FA",css:!0,name:"lavender"},{value:"#0000FF",vga:!0,css:!0,name:"blue"},{value:"#0000EE",name:"blue 2"},{value:"#0000CD",name:"blue 3"},{value:"#0000CD",css:!0,name:"mediumblue"},{value:"#00008B",name:"blue 4"},{value:"#00008B",css:!0,name:"darkblue"},{value:"#000080",vga:!0,css:!0,name:"navy"},{value:"#191970",css:!0,name:"midnightblue"},{value:"#3D59AB",name:"cobalt"},{value:"#4169E1",css:!0,name:"royalblue"},{value:"#4876FF",name:"royalblue 1"},{value:"#436EEE",name:"royalblue 2"},{value:"#3A5FCD",name:"royalblue 3"},{value:"#27408B",name:"royalblue 4"},{value:"#6495ED",css:!0,name:"cornflowerblue"},{value:"#B0C4DE",css:!0,name:"lightsteelblue"},{value:"#CAE1FF",name:"lightsteelblue 1"},{value:"#BCD2EE",name:"lightsteelblue 2"},{value:"#A2B5CD",name:"lightsteelblue 3"},{value:"#6E7B8B",name:"lightsteelblue 4"},{value:"#778899",css:!0,name:"lightslategray"},{value:"#708090",css:!0,name:"slategray"},{value:"#C6E2FF",name:"slategray 1"},{value:"#B9D3EE",name:"slategray 2"},{value:"#9FB6CD",name:"slategray 3"},{value:"#6C7B8B",name:"slategray 4"},{value:"#1E90FF",name:"dodgerblue 1"},{value:"#1E90FF",css:!0,name:"dodgerblue"},{value:"#1C86EE",name:"dodgerblue 2"},{value:"#1874CD",name:"dodgerblue 3"},{value:"#104E8B",name:"dodgerblue 4"},{value:"#F0F8FF",css:!0,name:"aliceblue"},{value:"#4682B4",css:!0,name:"steelblue"},{value:"#63B8FF",name:"steelblue 1"},{value:"#5CACEE",name:"steelblue 2"},{value:"#4F94CD",name:"steelblue 3"},{value:"#36648B",name:"steelblue 4"},{value:"#87CEFA",css:!0,name:"lightskyblue"},{value:"#B0E2FF",name:"lightskyblue 1"},{value:"#A4D3EE",name:"lightskyblue 2"},{value:"#8DB6CD",name:"lightskyblue 3"},{value:"#607B8B",name:"lightskyblue 4"},{value:"#87CEFF",name:"skyblue 1"},{value:"#7EC0EE",name:"skyblue 2"},{value:"#6CA6CD",name:"skyblue 3"},{value:"#4A708B",name:"skyblue 4"},{value:"#87CEEB",css:!0,name:"skyblue"},{value:"#00BFFF",name:"deepskyblue 1"},{value:"#00BFFF",css:!0,name:"deepskyblue"},{value:"#00B2EE",name:"deepskyblue 2"},{value:"#009ACD",name:"deepskyblue 3"},{value:"#00688B",name:"deepskyblue 4"},{value:"#33A1C9",name:"peacock"},{value:"#ADD8E6",css:!0,name:"lightblue"},{value:"#BFEFFF",name:"lightblue 1"},{value:"#B2DFEE",name:"lightblue 2"},{value:"#9AC0CD",name:"lightblue 3"},{value:"#68838B",name:"lightblue 4"},{value:"#B0E0E6",css:!0,name:"powderblue"},{value:"#98F5FF",name:"cadetblue 1"},{value:"#8EE5EE",name:"cadetblue 2"},{value:"#7AC5CD",name:"cadetblue 3"},{value:"#53868B",name:"cadetblue 4"},{value:"#00F5FF",name:"turquoise 1"},{value:"#00E5EE",name:"turquoise 2"},{value:"#00C5CD",name:"turquoise 3"},{value:"#00868B",name:"turquoise 4"},{value:"#5F9EA0",css:!0,name:"cadetblue"},{value:"#00CED1",css:!0,name:"darkturquoise"},{value:"#F0FFFF",name:"azure 1"},{value:"#F0FFFF",css:!0,name:"azure"},{value:"#E0EEEE",name:"azure 2"},{value:"#C1CDCD",name:"azure 3"},{value:"#838B8B",name:"azure 4"},{value:"#E0FFFF",name:"lightcyan 1"},{value:"#E0FFFF",css:!0,name:"lightcyan"},{value:"#D1EEEE",name:"lightcyan 2"},{value:"#B4CDCD",name:"lightcyan 3"},{value:"#7A8B8B",name:"lightcyan 4"},{value:"#BBFFFF",name:"paleturquoise 1"},{value:"#AEEEEE",name:"paleturquoise 2"},{value:"#AEEEEE",css:!0,name:"paleturquoise"},{value:"#96CDCD",name:"paleturquoise 3"},{value:"#668B8B",name:"paleturquoise 4"},{value:"#2F4F4F",css:!0,name:"darkslategray"},{value:"#97FFFF",name:"darkslategray 1"},{value:"#8DEEEE",name:"darkslategray 2"},{value:"#79CDCD",name:"darkslategray 3"},{value:"#528B8B",name:"darkslategray 4"},{value:"#00FFFF",name:"cyan"},{value:"#00FFFF",css:!0,name:"aqua"},{value:"#00EEEE",name:"cyan 2"},{value:"#00CDCD",name:"cyan 3"},{value:"#008B8B",name:"cyan 4"},{value:"#008B8B",css:!0,name:"darkcyan"},{value:"#008080",vga:!0,css:!0,name:"teal"},{value:"#48D1CC",css:!0,name:"mediumturquoise"},{value:"#20B2AA",css:!0,name:"lightseagreen"},{value:"#03A89E",name:"manganeseblue"},{value:"#40E0D0",css:!0,name:"turquoise"},{value:"#808A87",name:"coldgrey"},{value:"#00C78C",name:"turquoiseblue"},{value:"#7FFFD4",name:"aquamarine 1"},{value:"#7FFFD4",css:!0,name:"aquamarine"},{value:"#76EEC6",name:"aquamarine 2"},{value:"#66CDAA",name:"aquamarine 3"},{value:"#66CDAA",css:!0,name:"mediumaquamarine"},{value:"#458B74",name:"aquamarine 4"},{value:"#00FA9A",css:!0,name:"mediumspringgreen"},{value:"#F5FFFA",css:!0,name:"mintcream"},{value:"#00FF7F",css:!0,name:"springgreen"},{value:"#00EE76",name:"springgreen 1"},{value:"#00CD66",name:"springgreen 2"},{value:"#008B45",name:"springgreen 3"},{value:"#3CB371",css:!0,name:"mediumseagreen"},{value:"#54FF9F",name:"seagreen 1"},{value:"#4EEE94",name:"seagreen 2"},{value:"#43CD80",name:"seagreen 3"},{value:"#2E8B57",name:"seagreen 4"},{value:"#2E8B57",css:!0,name:"seagreen"},{value:"#00C957",name:"emeraldgreen"},{value:"#BDFCC9",name:"mint"},{value:"#3D9140",name:"cobaltgreen"},{value:"#F0FFF0",name:"honeydew 1"},{value:"#F0FFF0",css:!0,name:"honeydew"},{value:"#E0EEE0",name:"honeydew 2"},{value:"#C1CDC1",name:"honeydew 3"},{value:"#838B83",name:"honeydew 4"},{value:"#8FBC8F",css:!0,name:"darkseagreen"},{value:"#C1FFC1",name:"darkseagreen 1"},{value:"#B4EEB4",name:"darkseagreen 2"},{value:"#9BCD9B",name:"darkseagreen 3"},{value:"#698B69",name:"darkseagreen 4"},{value:"#98FB98",css:!0,name:"palegreen"},{value:"#9AFF9A",name:"palegreen 1"},{value:"#90EE90",name:"palegreen 2"},{value:"#90EE90",css:!0,name:"lightgreen"},{value:"#7CCD7C",name:"palegreen 3"},{value:"#548B54",name:"palegreen 4"},{value:"#32CD32",css:!0,name:"limegreen"},{value:"#228B22",css:!0,name:"forestgreen"},{value:"#00FF00",vga:!0,name:"green 1"},{value:"#00FF00",vga:!0,css:!0,name:"lime"},{value:"#00EE00",name:"green 2"},{value:"#00CD00",name:"green 3"},{value:"#008B00",name:"green 4"},{value:"#008000",vga:!0,css:!0,name:"green"},{value:"#006400",css:!0,name:"darkgreen"},{value:"#308014",name:"sapgreen"},{value:"#7CFC00",css:!0,name:"lawngreen"},{value:"#7FFF00",name:"chartreuse 1"},{value:"#7FFF00",css:!0,name:"chartreuse"},{value:"#76EE00",name:"chartreuse 2"},{value:"#66CD00",name:"chartreuse 3"},{value:"#458B00",name:"chartreuse 4"},{value:"#ADFF2F",css:!0,name:"greenyellow"},{value:"#CAFF70",name:"darkolivegreen 1"},{value:"#BCEE68",name:"darkolivegreen 2"},{value:"#A2CD5A",name:"darkolivegreen 3"},{value:"#6E8B3D",name:"darkolivegreen 4"},{value:"#556B2F",css:!0,name:"darkolivegreen"},{value:"#6B8E23",css:!0,name:"olivedrab"},{value:"#C0FF3E",name:"olivedrab 1"},{value:"#B3EE3A",name:"olivedrab 2"},{value:"#9ACD32",name:"olivedrab 3"},{value:"#9ACD32",css:!0,name:"yellowgreen"},{value:"#698B22",name:"olivedrab 4"},{value:"#FFFFF0",name:"ivory 1"},{value:"#FFFFF0",css:!0,name:"ivory"},{value:"#EEEEE0",name:"ivory 2"},{value:"#CDCDC1",name:"ivory 3"},{value:"#8B8B83",name:"ivory 4"},{value:"#F5F5DC",css:!0,name:"beige"},{value:"#FFFFE0",name:"lightyellow 1"},{value:"#FFFFE0",css:!0,name:"lightyellow"},{value:"#EEEED1",name:"lightyellow 2"},{value:"#CDCDB4",name:"lightyellow 3"},{value:"#8B8B7A",name:"lightyellow 4"},{value:"#FAFAD2",css:!0,name:"lightgoldenrodyellow"},{value:"#FFFF00",vga:!0,name:"yellow 1"},{value:"#FFFF00",vga:!0,css:!0,name:"yellow"},{value:"#EEEE00",name:"yellow 2"},{value:"#CDCD00",name:"yellow 3"},{value:"#8B8B00",name:"yellow 4"},{value:"#808069",name:"warmgrey"},{value:"#808000",vga:!0,css:!0,name:"olive"},{value:"#BDB76B",css:!0,name:"darkkhaki"},{value:"#FFF68F",name:"khaki 1"},{value:"#EEE685",name:"khaki 2"},{value:"#CDC673",name:"khaki 3"},{value:"#8B864E",name:"khaki 4"},{value:"#F0E68C",css:!0,name:"khaki"},{value:"#EEE8AA",css:!0,name:"palegoldenrod"},{value:"#FFFACD",name:"lemonchiffon 1"},{value:"#FFFACD",css:!0,name:"lemonchiffon"},{value:"#EEE9BF",name:"lemonchiffon 2"},{value:"#CDC9A5",name:"lemonchiffon 3"},{value:"#8B8970",name:"lemonchiffon 4"},{value:"#FFEC8B",name:"lightgoldenrod 1"},{value:"#EEDC82",name:"lightgoldenrod 2"},{value:"#CDBE70",name:"lightgoldenrod 3"},{value:"#8B814C",name:"lightgoldenrod 4"},{value:"#E3CF57",name:"banana"},{value:"#FFD700",name:"gold 1"},{value:"#FFD700",css:!0,name:"gold"},{value:"#EEC900",name:"gold 2"},{value:"#CDAD00",name:"gold 3"},{value:"#8B7500",name:"gold 4"},{value:"#FFF8DC",name:"cornsilk 1"},{value:"#FFF8DC",css:!0,name:"cornsilk"},{value:"#EEE8CD",name:"cornsilk 2"},{value:"#CDC8B1",name:"cornsilk 3"},{value:"#8B8878",name:"cornsilk 4"},{value:"#DAA520",css:!0,name:"goldenrod"},{value:"#FFC125",name:"goldenrod 1"},{value:"#EEB422",name:"goldenrod 2"},{value:"#CD9B1D",name:"goldenrod 3"},{value:"#8B6914",name:"goldenrod 4"},{value:"#B8860B",css:!0,name:"darkgoldenrod"},{value:"#FFB90F",name:"darkgoldenrod 1"},{value:"#EEAD0E",name:"darkgoldenrod 2"},{value:"#CD950C",name:"darkgoldenrod 3"},{value:"#8B6508",name:"darkgoldenrod 4"},{value:"#FFA500",name:"orange 1"},{value:"#FF8000",css:!0,name:"orange"},{value:"#EE9A00",name:"orange 2"},{value:"#CD8500",name:"orange 3"},{value:"#8B5A00",name:"orange 4"},{value:"#FFFAF0",css:!0,name:"floralwhite"},{value:"#FDF5E6",css:!0,name:"oldlace"},{value:"#F5DEB3",css:!0,name:"wheat"},{value:"#FFE7BA",name:"wheat 1"},{value:"#EED8AE",name:"wheat 2"},{value:"#CDBA96",name:"wheat 3"},{value:"#8B7E66",name:"wheat 4"},{value:"#FFE4B5",css:!0,name:"moccasin"},{value:"#FFEFD5",css:!0,name:"papayawhip"},{value:"#FFEBCD",css:!0,name:"blanchedalmond"},{value:"#FFDEAD",name:"navajowhite 1"},{value:"#FFDEAD",css:!0,name:"navajowhite"},{value:"#EECFA1",name:"navajowhite 2"},{value:"#CDB38B",name:"navajowhite 3"},{value:"#8B795E",name:"navajowhite 4"},{value:"#FCE6C9",name:"eggshell"},{value:"#D2B48C",css:!0,name:"tan"},{value:"#9C661F",name:"brick"},{value:"#FF9912",name:"cadmiumyellow"},{value:"#FAEBD7",css:!0,name:"antiquewhite"},{value:"#FFEFDB",name:"antiquewhite 1"},{value:"#EEDFCC",name:"antiquewhite 2"},{value:"#CDC0B0",name:"antiquewhite 3"},{value:"#8B8378",name:"antiquewhite 4"},{value:"#DEB887",css:!0,name:"burlywood"},{value:"#FFD39B",name:"burlywood 1"},{value:"#EEC591",name:"burlywood 2"},{value:"#CDAA7D",name:"burlywood 3"},{value:"#8B7355",name:"burlywood 4"},{value:"#FFE4C4",name:"bisque 1"},{value:"#FFE4C4",css:!0,name:"bisque"},{value:"#EED5B7",name:"bisque 2"},{value:"#CDB79E",name:"bisque 3"},{value:"#8B7D6B",name:"bisque 4"},{value:"#E3A869",name:"melon"},{value:"#ED9121",name:"carrot"},{value:"#FF8C00",css:!0,name:"darkorange"},{value:"#FF7F00",name:"darkorange 1"},{value:"#EE7600",name:"darkorange 2"},{value:"#CD6600",name:"darkorange 3"},{value:"#8B4500",name:"darkorange 4"},{value:"#FFA54F",name:"tan 1"},{value:"#EE9A49",name:"tan 2"},{value:"#CD853F",name:"tan 3"},{value:"#CD853F",css:!0,name:"peru"},{value:"#8B5A2B",name:"tan 4"},{value:"#FAF0E6",css:!0,name:"linen"},{value:"#FFDAB9",name:"peachpuff 1"},{value:"#FFDAB9",css:!0,name:"peachpuff"},{value:"#EECBAD",name:"peachpuff 2"},{value:"#CDAF95",name:"peachpuff 3"},{value:"#8B7765",name:"peachpuff 4"},{value:"#FFF5EE",name:"seashell 1"},{value:"#FFF5EE",css:!0,name:"seashell"},{value:"#EEE5DE",name:"seashell 2"},{value:"#CDC5BF",name:"seashell 3"},{value:"#8B8682",name:"seashell 4"},{value:"#F4A460",css:!0,name:"sandybrown"},{value:"#C76114",name:"rawsienna"},{value:"#D2691E",css:!0,name:"chocolate"},{value:"#FF7F24",name:"chocolate 1"},{value:"#EE7621",name:"chocolate 2"},{value:"#CD661D",name:"chocolate 3"},{value:"#8B4513",name:"chocolate 4"},{value:"#8B4513",css:!0,name:"saddlebrown"},{value:"#292421",name:"ivoryblack"},{value:"#FF7D40",name:"flesh"},{value:"#FF6103",name:"cadmiumorange"},{value:"#8A360F",name:"burntsienna"},{value:"#A0522D",css:!0,name:"sienna"},{value:"#FF8247",name:"sienna 1"},{value:"#EE7942",name:"sienna 2"},{value:"#CD6839",name:"sienna 3"},{value:"#8B4726",name:"sienna 4"},{value:"#FFA07A",name:"lightsalmon 1"},{value:"#FFA07A",css:!0,name:"lightsalmon"},{value:"#EE9572",name:"lightsalmon 2"},{value:"#CD8162",name:"lightsalmon 3"},{value:"#8B5742",name:"lightsalmon 4"},{value:"#FF7F50",css:!0,name:"coral"},{value:"#FF4500",name:"orangered 1"},{value:"#FF4500",css:!0,name:"orangered"},{value:"#EE4000",name:"orangered 2"},{value:"#CD3700",name:"orangered 3"},{value:"#8B2500",name:"orangered 4"},{value:"#5E2612",name:"sepia"},{value:"#E9967A",css:!0,name:"darksalmon"},{value:"#FF8C69",name:"salmon 1"},{value:"#EE8262",name:"salmon 2"},{value:"#CD7054",name:"salmon 3"},{value:"#8B4C39",name:"salmon 4"},{value:"#FF7256",name:"coral 1"},{value:"#EE6A50",name:"coral 2"},{value:"#CD5B45",name:"coral 3"},{value:"#8B3E2F",name:"coral 4"},{value:"#8A3324",name:"burntumber"},{value:"#FF6347",name:"tomato 1"},{value:"#FF6347",css:!0,name:"tomato"},{value:"#EE5C42",name:"tomato 2"},{value:"#CD4F39",name:"tomato 3"},{value:"#8B3626",name:"tomato 4"},{value:"#FA8072",css:!0,name:"salmon"},{value:"#FFE4E1",name:"mistyrose 1"},{value:"#FFE4E1",css:!0,name:"mistyrose"},{value:"#EED5D2",name:"mistyrose 2"},{value:"#CDB7B5",name:"mistyrose 3"},{value:"#8B7D7B",name:"mistyrose 4"},{value:"#FFFAFA",name:"snow 1"},{value:"#FFFAFA",css:!0,name:"snow"},{value:"#EEE9E9",name:"snow 2"},{value:"#CDC9C9",name:"snow 3"},{value:"#8B8989",name:"snow 4"},{value:"#BC8F8F",css:!0,name:"rosybrown"},{value:"#FFC1C1",name:"rosybrown 1"},{value:"#EEB4B4",name:"rosybrown 2"},{value:"#CD9B9B",name:"rosybrown 3"},{value:"#8B6969",name:"rosybrown 4"},{value:"#F08080",css:!0,name:"lightcoral"},{value:"#CD5C5C",css:!0,name:"indianred"},{value:"#FF6A6A",name:"indianred 1"},{value:"#EE6363",name:"indianred 2"},{value:"#8B3A3A",name:"indianred 4"},{value:"#CD5555",name:"indianred 3"},{value:"#A52A2A",css:!0,name:"brown"},{value:"#FF4040",name:"brown 1"},{value:"#EE3B3B",name:"brown 2"},{value:"#CD3333",name:"brown 3"},{value:"#8B2323",name:"brown 4"},{value:"#B22222",css:!0,name:"firebrick"},{value:"#FF3030",name:"firebrick 1"},{value:"#EE2C2C",name:"firebrick 2"},{value:"#CD2626",name:"firebrick 3"},{value:"#8B1A1A",name:"firebrick 4"},{value:"#FF0000",vga:!0,name:"red 1"},{value:"#FF0000",vga:!0,css:!0,name:"red"},{value:"#EE0000",name:"red 2"},{value:"#CD0000",name:"red 3"},{value:"#8B0000",name:"red 4"},{value:"#8B0000",css:!0,name:"darkred"},{value:"#800000",vga:!0,css:!0,name:"maroon"},{value:"#8E388E",name:"sgi beet"},{value:"#7171C6",name:"sgi slateblue"},{value:"#7D9EC0",name:"sgi lightblue"},{value:"#388E8E",name:"sgi teal"},{value:"#71C671",name:"sgi chartreuse"},{value:"#8E8E38",name:"sgi olivedrab"},{value:"#C5C1AA",name:"sgi brightgray"},{value:"#C67171",name:"sgi salmon"},{value:"#555555",name:"sgi darkgray"},{value:"#1E1E1E",name:"sgi gray 12"},{value:"#282828",name:"sgi gray 16"},{value:"#515151",name:"sgi gray 32"},{value:"#5B5B5B",name:"sgi gray 36"},{value:"#848484",name:"sgi gray 52"},{value:"#8E8E8E",name:"sgi gray 56"},{value:"#AAAAAA",name:"sgi lightgray"},{value:"#B7B7B7",name:"sgi gray 72"},{value:"#C1C1C1",name:"sgi gray 76"},{value:"#EAEAEA",name:"sgi gray 92"},{value:"#F4F4F4",name:"sgi gray 96"},{value:"#FFFFFF",vga:!0,css:!0,name:"white"},{value:"#F5F5F5",name:"white smoke"},{value:"#F5F5F5",name:"gray 96"},{value:"#DCDCDC",css:!0,name:"gainsboro"},{value:"#D3D3D3",css:!0,name:"lightgrey"},{value:"#C0C0C0",vga:!0,css:!0,name:"silver"},{value:"#A9A9A9",css:!0,name:"darkgray"},{value:"#808080",vga:!0,css:!0,name:"gray"},{value:"#696969",css:!0,name:"dimgray"},{value:"#696969",name:"gray 42"},{value:"#000000",vga:!0,css:!0,name:"black"},{value:"#FCFCFC",name:"gray 99"},{value:"#FAFAFA",name:"gray 98"},{value:"#F7F7F7",name:"gray 97"},{value:"#F2F2F2",name:"gray 95"},{value:"#F0F0F0",name:"gray 94"},{value:"#EDEDED",name:"gray 93"},{value:"#EBEBEB",name:"gray 92"},{value:"#E8E8E8",name:"gray 91"},{value:"#E5E5E5",name:"gray 90"},{value:"#E3E3E3",name:"gray 89"},{value:"#E0E0E0",name:"gray 88"},{value:"#DEDEDE",name:"gray 87"},{value:"#DBDBDB",name:"gray 86"},{value:"#D9D9D9",name:"gray 85"},{value:"#D6D6D6",name:"gray 84"},{value:"#D4D4D4",name:"gray 83"},{value:"#D1D1D1",name:"gray 82"},{value:"#CFCFCF",name:"gray 81"},{value:"#CCCCCC",name:"gray 80"},{value:"#C9C9C9",name:"gray 79"},{value:"#C7C7C7",name:"gray 78"},{value:"#C4C4C4",name:"gray 77"},{value:"#C2C2C2",name:"gray 76"},{value:"#BFBFBF",name:"gray 75"},{value:"#BDBDBD",name:"gray 74"},{value:"#BABABA",name:"gray 73"},{value:"#B8B8B8",name:"gray 72"},{value:"#B5B5B5",name:"gray 71"},{value:"#B3B3B3",name:"gray 70"},{value:"#B0B0B0",name:"gray 69"},{value:"#ADADAD",name:"gray 68"},{value:"#ABABAB",name:"gray 67"},{value:"#A8A8A8",name:"gray 66"},{value:"#A6A6A6",name:"gray 65"},{value:"#A3A3A3",name:"gray 64"},{value:"#A1A1A1",name:"gray 63"},{value:"#9E9E9E",name:"gray 62"},{value:"#9C9C9C",name:"gray 61"},{value:"#999999",name:"gray 60"},{value:"#969696",name:"gray 59"},{value:"#949494",name:"gray 58"},{value:"#919191",name:"gray 57"},{value:"#8F8F8F",name:"gray 56"},{value:"#8C8C8C",name:"gray 55"},{value:"#8A8A8A",name:"gray 54"},{value:"#878787",name:"gray 53"},{value:"#858585",name:"gray 52"},{value:"#828282",name:"gray 51"},{value:"#7F7F7F",name:"gray 50"},{value:"#7D7D7D",name:"gray 49"},{value:"#7A7A7A",name:"gray 48"},{value:"#787878",name:"gray 47"},{value:"#757575",name:"gray 46"},{value:"#737373",name:"gray 45"},{value:"#707070",name:"gray 44"},{value:"#6E6E6E",name:"gray 43"},{value:"#666666",name:"gray 40"},{value:"#636363",name:"gray 39"},{value:"#616161",name:"gray 38"},{value:"#5E5E5E",name:"gray 37"},{value:"#5C5C5C",name:"gray 36"},{value:"#595959",name:"gray 35"},{value:"#575757",name:"gray 34"},{value:"#545454",name:"gray 33"},{value:"#525252",name:"gray 32"},{value:"#4F4F4F",name:"gray 31"},{value:"#4D4D4D",name:"gray 30"},{value:"#4A4A4A",name:"gray 29"},{value:"#474747",name:"gray 28"},{value:"#454545",name:"gray 27"},{value:"#424242",name:"gray 26"},{value:"#404040",name:"gray 25"},{value:"#3D3D3D",name:"gray 24"},{value:"#3B3B3B",name:"gray 23"},{value:"#383838",name:"gray 22"},{value:"#363636",name:"gray 21"},{value:"#333333",name:"gray 20"},{value:"#303030",name:"gray 19"},{value:"#2E2E2E",name:"gray 18"},{value:"#2B2B2B",name:"gray 17"},{value:"#292929",name:"gray 16"},{value:"#262626",name:"gray 15"},{value:"#242424",name:"gray 14"},{value:"#212121",name:"gray 13"},{value:"#1F1F1F",name:"gray 12"},{value:"#1C1C1C",name:"gray 11"},{value:"#1A1A1A",name:"gray 10"},{value:"#171717",name:"gray 9"},{value:"#141414",name:"gray 8"},{value:"#121212",name:"gray 7"},{value:"#0F0F0F",name:"gray 6"},{value:"#0D0D0D",name:"gray 5"},{value:"#0A0A0A",name:"gray 4"},{value:"#080808",name:"gray 3"},{value:"#050505",name:"gray 2"},{value:"#030303",name:"gray 1"},{value:"#F5F5F5",css:!0,name:"whitesmoke"}]},function(e,t,n){"use strict";const r=n(29),{StringDecoder:i}=n(180),{Stream:o}=n(105);function s(){}e.exports=(e,t)=>{const n=Buffer.alloc(65536),a=new i("utf8"),c=new o;let l="",u=0,d=0;return-1===e.start&&delete e.start,c.readable=!0,c.destroy=()=>{c.destroyed=!0,c.emit("end"),c.emit("close")},r.open(e.file,"a+","0644",(i,o)=>{if(i)return t?t(i):c.emit("error",i),void c.destroy();!function i(){if(!c.destroyed)return r.read(o,n,0,n.length,u,(r,o)=>{if(r)return t?t(r):c.emit("error",r),void c.destroy();if(!o)return l&&((null==e.start||d>e.start)&&(t?t(null,l):c.emit("line",l)),d++,l=""),setTimeout(i,1e3);let s=a.write(n.slice(0,o));t||c.emit("data",s),s=(l+s).split(/\n+/);const h=s.length-1;let p=0;for(;p<h;p++)(null==e.start||d>e.start)&&(t?t(null,s[p]):c.emit("line",s[p])),d++;return l=s[h],u+=o,i()});r.close(o,s)}()}),t?c.destroy:c}},function(e,t,n){"use strict";const r=n(81),i=n(82),{Stream:o}=n(105),s=n(80);e.exports=class extends s{constructor(e={}){super(e),this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.port||(this.port=this.ssl?443:80)}log(e,t){this._request(e,(t,n)=>{n&&200!==n.statusCode&&(t=new Error("Invalid HTTP Status Code: "+n.statusCode)),t?this.emit("warn",t):this.emit("logged",e)}),t&&setImmediate(t)}query(e,t){"function"==typeof e&&(t=e,e={}),(e={method:"query",params:this.normalizeQuery(e)}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth),this._request(e,(e,n,r)=>{if(n&&200!==n.statusCode&&(e=new Error("Invalid HTTP Status Code: "+n.statusCode)),e)return t(e);if("string"==typeof r)try{r=JSON.parse(r)}catch(e){return t(e)}t(null,r)})}stream(e={}){const t=new o;(e={method:"stream",params:e}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth);let n="";const r=this._request(e);return t.destroy=()=>r.destroy(),r.on("data",e=>{const r=(e=(n+e).split(/\n+/)).length-1;let i=0;for(;i<r;i++)try{t.emit("log",JSON.parse(e[i]))}catch(e){t.emit("error",e)}n=e[r]}),r.on("error",e=>t.emit("error",e)),t}_request(e,t){const n=(e=e||{}).auth||this.auth,o=e.path||this.path||"";delete e.auth,delete e.path;const s=(this.ssl?i:r).request({method:"POST",host:this.host,port:this.port,path:"/"+o.replace(/^\//,""),headers:this.headers,auth:n?`${n.username}:${n.password}`:"",agent:this.agent});s.on("error",t),s.on("response",e=>e.on("end",()=>t(null,e)).resume()),s.end(Buffer.from(JSON.stringify(e),"utf8"))}}},function(e,t,n){"use strict";const r=n(279),{MESSAGE:i}=n(21),o=n(20),s=n(80);e.exports=class extends s{constructor(e={}){if(super(e),!e.stream||!r(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=e.eol||o.EOL}log(e,t){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode)return this._stream.write(e),void(t&&t());this._stream.write(`${e[i]}${this.eol}`),t&&t()}}},function(e,t,n){"use strict";const{Stream:r,Transform:i}=n(105),o=n(182),{LEVEL:s,SPLAT:a}=n(21),c=n(279),l=n(281),u=n(285),d=n(486),h=n(487),{warn:p}=n(254),f=n(181),g=/%[scdjifoO%]/g;class m extends i{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(n){const r=Object.assign({},e,n);n instanceof Error&&(r.stack=n.stack,r.message=n.message),t.write(r)}}})}configure({silent:e,format:t,defaultMeta:r,levels:i,level:o="info",exitOnError:s=!0,transports:a,colors:c,emitErrs:d,formatters:h,padLevels:p,rewriters:g,stripColors:m,exceptionHandlers:v,rejectionHandlers:y}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=t||this.format||n(159)(),this.defaultMeta=r||null,this.levels=i||this.levels||f.npm.levels,this.level=o,this.exceptions=new l(this),this.rejections=new u(this),this.profilers={},this.exitOnError=s,a&&(a=Array.isArray(a)?a:[a]).forEach(e=>this.add(e)),c||d||h||p||g||m)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"));v&&this.exceptions.handle(v),y&&this.rejections.handle(y)}isLevelEnabled(e){const t=v(this.levels,e);if(null===t)return!1;const n=v(this.levels,this.level);if(null===n)return!1;if(!this.transports||0===this.transports.length)return n>=t;return-1!==this.transports.findIndex(e=>{let r=v(this.levels,e.level);return null===r&&(r=n),r>=t})}log(e,t,...n){if(1===arguments.length)return e[s]=e.level,this._addDefaultMeta(e),this.write(e),this;if(2===arguments.length)return t&&"object"==typeof t?(t[s]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(this.write({[s]:e,level:e,message:t}),this);const[r]=n;if("object"==typeof r&&null!==r){if(!(t&&t.match&&t.match(g))){const i=Object.assign({},this.defaultMeta,r,{[s]:e,[a]:n,level:e,message:t});return r.message&&(i.message+=""+r.message),r.stack&&(i.stack=r.stack),this.write(i),this}}return this.write(Object.assign({},this.defaultMeta,{[s]:e,[a]:n,level:e,message:t})),this}_transform(e,t,n){if(this.silent)return n();e[s]||(e[s]=e.level),this.levels[e[s]]||0===this.levels[e[s]]||console.error("[winston] Unknown logger level: %s",e[s]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",e);try{this.push(this.format.transform(e,this.format.options))}catch(e){throw e}finally{n()}}_final(e){const t=this.transports.slice();o(t,(e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t),e.end()},e)}add(e){const t=!c(e)||e.log.length>2?new d({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){let t=e;return(!c(e)||e.log.length>2)&&(t=this.transports.filter(t=>t.transport===e)[0]),t&&this.unpipe(t),this}clear(){return this.unpipe(),this}close(){return this.clear(),this.emit("close"),this}setLevels(){p.deprecated("setLevels")}query(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};const n={},r=Object.assign({},e.query||{});o(this.transports.filter(e=>!!e.query),(function(t,i){!function(t,n){e.query&&"function"==typeof t.formatQuery&&(e.query=t.formatQuery(r)),t.query(e,(r,i)=>{if(r)return n(r);"function"==typeof t.formatResults&&(i=t.formatResults(i,e.format)),n(null,i)})}(t,(e,r)=>{i&&((r=e||r)&&(n[t.name]=r),i()),i=null})}),()=>t(null,n))}stream(e={}){const t=new r,n=[];return t._streams=n,t.destroy=()=>{let e=n.length;for(;e--;)n[e].destroy()},this.transports.filter(e=>!!e.stream).forEach(r=>{const i=r.stream(e);i&&(n.push(i),i.on("log",e=>{e.transport=e.transport||[],e.transport.push(r.name),t.emit("log",e)}),i.on("error",e=>{e.transport=e.transport||[],e.transport.push(r.name),t.emit("error",e)}))}),t}startTimer(){return new h(this)}profile(e,...t){const n=Date.now();if(this.profilers[e]){const r=this.profilers[e];delete this.profilers[e],"function"==typeof t[t.length-2]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());const i="object"==typeof t[t.length-1]?t.pop():{};return i.level=i.level||"info",i.durationMs=n-r,i.message=i.message||e,this.write(i)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){t["__winston"+e]||(t["__winston"+e]=function(n){this.emit(e,n,t)}.bind(this),t.on(e,t["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}}function v(e,t){const n=e[t];return n||0===n?n:null}Object.defineProperty(m.prototype,"transports",{configurable:!1,enumerable:!0,get(){const{pipes:e}=this._readableState;return Array.isArray(e)?e:[e].filter(Boolean)}}),e.exports=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){((0,r.default)(e)?h:p)(e,(0,u.default)(t),n)};var r=d(n(126)),i=d(n(267)),o=d(n(262)),s=d(n(268)),a=d(n(174)),c=d(n(263)),l=d(n(266)),u=d(n(129));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){n=(0,c.default)(n||a.default);var r=0,o=0,s=e.length;function u(e,t){e?n(e):++o!==s&&t!==i.default||n(null)}for(0===s&&n(null);r<s;r++)t(e[r],r,(0,l.default)(u))}var p=(0,s.default)(o.default,1/0);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n,r){return e(t,r)}},e.exports=t.default},function(e,t,n){"use strict";const r=n(22),{LEVEL:i}=n(21),o=n(80),s=e.exports=function(e={}){if(o.call(this,e),!e.transport||"function"!=typeof e.transport.log)throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated(),this.transport.__winstonError||(this.transport.__winstonError=function(e){this.emit("error",e,this.transport)}.bind(this),this.transport.on("error",this.transport.__winstonError))};r.inherits(s,o),s.prototype._write=function(e,t,n){if(this.silent||!0===e.exception&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[i]])&&this.transport.log(e[i],e.message,e,this._nop),n(null)},s.prototype._writev=function(e,t){for(let t=0;t<e.length;t++)this._accept(e[t])&&(this.transport.log(e[t].chunk[i],e[t].chunk.message,e[t].chunk,this._nop),e[t].callback());return t(null)},s.prototype._deprecated=function(){console.error([this.transport.name+" is a legacy winston transport. Consider upgrading: ","- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))},s.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}},function(e,t,n){"use strict";e.exports=class{constructor(e){if(!e)throw new Error("Logger is required for profiling.");this.logger=e,this.start=Date.now()}done(...e){"function"==typeof e[e.length-1]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());const t="object"==typeof e[e.length-1]?e.pop():{};return t.level=t.level||"info",t.durationMs=Date.now()-this.start,this.logger.write(t)}}},function(e,t,n){"use strict";const r=n(280);e.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,t){if(!this.loggers.has(e)){const n=(t=Object.assign({},t||this.options)).transports||this.options.transports;t.transports=n?n.slice():[];const i=r(t);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((e,t)=>this._removeLogger(t))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}},function(e,t,n){var r=n(128),i=n(490),o=n(491),s=Math.max,a=Math.min;e.exports=function(e,t,n){var c,l,u,d,h,p,f=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=c,r=l;return c=l=void 0,f=t,d=e.apply(r,n)}function b(e){return f=e,h=setTimeout(E,t),g?y(e):d}function S(e){var n=e-p;return void 0===p||n>=t||n<0||m&&e-f>=u}function E(){var e=i();if(S(e))return w(e);h=setTimeout(E,function(e){var n=t-(e-p);return m?a(n,u-(e-f)):n}(e))}function w(e){return h=void 0,v&&c?y(e):(c=l=void 0,d)}function _(){var e=i(),n=S(e);if(c=arguments,l=this,p=e,n){if(void 0===h)return b(p);if(m)return clearTimeout(h),h=setTimeout(E,t),y(p)}return void 0===h&&(h=setTimeout(E,t)),d}return t=o(t)||0,r(n)&&(g=!!n.leading,u=(m="maxWait"in n)?s(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==h&&clearTimeout(h),f=0,c=p=l=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},function(e,t,n){var r=n(176);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(128),i=n(492),o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=a.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var r=n(127),i=n(130);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(106),o=n(526),s=n(547),a=n(188),c=n(134),l=n(303),u=n(96),d=n(37),h=n(555),p=n(559);t.TelemetryClient=n(560),t.Contracts=n(49),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"}(r=t.DistributedTracingModes||(t.DistributedTracingModes={}));var f,g,m,v,y,b,S,E,w,_=!0,P=!1,C=!0,T=!0,I=!0,O=!0,R=!0,D=!0,x=!1,k=!0,A=void 0,N=void 0,j=!1;function F(){return t.defaultClient?(j=!0,m.enable(_,P),v.enable(C),y.enable(T),b.enable(k,g),S.useAutoCorrelation(D,f),S.enable(I),E.enable(O),t.liveMetricsClient&&x&&t.liveMetricsClient.enable(x)):d.warn("Start cannot be called before setup"),M}t.setup=function(e){return t.defaultClient?d.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),m=new o(t.defaultClient),v=new s(t.defaultClient),y=new a(t.defaultClient),S=new l(t.defaultClient),E=new c(t.defaultClient),b||(b=new p.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(R,A,N),M},t.start=F,t.getCorrelationContext=function(){return D?i.CorrelationContextManager.getCurrentContext():null},t.wrapWithCorrelationContext=function(e){return i.CorrelationContextManager.wrapCallback(e)};var M=function(){function e(){}return e.setDistributedTracingMode=function(t){return u.w3cEnabled=t===r.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,n){return void 0===n&&(n=!1),_=t,P=n,j&&m.enable(t,n),e},e.setAutoCollectExceptions=function(t){return C=t,j&&v.enable(t),e},e.setAutoCollectPerformance=function(t,n){void 0===n&&(n=!0),T=t;var r=p.AutoCollectNativePerformance.parseEnabled(n);return k=r.isEnabled,g=r.disabledMetrics,j&&(y.enable(t),b.enable(r.isEnabled,r.disabledMetrics)),e},e.setAutoCollectRequests=function(t){return I=t,j&&S.enable(t),e},e.setAutoCollectDependencies=function(t){return O=t,j&&E.enable(t),e},e.setAutoDependencyCorrelation=function(t,n){return D=t,f=n,j&&S.useAutoCorrelation(t,n),e},e.setUseDiskRetryCaching=function(n,r,i){return R=n,A=r,N=i,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(n,r,i),e},e.setInternalLogging=function(t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),d.enableDebug=t,d.disableWarnings=!n,e},e.setSendLiveMetrics=function(n){return void 0===n&&(n=!1),t.defaultClient?(!t.liveMetricsClient&&n?(t.liveMetricsClient=new h(t.defaultClient.config.instrumentationKey),w=new a(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(w),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(n),x=n,e):(d.warn("Live metrics client cannot be setup without the default client"),e)},e.start=F,e}();t.Configuration=M,t.dispose=function(){t.defaultClient=null,j=!1,m&&m.dispose(),v&&v.dispose(),y&&y.dispose(),b&&b.dispose(),S&&S.dispose(),E&&E.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),x=!1,t.liveMetricsClient=void 0)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(495);t.azuresdk=r;var i=n(497);t.bunyan=i;var o=n(498);t.console=o;var s=n(500);t.mongodbCore=s;var a=n(501);t.mongodb=a;var c=n(502);t.mysql=c;var l=n(505);t.pgPool=l;var u=n(506);t.pg=u;var d=n(507);t.redis=d;var h=n(508);t.tedious=h;var p=n(509);t.winston=p,t.enable=function(){i.enable(),o.enable(),s.enable(),a.enable(),c.enable(),u.enable(),l.enable(),d.enable(),p.enable(),r.enable(),h.enable()}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(31);t.AzureMonitorSymbol="Azure_Monitor_Tracer";var o=function(){function e(){}return e.prototype.onStart=function(e){},e.prototype.onEnd=function(e){i.channel.publish("azure-coretracing",e)},e.prototype.shutdown=function(){},e}();t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){try{var s=new(0,n(!function(){var e=new Error("Cannot find module '@opentelemetry/tracing'");throw e.code="MODULE_NOT_FOUND",e}()).BasicTracer)(i.channel.spanContextPropagator?{scopeManager:i.channel.spanContextPropagator}:void 0),a=s.startSpan;s.startSpan=function(e,t){if(!t||!t.parent){var n=s.getCurrentSpan();n&&n.operation&&n.operation.traceparent&&(t=r({},t,{parent:{traceId:n.operation.traceparent.traceId,spanId:n.operation.traceparent.spanId}}))}var i=a.call(this,e,t);return i.addEvent("Application Insights Integration enabled"),i},s.addSpanProcessor(new o),s[t.AzureMonitorSymbol]=!0,e.setTracer(s)}catch(e){}return e}},t.enable=function(){i.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}},function(e){e.exports=JSON.parse('{"name":"diagnostic-channel","version":"0.2.0","main":"./dist/src/channel.js","types":"./dist/src/channel.d.ts","scripts":{"build":"tsc","lint":"tslint -c tslint.json -p tsconfig.json","clean":"rimraf ./dist","test":"mocha ./dist/tests/**/*.js"},"homepage":"https://github.com/Microsoft/node-diagnostic-channel","bugs":{"url":"https://github.com/Microsoft/node-diagnostic-channel/issues"},"repository":{"type":"git","url":"https://github.com/Microsoft/node-diagnostic-channel.git"},"description":"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers","dependencies":{"semver":"^5.3.0"},"devDependencies":{"@types/mocha":"^2.2.40","@types/node":"^7.0.12","mocha":"^3.2.0","rimraf":"^2.6.1","tslint":"^5.0.0","typescript":"^2.2.1"},"files":["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],"license":"MIT","_resolved":"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz","_integrity":"sha1-zJmvlhLCP7H/8TYSxy8sv6qNWhc=","_from":"diagnostic-channel@0.2.0"}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,n){var i=t.apply(this,arguments);if(!n){var o=i;o||(o=t.call(this,e,!0)),r.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},t.enable=function(){r.channel.registerMonkeyPatch("bunyan",t.bunyan)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(54);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new i.Writable,n=new i.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t}),!0},n.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,n),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++){s(c[a])}return e}},t.enable=function(){r.channel.registerMonkeyPatch("console",t.console),n(499)}},function(e,t){e.exports=require("console")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(31);t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return i.channel.bindToContext((function(e){return e()}))}}}),n={};return t.on("started",(function(e){n[e.requestId]||(n[e.requestId]=r({},e,{time:new Date}))})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var t=e.instrument(),n={},o={};return t.on("started",(function(e){n[e.requestId]||(o[e.requestId]=i.channel.bindToContext((function(e){return e()})),n[e.requestId]=r({},e,{time:new Date}))})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete o[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof o[e.requestId]&&(o[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete o[e.requestId])})),e}},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=i.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var r=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=i.channel.bindToContext(arguments[1])),r.apply(this,arguments)},e}}(e);var t=e.instrument(),n={},r={};return t.on("started",(function(e){n[e.requestId]||(r[e.requestId]=i.channel.bindToContext((function(e){return e()})),n[e.requestId]=e)})),t.on("succeeded",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof r[e.requestId]&&(r[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete r[e.requestId])})),t.on("failed",(function(e){var t=n[e.requestId];t&&delete n[e.requestId],"object"==typeof e&&"function"==typeof r[e.requestId]&&(r[e.requestId]((function(){return i.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete r[e.requestId])})),e}},t.enable=function(){i.channel.registerMonkeyPatch("mongodb",t.mongo2),i.channel.registerMonkeyPatch("mongodb",t.mongo3),i.channel.registerMonkeyPatch("mongodb",t.mongo330)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(4);t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,t){var o=function(e,t){return function(t,n){var i=e[t];i&&(e[t]=function(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var o=arguments[e],s={result:null,startTime:null,startDate:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),s.startDate=new Date,arguments[e]=r.channel.bindToContext(n(s,o))):arguments[e]=r.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(503)(i.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return s(a)(e)})),o(a)("createQuery",(function(e,t){return function(n){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;r.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o,time:e.startDate}),t.apply(this,arguments)}}));var c=n(504)(i.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return s(c)(e)})),e}},t.enable=function(){r.channel.registerMonkeyPatch("mysql",t.mysql)}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=503},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=504},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var t=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=r.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=n(72);t.postgres6={versionSpecifier:"6.*",patch:function(e,t){var n=e.Client.prototype.query;return e.Client.prototype.query=function(e,t,o){var s,a={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},c=process.hrtime();function l(e){e&&e.__diagnosticOriginalFunc&&(e=e.__diagnosticOriginalFunc);var t=r.channel.bindToContext((function(t,n){var o=process.hrtime(c);if(a.result=n&&{rowCount:n.rowCount,command:n.command},a.error=t,a.duration=Math.ceil(1e3*o[0]+o[1]/1e6),r.channel.publish("postgres",a),t){if(e)return e.apply(this,arguments);s&&s instanceof i.EventEmitter&&s.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,"__diagnosticOriginalFunc",{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(a.query.preparable={text:e,args:t},o=l(o)):(a.query.text=e,o?o=l(o):t=l(t)):("string"==typeof e.name?a.query.plan=e.name:e.values instanceof Array?a.query.preparable={text:e.text,args:e.values}:a.query.text=e.text,o?o=l(o):t?t=l(t):e.callback=l(e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,s=n.apply(this,arguments)},e}},t.postgres7={versionSpecifier:"7.*",patch:function(e,t){var n=e.Client.prototype.query;return e.Client.prototype.query=function(e,t,o){var s,a=this,c=!!o,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime();function d(e){e&&e.__diagnosticOriginalFunc&&(e=e.__diagnosticOriginalFunc);var t=r.channel.bindToContext((function(t,n){var o=process.hrtime(u);if(l.result=n&&{rowCount:n.rowCount,command:n.command},l.error=t,l.duration=Math.ceil(1e3*o[0]+o[1]/1e6),r.channel.publish("postgres",l),t){if(e)return e.apply(this,arguments);s&&s instanceof i.EventEmitter&&s.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,"__diagnosticOriginalFunc",{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(l.query.preparable={text:e,args:t},o=(c="function"==typeof o)?d(o):o):(l.query.text=e,o?o=(c="function"==typeof o)?d(o):o:t=(c="function"==typeof t)?d(t):t):("string"==typeof e.name?l.query.plan=e.name:e.values instanceof Array?l.query.preparable={text:e.text,args:e.values}:l.query.text=e.text,o?(c="function"==typeof o,o=d(o)):t?t=(c="function"==typeof t)?d(t):t:(c="function"==typeof e.callback,e.callback=c?d(e.callback):e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=o,arguments.length=arguments.length>3?arguments.length:3,s=n.apply(this,arguments),c?s:s.then((function(e){return d()(void 0,e),new a._Promise((function(t,n){t(e)}))})).catch((function(e){return d()(e,void 0),new a._Promise((function(t,n){n(e)}))}))},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg",t.postgres6),r.channel.registerMonkeyPatch("pg",t.postgres7)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;e.callback=r.channel.bindToContext((function(t,a){var c=process.hrtime(o),l=1e3*c[0]+c[1]/1e6|0;r.channel.publish("redis",{duration:l,address:i,commandObj:e,err:t,result:a,time:s}),"function"==typeof n&&n.apply(this,arguments)})),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function(){r.channel.registerMonkeyPatch("redis",t.redis)}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(31);t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function e(e){var t=process.hrtime(),n={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return i.channel.bindToContext((function(o,s,a){var c=process.hrtime(t);n=r({},n,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!o&&{rowCount:s,rows:a},query:{text:this.parametersByName.statement.value},error:o,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),i.channel.publish("tedious",n),e.call(this,o,s,a)}))}var n=arguments[0];arguments[0].callback=e(n.callback),t.apply(this,arguments)},e}},t.enable=function(){i.channel.registerMonkeyPatch("tedious",t.tedious)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n(31);t.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,n){var r=e.call(this,n)||this;return r.winston=t,r}return i(t,e),t.prototype.log=function(e,t){var n=e.message,r=e.level,i=e.meta,a=o(e,["message","level","meta"]);r="function"==typeof Symbol.for?e[Symbol.for("level")]:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,r);for(var l in i=i||{},a)a.hasOwnProperty(l)&&(i[l]=a[l]);s.channel.publish("winston",{message:n,level:r,levelKind:c,meta:i}),t()},t}(e.Transport);function n(){var n,r=arguments[0].levels||e.config.npm.levels;for(var i in r)r.hasOwnProperty(i)&&(n=void 0===n||r[i]>r[n]?i:n);this.add(new t(e,{level:n}))}var r=e.createLogger;e.createLogger=function(){var i,o=arguments[0].levels||e.config.npm.levels;for(var s in o)o.hasOwnProperty(s)&&(i=void 0===i||o[s]>o[i]?s:i);var a=r.apply(this,arguments);a.add(new t(e,{level:i}));var c=a.configure;return a.configure=function(){c.apply(this,arguments),n.apply(this,arguments)},a};var a=e.createLogger;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments)},e.add(new t(e)),e}},t.winston2={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,r=function(n,r,i){var o;return o=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",s.channel.publish("winston",{level:n,message:r,meta:i,levelKind:o}),r};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==r&&(this.filters=this.filters.filter((function(e){return e!==r})),this.filters.push(r)):this.filters=[r],n.apply(this,arguments)},e}},t.enable=function(){s.channel.registerMonkeyPatch("winston",t.winston2),s.channel.registerMonkeyPatch("winston",t.winston3)}},function(e,t,n){"use strict";const r=n(38);process&&r.gte(process.versions.node,"8.0.0")?e.exports=n(511):e.exports=n(513)},function(e,t,n){"use strict";const r=n(22),i=n(67),o=n(185),s=n(512),a=process.env.DEBUG_CLS_HOOKED;let c=-1;function l(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function u(e){return process.namespaces[e]}function d(e){let t=u(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function h(...e){a&&process._rawDebug(""+r.format(...e))}e.exports={getNamespace:u,createNamespace:function(e){i.ok(e,"namespace must be given a name."),a&&h(`NS-CREATING NAMESPACE (${e})`);let t=new l(e);t.id=c;return s.createHook({init(n,i,o,l){c=s.executionAsyncId();if(t.active){t._contexts.set(n,t.active);if(a){const s=" ".repeat(t._indent<0?0:t._indent);h(`${s}INIT [${i}] (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${l}`)}}else if(c===0){const o=s.triggerAsyncId();const u=t._contexts.get(o);if(u){t._contexts.set(n,u);if(a){const s=" ".repeat(t._indent<0?0:t._indent);h(`${s}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${l}`)}}else if(a){const s=" ".repeat(t._indent<0?0:t._indent);h(`${s}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${l}`)}}if(a&&i==="PROMISE"){h(r.inspect(l,{showHidden:true}));const s=l.parentId;const a=" ".repeat(t._indent<0?0:t._indent);h(`${a}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${s} asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} resource:${l}`)}},before(n){c=s.executionAsyncId();let i;i=t._contexts.get(n)||t._contexts.get(c);if(i){if(a){const o=s.triggerAsyncId();const a=" ".repeat(t._indent<0?0:t._indent);h(`${a}BEFORE (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`);t._indent+=2}t.enter(i)}else if(a){const i=s.triggerAsyncId();const o=" ".repeat(t._indent<0?0:t._indent);h(`${o}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${c} triggerId:${i} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} namespace._contexts:${r.inspect(t._contexts,{showHidden:true,depth:2,colors:true})}`);t._indent+=2}},after(n){c=s.executionAsyncId();let i;i=t._contexts.get(n)||t._contexts.get(c);if(i){if(a){const o=s.triggerAsyncId();t._indent-=2;const a=" ".repeat(t._indent<0?0:t._indent);h(`${a}AFTER (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`)}t.exit(i)}else if(a){const o=s.triggerAsyncId();t._indent-=2;const a=" ".repeat(t._indent<0?0:t._indent);h(`${a}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${c} triggerId:${o} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(i)}`)}},destroy(n){c=s.executionAsyncId();if(a){const i=s.triggerAsyncId();const o=" ".repeat(t._indent<0?0:t._indent);h(`${o}DESTROY (${e}) currentUid:${c} asyncId:${n} triggerId:${i} active:${r.inspect(t.active,{showHidden:true,depth:2,colors:true})} context:${r.inspect(t._contexts.get(c))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:d,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){d(e)}));process.namespaces=Object.create(null)},ERROR_SYMBOL:"error@context"},l.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=t,a){h(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+c+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return t},l.prototype.get=function(e){if(this.active){if(a){const t=s.executionAsyncId(),n=s.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);h(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+c+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${c} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[e]}if(a){const t=s.currentId(),n=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${c} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length}`)}},l.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=c,a){const t=s.executionAsyncId(),n=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${c} asyncHooksCurrentId:${t} triggerId:${n} len:${this._set.length} context:${r.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},l.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(a){const e=s.triggerAsyncId(),n=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${c} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} context:${r.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e["error@context"]=t),e}finally{if(a){const e=s.triggerAsyncId(),n=s.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${c} triggerId:${e} asyncHooksCurrentId:${n} len:${this._set.length} ${r.inspect(t)}`)}this.exit(t)}},l.prototype.runAndReturn=function(e){let t;return this.run((function(n){t=e(n)})),t},l.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return a&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+c+" len:"+this._set.length+" "+r.inspect(t)),n.then(e=>(a&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+c+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e)).catch(e=>{throw e["error@context"]=t,a&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+c+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e})},l.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e["error@context"]=t),e}finally{n.exit(t)}}},l.prototype.enter=function(e){if(i.ok(e,"context must be provided for entering"),a){const t=s.executionAsyncId(),n=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${c} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}this._set.push(this.active),this.active=e},l.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),a){const t=s.executionAsyncId(),n=s.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${c} triggerId:${n} asyncHooksCurrentId:${t} len:${this._set.length} ${r.inspect(e)}`)}if(this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(a&&h("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},l.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;let t=e,n=e["cls@contexts"];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},l.prototype.fromException=function(e){return e["error@context"]},process.namespaces={}},function(e,t){e.exports=require("async_hooks")},function(e,t,n){"use strict";const r=n(22),i=n(67),o=n(185),s=n(514),a=[];for(let e in s.providers)a[s.providers[e]]=e;const c=process.env.DEBUG_CLS_HOOKED;let l=-1;function u(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function d(e){return process.namespaces[e]}function h(e){let t=d(e);i.ok(t,"can't delete nonexistent namespace! \""+e+'"'),i.ok(t.id,"don't assign to process.namespaces directly! "+r.inspect(t)),process.namespaces[e]=null}function p(e){process.env.DEBUG&&process._rawDebug(e)}function f(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(e.exports={getNamespace:d,createNamespace:function(e){i.ok(e,"namespace must be given a name."),c&&p("CREATING NAMESPACE "+e);let t=new u(e);return t.id=l,s.addHooks({init(n,i,o,s,u){l=n,s?(t._contexts.set(n,t._contexts.get(s)),c&&p("PARENTID: "+e+" uid:"+n+" parent:"+s+" provider:"+o)):t._contexts.set(l,t.active),c&&p("INIT "+e+" uid:"+n+" parent:"+s+" provider:"+a[o]+" active:"+r.inspect(t.active,!0))},pre(n,i){l=n;let o=t._contexts.get(n);o?(c&&p(" PRE "+e+" uid:"+n+" handle:"+f(i)+" context:"+r.inspect(o)),t.enter(o)):c&&p(" PRE MISSING CONTEXT "+e+" uid:"+n+" handle:"+f(i))},post(n,i){l=n;let o=t._contexts.get(n);o?(c&&p(" POST "+e+" uid:"+n+" handle:"+f(i)+" context:"+r.inspect(o)),t.exit(o)):c&&p(" POST MISSING CONTEXT "+e+" uid:"+n+" handle:"+f(i))},destroy(n){l=n,c&&p("DESTROY "+e+" uid:"+n+" context:"+r.inspect(t._contexts.get(l))+" active:"+r.inspect(t.active,!0)),t._contexts.delete(n)}}),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)}));process.namespaces=Object.create(null)},ERROR_SYMBOL:"error@context"},u.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return c&&p("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[e]=t,t},u.prototype.get=function(e){if(this.active)return c&&p("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0)),this.active[e];c&&p("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+l+" active:"+r.inspect(this.active,!0))},u.prototype.createContext=function(){c&&p("   CREATING Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=l,c&&p("   CREATED Context: "+this.name+" uid:"+l+" len:"+this._set.length+"  context:"+r.inspect(e,!0,2,!0)),e},u.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return c&&p(" BEFORE RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t)),e(t),t}catch(e){throw e&&(e["error@context"]=t),e}finally{c&&p(" AFTER RUN: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t)}},u.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},u.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let n=e(t);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return c&&p(" BEFORE runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t)),n.then(e=>(c&&p(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e)).catch(e=>{throw e["error@context"]=t,c&&p(" AFTER runPromise: "+this.name+" uid:"+l+" len:"+this._set.length+" "+r.inspect(t)),this.exit(t),e})},u.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e["error@context"]=t),e}finally{n.exit(t)}}},u.prototype.enter=function(e){i.ok(e,"context must be provided for entering"),c&&p("  ENTER "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(e)),this._set.push(this.active),this.active=e},u.prototype.exit=function(e){if(i.ok(e,"context must be provided for exiting"),c&&p("  EXIT "+this.name+" uid:"+l+" len:"+this._set.length+" context: "+r.inspect(e)),this.active===e)return i.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(c&&p("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(e)),i.ok(t>=0,"context not currently entered; can't exit. \n"+r.inspect(this)+"\n"+r.inspect(e))):(i.ok(t,"can't remove top context"),this._set.splice(t,1))},u.prototype.bindEmitter=function(e){i.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,n="context@"+this.name;o(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;let t=e,n=e["cls@contexts"];return Object.keys(n).forEach((function(e){let r=n[e];t=r.namespace.bind(t,r.context)})),t}))},u.prototype.fromException=function(e){return e["error@context"]},process.namespaces={},s._state&&!s._state.enabled&&s.enable(),c){var g=n(295);for(var m in g.filter._modifiers)g.filter.deattach(m)}},function(e,t,n){"use strict";const r=n(515);if(global._asyncHook){if(global._asyncHook.version!==n(294).version)throw new Error("Conflicting version of async-hook-jl found");e.exports=global._asyncHook}else{n(295).filter.attach((function(e,t){return t.filter((function(e){const t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),e.exports=global._asyncHook=new r}},function(e,t,n){"use strict";const r=process.binding("async_wrap"),i=r.Providers.TIMERWRAP,o={nextTick:n(516),promise:n(517),timers:n(518)},s=new Set;function a(){this.enabled=!1,this.counter=0}function c(){const e=this.initFns=[],t=this.preFns=[],n=this.postFns=[],r=this.destroyFns=[];this.init=function(t,n,r,o){if(n!==i)for(const i of e)i(t,this,n,r,o);else s.add(t)},this.pre=function(e){if(!s.has(e))for(const n of t)n(e,this)},this.post=function(e,t){if(!s.has(e))for(const r of n)r(e,this,t)},this.destroy=function(e){if(s.has(e))s.delete(e);else for(const t of r)t(e)}}function l(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function u(){this._state=new a,this._hooks=new c,this.version=n(294).version,this.providers=r.Providers;for(const e of Object.keys(o))o[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}c.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},c.prototype.remove=function(e){e.init&&l(this.initFns,e.init),e.pre&&l(this.preFns,e.pre),e.post&&l(this.postFns,e.post),e.destroy&&l(this.destroyFns,e.destroy)},e.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,r.enable()},u.prototype.disable=function(){this._state.enabled=!1,r.disable()}},function(e,t,n){"use strict";function r(){}e.exports=function(){const e=this._hooks,t=this._state,n=process.nextTick;process.nextTick=function(){if(!t.enabled)return n.apply(process,arguments);const i=new Array(arguments.length);for(let e=0;e<arguments.length;e++)i[e]=arguments[e];const o=i[0];if("function"!=typeof o)throw new TypeError("callback is not a function");const s=new r,a=--t.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(s,a,!0),e.destroy.call(null,a)}))}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}},function(e,t,n){"use strict";function r(){}e.exports=function(){const e=this._hooks,t=this._state,n=global.Promise,i=n.prototype.then;function o(t,n,r,i){return"function"!=typeof t?i?function(t){return function(n){return e.destroy.call(null,t),n}}(r):function(t){return function(n){throw e.destroy.call(null,t),n}}(r):function(){e.pre.call(n,r);try{return t.apply(this,arguments)}finally{e.post.call(n,r,!1),e.destroy.call(null,r)}}}n.prototype.then=function(n,s){if(!t.enabled)return i.call(this,n,s);const a=new r,c=--t.counter;return e.init.call(a,c,0,null,null),i.call(this,o(n,a,c,!0),o(s,a,c,!1))}}},function(e,t,n){"use strict";const r=n(293);function i(){}function o(){}function s(){}const a=new Map,c=new Map,l=new Map;let u=null,d=!1;function h(e,t,n,i,o,s,a){const c=r[n],l=r[i];r[n]=function(){if(!t.enabled)return c.apply(r,arguments);const n=new Array(arguments.length);for(let e=0;e<arguments.length;e++)n[e]=arguments[e];const i=n[0];if("function"!=typeof i)throw new TypeError('"callback" argument must be a function');const l=new o,h=--t.counter;let p=void 0;return e.init.call(l,h,0,null,null),n[0]=function(){u=p,e.pre.call(l,h);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(l,h,!0),s.delete(p),e.destroy.call(null,h)}))}e.post.call(l,h,!1),u=null,(a||d)&&(d=!1,s.delete(p),e.destroy.call(null,h))},p=c.apply(r,n),s.set(p,h),p},r[i]=function(t){if(u===t&&null!==t)d=!0;else if(s.has(t)){const n=s.get(t);s.delete(t),e.destroy.call(null,n)}l.apply(r,arguments)}}e.exports=function(){h(this._hooks,this._state,"setTimeout","clearTimeout",i,a,!0),h(this._hooks,this._state,"setInterval","clearInterval",o,c,!1),h(this._hooks,this._state,"setImmediate","clearImmediate",s,l,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate}},function(e,t,n){var r=n(520);function i(){this.extend=new a,this.filter=new a,this.format=new c,this.version=n(296).version}var o=!1;i.prototype.callSite=function e(t){t||(t={}),o=!0;var n={};Error.captureStackTrace(n,e);var r=n.stack;return o=!1,r=r.slice(t.slice||0),t.extend&&(r=this.extend._modify(n,r)),t.filter&&(r=this.filter._modify(n,r)),r};var s=new i;function a(){this._modifiers=[]}function c(){this._formater=r,this._previous=void 0}a.prototype._modify=function(e,t){for(var n=0,r=this._modifiers.length;n<r;n++)t=this._modifiers[n](e,t);return t},a.prototype.attach=function(e){this._modifiers.push(e)},a.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},c.prototype.replace=function(e){e?this._formater=e:this.restore()},c.prototype.restore=function(){this._formater=r,this._previous=void 0},c.prototype._backup=function(){this._previous=this._formater},c.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&s.format.replace(Error.prepareStackTrace);var l=!1;function u(e,t){if(o)return t;if(l)return r(e,t);var n=t.concat();n=s.extend._modify(e,n),n=(n=s.filter._modify(e,n)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:n}),l=!0;var i=s.format._formater(e,n);return l=!1,i}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?s.format._roolback():(s.format._backup(),s.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),e.exports=s},function(e,t){e.exports=function(e,t){var n=[];n.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var r=0;r<t.length;r++){var i,o=t[r];try{i=o.toString()}catch(e){try{i="<error: "+e+">"}catch(e){i="<error>"}}n.push("    at "+i)}return n.join("\n")}},function(e,t,n){"use strict";var r=n(67),i=n(185);function o(e){this.name=e,this.active=null,this._set=[],this.id=null}function s(e){return process.namespaces[e]}function a(e){var t=s(e);r.ok(t,"can't delete nonexistent namespace!"),r.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function c(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){a(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||n(522),o.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},o.prototype.get=function(e){if(this.active)return this.active[e]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e["error@context"]=t),e}finally{this.exit(t)}},o.prototype.runAndReturn=function(e){var t;return this.run((function(n){t=e(n)})),t},o.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var n=this;return function(){n.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e["error@context"]=t),e}finally{n.exit(t)}}},o.prototype.enter=function(e){r.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},o.prototype.exit=function(e){if(r.ok(e,"context must be provided for exiting"),this.active===e)return r.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);r.ok(t>=0,"context not currently entered; can't exit"),r.ok(t,"can't remove top context"),this._set.splice(t,1)},o.prototype.bindEmitter=function(e){r.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,n="context@"+this.name;i(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][n]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;var t=e,n=e["cls@contexts"];return Object.keys(n).forEach((function(e){var r=n[e];t=r.namespace.bind(t,r.context)})),t}))},o.prototype.fromException=function(e){return e["error@context"]},process.namespaces||c(),e.exports={getNamespace:s,createNamespace:function(e){r.ok(e,"namespace must be given a name!");var t=new o(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:a,reset:c}},function(e,t,n){"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var r=n(186),i=n(38),o=r.wrap,s=r.massWrap,a=n(523),c=n(22),l=i.gte(process.version,"6.0.0"),u=i.gte(process.version,"7.0.0"),d=i.gte(process.version,"8.0.0"),h=i.gte(process.version,"11.0.0"),p=n(187);function f(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=a(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=a(this._handle.onconnection))}}}function g(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=a(t._originalOnread)}}u&&!p._normalizeArgs?p._normalizeArgs=function(e){if(0===e.length)return[{},null];var t,n,r=e[0],i={};"object"==typeof r&&null!==r?i=r:"string"==typeof(t=r)&&!1===(n=t,(n=Number(n))>=0&&n)?i.path=r:(i.port=r,e.length>1&&"string"==typeof e[1]&&(i.host=e[1]));var o=e[e.length-1];return"function"!=typeof o?[i,null]:[i,o]}:u||p._normalizeConnectArgs||(p._normalizeConnectArgs=function(e){var t,n={};"object"==typeof e[0]&&null!==e[0]?n=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?n.path=e[0]:(n.port=e[0],"string"==typeof e[1]&&(n.host=e[1]));var r=e[e.length-1];return"function"==typeof r?[n,r]:[n]}),"_setUpListenHandle"in p.Server.prototype?o(p.Server.prototype,"_setUpListenHandle",f):o(p.Server.prototype,"_listen2",f),o(p.Socket.prototype,"connect",(function(e){return function(){var t;(t=d&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:u?p._normalizeArgs(arguments):p._normalizeConnectArgs(arguments))[1]&&(t[1]=a(t[1]));var n=e.apply(this,t);return g(this),n}}));var m=n(81);o(m.Agent.prototype,"addRequest",(function(e){return function(t){var n=t.onSocket;return t.onSocket=a((function(e){return g(e),n.apply(this,arguments)})),e.apply(this,arguments)}}));var v=n(55);function y(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=a(e._handle.onread),o(e._handle,"close",k))})),e._handle&&(e._handle.onexit=a(e._handle.onexit))}v.ChildProcess?o(v.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return y(this),t}})):s(v,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return y(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var b=[];process._nextDomainTick&&b.push("_nextDomainTick"),process._tickDomainCallback&&b.push("_tickDomainCallback"),s(process,b,x),o(process,"nextTick",k);var S=["setTimeout","setInterval"];global.setImmediate&&S.push("setImmediate");var E=n(293),w=global.setTimeout===E.setTimeout;s(E,S,k),w&&s(global,S,k);var _=n(524);s(_,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],x),_.resolveNaptr&&o(_,"resolveNaptr",x);var P,C,T=n(29);s(T,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],x),T.lchown&&o(T,"lchown",x),T.lchmod&&o(T,"lchmod",x),T.ftruncate&&o(T,"ftruncate",x);try{P=n(131)}catch(e){}if(P&&P.Deflate&&P.Deflate.prototype){var I=Object.getPrototypeOf(P.Deflate.prototype);I._transform?o(I,"_transform",x):I.write&&I.flush&&I.end&&s(I,["write","flush","end"],x)}try{C=n(73)}catch(e){}if(C){var O=["pbkdf2","randomBytes"];h||O.push("pseudoRandomBytes"),s(C,O,x)}var R=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();if(R){var D=process.addAsyncListener({create:function(){R=!1}});global.Promise.resolve(!0).then((function(){R=!1})),process.removeAsyncListener(D)}function x(e){var t=function(){var t,n=arguments.length-1;if("function"==typeof arguments[n]){t=Array(arguments.length);for(var r=0;r<arguments.length-1;r++)t[r]=arguments[r];t[n]=a(arguments[n])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=a(r)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=a(i)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=a(o)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof s&&(s=a(s)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=a(c)),e.call(this,n,r,i,o,s,c))};default:return t}}function k(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=a(arguments[0]);for(var n=1;n<arguments.length;n++)t[n]=arguments[n]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(n){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n))};case 2:return function(n,r){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r))};case 3:return function(n,r,i){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i))};case 4:return function(n,r,i,o){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o))};case 5:return function(n,r,i,o,s){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o,s))};case 6:return function(n,r,i,o,s,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=a(n)),e.call(this,n,r,i,o,s,c))};default:return t}}R&&function(){var e=global.Promise;function t(n){if(!(this instanceof t))return e(n);if("function"!=typeof n)return new e(n);var i,o,s=new e((function(e,t){i=this,o=[function(t){return r(s,!1),e(t)},function(e){return r(s,!1),t(e)}]}));s.__proto__=t.prototype;try{n.apply(i,o)}catch(e){o[1](e)}return s}c.inherits(t,e),o(e.prototype,"then",s),e.prototype.chain&&o(e.prototype,"chain",s);if(l)global.Promise=n(525)(e,r);else{["all","race","reject","resolve","accept","defer"].forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n])})),global.Promise=t}function r(e,t){e.__asl_wrapper&&!t||(e.__asl_wrapper=a(i))}function i(t,n,o,s){var a;try{return{returnVal:a=n.call(t,o),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{a instanceof e?s.__asl_wrapper=function(){var e=a.__asl_wrapper||i;return e.apply(this,arguments)}:r(s,!0)}}function s(e){return function(){var t=this,n=e.apply(t,Array.prototype.map.call(arguments,r));return n.__asl_wrapper=function(e,r,o,s){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,n),n.__asl_wrapper(e,r,o,s)):i(e,r,o,s)},n;function r(e){return"function"!=typeof e?e:a((function(r){var o=(t.__asl_wrapper||i)(this,e,r,n);if(o.error)throw o.errorVal;return o.returnVal}))}}}}()},function(e,t,n){var r,i,o=n(186).wrap,s=[],a=0,c=!1,l=[];function u(e,t){var n=e.length,r=t.length,i=[];if(0===n&&0===r)return i;for(var o=0;o<n;o++)i[o]=e[o];if(0===r)return i;for(var s=0;s<r;s++){var a=!0;for(o=0;o<n;o++)if(e[o].uid===t[s].uid){a=!1;break}a&&i.push(t[s])}return i}if(process._fatalException){var d,h=!1;r=function(e){var t=s.length;if(h||0===t)return!1;var n=!1;h=!0;for(var r=0;r<t;++r){var i=s[r];if(0!=(8&i.flags)){var o=d&&d[i.uid];n=i.error(o,e)||n}}return h=!1,l.length>0&&(s=l.pop()),d=void 0,n&&!c},i=function(e,t,n){var r=[];c=!0;for(var i=0;i<n;++i){var o=t[i];if(r[o.uid]=o.data,0!=(1&o.flags)){var a=o.create(o.data);void 0!==a&&(r[o.uid]=a)}}return c=!1,function(){d=r,l.push(s),s=u(t,s),c=!0;for(var i=0;i<n;++i)(2&t[i].flags)>0&&t[i].before(this,r[t[i].uid]);c=!1;var o=e.apply(this,arguments);for(c=!0,i=0;i<n;++i)(4&t[i].flags)>0&&t[i].after(this,r[t[i].uid]);return c=!1,s=l.pop(),d=void 0,o}},o(process,"_fatalException",(function(e){return function(t){return r(t)||e(t)}}))}else{var p=!1;r=function(e){if(p)throw e;for(var t=!1,n=s.length,r=0;r<n;++r){var i=s[r];0!=(8&i.flags)&&(t=i.error(null,e)||t)}if(!t&&c)throw e},i=function(e,t,n){var i=[];c=!0;for(var o=0;o<n;++o){var a=t[o];if(i[a.uid]=a.data,0!=(1&a.flags)){var d=a.create(a.data);void 0!==d&&(i[a.uid]=d)}}return c=!1,function(){var o,a=!1,d=!1;l.push(s),s=u(t,s),c=!0;for(var h=0;h<n;++h)(2&t[h].flags)>0&&t[h].before(this,i[t[h].uid]);c=!1;try{o=e.apply(this,arguments)}catch(e){a=!0;for(h=0;h<n;++h)if(0!=(8&s[h].flags))try{d=s[h].error(i[t[h].uid],e)||d}catch(e){throw p=!0,e}if(!d)throw process.removeListener("uncaughtException",r),process._originalNextTick((function(){process.addListener("uncaughtException",r)})),e}finally{if(!a||d){for(c=!0,h=0;h<n;++h)(4&t[h].flags)>0&&t[h].after(this,i[t[h].uid]);c=!1}s=l.pop()}return o}},process.addListener("uncaughtException",r)}function f(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=1),"function"==typeof e.before&&(this.before=e.before,this.flags|=2),"function"==typeof e.after&&(this.after=e.after,this.flags|=4),"function"==typeof e.error&&(this.error=e.error,this.flags|=8),this.uid=++a,this.data=void 0===t?null:t}function g(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof f?e:new f(e,t)}f.prototype.create=void 0,f.prototype.before=void 0,f.prototype.after=void 0,f.prototype.error=void 0,f.prototype.data=void 0,f.prototype.uid=0,f.prototype.flags=0,process.createAsyncListener=g,process.addAsyncListener=function(e,t){var n;n=e instanceof f?e:g(e,t);for(var r=!1,i=0;i<s.length;i++)if(n===s[i]){r=!0;break}return r||s.push(n),n},process.removeAsyncListener=function(e){for(var t=0;t<s.length;t++)if(e===s[t]){s.splice(t,1);break}},e.exports=function(e){var t=s.length;if(0===t)return e;for(var n=s.slice(),r=0;r<t;++r)if(n[r].flags>0)return i(e,n,t);return function(e,t,n){c=!0;for(var r=0;r<n;++r){var i=t[r];i.create&&i.create(i.data)}return c=!1,function(){l.push(s),s=u(t,s);var n=e.apply(this,arguments);return s=l.pop(),n}}(e,n,t)}},function(e,t){e.exports=require("dns")},function(e,t,n){"use strict";e.exports=(e,t)=>class extends e{constructor(e){var n,r;super((function(e,o){n=this,r=[function(n){return t(i,!1),e(n)},function(e){return t(i,!1),o(e)}]}));var i=this;try{e.apply(n,r)}catch(e){r[1](e)}return i}}},function(e,t,n){"use strict";var r=n(184),i=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(n(527).enable(e&&t,this._client),n(545).enable(e,this._client),n(546).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(31),o=[],s=function(e){var t=e.data.message;o.forEach((function(n){t instanceof Error?n.trackException({exception:t}):(t.lastIndexOf("\n")==t.length-1&&(t=t.substring(0,t.length-1)),n.trackTrace({message:t,severity:e.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information}))}))};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("console",s),o.push(t)):0===(o=o.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("console",s)},t.dispose=function(){i.channel.unsubscribe("console",s),o=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(297),i=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=i,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof r.EventData||e instanceof r.ExceptionData||e instanceof r.MessageData||e instanceof r.MetricData||e instanceof r.PageViewData||e instanceof r.RemoteDependencyData||e instanceof r.RequestData}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"};e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(298));e.exports=o},function(e,t,n){"use strict";var r=n(299),i=function(){this.kind=r.Measurement};e.exports=i},function(e,t,n){"use strict";var r=function(){this.ver=1,this.sampleRate=100,this.tags={}};e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r=function(){this.hasFullStack=!0,this.parsedStack=[]};e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(300));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return i(t,e),t}(n(74));e.exports=o},function(e,t,n){"use strict";var r;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(544))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryTypeToBaseType=function(e){switch(e){case r.Event:return"EventData";case r.Exception:return"ExceptionData";case r.Trace:return"MessageData";case r.Metric:return"MetricData";case r.Request:return"RequestData";case r.Dependency:return"RemoteDependencyData";case r.Availability:return"AvailabilityData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return r.Event;case"ExceptionData":return r.Exception;case"MessageData":return r.Trace;case"MetricData":return r.Metric;case"RequestData":return r.Request;case"RemoteDependencyData":return r.Dependency;case"AvailabilityData":return r.Availability}},t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability"}(r=t.TelemetryType||(t.TelemetryType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(31),o=[],s={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},a=function(e){var t=e.data.result;o.forEach((function(n){var r=s[e.data.level];t instanceof Error?n.trackException({exception:t}):n.trackTrace({message:t,severity:r})}))};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("bunyan",a),o.push(t)):0===(o=o.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("bunyan",a)},t.dispose=function(){i.channel.unsubscribe("bunyan",a),o=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n(31),o=[],s={syslog:function(e){var t={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},npm:function(e){var t={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},unknown:function(e){return r.SeverityLevel.Information}},a=function(e){var t=e.data.message;o.forEach((function(n){if(t instanceof Error)n.trackException({exception:t,properties:e.data.meta});else{var r=s[e.data.levelKind](e.data.level);n.trackTrace({message:t,severity:r,properties:e.data.meta})}}))};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("winston",a),o.push(t)):0===(o=o.filter((function(e){return e!=t}))).length&&i.channel.unsubscribe("winston",a)},t.dispose=function(){i.channel.unsubscribe("winston",a),o=[]}},function(e,t,n){"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var n=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(n[0])>13||13===parseInt(n[0])&&parseInt(n[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){this._isInitialized=!0;if(!this._exceptionListenerHandle){var r=function(t,r,i){void 0===i&&(i=new Error(e._FALLBACK_ERROR_MESSAGE)),n._client.trackException({exception:i}),n._client.flush({isAppCrashing:!0}),t&&r&&1===process.listeners(r).length&&(console.error(i),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();e.exports=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(83),s=n(49),a=n(62),c=n(108),l=n(301),u=n(96),d=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return i(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=o.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,i=s.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;this.correlationId?(i=s.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(a=n.hostname+" | "+this.correlationId)):i=s.RemoteDependencyDataConstants.TYPE_HTTP,n.port&&(a+=":"+n.port);var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:i,target:a};if(e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)e=o.parse(e);else{var n=e;e={},n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}if(e.path){var r=o.parse(e.path);e.pathname=r.pathname,e.search=r.search}e.host&&e.port&&(!o.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent&&t.agent.protocol||void 0,e.hostname=e.hostname||"localhost",o.format(e)},t}(l);e.exports=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=[];t.subscriber=function(e){e.data.event.commandName,i.forEach((function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})}))},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mongodb",t.subscriber),i.push(n)):0===(i=i.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("mongodb",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=[];t.subscriber=function(e){i.forEach((function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})}))},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mysql",t.subscriber),i.push(n)):0===(i=i.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("mysql",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=[];t.subscriber=function(e){i.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})}))},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("redis",t.subscriber),i.push(n)):0===(i=i.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("redis",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(31),i=[];t.subscriber=function(e){i.forEach((function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})}))},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("postgres",t.subscriber),i.push(n)):0===(i=i.filter((function(e){return e!=n}))).length&&r.channel.unsubscribe("postgres",t.subscriber)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(83),s=n(49),a=n(62),c=n(108),l=n(301),u=n(96),d=n(554),h=n(302),p=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return i(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+o.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+o.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=o.parse(e.url),r=n.pathname,i=n.search;return o.format({protocol:t?"https":"http",host:e.headers.host,pathname:r,search:i})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(a.getCookie(e,n))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var n=e.headers[c.traceStateHeader],r=e.headers[c.traceparentHeader],i=e.headers[c.requestIdHeader],o=e.headers[c.parentIdHeader],s=e.headers[c.rootIdHeader];this.correlationContextHeader=e.headers[c.correlationContextHeader],u.w3cEnabled&&(r||n)?(this.traceparent=new h(r),this.tracestate=r&&n&&new d(n),this.setBackCompatFromThisTraceContext()):i?u.w3cEnabled?(this.traceparent=new h(null,i),this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new h,this.traceparent.parentId=o,this.traceparent.legacyRootId=s||o,this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=u.generateRequestId(s||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new s.ContextTagKeys,t}(l);e.exports=p},function(e,t,n){"use strict";var r=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var n=t[0].trim(),r=t[1].trim(),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return i&&o}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var n=[],r={},i=t.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o].trim();if(0!==a.length){var c=a.split("=");if(2!==c.length)return null;if(!e.validateKeyChars(c[0]))return null;if(r[c[0]])return null;r[c[0]]=!0,n.push(a)}}return n},e.strict=!0,e}();e.exports=r},function(e,t,n){"use strict";var r=n(37),i=n(190),o=n(557),s=n(558),a=n(107),c=n(191),l=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new i(e),this.context=t||new c,this._sender=new s(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=o.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,n=e.count||1,r=a.PerformanceToQuickPulseCounter[e.name];r&&(this._metrics[r]?(this._metrics[r].Value=(this._metrics[r].Value*this._metrics[r].Weight+t*n)/(this._metrics[r].Weight+n),this._metrics[r].Weight+=n):(this._metrics[r]=o.createQuickPulseMetric(e),this._metrics[r].Name=r,this._metrics[r].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){var t=this,n=Object.keys(this._metrics).map((function(e){return t._metrics[e]})),r=o.createQuickPulseEnvelope(n,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(r):this._ping(r);var i=this._isCollectingData?e.POST_INTERVAL:e.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref()},e.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))},e.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))},e.prototype._quickPulseDone=function(e,t){null!=e?(this._isCollectingData!==e&&(r.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();e.exports=l},function(e,t,n){"use strict";var r=n(107),i=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR).reduce((function(t,n){var r=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===r.length){var i=r[0].toLowerCase(),o=r[1];t[i]=o}return t}),{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();e.exports=i},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=n(20),o=n(49),s=n(107),a=n(62),c=n(37),l=a.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,n,r){var o=i&&"function"==typeof i.hostname&&i.hostname()||"Unknown",s=r.tags&&r.keys&&r.keys.cloudRoleInstance&&r.tags[r.keys.cloudRoleInstance]||o;return{Documents:t.length>0?t:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:r.tags[r.keys.internalSdkVersion],StreamId:l,MachineName:o,Instance:s}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case o.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case o.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case o.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case o.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case o.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.name;return r({},n,{Name:i})},e.createQuickPulseTraceDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.severityLevel||0;return r({},n,{Message:t.data.baseData.message,SeverityLevel:o.SeverityLevel[i]})},e.createQuickPulseExceptionDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData.exceptions,o="",s="",a="";return i&&i.length>0&&(i[0].parsedStack&&i[0].parsedStack.length>0?i[0].parsedStack.forEach((function(e){o+=e.assembly+"\n"})):i[0].stack&&i[0].stack.length>0&&(o=i[0].stack),s=i[0].message,a=i[0].typeName),r({},n,{Exception:o,ExceptionMessage:s,ExceptionType:a})},e.createQuickPulseRequestDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r({},n,{Name:i.name,Success:i.success,Duration:i.duration,ResponseCode:i.responseCode,OperationName:i.name})},e.createQuickPulseDependencyDocument=function(t){var n=e.createQuickPulseDocument(t),i=t.data.baseData;return r({},n,{Name:i.name,Target:i.target,Success:i.success,Duration:i.duration,ResultCode:i.resultCode,CommandName:i.data,OperationName:n.OperationId,DependencyTypeName:i.type})},e.createQuickPulseDocument=function(t){var n,r;return t.data.baseType?(r=s.TelemetryTypeStringToQuickPulseType[t.data.baseType],n=s.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:n,__type:r,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],n=e.data.baseData.measurements||{};for(var r in n)if(n.hasOwnProperty(r)){var i={key:r,value:n[r]};t.push(i)}var o=e.data.baseData.properties||{};for(var r in o)if(o.hasOwnProperty(r)){i={key:r,value:o[r]};t.push(i)}return t},e.keys=new o.ContextTagKeys,e}();e.exports=u},function(e,t,n){"use strict";var r=n(82),i=n(134),o=n(37),s="POST",a="x-ms-qps-transmission-time",c="x-ms-qps-subscribed",l=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t){this._submitData(e,t,"ping")},e.prototype.post=function(e,t){this._submitData([e],t,"post")},e.prototype._submitData=function(t,n,l){var u,d,h=this,p=JSON.stringify(t),f=((u={})[i.disableCollectionRequestOption]=!0,u.host=this._config.quickPulseHost,u.method=s,u.path="/QuickPulseService.svc/"+l+"?ikey="+this._config.instrumentationKey,u.headers=((d={Expect:"100-continue"})[a]=1e4*Date.now(),d["Content-Type"]="application/json",d["Content-Length"]=Buffer.byteLength(p),d),u),g=r.request(f,(function(e){var t="true"===e.headers[c];h._consecutiveErrors=0,n(t,e)}));g.on("error",(function(t){h._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";h._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(r="Live Metrics endpoint could not be reached "+h._consecutiveErrors+" consecutive times. Most recent error:",o.warn(e.TAG,r,t)):o.info(e.TAG,r,t),n()})),g.write(p),g.end()},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();e.exports=l},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(190),o=n(191),s=n(37),a=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,r,i){var o=this;if(void 0===r&&(r={}),void 0===i&&(i=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var a=n(!function(){var e=new Error("Cannot find module 'applicationinsights-native-metrics'");throw e.code="MODULE_NOT_FOUND",e}());e._emitter=new a,e._metricsAvailable=!0,s.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,i),this._handle=setInterval((function(){return o._trackNativeMetrics()}),i),this._handle.unref()):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var t=process.env[i.ENV_nativeMetricsDisableAll],n=process.env[i.ENV_nativeMetricsDisablers];if(t)return{isEnabled:!1,disabledMetrics:{}};if(n){var o=n.split(","),s={};if(o.length>0)for(var a=0,c=o;a<c.length;a++){s[c[a]]=!0}return"object"==typeof e?{isEnabled:!0,disabledMetrics:r({},e,s)}:{isEnabled:e,disabledMetrics:s}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var t,n=e._emitter.getGCData();for(var r in n){var i=n[r].metrics,s=r+" Garbage Collection Duration",a=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:s,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var t=e._emitter.getLoopData().loopUsage;if(0!=t.count){var n,r=Math.sqrt(t.sumSquares/t.count-Math.pow(t.total/t.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:t.total,count:t.count,min:t.min,max:t.max,stdDev:r,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,n)})}}},e.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var e,t,n,r=process.memoryUsage(),i=r.heapUsed,s=r.heapTotal,a=r.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:i,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:a-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+o.sdkVersion,n)})}},e}();t.AutoCollectNativePerformance=a},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=n(561),s=n(303),a=n(134),c=n(37),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?s.trackRequestSync(this,e):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?s.trackRequest(this,e):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?a.trackRequest(this,e):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(o);e.exports=l},function(e,t,n){"use strict";var r=n(83),i=n(190),o=n(191),s=n(49),a=n(562),c=n(563),l=n(106),u=n(566),d=n(62),h=n(37),p=n(567),f=function(){function e(e){this._telemetryProcessors=[];var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var n=new u(this.config);this.channel=new a((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),n)}return e.prototype.trackAvailability=function(e){this.track(e,s.TelemetryType.Availability)},e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=p.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var r=this.runTelemetryProcessors(n,e.contextObjects);r=r&&c.samplingTelemetryProcessor(n,{correlationContext:l.CorrelationContextManager.getCurrentContext()}),c.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),r&&this.channel.send(n)}else h.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=l.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,h.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n},e}();e.exports=f},function(e,t,n){"use strict";var r=n(37),i=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var n=this._stringify(e);"string"==typeof n&&(this._buffer.push(n),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs())))}else r.warn("Cannot send null/undefined telemetry")},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var r=this._buffer.join("\n");e?(this._sender.saveOnCrash(r),"function"==typeof t&&t("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(r):new Buffer(r),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){r.warn("Failed to serialize payload",t,e)}},e}();e.exports=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(564)),r(n(565))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49);function i(e){var t=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)t=((t<<5)+t|0)+e.charCodeAt(n)|0;return(t=t<=-2147483648?2147483647:Math.abs(t))/2147483647*100}t.samplingTelemetryProcessor=function(e,t){var n=e.sampleRate;return null==n||n>=100||(!(!e.data||r.TelemetryType.Metric!==r.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?i(t.correlationContext.operation.id)<n:100*Math.random()<n))},t.getSamplingHashCode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(188),i=n(49);t.performanceMetricsTelemetryProcessor=function(e,t){switch(t&&t.addDocument(e),e.data.baseType){case i.TelemetryTypeString.Exception:r.countException();break;case i.TelemetryTypeString.Request:var n=e.data.baseData;r.countRequest(n.duration,n.success);break;case i.TelemetryTypeString.Dependency:var o=e.data.baseData;r.countDependency(o.duration,o.success)}return!0}},function(e,t,n){"use strict";var r=n(29),i=n(20),o=n(4),s=n(131),a=n(55),c=n(37),l=n(134),u=n(62),d=function(){function e(t,n,i){if(this._config=t,this._onSuccess=n,this._onError=i,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=r.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,c.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},e.prototype.send=function(t,n){var r=this,i=this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};s.gzip(t,(function(s,a){var d=a;s?(c.warn(s),d=t,o.headers["Content-Length"]=t.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length),c.info(e.TAG,o),o[l.disableCollectionRequestOption]=!0;var h=u.makeRequest(r._config,i,o,(function(i){i.setEncoding("utf-8");var o="";i.on("data",(function(e){o+=e})),i.on("end",(function(){r._numConsecutiveFailures=0,c.info(e.TAG,o),"function"==typeof r._onSuccess&&r._onSuccess(o),"function"==typeof n&&n(o),r._enableDiskRetryMode&&(200===i.statusCode?setTimeout((function(){return r._sendFirstFileOnDisk()}),r._resendInterval).unref():408!==i.statusCode&&429!==i.statusCode&&439!==i.statusCode&&500!==i.statusCode&&503!==i.statusCode||r._storeToDisk(t))}))}));h.on("error",(function(i){if(r._numConsecutiveFailures++,!r._enableDiskRetryMode||r._numConsecutiveFailures>0&&r._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var o="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";r._enableDiskRetryMode&&(o="Ingestion endpoint could not be reached "+r._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),c.warn(e.TAG,o,i)}else{o="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";c.info(e.TAG,o,i)}if(r._onErrorHelper(i),"function"==typeof n){var s="error sending telemetry";i&&"function"==typeof i.toString&&(s=i.toString()),n(s)}r._enableDiskRetryMode&&r._storeToDisk(t)})),h.write(d),h.end()}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},e.prototype._runICACLS=function(t,n){var r=a.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",(function(e){return n(e)})),r.on("close",(function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!a.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=a.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=a.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",(function(e){return r+=e})),n.on("error",(function(e){return t(e,null)})),n.on("close",(function(n,i){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(a.spawnSync){var t=a.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,n(i);r._runICACLS(r._getACLArguments(t,o),(function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)}))}))):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;r.lstat(e,(function(i,o){i&&"ENOENT"===i.code?r.mkdir(e,(function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)})):!i&&o.isDirectory()?n._applyACLRules(e,t):t(i||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){r.readdir(e,(function(n,i){if(n)return t(n,-1);var s=null,a=0,c=0;if(0!==i.length)for(var l=0;l<i.length;l++)r.stat(o.join(e,i[l]),(function(e,n){c++,e?s=e:n.isFile()&&(a+=n.size),c===i.length&&t(s,s?-1:a)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=r.readdirSync(e),n=0,i=0;i<t.length;i++)n+=r.statSync(o.join(e,t[i])).size;return n},e.prototype._storeToDisk=function(t){var n=this,s=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);c.info(e.TAG,"Checking existance of data storage directory: "+s),this._confirmDirExists(s,(function(i){if(i)return c.warn(e.TAG,"Error while checking/creating directory: "+(i&&i.message)),void n._onErrorHelper(i);n._getShallowDirectorySize(s,(function(i,a){if(i||a<0)return c.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),void n._onErrorHelper(i);if(a>n._maxBytesOnDisk)c.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);else{var l=(new Date).getTime()+".ai.json",u=o.join(s,l);c.info(e.TAG,"saving data to disk at: "+u),r.writeFile(u,t,{mode:384},(function(e){return n._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){var n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);try{c.info(e.TAG,"Checking existance of data storage directory: "+n),r.existsSync(n)||r.mkdirSync(n),this._applyACLRulesSync(n);var s=this._getShallowDirectorySizeSync(n);if(s>this._maxBytesOnDisk)return void c.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);var a=(new Date).getTime()+".ai.json",l=o.join(n,a);c.info(e.TAG,"saving data before crash to disk at: "+l),r.writeFileSync(l,t,{mode:384})}catch(t){c.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var t=this,n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);r.exists(n,(function(e){e&&r.readdir(n,(function(e,i){if(e)t._onErrorHelper(e);else if((i=i.filter((function(e){return o.basename(e).indexOf(".ai.json")>-1}))).length>0){var s=i[0],a=o.join(n,s);r.readFile(a,(function(e,n){e?t._onErrorHelper(e):r.unlink(a,(function(e){e?t._onErrorHelper(e):t.send(n)}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=5e7,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===i.type(),e}();e.exports=d},function(e,t,n){"use strict";var r=n(49),i=n(62),o=n(106),s=function(){function e(){}return e.createEnvelope=function(t,n,o,s,a){var c=null;switch(n){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t);break;case r.TelemetryType.Availability:c=e.createAvailabilityData(t)}if(o&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var l in o)c.baseData.properties[l]||(c.baseData.properties[l]=o[l]);else c.baseData.properties=o;c.baseData.properties=i.validateStringMap(c.baseData.properties)}var u=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=u,d.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,n===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=i.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=i.w3cTraceId();var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),n.baseData=t,n},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,o=new r.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(n),o.hasFullStack=i.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=i.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=i.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),n.baseData=t,n},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),i.baseData=t,i},e.createAvailabilityData=function(e){var t=new r.AvailabilityData;e.id?t.id=e.id:t.id=i.w3cTraceId(),t.name=e.name,t.duration=i.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),n.baseData=t,n},e.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var i in e.tags)r[i]=e.tags[i];if(t)for(var i in t)r[i]=t[i];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var s=n[o];if(a.regex.test(s)){var c=new a(n[o],r++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var l=0,u=t.length-1,d=0,h=l,p=u;l<u;){if((d+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var f=p-h+1;t.splice(h,f);break}h=l,p=u,l++,u--}}return t},e}(),a=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=i.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=i.trim(r[2])||this.method,this.fileName=i.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(void 0===e)return"undefined";if(null===e)return"null";try{return e&&e.fsPath?`<Uri:${e.fsPath}>`:JSON.stringify(e)}catch(e){return`<${t} cannot be serialized for logging>`}}Object.defineProperty(t,"__esModule",{value:!0}),t.returnValueToLogString=t.argsToLogString=void 0,t.argsToLogString=function(e){if(!e)return"";try{return e.map((e,t)=>`Arg ${t+1}: ${r(e,"argument")}`).join(", ")}catch(e){return""}},t.returnValueToLogString=function(e){return"Return Value: "+r(e,"Return value")}},function(e,t,n){"use strict";e.exports=function(){const e=[].slice.call(arguments).filter(e=>e),t=e.shift();return e.forEach(e=>{Object.keys(e).forEach(n=>{t[n]=e[n]})}),t}},function(e,t,n){var r=n(189),i=process.cwd,o=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return o||(o=i.call(process)),o};try{process.cwd()}catch(e){}var a=process.chdir;process.chdir=function(e){o=null,a.call(process,e)},e.exports=function(e){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,i){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,(function(t,r){t?i&&i(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(t,n){var i,o=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n),s=!0;try{i=e.fchmodSync(o,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return i}}(e);e.lutimes||function(e){r.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,n,i,o){e.open(t,r.O_SYMLINK,(function(t,r){t?o&&o(t):e.futimes(r,n,i,(function(t){e.close(r,(function(e){o&&o(t||e)}))}))}))},e.lutimesSync=function(t,n,i){var o,s=e.openSync(t,r.O_SYMLINK),a=!0;try{o=e.futimesSync(s,n,i),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===s&&(e.rename=(t=e.rename,function(n,r,i){var o=Date.now(),s=0;t(n,r,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout((function(){e.stat(r,(function(e,o){e&&"ENOENT"===e.code?t(n,r,a):i(c)}))}),s),void(s<100&&(s+=10));i&&i(c)}))}));var t;function n(t){return t?function(n,r,i){return t.call(e,n,r,(function(e){u(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(n,r){try{return t.call(e,n,r)}catch(e){if(!u(e))throw e}}:t}function o(t){return t?function(n,r,i,o){return t.call(e,n,r,i,(function(e){u(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function a(t){return t?function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!u(e))throw e}}:t}function c(t){return t?function(n,r,i){function o(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?t.call(e,n,r,o):t.call(e,n,o)}:t}function l(t){return t?function(n,r){var i=r?t.call(e,n,r):t.call(e,n);return i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296),i}:t}function u(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read=(h=e.read,function(t,n,r,i,o,s){var a;if(s&&"function"==typeof s){var c=0;a=function(l,u,d){if(l&&"EAGAIN"===l.code&&c<10)return c++,h.call(e,t,n,r,i,o,a);s.apply(this,arguments)}}return h.call(e,t,n,r,i,o,a)}),e.readSync=(d=e.readSync,function(t,n,r,i,o){for(var s=0;;)try{return d.call(e,t,n,r,i,o)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var d;var h}},function(e,t,n){var r=n(54).Stream;e.exports=function(e){return{ReadStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var l=s[a];this[l]=i[l]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){o._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()}))},WriteStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,n){"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}},function(e,t,n){const r=n(45).fromCallback;e.exports={copy:r(n(574))}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(305),s=n(50),a=n(75).pathExists;e.exports=function(e,t,n,c){"function"!=typeof n||c?("function"==typeof n||n instanceof RegExp)&&(n={filter:n}):(c=n,n={}),c=c||function(){},(n=n||{}).preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const l=process.cwd();if(i.resolve(l,e)===i.resolve(l,t))return c(new Error("Source and destination must not be the same."));r.lstat(e,(r,l)=>{if(r)return c(r);let u=null;if(l.isDirectory()){const e=t.split(i.sep);e.pop(),u=e.join(i.sep)}else u=i.dirname(t);a(u,(r,i)=>r?c(r):i?o(e,t,n,c):void s.mkdirs(u,r=>{if(r)return c(r);o(e,t,n,c)}))})}},function(e,t,n){"use strict";const r=n(32),i=n(20),o=n(4);e.exports={hasMillisRes:function(e){let t=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const n=new Date(1435410243862);r.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return e(i);r.open(t,"r+",(i,o)=>{if(i)return e(i);r.futimes(o,n,n,n=>{if(n)return e(n);r.close(o,n=>{if(n)return e(n);r.stat(t,(t,n)=>{if(t)return e(t);e(null,n.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let e=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const t=new Date(1435410243862);r.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=r.openSync(e,"r+");return r.futimesSync(n,t,t),r.closeSync(n),r.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,n,i){r.open(e,"r+",(e,o)=>{if(e)return i(e);r.futimes(o,t,n,e=>{r.close(o,t=>{i&&i(e||t)})})})}}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(306).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a,c){if("function"==typeof n?(a=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",a(e)}let l=n.mode;const u=n.fs||r;void 0===l&&(l=s&~process.umask()),c||(c=null),a=a||function(){},t=i.resolve(t),u.mkdir(t,l,r=>{if(!r)return a(null,c=c||t);switch(r.code){case"ENOENT":if(i.dirname(t)===t)return a(r);e(i.dirname(t),n,(r,i)=>{r?a(r,i):e(t,n,a,i)});break;default:u.stat(t,(e,t)=>{e||!t.isDirectory()?a(r,c):a(null,c)})}})}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(306).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a){n&&"object"==typeof n||(n={mode:n});let c=n.mode;const l=n.fs||r;if("win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===c&&(c=s&~process.umask()),a||(a=null),t=i.resolve(t);try{l.mkdirSync(t,c),a=a||t}catch(r){switch(r.code){case"ENOENT":if(i.dirname(t)===t)throw r;a=e(i.dirname(t),n,a),e(t,n,a);break;default:let o;try{o=l.statSync(t)}catch(e){throw r}if(!o.isDirectory())throw r}}return a}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(579),s=n(50);e.exports=function e(t,n,a){("function"==typeof a||a instanceof RegExp)&&(a={filter:a}),(a=a||{}).recursive=!!a.recursive,a.clobber=!("clobber"in a)||!!a.clobber,a.overwrite="overwrite"in a?!!a.overwrite:a.clobber,a.dereference="dereference"in a&&!!a.dereference,a.preserveTimestamps="preserveTimestamps"in a&&!!a.preserveTimestamps,a.filter=a.filter||function(){return!0},a.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const c=a.recursive&&!a.dereference?r.lstatSync(t):r.statSync(t),l=i.dirname(n),u=r.existsSync(l);let d=!1;if(a.filter instanceof RegExp?(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),d=a.filter.test(t)):"function"==typeof a.filter&&(d=a.filter(t,n)),c.isFile()&&d)u||s.mkdirsSync(l),o(t,n,{overwrite:a.overwrite,errorOnExist:a.errorOnExist,preserveTimestamps:a.preserveTimestamps});else if(c.isDirectory()&&d){r.existsSync(n)||s.mkdirsSync(n);r.readdirSync(t).forEach(r=>{const o=a;o.recursive=!0,e(i.join(t,r),i.join(n,r),o)})}else if(a.recursive&&c.isSymbolicLink()&&d){const e=r.readlinkSync(t);r.symlinkSync(e,n)}}},function(e,t,n){"use strict";const r=n(32),i=n(308)(65536);e.exports=function(e,t,n){const o=n.overwrite,s=n.errorOnExist,a=n.preserveTimestamps;if(r.existsSync(t)){if(!o){if(s)throw new Error(t+" already exists");return}r.unlinkSync(t)}const c=r.openSync(e,"r"),l=r.fstatSync(c),u=r.openSync(t,"w",l.mode);let d=1,h=0;for(;d>0;)d=r.readSync(c,i,0,65536,h),r.writeSync(u,i,0,d),h+=d;a&&r.futimesSync(u,l.atime,l.mtime),r.closeSync(c),r.closeSync(u)}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(67),s="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o.equal(typeof n,"function","rimraf: callback function required"),o(t,"rimraf: invalid options argument provided"),o.equal(typeof t,"object","rimraf: options should be object"),a(t),l(e,t,(function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries){return r++,setTimeout(()=>l(e,t,i),100*r)}"ENOENT"===o.code&&(o=null)}n(o)}))}function l(e,t,n){o(e),o(t),o("function"==typeof n),t.lstat(e,(r,i)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&s?u(e,t,r,n):i&&i.isDirectory()?h(e,t,r,n):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return s?u(e,t,r,n):h(e,t,r,n);if("EISDIR"===r.code)return h(e,t,r,n)}return n(r)}))}function u(e,t,n,r){o(e),o(t),o("function"==typeof r),n&&o(n instanceof Error),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,o)=>{i?r("ENOENT"===i.code?null:n):o.isDirectory()?h(e,t,n,r):t.unlink(e,r)})})}function d(e,t,n){let r;o(e),o(t),n&&o(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?f(e,t,n):t.unlinkSync(e)}function h(e,t,n,r){o(e),o(t),n&&o(n instanceof Error),o("function"==typeof r),t.rmdir(e,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?r(n):r(s):function(e,t,n){o(e),o(t),o("function"==typeof n),t.readdir(e,(r,o)=>{if(r)return n(r);let s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach(r=>{c(i.join(e,r),t,r=>{if(!s)return r?n(s=r):void(0==--a&&t.rmdir(e,n))})})})}(e,t,r)})}function p(e,t){let n;a(t=t||{}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o(t,"rimraf: missing options"),o.equal(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&d(e,t,n)}try{n&&n.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?d(e,t,n):f(e,t,n);if("EISDIR"!==n.code)throw n;f(e,t,n)}}function f(e,t,n){o(e),o(t),n&&o(n instanceof Error);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){o(e),o(t),t.readdirSync(e).forEach(n=>p(i.join(e,n),t));const n=s?100:1;let r=0;for(;;){let i=!0;try{const o=t.rmdirSync(e,t);return i=!1,o}finally{if(++r<n&&i)continue}}}(e,t);else if("ENOENT"!==r.code)throw r}}e.exports=c,c.sync=p},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(193);i.outputJson=r(n(583)),i.outputJsonSync=n(584),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},function(e,t,n){var r;try{r=n(32)}catch(e){r=n(29)}function i(e,t){var n,r="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL)),JSON.stringify(e,t?t.replacer:null,n).replace(/\n/g,r)+r}function o(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var s={readFile:function(e,t,n){null==n&&(n=t,t={}),"string"==typeof t&&(t={encoding:t});var i=(t=t||{}).fs||r,s=!0;"throws"in t&&(s=t.throws),i.readFile(e,t,(function(r,i){if(r)return n(r);var a;i=o(i);try{a=JSON.parse(i,t?t.reviver:null)}catch(t){return s?(t.message=e+": "+t.message,n(t)):n(null,null)}n(null,a)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var n=t.fs||r,i=!0;"throws"in t&&(i=t.throws);try{var s=n.readFileSync(e,t);return s=o(s),JSON.parse(s,t.reviver)}catch(t){if(i)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,n,o){null==o&&(o=n,n={});var s=(n=n||{}).fs||r,a="";try{a=i(t,n)}catch(e){return void(o&&o(e,null))}s.writeFile(e,a,n,o)},writeFileSync:function(e,t,n){var o=(n=n||{}).fs||r,s=i(t,n);return o.writeFileSync(e,s,n)}};e.exports=s},function(e,t,n){"use strict";const r=n(4),i=n(50),o=n(75).pathExists,s=n(193);e.exports=function(e,t,n,a){"function"==typeof n&&(a=n,n={});const c=r.dirname(e);o(c,(r,o)=>r?a(r):o?s.writeJson(e,t,n,a):void i.mkdirs(c,r=>{if(r)return a(r);s.writeJson(e,t,n,a)}))}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(50),s=n(193);e.exports=function(e,t,n){const a=i.dirname(e);r.existsSync(a)||o.mkdirsSync(a),s.writeJsonSync(e,t,n)}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(32),o=n(305),s=n(4),a=n(135).remove,c=n(50).mkdirs;function l(e,t,n,r){i.stat(e,(o,s)=>{if(o)return r(o);s.isDirectory()?u(e,t,n,r):function(e,t,n,r){const o=n?"w":"wx",s=i.createReadStream(e),a=i.createWriteStream(t,{flags:o});function c(){i.unlink(e,r)}s.on("error",o=>{s.destroy(),a.destroy(),a.removeListener("close",c),i.unlink(t,()=>{"EISDIR"===o.code||"EPERM"===o.code?u(e,t,n,r):r(o)})}),a.on("error",e=>{s.destroy(),a.destroy(),a.removeListener("close",c),r(e)}),a.once("close",c),s.pipe(a)}(e,t,n,r)})}function u(e,t,n,r){const i={overwrite:!1};function s(){o(e,t,i,t=>{if(t)return r(t);a(e,r)})}n?a(t,e=>{if(e)return r(e);s()}):s()}e.exports={move:r((function e(t,n,r,o){"function"==typeof r&&(o=r,r={});const u=r.overwrite||r.clobber||!1;!function(e,t,n){i.stat(e,(r,i)=>{if(r)return n(r);if(i.isDirectory()){const r=t.split(s.dirname(e)+s.sep)[1];if(r){const i=r.split(s.sep)[0];return n(null,i?e!==t&&t.indexOf(e)>-1&&i===s.basename(e):!1)}return n(null,!1)}return n(null,!1)})}(t,n,(d,h)=>d?o(d):h?o(new Error(`Cannot move '${t}' to a subdirectory of itself, '${n}'.`)):void c(s.dirname(n),c=>{if(c)return o(c);s.resolve(t)===s.resolve(n)?i.access(t,o):u?i.rename(t,n,i=>{if(!i)return o();if("ENOTEMPTY"!==i.code&&"EEXIST"!==i.code){if("EPERM"!==i.code)return"EXDEV"!==i.code?o(i):void l(t,n,u,o);setTimeout(()=>{a(n,i=>{if(i)return o(i);r.overwrite=!1,e(t,n,r,o)})},200)}else a(n,i=>{if(i)return o(i);r.overwrite=!1,e(t,n,r,o)})}):i.link(t,n,e=>e?"EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code?l(t,n,u,o):o(e):i.unlink(t,o))}))}))}},function(e,t,n){"use strict";const r=n(32),i=n(4),o=n(307).copySync,s=n(135).removeSync,a=n(50).mkdirsSync,c=n(308);function l(e,t,n){return r.statSync(e).isDirectory()?function(e,t,n){const r={overwrite:!1};n?(s(t),i()):i();function i(){return o(e,t,r),s(e)}}(e,t,n):function(e,t,n){const i=c(65536),o=n?"w":"wx",s=r.openSync(e,"r"),a=r.fstatSync(s),l=r.openSync(t,o,a.mode);let u=1,d=0;for(;u>0;)u=r.readSync(s,i,0,65536,d),r.writeSync(l,i,0,u),d+=u;return r.closeSync(s),r.closeSync(l),r.unlinkSync(e)}(e,t,n)}e.exports={moveSync:function e(t,n,o){const c=(o=o||{}).overwrite||o.clobber||!1;if(t=i.resolve(t),n=i.resolve(n),t===n)return r.accessSync(t);if(function(e,t){try{return r.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(i.dirname(e)+i.sep)[1].split(i.sep)[0]===i.basename(e)}catch(e){return!1}}(t,n))throw new Error(`Cannot move '${t}' into itself '${n}'.`);a(i.dirname(n)),function(){if(c)try{r.renameSync(t,n)}catch(r){if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)return s(n),o.overwrite=!1,e(t,n,o);if("EXDEV"!==r.code)throw r;return l(t,n,c)}else try{r.linkSync(t,n),r.unlinkSync(t)}catch(e){if("EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code)return l(t,n,c);throw e}}()}}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(29),o=n(4),s=n(50),a=n(135),c=r((function(e,t){t=t||function(){},i.readdir(e,(n,r)=>{if(n)return s.mkdirs(e,t);r=r.map(t=>o.join(e,t)),function e(){const n=r.pop();if(!n)return t();a.remove(n,n=>{if(n)return t(n);e()})}()})}));function l(e){let t;try{t=i.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach(t=>{t=o.join(e,t),a.removeSync(t)})}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},function(e,t,n){"use strict";const r=n(589),i=n(590),o=n(591);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(4),o=n(32),s=n(50),a=n(75).pathExists;e.exports={createFile:r((function(e,t){function n(){o.writeFile(e,"",e=>{if(e)return t(e);t()})}o.stat(e,(r,o)=>{if(!r&&o.isFile())return t();const c=i.dirname(e);a(c,(e,r)=>e?t(e):r?n():void s.mkdirs(c,e=>{if(e)return t(e);n()}))})})),createFileSync:function(e){let t;try{t=o.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=i.dirname(e);o.existsSync(n)||s.mkdirsSync(n),o.writeFileSync(e,"")}}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(4),o=n(32),s=n(50),a=n(75).pathExists;e.exports={createLink:r((function(e,t,n){function r(e,t){o.link(e,t,e=>{if(e)return n(e);n(null)})}a(t,(c,l)=>c?n(c):l?n(null):void o.lstat(e,(o,c)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const l=i.dirname(t);a(l,(i,o)=>i?n(i):o?r(e,t):void s.mkdirs(l,i=>{if(i)return n(i);r(e,t)}))}))})),createLinkSync:function(e,t,n){if(o.existsSync(t))return;try{o.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=i.dirname(t);return o.existsSync(r)||s.mkdirsSync(r),o.linkSync(e,t)}}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(4),o=n(32),s=n(50),a=s.mkdirs,c=s.mkdirsSync,l=n(592),u=l.symlinkPaths,d=l.symlinkPathsSync,h=n(593),p=h.symlinkType,f=h.symlinkTypeSync,g=n(75).pathExists;e.exports={createSymlink:r((function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,g(t,(s,c)=>s?r(s):c?r(null):void u(e,t,(s,c)=>{if(s)return r(s);e=c.toDst,p(c.toCwd,n,(n,s)=>{if(n)return r(n);const c=i.dirname(t);g(c,(n,i)=>n?r(n):i?o.symlink(e,t,s,r):void a(c,n=>{if(n)return r(n);o.symlink(e,t,s,r)}))})}))})),createSymlinkSync:function(e,t,n,r){if(r="function"==typeof n?n:r,n="function"!=typeof n&&n,o.existsSync(t))return;const s=d(e,t);e=s.toDst,n=f(s.toCwd,n);const a=i.dirname(t);return o.existsSync(a)||c(a),o.symlinkSync(e,t,n)}}},function(e,t,n){"use strict";const r=n(4),i=n(32),o=n(75).pathExists;e.exports={symlinkPaths:function(e,t,n){if(r.isAbsolute(e))return i.lstat(e,(t,r)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e}));{const s=r.dirname(t),a=r.join(s,e);return o(a,(t,o)=>t?n(t):o?n(null,{toCwd:a,toDst:e}):i.lstat(e,(t,i)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:r.relative(s,e)})))}},symlinkPathsSync:function(e,t){let n;if(r.isAbsolute(e)){if(n=i.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const o=r.dirname(t),s=r.join(o,e);if(n=i.existsSync(s),n)return{toCwd:s,toDst:e};if(n=i.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(o,e)}}}}},function(e,t,n){"use strict";const r=n(32);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);r.lstat(e,(e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)})},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(e,t,n){"use strict";const r=n(45).fromCallback,i=n(32),o=n(4),s=n(50),a=n(75).pathExists;e.exports={outputFile:r((function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const c=o.dirname(e);a(c,(o,a)=>o?r(o):a?i.writeFile(e,t,n,r):void s.mkdirs(c,o=>{if(o)return r(o);i.writeFile(e,t,n,r)}))})),outputFileSync:function(e,t,n){const r=o.dirname(e);if(i.existsSync(r))return i.writeFileSync.apply(i,arguments);s.mkdirsSync(r),i.writeFileSync.apply(i,arguments)}}},function(e,t,n){var r=n(4),i="win32"===process.platform,o=n(29),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}r.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;t.realpathSync=function(e,t){if(e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,a,u,d=e,h={},p={};function f(){var t=l.exec(e);n=t[0].length,s=t[0],a=t[0],u="",i&&!p[a]&&(o.lstatSync(a),p[a]=!0)}for(f();n<e.length;){c.lastIndex=n;var g=c.exec(e);if(u=s,s+=g[0],a=u+g[1],n=c.lastIndex,!(p[a]||t&&t[a]===a)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,a))m=t[a];else{var v=o.lstatSync(a);if(!v.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var y=null;if(!i){var b=v.dev.toString(32)+":"+v.ino.toString(32);h.hasOwnProperty(b)&&(y=h[b])}null===y&&(o.statSync(a),y=o.readlinkSync(a)),m=r.resolve(u,y),t&&(t[a]=m),i||(h[b]=y)}e=r.resolve(m,e.slice(n)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var s,u,d,h,p=e,f={},g={};function m(){var t=l.exec(e);s=t[0].length,u=t[0],d=t[0],h="",i&&!g[d]?o.lstat(d,(function(e){if(e)return n(e);g[d]=!0,v()})):process.nextTick(v)}function v(){if(s>=e.length)return t&&(t[p]=e),n(null,e);c.lastIndex=s;var r=c.exec(e);return h=u,u+=r[0],d=h+r[1],s=c.lastIndex,g[d]||t&&t[d]===d?process.nextTick(v):t&&Object.prototype.hasOwnProperty.call(t,d)?S(t[d]):o.lstat(d,y)}function y(e,r){if(e)return n(e);if(!r.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(v);if(!i){var s=r.dev.toString(32)+":"+r.ino.toString(32);if(f.hasOwnProperty(s))return b(null,f[s],d)}o.stat(d,(function(e){if(e)return n(e);o.readlink(d,(function(e,t){i||(f[s]=t),b(e,t)}))}))}function b(e,i,o){if(e)return n(e);var s=r.resolve(h,i);t&&(t[o]=s),S(s)}function S(t){e=r.resolve(t,e.slice(s)),m()}m()}},function(e,t,n){var r=n(597),i=n(598);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[],s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c,l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),m=l||d,v=s.body.indexOf(",")>=0;if(!m&&!v)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(m)c=s.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var n=[],r=i("{","}",t);if(!r)return t.split(",");var o=r.pre,s=r.body,a=r.post,c=o.split(",");c[c.length-1]+="{"+s+"}";var l=e(a);a.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l));return n.push.apply(n,c),n}(s.body)).length)if(1===(c=e(c[0],!1).map(h)).length)return(S=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+c[0]+e}))}var y,b=s.pre,S=s.post.length?e(s.post,!1):[""];if(m){var E=u(c[0]),w=u(c[1]),_=Math.max(c[0].length,c[1].length),P=3==c.length?Math.abs(u(c[2])):1,C=f;w<E&&(P*=-1,C=g);var T=c.some(p);y=[];for(var I=E;C(I,w);I+=P){var O;if(d)"\\"===(O=String.fromCharCode(I))&&(O="");else if(O=String(I),T){var R=_-O.length;if(R>0){var D=new Array(R+1).join("0");O=I<0?"-"+D+O.slice(1):D+O}}y.push(O)}}else y=r(c,(function(t){return e(t,!1)}));for(var x=0;x<y.length;x++)for(var k=0;k<S.length;k++){var A=b+y[x]+S[k];(!n||m||A)&&o.push(A)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(d)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var o=t(e[i],i);n(o)?r.push.apply(r,o):r.push(o)}return r};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,s,a,c=n.indexOf(e),l=n.indexOf(t,c+1),u=c;if(c>=0&&l>0){for(r=[],o=n.length;u>=0&&!a;)u==c?(r.push(u),c=n.indexOf(e,u+1)):1==r.length?a=[r.pop(),l]:((i=r.pop())<o&&(o=i,s=l),l=n.indexOf(t,u+1)),u=c<l&&c>=0?c:l;r.length&&(a=[o,s])}return a}e.exports=r,r.range=o},function(e,t,n){e.exports=f,f.GlobSync=g;var r=n(29),i=n(310),o=n(136),s=(o.Minimatch,n(309).Glob,n(22),n(4)),a=n(67),c=n(194),l=n(311),u=(l.alphasort,l.alphasorti,l.setopts),d=l.ownProp,h=l.childrenIgnored,p=l.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(u(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach((function(t,n){var r=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),r[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(o)]=!0}}))}l.finish(this)},g.prototype._process=function(e,t,n){a(this instanceof g);for(var r,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:r=null;break;default:r=e.slice(0,i).join("/")}var s,l=e.slice(i);null===r?s=".":c(r)||c(e.join("/"))?(r&&c(r)||(r="/"+r),s=r):s=r;var u=this._makeAbs(s);h(this,s)||(l[0]===o.GLOBSTAR?this._processGlobStar(r,s,u,l,t,n):this._processReaddir(r,s,u,l,t,n))},g.prototype._processReaddir=function(e,t,n,r,i,o){var a=this._readdir(n,o);if(a){for(var c=r[0],l=!!this.minimatch.negate,u=c._glob,d=this.dot||"."===u.charAt(0),h=[],p=0;p<a.length;p++){if("."!==(m=a[p]).charAt(0)||d)(l&&!e?!m.match(c):m.match(c))&&h.push(m)}var f=h.length;if(0!==f)if(1!==r.length||this.mark||this.stat){r.shift();for(p=0;p<f;p++){var g;m=h[p];g=e?[e,m]:[m],this._process(g.concat(r),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<f;p++){var m=h[p];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(i,m)}}}},g.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=r.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,i||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,r.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,i,!1);var u=s.length;if(!this.symlinks[n]||!o)for(var d=0;d<u;d++){if("."!==s[d].charAt(0)||this.dot){var h=c.concat(s[d],a);this._process(h,i,!0);var p=c.concat(s[d],r);this._process(p,i,!0)}}}},g.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return i;if(n&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=r.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=r.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!n||"FILE"!==i)&&i},g.prototype._mark=function(e){return l.mark(this,e)},g.prototype._makeAbs=function(e){return l.makeAbs(this,e)}},function(e,t,n){var r=n(312),i=Object.create(null),o=n(313);function s(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}e.exports=r((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o((function t(){var n=i[e],r=n.length,o=s(arguments);try{for(var a=0;a<r;a++)n[a].apply(null,o)}finally{n.length>r?(n.splice(0,r),process.nextTick((function(){t.apply(null,o)}))):delete i[e]}}))}(e))}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(602),s=n(46),a=n(68),c=n(33),l=n(314),u=n(603),d=n(610),h=n(612),p=n(84),f=n(110),g=n(615),m=n(616),v=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=a.BindingScopeEnum.Transient;else if(t.defaultScope!==a.BindingScopeEnum.Singleton&&t.defaultScope!==a.BindingScopeEnum.Transient&&t.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.guid=p.guid(),this._bindingDictionary=new m.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return e.merge=function(t,n){var r=new e,i=u.getBindingDictionary(r),o=u.getBindingDictionary(t),s=u.getBindingDictionary(n);function a(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return a(o,i),a(s,i),r},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.guid);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],s=t(o.guid),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=r(t.guid);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+f.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new m.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=u.createMockRequest(this,e,t,n);r=i.some((function(e){return e.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,a.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,a.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(t){var n=new e;return n.bind(t).toSelf(),n.parent=this,n.get(t)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=e.bind.bind(e)(n);return t(r,i),r}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(r),unbindFunction:function(t){e.unbind.bind(e)(t)}};var i}},e.prototype._get=function(e,t,n,r,i,o){var a=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(c)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=u.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),d.resolve(n)}},e}();t.Container=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),i=n(84),o=function(){function e(e,t){this.guid=i.guid(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(604),i=n(46),o=n(68),s=n(33),a=n(315),c=n(110),l=n(605),u=n(56),d=n(606),h=n(607),p=n(609),f=n(317);function g(e){return e._bindingDictionary}function m(e,t,n,o,s){var a=v(n.container,s.serviceIdentifier),l=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),a=v(n.container,s.serviceIdentifier)),l=t?a:a.filter((function(e){var t=new p.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=i.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,v),new Error(a);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;s=c.getServiceIdentifierAsString(e),a=i.AMBIGUOUS_MATCH+" "+s;throw a+=c.listRegisteredBindingsForServiceIdentifier(o,s,v),new Error(a)}}(s.serviceIdentifier,l,s,n.container),l}function v(e,t){var n=[],r=g(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=v(e.parent,t)),n}t.getBindingDictionary=g,t.plan=function(e,t,n,r,g,v,y,b){void 0===b&&(b=!1);var S=new l.Context(t),E=function(e,t,n,r,i,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new u.Metadata(a,n),l=new f.Target(t,r,n,c);if(void 0!==i){var d=new u.Metadata(i,o);l.metadata.push(d)}return l}(n,r,g,"",v,y);try{return function e(t,n,r,s,a,c){var l,u;if(null===a){l=m(t,n,s,null,c),u=new p.Request(r,s,null,l,c);var f=new d.Plan(s,u);s.addPlan(f)}else l=m(t,n,s,a,c),u=a.addChildRequest(c.serviceIdentifier,l,c);l.forEach((function(n){var r=null;if(c.isArray())r=u.addChildRequest(n.serviceIdentifier,n,c);else{if(n.cache)return;r=u}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var a=h.getDependencies(t,n.implementationType);if(!s.container.options.skipBaseClassChecks){var l=h.getBaseClassDependencyCount(t,n.implementationType);if(a.length<l){var d=i.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(d)}}a.forEach((function(n){e(t,!1,n.serviceIdentifier,s,r,n)}))}}))}(e,b,g,S,null,E),S}catch(e){throw a.isStackOverflowExeption(e)&&S.plan&&c.circularDependencyToException(S.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new f.Target(o.TargetTypeEnum.Variable,"",t,new u.Metadata(n,r)),s=new l.Context(e);return new p.Request(t,s,null,[],i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=function(){function e(e){this.guid=r.guid(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(316),i=n(46),o=n(68),s=n(33),a=n(110);t.getFunctionName=a.getFunctionName;var c=n(317);function l(e,t,n,r){var s=e.getConstructorMetadata(n),a=s.compilerGeneratedMetadata;if(void 0===a){var l=i.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(l)}var h=s.userGeneratedMetadata,p=Object.keys(h),f=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=u(s,e,t,n,r);null!==a&&o.push(a)}return o}(r,t,a,h,0===n.length&&p.length>0?p.length:n.length),g=function e(t,n){for(var r=t.getPropertiesMetadata(n),i=[],s=Object.keys(r),a=0,l=s;a<l.length;a++){var u=l[a],h=r[u],p=d(r[u]),f=p.targetName||u,g=p.inject||p.multiInject,m=new c.Target(o.TargetTypeEnum.ClassProperty,f,g);m.metadata=h,i.push(m)}var v=Object.getPrototypeOf(n.prototype).constructor;if(v!==Object){var y=e(t,v);i=i.concat(y)}return i}(e,n);return f.concat(g)}function u(e,t,n,s,a){var l=a[e.toString()]||[],u=d(l),h=!0!==u.unmanaged,p=s[e],f=u.inject||u.multiInject;if((p=f||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),h){if(!t&&(p===Object||p===Function||void 0===p)){var g=i.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(g)}var m=new c.Target(o.TargetTypeEnum.ConstructorArgument,u.targetName,p);return m.metadata=l,m}return null}function d(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return l(e,a.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=l(t,a.getFunctionName(r),r,!0),o=i.map((function(e){return e.metadata.filter((function(e){return e.key===s.UNMANAGED_TAG}))})),c=[].concat.apply([],o).length,u=i.length-c;return u>0?u:e(t,r)}return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=function(){function e(e,t,n,i,o){this.guid=r.guid(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(68),o=n(315),s=n(110),a=n(611),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},l=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,u=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(u&&d)return o.map((function(t){return l(e)(t)}));var h=null;if(!t.target.isOptional()||0!==n.length){var p=n[0],f=p.scope===i.BindingScopeEnum.Singleton,g=p.scope===i.BindingScopeEnum.Request;if(f&&p.activated)return p.cache;if(g&&null!==e&&e.has(p.guid))return e.get(p.guid);if(p.type===i.BindingTypeEnum.ConstantValue)h=p.cache;else if(p.type===i.BindingTypeEnum.Function)h=p.cache;else if(p.type===i.BindingTypeEnum.Constructor)h=p.implementationType;else if(p.type===i.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)h=c("toDynamicValue",p.serviceIdentifier,(function(){return p.dynamicValue(t.parentContext)}));else if(p.type===i.BindingTypeEnum.Factory&&null!==p.factory)h=c("toFactory",p.serviceIdentifier,(function(){return p.factory(t.parentContext)}));else if(p.type===i.BindingTypeEnum.Provider&&null!==p.provider)h=c("toProvider",p.serviceIdentifier,(function(){return p.provider(t.parentContext)}));else{if(p.type!==i.BindingTypeEnum.Instance||null===p.implementationType){var m=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=a.resolveInstance(p.implementationType,o,l(e))}return"function"==typeof p.onActivation&&(h=p.onActivation(t.parentContext,h)),f&&(p.cache=h,p.activated=!0),g&&null!==e&&!e.has(p.guid)&&e.set(p.guid,h),h}}};t.resolve=function(e){return l(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(68),o=n(33);t.resolveInstance=function(e,t,n){var s,a,c=null;if(t.length>0){var l=t.filter((function(e){return null!==e.target&&e.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);a=l,c=function(e,t,n){var r=t.filter((function(e){return null!==e.target&&e.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(t,n){var r;r=t.target.name.value();var i=o[n];e[r]=i})),e}(c=new((s=e).bind.apply(s,[void 0].concat(a))),t,n)}else c=new e;return function(e,t){if(Reflect.hasMetadata(o.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(r.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,c),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(68),o=n(613),s=n(318),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(614),i=n(195),o=n(196),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(68),i=n(318),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(r.NULL_ARGUMENT);if(null==t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,r){var i=n.filter((function(t){return!e(t)}));i.length>0?t._map.set(r,i):t._map.delete(r)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(84),i=function(e){this.guid=r.guid(),this.registry=e};t.ContainerModule=i;var o=function(e){this.guid=r.guid(),this.registry=e};t.AsyncContainerModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(33);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),i=n(76);t.tagged=function(e,t){return function(n,o,s){var a=new r.Metadata(e,t);"number"==typeof s?i.tagParameter(n,o,s,a):i.tagProperty(n,o,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=n(76);t.named=function(e){return function(t,n,s){var a=new i.Metadata(r.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=n(76);t.optional=function(){return function(e,t,n){var s=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=n(76);t.unmanaged=function(){return function(e,t,n){var s=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=n(76);t.multiInject=function(e){return function(t,n,s){var a=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(56),o=n(76);t.targetName=function(e){return function(t,n,s){var a=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(33),o=n(56);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,s,e.constructor)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDirNotEmptyError=t.isNoPermissionsError=t.isNotDirError=t.isFileIsDirError=t.isFileExistsError=t.isFileNotFoundError=t.createDirNotEmptyError=void 0;const r=n(2);var i;function o(e,t){const n=e.code;if(n)return n===t}!function(e){const t=r.FileSystemError.FileNotFound().name,n=r.FileSystemError.FileExists().name,i=r.FileSystemError.FileIsADirectory().name,o=r.FileSystemError.FileNotADirectory().name,s=r.FileSystemError.NoPermissions().name,a=[t,n,i,o,s];function c(e,t){if(a.includes(e.name))return e.name===t}e.isFileNotFound=function(e){return c(e,t)},e.isFileExists=function(e){return c(e,n)},e.isFileIsDir=function(e){return c(e,i)},e.isNotDir=function(e){return c(e,o)},e.isNoPermissions=function(e){return c(e,s)}}(i||(i={})),t.createDirNotEmptyError=function(e){const t=new Error(`directory "${e}" not empty`);return t.name="SystemError",t.code="ENOTEMPTY",t.path=e,t.syscall="rmdir",t},t.isFileNotFoundError=function(e){const t=i.isFileNotFound(e);return void 0!==t?t:o(e,"ENOENT")},t.isFileExistsError=function(e){const t=i.isFileExists(e);return void 0!==t?t:o(e,"EEXIST")},t.isFileIsDirError=function(e){const t=i.isFileIsDir(e);return void 0!==t?t:o(e,"EISDIR")},t.isNotDirError=function(e){const t=i.isNotDir(e);return void 0!==t?t:o(e,"ENOTDIR")},t.isNoPermissionsError=function(e){const t=i.isNoPermissions(e);return void 0!==t?t:o(e,"EACCES")},t.isDirNotEmptyError=function(e){return o(e,"ENOTEMPTY")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryFileSystem=void 0;const r=n(629);class i{constructor(e){this.raw=e}static withDefaults(){return new i(r)}createFile(e,t){const n={postfix:e,mode:t};return new Promise((e,t)=>{this.raw.file(n,(n,r,i,o)=>{if(n)return t(n);e({filePath:r,dispose:o})})})}}t.TemporaryFileSystem=i},function(e,t,n){
/*!
 * Tmp
 *
 * Copyright (c) 2011-2015 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
var r=n(29),i=n(4),o=n(73),s=n(630),a=n(189),c=s(),l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",u=/XXXXXX/,d=a.O_CREAT|a.O_EXCL|a.O_RDWR,h=[],p=!1,f=!1;function g(e){var t=[],n=null;try{n=o.randomBytes(e)}catch(t){n=o.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(l[n[r]%l.length]);return t.join("")}function m(e,t){if("function"==typeof e){var n=e;e=t||{},t=n}else void 0===e&&(e={});return[e,t]}function v(e){if(e.name)return i.join(e.dir||c,e.name);if(e.template)return e.template.replace(u,g(6));var t=[e.prefix||"tmp-",process.pid,g(12),e.postfix||""].join("");return i.join(e.dir||c,t)}function y(e,t){var n=m(e,t),i=n[0],o=n[1],s=i.tries||3;return isNaN(s)||s<0?o(new Error("Invalid tries")):i.template&&!i.template.match(u)?o(new Error("Invalid template provided")):void function e(){var t=v(i);r.stat(t,(function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)}))}()}function b(e){var t=m(e)[0],n=t.tries||3;if(isNaN(n)||n<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(u))throw new Error("Invalid template provided");do{var i=v(t);try{r.statSync(i)}catch(e){return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function S(e){var t=[e];do{for(var n=t.pop(),o=!1,s=r.readdirSync(n),a=0,c=s.length;a<c;a++){var l=i.join(n,s[a]);r.lstatSync(l).isDirectory()?(o||(o=!0,t.push(n)),t.push(l)):r.unlinkSync(l)}o||r.rmdirSync(n)}while(0!==t.length)}function E(e,t,n){var i=_((function(e){try{r.closeSync(e[0])}catch(e){if(e.errno!=-a.EBADF&&e.errno!=-a.ENOENT)throw e}r.unlinkSync(e[1])}),[t,e]);return n.keep||h.unshift(i),i}function w(e,t){var n=_(t.unsafeCleanup?S:r.rmdirSync.bind(r),e);return t.keep||h.unshift(n),n}function _(e,t){var n=!1;return function r(){if(!n){var i=h.indexOf(r);i>=0&&h.splice(i,1),n=!0,e(t)}}}function P(){if(!f||p)for(var e=0,t=h.length;e<t;e++)try{h[e].call(null)}catch(e){}}var C=process.versions.node.split(".").map((function(e){return parseInt(e,10)}));0===C[0]&&(C[1]<9||9===C[1]&&C[2]<5)&&process.addListener("uncaughtException",(function(e){throw f=!0,P(),e})),process.addListener("exit",(function(e){e&&(f=!0),P()})),e.exports.tmpdir=c,e.exports.dir=function(e,t){var n=m(e,t),i=n[0],o=n[1];y(i,(function(e,t){if(e)return o(e);r.mkdir(t,i.mode||448,(function(e){if(e)return o(e);o(null,t,w(t,i))}))}))},e.exports.dirSync=function(e){var t=m(e)[0],n=b(t);return r.mkdirSync(n,t.mode||448),{name:n,removeCallback:w(n,t)}},e.exports.file=function(e,t){var n=m(e,t),i=n[0],o=n[1];i.postfix=void 0===i.postfix?".tmp":i.postfix,y(i,(function(e,t){if(e)return o(e);r.open(t,d,i.mode||384,(function(e,n){if(e)return o(e);o(null,t,n,E(t,n,i))}))}))},e.exports.fileSync=function(e){var t=m(e)[0];t.postfix=t.postfix||".tmp";var n=b(t),i=r.openSync(n,d,t.mode||384);return{name:n,fd:i,removeCallback:E(n,i,t)}},e.exports.tmpName=y,e.exports.tmpNameSync=b,e.exports.setGracefulCleanup=function(){p=!0}},function(e,t,n){"use strict";var r="win32"===process.platform,i=r?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=r?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",i.test(e)&&(e=e.slice(0,-1)),e}},function(e,t){e.exports=require("./node_modules/source-map-support")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildApi=void 0;const r=n(111),i=n(10),o=n(5),s=n(1),a=n(320),c=n(12),l=n(633);t.buildApi=function(e,t,n){const u=n.get(s.IConfigurationService),d=n.get(c.IInterpreterService);t.addSingleton(l.JupyterExtensionIntegration,l.JupyterExtensionIntegration);const h=n.get(l.JupyterExtensionIntegration),p={ready:e.catch(e=>(o.traceError("Failure during activation.",e),Promise.reject(e))),jupyter:{registerHooks:()=>h.integrateWithJupyterExtension()},debug:{getRemoteLauncherCommand:async(e,t,n=!0)=>a.getDebugpyLauncherArgs({host:e,port:t,waitUntilDebuggerAttaches:n}),getDebuggerPackagePath:async()=>a.getDebugpyPackagePath()},settings:{onDidChangeExecutionDetails:d.onDidChangeInterpreterConfiguration,getExecutionDetails(e){const t=u.getSettings(e).pythonPath;return{execCommand:""===t?void 0:[t]}}},datascience:{registerRemoteServerProvider:h?h.registerRemoteServerProvider.bind(h):r.noop,showDataViewer:h?h.showDataViewer.bind(h):r.noop}};return i.isTestExecution()&&(p.serviceContainer=n,p.serviceManager=t),p}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExtensionIntegration=void 0;const o=n(0),s=n(4),a=n(16),c=n(10),l=n(1),u=n(14),d=n(320),h=n(112),p=n(77),f=n(12),g=n(98);var m;!function(e){e.jupyter="jupyter",e.ipykernel="ipykernel",e.notebook="notebook",e.kernelspec="kernelspec",e.nbconvert="nbconvert",e.pandas="pandas"}(m||(m={}));const v={[m.ipykernel]:l.Product.ipykernel,[m.jupyter]:l.Product.jupyter,[m.kernelspec]:l.Product.kernelspec,[m.nbconvert]:l.Product.nbconvert,[m.notebook]:l.Product.notebook,[m.pandas]:l.Product.pandas};let y=class{constructor(e,t,n,r,i,o,s,a){this.extensions=e,this.interpreterService=t,this.interpreterSelector=n,this.windowsStoreInterpreter=r,this.installer=i,this.envActivation=o,this.languageServerCache=s,this.globalState=a}registerApi(e){e.registerPythonApi({onDidChangeInterpreter:this.interpreterService.onDidChangeInterpreter,getActiveInterpreter:async e=>this.interpreterService.getActiveInterpreter(e),getInterpreterDetails:async e=>this.interpreterService.getInterpreterDetails(e),getInterpreters:async e=>this.interpreterService.getInterpreters(e),getActivatedEnvironmentVariables:async(e,t,n)=>this.envActivation.getActivatedEnvironmentVariables(e,t,n),isWindowsStoreInterpreter:async e=>this.windowsStoreInterpreter.isWindowsStoreInterpreter(e),getSuggestions:async e=>this.interpreterSelector.getSuggestions(e),install:async(e,t,n)=>this.installer.install(v[e],t,n),getDebuggerPath:async()=>s.dirname(d.getDebugpyPackagePath()),getInterpreterPathSelectedForJupyterServer:()=>this.globalState.get("INTERPRETER_PATH_SELECTED_FOR_JUPYTER_SERVER"),getLanguageServer:async e=>{const t=u.isResource(e)?e:void 0,n=u.isResource(e)?void 0:e,r=await this.languageServerCache.get(t,n);if(r&&r.connection&&r.capabilities)return{connection:r.connection,capabilities:r.capabilities,dispose:r.dispose}}})}async integrateWithJupyterExtension(){const e=await this.getExtensionApi();e&&this.registerApi(e)}registerRemoteServerProvider(e){this.getExtensionApi().then(t=>{t&&t.registerRemoteServerProvider(e)}).ignoreErrors()}async showDataViewer(e,t){const n=await this.getExtensionApi();if(n)return n.showDataViewer(e,t)}async getExtensionApi(){if(this.jupyterExtension)return this.jupyterExtension.exports;{const e=this.extensions.getExtension(c.JUPYTER_EXTENSION_ID);if(!e)return;if(await e.activate(),e.isActive)return this.jupyterExtension=e,this.jupyterExtension.exports}}};y=r([o.injectable(),i(0,o.inject(l.IExtensions)),i(1,o.inject(f.IInterpreterService)),i(2,o.inject(p.IInterpreterSelector)),i(3,o.inject(g.WindowsStoreInterpreter)),i(4,o.inject(l.IInstaller)),i(5,o.inject(h.IEnvironmentActivationService)),i(6,o.inject(a.ILanguageServerCache)),i(7,o.inject(l.IMemento)),i(7,o.named(l.GLOBAL_MEMENTO))],y),t.JupyterExtensionIntegration=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateComponents=void 0;const r=n(2),i=n(635),o=n(16),s=n(771),a=n(198),c=n(350),l=n(3),u=n(10),d=n(788),h=n(5),p=n(801),f=n(6),g=n(804),m=n(148),v=n(1),y=n(13),b=n(14),S=n(833),E=n(52),w=n(836),_=n(149),P=n(837),C=n(42),T=n(865),I=n(12),O=n(867),R=n(369),D=n(902),x=n(903),k=n(119),A=n(920),N=n(921),j=n(926),F=n(927),M=n(931),L=n(932),U=n(371),W=n(933),B=n(934),V=n(152),H=n(26),q=n(17),G=n(89),$=n(941);t.activateComponents=async function(e,t,n){return async function(e,t,n){const K=r.window.createOutputChannel(y.OutputChannelNames.python());k.addOutputChannelLogging(K);const z=r.window.createOutputChannel(y.OutputChannelNames.pythonTest());t.addSingletonInstance(v.IOutputChannel,K,u.STANDARD_OUTPUT_CHANNEL),t.addSingletonInstance(v.IOutputChannel,z,H.TEST_OUTPUT_CHANNEL),p.registerTypes(t),g.registerTypes(t);const Y=t.get(f.IFileSystem);await W.setExtensionInstallTelemetryProperties(Y);const J=t.get(l.IApplicationEnvironment),X=J.packageJson.enableProposedApi;t.addSingletonInstance(u.UseProposedApi,X),S.registerTypes(t),$.registerTypes(t),x.registerTypes(t),O.registerTypes(t),T.registerTypes(t),d.registerTypes(t),B.registerTypes(t),P.registerTypes(t);const Q=t.get(v.IConfigurationService);k.setLoggingLevel(Q.getSettings().logging.level);const Z=n.get(v.IExperimentsManager);await Z.activate();const ee=Q.getSettings().languageServer;s.registerTypes(t,ee),F.registerTypes(t),i.registerTypes(t,ee);const te=n.get(I.IInterpreterService);te.initialize();const ne=t.getAll(_.IDebugSessionEventHandlers),re=t.get(v.IDisposableRegistry);new w.DebugSessionEventDispatcher(ne,c.DebugService.instance,re).registerEventHandlers();const ie=n.get(l.ICommandManager),oe=t.get(v.IOutputChannel,u.STANDARD_OUTPUT_CHANNEL);re.push(ie.registerCommand(u.Commands.ViewOutput,()=>oe.show()));const se=t.get(m.IStartPage);ie.registerCommand(u.Commands.OpenStartPage,()=>se.open()),ie.executeCommand("setContext","python.vscode.channel",J.channel).then(b.noop,b.noop),n.get(I.IInterpreterLocatorProgressHandler).register(),n.get(I.IInterpreterLocatorProgressService).register(),n.get(a.IApplicationDiagnostics).register(),n.get(G.ITestCodeNavigatorCommandHandler).register(),n.get(G.ITestExplorerCommandHandler).register(),n.get(o.ILanguageServerExtension).register(),n.get(q.ITestContextService).register();const ae=n.get(o.IExtensionActivationManager);e.subscriptions.push(ae);const ce=ae.activate();t.get(V.ITerminalAutoActivation).register();const le=Q.getSettings();M.activateSimplePythonRefactorProvider(e,K,n);n.get(U.ISortImportsEditingProvider).registerCommands(),t.get(V.ICodeExecutionManager).registerCommands();const ue=n.get(l.IWorkspaceService);if(te.refresh(ue.hasWorkspaceFolders?ue.workspaceFolders[0].uri:void 0).catch(e=>h.traceError("Python Extension: interpreterManager.refresh",e)),e.subscriptions.push(new D.LinterCommands(t)),r.languages.setLanguageConfiguration(u.PYTHON_LANGUAGE,R.getLanguageConfiguration()),le&&le.formatting&&"internalConsole"!==le.formatting.provider){const t=new N.PythonFormattingEditProvider(e,n);e.subscriptions.push(r.languages.registerDocumentFormattingEditProvider(u.PYTHON,t)),e.subscriptions.push(r.languages.registerDocumentRangeFormattingEditProvider(u.PYTHON,t))}const de=n.get(v.IFeatureDeprecationManager);de.initialize(),e.subscriptions.push(de),e.subscriptions.push(new j.ReplProvider(n));const he=new L.TerminalProvider(n);return he.initialize(r.window.activeTerminal).ignoreErrors(),e.subscriptions.push(he),e.subscriptions.push(r.languages.registerCodeActionsProvider(u.PYTHON,new A.PythonCodeActionProvider,{providedCodeActionKinds:[r.CodeActionKind.SourceOrganizeImports]})),n.getAll(C.IDebugConfigurationService).forEach(t=>{e.subscriptions.push(r.debug.registerDebugConfigurationProvider(E.DebuggerTypeName,t))}),n.get(C.IDebuggerBanner).initialize(),{activationPromise:ce}}(e,t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(636),i=n(138),o=n(1),s=n(321),a=n(642),c=n(643),l=n(644),u=n(646),d=n(647),h=n(140),p=n(651),f=n(652),g=n(692),m=n(693),v=n(698),y=n(705),b=n(750),S=n(751),E=n(752),w=n(753),_=n(754),P=n(755),C=n(756),T=n(757),I=n(758),O=n(759),R=n(760),D=n(761),x=n(762),k=n(763),A=n(764),N=n(765),j=n(766),F=n(767),M=n(768),L=n(769),U=n(770),W=n(16);t.registerTypes=function(e,t){e.addSingleton(W.ILanguageServerCache,l.LanguageServerExtensionActivationService),e.addBinding(W.ILanguageServerCache,W.IExtensionActivationService),e.addSingleton(W.ILanguageServerExtension,_.LanguageServerExtension),e.add(W.IExtensionActivationManager,c.ExtensionActivationManager),e.addSingleton(o.IPythonExtensionBanner,s.ProposePylanceBanner,o.BANNER_NAME_PROPOSE_LS),t===W.LanguageServerType.Microsoft?(e.add(W.ILanguageServerAnalysisOptions,S.DotNetLanguageServerAnalysisOptions,W.LanguageServerType.Microsoft),e.add(W.ILanguageServerActivator,b.DotNetLanguageServerActivator,W.LanguageServerType.Microsoft),e.addSingleton(i.INugetRepository,C.StableDotNetLanguageServerPackageRepository,h.LanguageServerDownloadChannel.stable),e.addSingleton(i.INugetRepository,C.BetaDotNetLanguageServerPackageRepository,h.LanguageServerDownloadChannel.beta),e.addSingleton(i.INugetRepository,C.DailyDotNetLanguageServerPackageRepository,h.LanguageServerDownloadChannel.daily),e.addSingleton(W.ILanguageServerCompatibilityService,w.LanguageServerCompatibilityService),e.addSingleton(W.ILanguageClientFactory,E.DotNetLanguageClientFactory),e.addSingleton(W.IPlatformData,D.PlatformData),e.add(W.ILanguageServerManager,O.DotNetLanguageServerManager),e.add(W.ILanguageServerProxy,I.DotNetLanguageServerProxy),e.addSingleton(W.ILanguageServerFolderService,P.DotNetLanguageServerFolderService),e.addSingleton(W.ILanguageServerPackageService,T.DotNetLanguageServerPackageService),r.registerTypes(e)):t===W.LanguageServerType.Node?(e.add(W.ILanguageServerAnalysisOptions,k.NodeLanguageServerAnalysisOptions,W.LanguageServerType.Node),e.add(W.ILanguageServerActivator,x.NodeLanguageServerActivator,W.LanguageServerType.Node),e.addSingleton(i.INugetRepository,j.StableNodeLanguageServerPackageRepository,h.LanguageServerDownloadChannel.stable),e.addSingleton(i.INugetRepository,j.BetaNodeLanguageServerPackageRepository,h.LanguageServerDownloadChannel.beta),e.addSingleton(i.INugetRepository,j.DailyNodeLanguageServerPackageRepository,h.LanguageServerDownloadChannel.daily),e.addSingleton(W.ILanguageClientFactory,A.NodeLanguageClientFactory),e.add(W.ILanguageServerManager,L.NodeLanguageServerManager),e.add(W.ILanguageServerProxy,M.NodeLanguageServerProxy),e.addSingleton(W.ILanguageServerFolderService,N.NodeLanguageServerFolderService),e.addSingleton(W.ILanguageServerPackageService,F.NodeLanguageServerPackageService)):t===W.LanguageServerType.Jedi?(e.add(W.ILanguageServerActivator,y.MultiplexingJediLanguageServerActivator,W.LanguageServerType.Jedi),e.add(W.ILanguageServerAnalysisOptions,f.JediLanguageServerAnalysisOptions,W.LanguageServerType.Jedi),e.addSingleton(W.ILanguageClientFactory,g.JediLanguageClientFactory),e.add(W.ILanguageServerManager,v.JediLanguageServerManager),e.add(W.ILanguageServerProxy,m.JediLanguageServerProxy)):t===W.LanguageServerType.None&&e.add(W.ILanguageServerActivator,U.NoLanguageServerExtensionActivator,W.LanguageServerType.None),e.addSingleton(W.IDownloadChannelRule,u.DownloadDailyChannelRule,h.LanguageServerDownloadChannel.daily),e.addSingleton(W.IDownloadChannelRule,u.DownloadBetaChannelRule,h.LanguageServerDownloadChannel.beta),e.addSingleton(W.IDownloadChannelRule,u.DownloadBetaChannelRule,h.LanguageServerDownloadChannel.stable),e.addSingleton(W.ILanguageServerDownloader,d.LanguageServerDownloader),e.addSingleton(W.ILanguageServerOutputChannel,R.LanguageServerOutputChannel),e.addSingleton(W.IExtensionSingleActivationService,p.ExtensionSurveyPrompt),e.addSingleton(W.IExtensionSingleActivationService,a.AATesting)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(27),i=n(637),o=n(638),s=n(639),a=n(640),c=n(641),l=n(197);t.registerTypes=function(e){e.addSingleton(l.IDotNetCompatibilityService,i.DotNetCompatibilityService),e.addSingleton(l.IOSDotNetCompatibilityService,s.MacDotNetCompatibilityService,r.OSType.OSX),e.addSingleton(l.IOSDotNetCompatibilityService,c.WindowsDotNetCompatibilityService,r.OSType.Windows),e.addSingleton(l.IOSDotNetCompatibilityService,o.LinuxDotNetCompatibilityService,r.OSType.Linux),e.addSingleton(l.IOSDotNetCompatibilityService,a.UnknownOSDotNetCompatibilityService,r.OSType.Unknown)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetCompatibilityService=void 0;const o=n(0),s=n(6),a=n(27),c=n(197);let l=class{constructor(e,t,n,r,i){this.platformService=i,this.mappedServices=new Map,this.mappedServices.set(a.OSType.Unknown,e),this.mappedServices.set(a.OSType.OSX,t),this.mappedServices.set(a.OSType.Windows,n),this.mappedServices.set(a.OSType.Linux,r)}isSupported(){return this.mappedServices.get(this.platformService.osType).isSupported()}};l=r([o.injectable(),i(0,o.inject(c.IOSDotNetCompatibilityService)),i(0,o.named(a.OSType.Unknown)),i(1,o.inject(c.IOSDotNetCompatibilityService)),i(1,o.named(a.OSType.OSX)),i(2,o.inject(c.IOSDotNetCompatibilityService)),i(2,o.named(a.OSType.Windows)),i(3,o.inject(c.IOSDotNetCompatibilityService)),i(3,o.named(a.OSType.Linux)),i(4,o.inject(s.IPlatformService))],l),t.DotNetCompatibilityService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinuxDotNetCompatibilityService=void 0;const o=n(0),s=n(5),a=n(6);let c=class{constructor(e){this.platformService=e}async isSupported(){return!!this.platformService.is64bit||(s.traceError(".NET is not supported on 32 Bit Linux"),!1)}};r([s.traceDecorators.verbose("Checking support of .NET")],c.prototype,"isSupported",null),c=r([o.injectable(),i(0,o.inject(a.IPlatformService))],c),t.LinuxDotNetCompatibilityService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MacDotNetCompatibilityService=void 0;const o=n(0),s=n(6);let a=class{constructor(e){this.platformService=e}async isSupported(){return(await this.platformService.getVersion()).compare("16.0.0")>=0}};a=r([o.injectable(),i(0,o.inject(s.IPlatformService))],a),t.MacDotNetCompatibilityService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownOSDotNetCompatibilityService=void 0;const i=n(0),o=n(5);let s=class{async isSupported(){return!1}};r([o.traceDecorators.info("Unable to determine compatiblity of DOT.NET with an unknown OS")],s.prototype,"isSupported",null),s=r([i.injectable()],s),t.UnknownOSDotNetCompatibilityService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsDotNetCompatibilityService=void 0;const i=n(0);let o=class{async isSupported(){return!0}};o=r([i.injectable()],o),t.WindowsDotNetCompatibilityService=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AATesting=void 0;const o=n(0),s=n(24),a=n(1);let c=class{constructor(e){this.experiments=e}async activate(){this.experiments.sendTelemetryIfInExperiment(s.ValidateABTesting.experiment),this.experiments.sendTelemetryIfInExperiment(s.ValidateABTesting.control)}};c=r([o.injectable(),i(0,o.inject(a.IExperimentsManager))],c),t.AATesting=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(0),s=n(198),a=n(3),c=n(10),l=n(24),u=n(5),d=n(6),h=n(1),p=n(15),f=n(40),g=n(12),m=n(199),v=n(16);let y=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.activationServices=e,this.singleActivationServices=t,this.documentManager=n,this.interpreterService=r,this.autoSelection=i,this.appDiagnostics=o,this.workspaceService=s,this.fileSystem=a,this.activeResourceService=c,this.experiments=l,this.interpreterPathService=u,this.interpreterSecurityService=d,this.activatedWorkspaces=new Set,this.isInterpreterSetForWorkspacePromises=new Map,this.disposables=[]}dispose(){for(;this.disposables.length>0;){this.disposables.shift().dispose()}this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}async activate(){await this.initialize(),await Promise.all([Promise.all(this.singleActivationServices.map(e=>e.activate())),this.activateWorkspace(this.activeResourceService.getActiveResource())]),await this.autoSelection.autoSelectInterpreter(void 0)}async activateWorkspace(e){const t=this.getWorkspaceKey(e);this.activatedWorkspaces.has(t)||(this.activatedWorkspaces.add(t),this.experiments.inExperiment(l.DeprecatePythonPath.experiment)&&await this.interpreterPathService.copyOldInterpreterStorageValuesToNew(e),this.experiments.sendTelemetryIfInExperiment(l.DeprecatePythonPath.control),this.interpreterService.getInterpreters(e).ignoreErrors(),await m.sendActivationTelemetry(this.fileSystem,this.workspaceService,e),await this.autoSelection.autoSelectInterpreter(e),await this.evaluateAutoSelectedInterpreterSafety(e),await Promise.all(this.activationServices.map(t=>t.activate(e))),await this.appDiagnostics.performPreStartupHealthCheck(e))}async initialize(){this.addHandlers(),this.addRemoveDocOpenedHandlers()}onDocOpened(e){if(e.languageId!==c.PYTHON_LANGUAGE)return;const t=this.getWorkspaceKey(e.uri);if(""===t&&this.workspaceService.hasWorkspaceFolders)return;if(this.activatedWorkspaces.has(t))return;const n=this.workspaceService.getWorkspaceFolder(e.uri);this.activateWorkspace(n?n.uri:void 0).ignoreErrors()}async evaluateAutoSelectedInterpreterSafety(e){if(this.experiments.inExperiment(l.DeprecatePythonPath.experiment)){const t=this.getWorkspaceKey(e),n=this.interpreterPathService.get(e);if(0===n.length||n===c.DEFAULT_INTERPRETER_SETTING){const n=this.autoSelection.getAutoSelectedInterpreter(e);if(n){const r=p.createDeferred();this.isInterpreterSetForWorkspacePromises.set(t,r),await Promise.race([r.promise,this.interpreterSecurityService.evaluateAndRecordInterpreterSafety(n,e)])}}else this.isInterpreterSetForWorkspacePromises.has(t)&&(this.isInterpreterSetForWorkspacePromises.get(t).resolve(),this.isInterpreterSetForWorkspacePromises.delete(t))}this.experiments.sendTelemetryIfInExperiment(l.DeprecatePythonPath.control)}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this.disposables.push(this.interpreterPathService.onDidChange(e=>this.evaluateAutoSelectedInterpreterSafety(e.uri)))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){const e=this.workspaceService.workspaceFolders.map(e=>this.getWorkspaceKey(e.uri)),t=Array.from(this.activatedWorkspaces.keys()).filter(t=>e.indexOf(t)<0);if(t.length>0)for(const e of t)this.activatedWorkspaces.delete(e);this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){return this.workspaceService.hasWorkspaceFolders&&this.workspaceService.workspaceFolders.length>1}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}};r([u.traceDecorators.error("Failed to activate a workspace")],y.prototype,"activateWorkspace",null),y=r([o.injectable(),i(0,o.multiInject(v.IExtensionActivationService)),i(1,o.multiInject(v.IExtensionSingleActivationService)),i(2,o.inject(a.IDocumentManager)),i(3,o.inject(g.IInterpreterService)),i(4,o.inject(f.IInterpreterAutoSelectionService)),i(5,o.inject(s.IApplicationDiagnostics)),i(6,o.inject(a.IWorkspaceService)),i(7,o.inject(d.IFileSystem)),i(8,o.inject(a.IActiveResourceService)),i(9,o.inject(h.IExperimentsManager)),i(10,o.inject(h.IInterpreterPathService)),i(11,o.inject(f.IInterpreterSecurityService))],y),t.ExtensionActivationManager=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerExtensionActivationService=void 0,n(11);const o=n(0),s=n(323),a=n(34),c=n(3),l=n(10),u=n(5),d=n(1),h=n(23),p=n(13),f=n(14),g=n(12),m=n(8),v=n(7),y=n(9),b=n(139),S=n(324),E=n(645),w=n(16);let _=class{constructor(e,t){this.serviceContainer=e,this.stateFactory=t,this.cache=new Map,this.workspaceService=this.serviceContainer.get(c.IWorkspaceService),this.interpreterService=this.serviceContainer.get(g.IInterpreterService),this.output=this.serviceContainer.get(d.IOutputChannel,l.STANDARD_OUTPUT_CHANNEL);const n=this.serviceContainer.get(c.ICommandManager),r=e.get(d.IDisposableRegistry);r.push(this),r.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),r.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),r.push(this.interpreterService.onDidChangeInterpreter(this.onDidChangeInterpreter.bind(this))),r.push(n.registerCommand(b.Commands.ClearAnalyisCache,this.onClearAnalysisCaches.bind(this))),this.languageServerChangeHandler=new S.LanguageServerChangeHandler(this.getCurrentLanguageServerType(),this.serviceContainer.get(d.IExtensions),this.serviceContainer.get(c.IApplicationShell),this.serviceContainer.get(c.IApplicationEnvironment),this.serviceContainer.get(c.ICommandManager)),r.push(this.languageServerChangeHandler)}async activate(e){this.resource=e;const t=await this.interpreterService.getActiveInterpreter(e),n=await this.getKey(e,t);this.activatedServer&&this.activatedServer.key!==n&&this.activatedServer.server.deactivate();const r=await this.get(e,t);this.activatedServer&&this.activatedServer.server.dispose(),this.activatedServer={key:n,server:r,jedi:r.type===w.LanguageServerType.Jedi},this.activatedServer.server.activate()}async get(e,t){const n=await this.getKey(e,t);let r=this.cache.get(n);return r?r=r.then(e=>(e.increment(),e)):(r=this.createRefCountedServer(e,t,n),this.cache.set(n,r)),r}dispose(){this.activatedServer&&this.activatedServer.server.dispose()}async sendTelemetryForChosenLanguageServer(e){const t=this.stateFactory.createGlobalPersistentState("SWITCH_LS",void 0);"string"!=typeof t.value&&await t.updateValue(e),t.value!==e?(await t.updateValue(e),v.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_CURRENT_SELECTION,void 0,{switchTo:e})):v.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_CURRENT_SELECTION,void 0,{lsStartup:e})}isJediUsingDefaultConfiguration(e){const t=this.workspaceService.getConfiguration("python",e).inspect("languageServer");return t?void 0===t.globalValue&&void 0===t.workspaceValue&&void 0===t.workspaceFolderValue:(u.traceError("WorkspaceConfiguration.inspect returns `undefined` for setting `python.languageServer`"),!1)}async onWorkspaceFoldersChanged(){const e=await Promise.all(this.workspaceService.workspaceFolders.map(e=>this.getKey(e.uri))),t=Array.from(this.cache.keys()).filter(t=>e.indexOf(t)<0);if(t.length>0)for(const e of t){const t=await this.cache.get(e);null==t||t.dispose()}}async onDidChangeInterpreter(){return this.activate(this.resource)}getCurrentLanguageServerType(){return this.serviceContainer.get(d.IConfigurationService).getSettings(this.resource).languageServer}async createRefCountedServer(e,t,n){let r=this.getCurrentLanguageServerType();if(r===w.LanguageServerType.Microsoft){const e=this.serviceContainer.get(a.IDiagnosticsService,s.LSNotSupportedDiagnosticServiceId),t=await e.diagnose(void 0);e.handle(t).ignoreErrors(),t.length&&(v.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED,void 0,{supported:!1}),r=w.LanguageServerType.Jedi)}this.sendTelemetryForChosenLanguageServer(r).ignoreErrors(),await this.logStartup(r);let i=this.serviceContainer.get(w.ILanguageServerActivator,r);try{await i.start(e,t)}catch(n){if(r===w.LanguageServerType.Jedi)throw n;this.output.appendLine(p.LanguageService.lsFailedToStart()),r=w.LanguageServerType.Jedi,i=this.serviceContainer.get(w.ILanguageServerActivator,r),await i.start(e,t)}return new E.RefCountedLanguageServer(i,r,()=>{this.cache.delete(n),i.dispose()})}async logStartup(e){let t;switch(e){case w.LanguageServerType.Jedi:t=p.LanguageService.startingJedi();break;case w.LanguageServerType.Microsoft:t=p.LanguageService.startingMicrosoft();break;case w.LanguageServerType.Node:t=p.LanguageService.startingPylance();break;case w.LanguageServerType.None:t=p.LanguageService.startingNone();break;default:throw new Error("Unknown langauge server type in activator.")}this.output.appendLine(t)}async onDidChangeConfiguration(e){var t;if(-1===(this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders.map(e=>e.uri):[void 0]).findIndex(t=>e.affectsConfiguration("python.languageServer",t)))return;const n=this.getCurrentLanguageServerType();(null===(t=this.activatedServer)||void 0===t?void 0:t.key)!==n&&await this.languageServerChangeHandler.handleLanguageServerChange(n)}async getKey(e,t){if(this.serviceContainer.get(d.IConfigurationService).getSettings(this.resource).languageServer===w.LanguageServerType.Node)return"shared-ls";return`${this.workspaceService.getWorkspaceFolderIdentifier(e,"")}-${(t=t||await this.interpreterService.getActiveInterpreter(e))?`${t.path}-${t.envName}`:""}`}async onClearAnalysisCaches(){(await Promise.all([...this.cache.values()])).forEach(e=>e.clearAnalysisCache?e.clearAnalysisCache():f.noop())}};r([h.swallowExceptions("Send telemetry for language server current selection")],_.prototype,"sendTelemetryForChosenLanguageServer",null),_=r([o.injectable(),i(0,o.inject(m.IServiceContainer)),i(1,o.inject(d.IPersistentStateFactory))],_),t.LanguageServerExtensionActivationService=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefCountedLanguageServer=void 0;const r=n(14);t.RefCountedLanguageServer=class{constructor(e,t,n){this.impl=e,this._type=t,this.disposeCallback=n,this.refCount=1,this.increment=()=>{this.refCount+=1}}get type(){return this._type}dispose(){this.refCount=Math.max(0,this.refCount-1),0===this.refCount&&this.disposeCallback()}start(e,t){throw new Error("Server should have already been started. Do not start the wrapper.")}activate(){this.impl.activate()}deactivate(){this.impl.deactivate()}clearAnalysisCache(){this.impl.clearAnalysisCache?this.impl.clearAnalysisCache():r.noop()}get connection(){return this.impl.connection}get capabilities(){return this.impl.capabilities}provideRenameEdits(e,t,n,r){return this.impl.provideRenameEdits(e,t,n,r)}provideDefinition(e,t,n){return this.impl.provideDefinition(e,t,n)}provideHover(e,t,n){return this.impl.provideHover(e,t,n)}provideReferences(e,t,n,r){return this.impl.provideReferences(e,t,n,r)}provideCompletionItems(e,t,n,r){return this.impl.provideCompletionItems(e,t,n,r)}resolveCompletionItem(e,t){if(this.impl.resolveCompletionItem)return this.impl.resolveCompletionItem(e,t)}provideCodeLenses(e,t){return this.impl.provideCodeLenses(e,t)}provideDocumentSymbols(e,t){return this.impl.provideDocumentSymbols(e,t)}provideSignatureHelp(e,t,n,r){return this.impl.provideSignatureHelp(e,t,n,r)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadBetaChannelRule=t.DownloadStableChannelRule=t.DownloadDailyChannelRule=void 0;const o=n(0),s=n(1),a=n(8);let c=class{async shouldLookForNewLanguageServer(e){return!0}};c=r([o.injectable()],c),t.DownloadDailyChannelRule=c;let l=class{async shouldLookForNewLanguageServer(e){return!e}};l=r([o.injectable()],l),t.DownloadStableChannelRule=l;let u=class{constructor(e){this.serviceContainer=e}async shouldLookForNewLanguageServer(e){const t=this.serviceContainer.get(s.IPersistentStateFactory).createGlobalPersistentState("LS.LAST.CHECK.TIME",!0,864e5);return t.value?(await t.updateValue(!1),!0):!e||t.value}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.DownloadBetaChannelRule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerDownloader=void 0;const o=n(0),s=n(4),a=n(2),c=n(3);n(11);const l=n(5),u=n(6),d=n(1),h=n(15),p=n(13),f=n(30),g=n(8),m=n(7),v=n(9),y=n(16);let b=class{constructor(e,t,n,r,i,o,s){this.lsOutputChannel=e,this.fileDownloader=t,this.lsFolderService=n,this.appShell=r,this.fs=i,this.workspace=o,this.services=s,this.output=this.lsOutputChannel.channel}async getDownloadInfo(e){const t=await this.lsFolderService.getLatestLanguageServerVersion(e).then(e=>e);let n=t.uri;if(n.startsWith("https:")){this.workspace.getConfiguration("http",e).get("proxyStrictSSL",!0)||(n=n.replace(/^https:/,"http:"))}const r=t.package.split(".")[0];return[n,t.version.raw,r]}async downloadLanguageServer(e,t){if(await this.lsFolderService.skipDownload())return void l.traceError("Attempted to download with skipDownload true.");const[n,r,i]=await this.getDownloadInfo(t),o=new f.StopWatch;let s=!0,a="";try{a=await this.downloadFile(n,"Downloading Microsoft Python Language Server... ")}catch(e){throw this.output.appendLine(p.LanguageService.downloadFailedOutputMessage()),this.output.appendLine(e),s=!1,this.showMessageAndOptionallyShowOutput(p.LanguageService.lsFailedToDownload()).ignoreErrors(),m.sendTelemetryEvent(v.EventName.PYTHON_LANGUAGE_SERVER_ERROR,void 0,{error:"Failed to download (platform)"},e),new Error(e)}finally{const e=n.startsWith("https:");m.sendTelemetryEvent(v.EventName.PYTHON_LANGUAGE_SERVER_DOWNLOADED,o.elapsedTime,{success:s,lsVersion:r,usedSSL:e,lsName:i})}o.reset();try{await this.unpackArchive(e,a)}catch(e){throw this.output.appendLine(p.LanguageService.extractionFailedOutputMessage()),this.output.appendLine(e),s=!1,this.showMessageAndOptionallyShowOutput(p.LanguageService.lsFailedToExtract()).ignoreErrors(),m.sendTelemetryEvent(v.EventName.PYTHON_LANGUAGE_SERVER_ERROR,void 0,{error:"Failed to extract (platform)"},e),new Error(e)}finally{m.sendTelemetryEvent(v.EventName.PYTHON_LANGUAGE_SERVER_EXTRACTED,o.elapsedTime,{success:s,lsVersion:r,lsName:i}),await this.fs.deleteFile(a)}}async showMessageAndOptionallyShowOutput(e){await this.appShell.showErrorMessage(e,p.Common.openOutputPanel())===p.Common.openOutputPanel()&&this.output.show(!0)}async downloadFile(e,t){const n={extension:".nupkg",outputChannel:this.output,progressMessagePrefix:t};return this.fileDownloader.downloadFile(e,n).then(e=>(this.output.appendLine(p.LanguageService.extractionCompletedOutputMessage()),e))}async unpackArchive(e,t){this.output.append("Unpacking archive... ");const r=h.createDeferred();if(await a.window.withProgress({location:a.ProgressLocation.Window},i=>{const o=new(n(648))({file:t,storeEntries:!0});let s=0,a=0;return o.on("ready",async()=>{s=o.entriesCount,await this.fs.directoryExists(e)||await this.fs.createDirectory(e),o.extract(null,e,e=>{e?r.reject(e):r.resolve(),o.close()})}).on("extract",()=>{a+=1,i.report({message:`Extracting files... ${Math.round(100*a/s)}%`})}).on("error",e=>{r.reject(e)}),r.promise}),this.services)try{const t=this.services.get(y.IPlatformData),n=s.join(e,t.engineExecutableName);await this.fs.chmod(n,"0764")}catch(e){}this.output.appendLine(p.LanguageService.extractionDoneOutputMessage())}};b=r([o.injectable(),i(0,o.inject(y.ILanguageServerOutputChannel)),i(1,o.inject(d.IFileDownloader)),i(2,o.inject(y.ILanguageServerFolderService)),i(3,o.inject(c.IApplicationShell)),i(4,o.inject(u.IFileSystem)),i(5,o.inject(c.IWorkspaceService)),i(6,o.inject(g.IServiceContainer))],b),t.LanguageServerDownloader=b},function(e,t){e.exports=require("./node_modules/node-stream-zip")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AzureBlobStoreNugetRepository=void 0;const o=n(0),s=n(7),a=n(9),c=n(3),l=n(5),u=n(138);let d=class{constructor(e,t,n,r,i=h){this.serviceContainer=e,this.azureBlobStorageAccount=t,this.azureBlobStorageContainer=n,this.azureCDNBlobStorageAccount=r,this.getBlobStore=i}async getPackages(e,t){return this.listPackages(this.azureBlobStorageAccount,this.azureBlobStorageContainer,e,this.azureCDNBlobStorageAccount,t)}async listPackages(e,t,n,r,i){const o=await this.listBlobStoreCatalog(this.fixBlobStoreURI(e,i),t,n),s=this.serviceContainer.get(u.INugetService);return o.map(e=>({package:e.name,uri:`${r}/${t}/${e.name}`,version:s.getVersionFromPackageFileName(e.name)}))}async listBlobStoreCatalog(e,t,n){const r=await this.getBlobStore(e);return new Promise((e,i)=>{r.listBlobsSegmentedWithPrefix(t,n,void 0,(t,n)=>{if(t)return i(t);e(n.entries)})})}fixBlobStoreURI(e,t){if(!e.startsWith("https:"))return e;return this.serviceContainer.get(c.IWorkspaceService).getConfiguration("http",t).get("proxyStrictSSL",!0)?e:e.replace(/^https:/,"http:")}};async function h(e){return(await Promise.resolve().then(()=>n(650))).createBlobServiceAnonymous(e)}r([s.captureTelemetry(a.EventName.PYTHON_LANGUAGE_SERVER_LIST_BLOB_STORE_PACKAGES),l.traceDecorators.verbose("Listing Nuget Packages")],d.prototype,"listPackages",null),d=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged()),i(3,o.unmanaged())],d),t.AzureBlobStoreNugetRepository=d},function(e,t){e.exports=require("./node_modules/azure-storage")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionSurveyPrompt=t.extensionSurveyStateKeys=void 0;const o=n(0),s=n(325),a=n(2),c=n(3),l=n(24);n(11);const u=n(5),d=n(6),h=n(1),p=n(13),f=n(7),g=n(9);var m;!function(e){e.doNotShowAgain="doNotShowExtensionSurveyAgain",e.disableSurveyForTime="doNotShowExtensionSurveyUntilTime"}(m=t.extensionSurveyStateKeys||(t.extensionSurveyStateKeys={}));let v=class{constructor(e,t,n,r,i,o,s,a=10,c=108e5){this.appShell=e,this.browserService=t,this.persistentState=n,this.random=r,this.experiments=i,this.appEnvironment=o,this.platformService=s,this.sampleSizePerOneHundredUsers=a,this.waitTimeToShowSurvey=c}async activate(){if(!this.experiments.inExperiment(l.ShowExtensionSurveyPrompt.enabled))return void this.experiments.sendTelemetryIfInExperiment(l.ShowExtensionSurveyPrompt.control);this.shouldShowBanner()&&setTimeout(()=>this.showSurvey().ignoreErrors(),this.waitTimeToShowSurvey)}shouldShowBanner(){if(a.env.uiKind===(null===a.UIKind||void 0===a.UIKind?void 0:a.UIKind.Web))return!1;if(this.persistentState.createGlobalPersistentState(m.doNotShowAgain,!1).value)return!1;if(this.persistentState.createGlobalPersistentState(m.disableSurveyForTime,!1,72576e5).value)return!1;return!(this.random.getRandomInt(0,100)>=this.sampleSizePerOneHundredUsers)}async showSurvey(){const e=[p.ExtensionSurveyBanner.bannerLabelYes(),p.ExtensionSurveyBanner.maybeLater(),p.Common.doNotShowAgain()],t=await this.appShell.showInformationMessage(p.ExtensionSurveyBanner.bannerMessage(),...e);f.sendTelemetryEvent(g.EventName.EXTENSION_SURVEY_PROMPT,void 0,{selection:t?["Yes","Maybe later","Do not show again"][e.indexOf(t)]:void 0}),t&&(t===p.ExtensionSurveyBanner.bannerLabelYes()?(this.launchSurvey(),await this.persistentState.createGlobalPersistentState(m.disableSurveyForTime,!1,72576e5).updateValue(!0)):t===p.Common.doNotShowAgain()&&await this.persistentState.createGlobalPersistentState(m.doNotShowAgain,!1).updateValue(!0))}launchSurvey(){const e="https://aka.ms/AA5rjx5?"+s.stringify({o:encodeURIComponent(this.platformService.osType),v:encodeURIComponent(this.appEnvironment.vscodeVersion),e:encodeURIComponent(this.appEnvironment.packageJson.version),m:encodeURIComponent(this.appEnvironment.sessionId)});this.browserService.launch(e)}};r([u.traceDecorators.error("Failed to check whether to display prompt for extension survey")],v.prototype,"shouldShowBanner",null),r([u.traceDecorators.error("Failed to display prompt for extension survey")],v.prototype,"showSurvey",null),v=r([o.injectable(),i(0,o.inject(c.IApplicationShell)),i(1,o.inject(h.IBrowserService)),i(2,o.inject(h.IPersistentStateFactory)),i(3,o.inject(h.IRandom)),i(4,o.inject(h.IExperimentsManager)),i(5,o.inject(c.IApplicationEnvironment)),i(6,o.inject(d.IPlatformService)),i(7,o.optional()),i(8,o.optional())],v),t.ExtensionSurveyPrompt=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerAnalysisOptions=void 0;const o=n(0),s=n(57),a=n(200),c=n(16);let l=class extends a.LanguageServerAnalysisOptionsBase{constructor(e,t){super(e,t)}};l=r([o.injectable(),i(0,o.inject(s.IEnvironmentVariablesProvider)),i(1,o.inject(c.ILanguageServerOutputChannel))],l),t.JediLanguageServerAnalysisOptions=l},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(55),o=n(29),s=n(654),a=n(2),c=n(113),l=n(326),u=n(58),d=n(690),h=n(337);r(n(337)),r(n(691));var p,f,g,m,v,y;!function(e){e.is=function(e){return c.string(e.command)}}(p||(p={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(f=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===f.socket&&c.number(t.port)}}(g||(g={})),function(e){e.is=function(e){return c.string(e.module)}}(m||(m={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(v||(v={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(y||(y={}));class b extends l.CommonLanguageClient{constructor(e,t,n,r,i){let o,s,a,l,u;c.string(t)?(o=e,s=t,a=n,l=r,u=!!i):(o=e.toLowerCase(),s=e,a=t,l=n,u=r),void 0===u&&(u=!1),super(o,s,l),this._serverOptions=a,this._forceDebug=u;try{this.checkVersion()}catch(e){throw c.string(e.message)&&this.outputChannel.appendLine(e.message),e}}checkVersion(){let e=s.parse(a.version);if(!e)throw new Error("No valid VS Code version detected. Version string is: "+a.version);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!s.satisfies(e,"^1.46.0"))throw new Error("The language client requires VS Code version ^1.46.0 but received version "+a.version)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),d.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),null===e.processId&&(e.processId=process.pid)}createMessageTransports(e){function t(e,t){if(!e&&!t)return;let n=Object.create(null);return Object.keys(process.env).forEach(e=>n[e]=process.env[e]),t&&(n.ELECTRON_RUN_AS_NODE="1",n.ELECTRON_NO_ASAR="1"),e&&Object.keys(e).forEach(t=>n[t]=e[t]),n}const n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],r=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(e){if(null===e.stdin||null===e.stdout||null===e.stderr)throw new Error("Process created without stdio streams")}let s,a=this._serverOptions;if(c.func(a))return a().then(t=>{if(u.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(v.is(t))return this._isDetached=!!t.detached,{reader:new h.StreamMessageReader(t.reader),writer:new h.StreamMessageWriter(t.writer)};{let n;return y.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),{reader:new h.StreamMessageReader(n.stdout),writer:new h.StreamMessageWriter(n.stdin)}}});let l=a;return s=l.run||l.debug?this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some(e=>n.some(t=>e.startsWith(t))||r.some(t=>e===t))}()?l.debug:l.run:a,this._getServerWorkingDir(s.options).then(n=>{if(m.is(s)&&s.module){let r=s,a=r.transport||f.stdio;if(!r.runtime){let s=void 0;return new Promise((l,u)=>{let d=r.args&&r.args.slice()||[];a===f.ipc?d.push("--node-ipc"):a===f.stdio?d.push("--stdio"):a===f.pipe?(s=h.generateRandomPipeName(),d.push("--pipe="+s)):g.isSocket(a)&&d.push("--socket="+a.port),d.push("--clientProcessId="+process.pid.toString());let p=r.options||Object.create(null);if(p.env=t(p.env,!0),p.execArgv=p.execArgv||[],p.cwd=n,p.silent=!0,a===f.ipc||a===f.stdio){let t=i.fork(r.module,d||[],p);o(t),this._serverProcess=t,t.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),a===f.ipc?(t.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),l({reader:new h.IPCMessageReader(this._serverProcess),writer:new h.IPCMessageWriter(this._serverProcess)})):l({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})}else a===f.pipe?h.createClientPipeTransport(s).then(t=>{let n=i.fork(r.module,d||[],p);o(n),this._serverProcess=n,n.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),n.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),t.onConnected().then(e=>{l({reader:e[0],writer:e[1]})})}):g.isSocket(a)&&h.createClientSocketTransport(a.port).then(t=>{let n=i.fork(r.module,d||[],p);o(n),this._serverProcess=n,n.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),n.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),t.onConnected().then(e=>{l({reader:e[0],writer:e[1]})})})})}{let o=[],s=r.options||Object.create(null);s.execArgv&&s.execArgv.forEach(e=>o.push(e)),o.push(r.module),r.args&&r.args.forEach(e=>o.push(e));let l=Object.create(null);l.cwd=n,l.env=t(s.env,!1);let u=void 0;if(a===f.ipc?(l.stdio=[null,null,null,"ipc"],o.push("--node-ipc")):a===f.stdio?o.push("--stdio"):a===f.pipe?(u=h.generateRandomPipeName(),o.push("--pipe="+u)):g.isSocket(a)&&o.push("--socket="+a.port),o.push("--clientProcessId="+process.pid.toString()),a===f.ipc||a===f.stdio){let t=i.spawn(r.runtime,o,l);return t&&t.pid?(this._serverProcess=t,t.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),a===f.ipc?(t.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),Promise.resolve({reader:new h.IPCMessageReader(t),writer:new h.IPCMessageWriter(t)})):Promise.resolve({reader:new h.StreamMessageReader(t.stdout),writer:new h.StreamMessageWriter(t.stdin)})):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)}if(a===f.pipe)return h.createClientPipeTransport(u).then(t=>{let n=i.spawn(r.runtime,o,l);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),n.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),t.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)});if(g.isSocket(a))return h.createClientSocketTransport(a.port).then(t=>{let n=i.spawn(r.runtime,o,l);return n&&n.pid?(this._serverProcess=n,n.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),n.stdout.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),t.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${r.runtime} failed.`)})}}else if(p.is(s)&&s.command){let t=s,r=t.args||[],o=Object.assign({},t.options);o.cwd=o.cwd||n;let a=i.spawn(t.command,r,o);return a&&a.pid?(a.stderr.on("data",t=>this.outputChannel.append(c.string(t)?t:t.toString(e))),this._serverProcess=a,this._isDetached=!!o.detached,Promise.resolve({reader:new h.StreamMessageReader(a.stdout),writer:new h.StreamMessageWriter(a.stdin)})):Promise.reject(`Launching server using command ${t.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))})}_mainGetRootPath(){let e=a.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(e=>{o.lstat(t,(n,r)=>{e(!n&&r.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}}t.LanguageClient=b;t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return a.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new a.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?a.workspace.getConfiguration(t).get(n,!1):a.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}}},function(e,t){var n;t=e.exports=d,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.src=[],s=t.tokens={},a=0;function c(e){s[e]=a++}c("NUMERICIDENTIFIER"),o[s.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),o[s.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),o[s.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),o[s.MAINVERSION]="("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")\\.("+o[s.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),o[s.MAINVERSIONLOOSE]="("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")\\.("+o[s.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),o[s.PRERELEASEIDENTIFIER]="(?:"+o[s.NUMERICIDENTIFIER]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),o[s.PRERELEASEIDENTIFIERLOOSE]="(?:"+o[s.NUMERICIDENTIFIERLOOSE]+"|"+o[s.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),o[s.PRERELEASE]="(?:-("+o[s.PRERELEASEIDENTIFIER]+"(?:\\."+o[s.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),o[s.PRERELEASELOOSE]="(?:-?("+o[s.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+o[s.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),o[s.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),o[s.BUILD]="(?:\\+("+o[s.BUILDIDENTIFIER]+"(?:\\."+o[s.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),o[s.FULLPLAIN]="v?"+o[s.MAINVERSION]+o[s.PRERELEASE]+"?"+o[s.BUILD]+"?",o[s.FULL]="^"+o[s.FULLPLAIN]+"$",c("LOOSEPLAIN"),o[s.LOOSEPLAIN]="[v=\\s]*"+o[s.MAINVERSIONLOOSE]+o[s.PRERELEASELOOSE]+"?"+o[s.BUILD]+"?",c("LOOSE"),o[s.LOOSE]="^"+o[s.LOOSEPLAIN]+"$",c("GTLT"),o[s.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),o[s.XRANGEIDENTIFIERLOOSE]=o[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),o[s.XRANGEIDENTIFIER]=o[s.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),o[s.XRANGEPLAIN]="[v=\\s]*("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:\\.("+o[s.XRANGEIDENTIFIER]+")(?:"+o[s.PRERELEASE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),o[s.XRANGEPLAINLOOSE]="[v=\\s]*("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+o[s.XRANGEIDENTIFIERLOOSE]+")(?:"+o[s.PRERELEASELOOSE]+")?"+o[s.BUILD]+"?)?)?",c("XRANGE"),o[s.XRANGE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAIN]+"$",c("XRANGELOOSE"),o[s.XRANGELOOSE]="^"+o[s.GTLT]+"\\s*"+o[s.XRANGEPLAINLOOSE]+"$",c("COERCE"),o[s.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),i[s.COERCERTL]=new RegExp(o[s.COERCE],"g"),c("LONETILDE"),o[s.LONETILDE]="(?:~>?)",c("TILDETRIM"),o[s.TILDETRIM]="(\\s*)"+o[s.LONETILDE]+"\\s+",i[s.TILDETRIM]=new RegExp(o[s.TILDETRIM],"g");c("TILDE"),o[s.TILDE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAIN]+"$",c("TILDELOOSE"),o[s.TILDELOOSE]="^"+o[s.LONETILDE]+o[s.XRANGEPLAINLOOSE]+"$",c("LONECARET"),o[s.LONECARET]="(?:\\^)",c("CARETTRIM"),o[s.CARETTRIM]="(\\s*)"+o[s.LONECARET]+"\\s+",i[s.CARETTRIM]=new RegExp(o[s.CARETTRIM],"g");c("CARET"),o[s.CARET]="^"+o[s.LONECARET]+o[s.XRANGEPLAIN]+"$",c("CARETLOOSE"),o[s.CARETLOOSE]="^"+o[s.LONECARET]+o[s.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),o[s.COMPARATORLOOSE]="^"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),o[s.COMPARATOR]="^"+o[s.GTLT]+"\\s*("+o[s.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),o[s.COMPARATORTRIM]="(\\s*)"+o[s.GTLT]+"\\s*("+o[s.LOOSEPLAIN]+"|"+o[s.XRANGEPLAIN]+")",i[s.COMPARATORTRIM]=new RegExp(o[s.COMPARATORTRIM],"g");c("HYPHENRANGE"),o[s.HYPHENRANGE]="^\\s*("+o[s.XRANGEPLAIN]+")\\s+-\\s+("+o[s.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),o[s.HYPHENRANGELOOSE]="^\\s*("+o[s.XRANGEPLAINLOOSE]+")\\s+-\\s+("+o[s.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),o[s.STAR]="(<|>)?=?\\s*\\*";for(var l=0;l<a;l++)n(l,o[l]),i[l]||(i[l]=new RegExp(o[l]));function u(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?i[s.LOOSE]:i[s.FULL]).test(e))return null;try{return new d(e,t)}catch(e){return null}}function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof d))return new d(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var o=e.trim().match(t.loose?i[s.LOOSE]:i[s.FULL]);if(!o)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}t.parse=u,t.valid=function(e,t){var n=u(e,t);return n?n.version:null},t.clean=function(e,t){var n=u(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof d||(e=new d(e,this.options)),this.compareMain(e)||this.comparePre(e)},d.prototype.compareMain=function(e){return e instanceof d||(e=new d(e,this.options)),p(this.major,e.major)||p(this.minor,e.minor)||p(this.patch,e.patch)},d.prototype.comparePre=function(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return p(r,i)}while(++t)},d.prototype.compareBuild=function(e){e instanceof d||(e=new d(e,this.options));var t=0;do{var r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return p(r,i)}while(++t)},d.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new d(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(v(e,t))return null;var n=u(e),r=u(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=p;var h=/^[0-9]+$/;function p(e,t){var n=h.test(e),r=h.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function f(e,t,n){return new d(e,n).compare(new d(t,n))}function g(e,t,n){return f(e,t,n)>0}function m(e,t,n){return f(e,t,n)<0}function v(e,t,n){return 0===f(e,t,n)}function y(e,t,n){return 0!==f(e,t,n)}function b(e,t,n){return f(e,t,n)>=0}function S(e,t,n){return f(e,t,n)<=0}function E(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return v(e,n,r);case"!=":return y(e,n,r);case">":return g(e,n,r);case">=":return b(e,n,r);case"<":return m(e,n,r);case"<=":return S(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function w(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof w){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof w))return new w(e,t);n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===_?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return p(t,e)},t.major=function(e,t){return new d(e,t).major},t.minor=function(e,t){return new d(e,t).minor},t.patch=function(e,t){return new d(e,t).patch},t.compare=f,t.compareLoose=function(e,t){return f(e,t,!0)},t.compareBuild=function(e,t,n){var r=new d(e,n),i=new d(t,n);return r.compare(i)||r.compareBuild(i)},t.rcompare=function(e,t,n){return f(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compareBuild(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.compareBuild(r,e,n)}))},t.gt=g,t.lt=m,t.eq=v,t.neq=y,t.gte=b,t.lte=S,t.cmp=E,t.Comparator=w;var _={};function P(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof P)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new P(e.raw,t);if(e instanceof w)return new P(e.value,t);if(!(this instanceof P))return new P(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function C(e,t){for(var n=!0,r=e.slice(),i=r.pop();n&&r.length;)n=r.every((function(e){return i.intersects(e,t)})),i=r.pop();return n}function T(e){return!e||"x"===e.toLowerCase()||"*"===e}function I(e,t,n,r,i,o,s,a,c,l,u,d,h){return((t=T(n)?"":T(r)?">="+n+".0.0":T(i)?">="+n+"."+r+".0":">="+t)+" "+(a=T(c)?"":T(l)?"<"+(+c+1)+".0.0":T(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function O(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==_&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function R(e,t,n){try{t=new P(t,n)}catch(e){return!1}return t.test(e)}function D(e,t,n,r){var i,o,s,a,c;switch(e=new d(e,r),t=new P(t,r),n){case">":i=g,o=S,s=m,a=">",c=">=";break;case"<":i=m,o=b,s=g,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(R(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],h=null,p=null;if(u.forEach((function(e){e.semver===_&&(e=new w(">=0.0.0")),h=h||e,p=p||e,i(e.semver,h.semver,r)?h=e:s(e.semver,p.semver,r)&&(p=e)})),h.operator===a||h.operator===c)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}w.prototype.parse=function(e){var t=this.options.loose?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new d(n[2],this.options.loose):this.semver=_},w.prototype.toString=function(){return this.value},w.prototype.test=function(e){if(n("Comparator.test",e,this.options.loose),this.semver===_||e===_)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return E(e,this.operator,this.semver,this.options)},w.prototype.intersects=function(e,t){if(!(e instanceof w))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(n=new P(e.value,t),R(this.value,n,t));if(""===e.operator)return""===e.value||(n=new P(this.value,t),R(e.semver,n,t));var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=E(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=E(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=P,P.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},P.prototype.toString=function(){return this.range},P.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?i[s.HYPHENRANGELOOSE]:i[s.HYPHENRANGE];e=e.replace(r,I),n("hyphen replace",e),e=e.replace(i[s.COMPARATORTRIM],"$1$2$3"),n("comparator trim",e,i[s.COMPARATORTRIM]),e=(e=(e=e.replace(i[s.TILDETRIM],"$1~")).replace(i[s.CARETTRIM],"$1^")).split(/\s+/).join(" ");var o=t?i[s.COMPARATORLOOSE]:i[s.COMPARATOR],a=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?i[s.CARETLOOSE]:i[s.CARET];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),T(r)?a="":T(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":T(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?i[s.TILDELOOSE]:i[s.TILDE];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),T(r)?a="":T(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":T(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?i[s.XRANGELOOSE]:i[s.XRANGE];return e.replace(r,(function(r,i,o,s,a,c){n("xRange",e,r,i,o,s,a,c);var l=T(o),u=l||T(s),d=u||T(a),h=d;return"="===i&&h&&(i=""),c=t.includePrerelease?"-0":"",l?r=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(u&&(s=0),a=0,">"===i?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",u?o=+o+1:s=+s+1),r=i+o+"."+s+"."+a+c):u?r=">="+o+".0.0"+c+" <"+(+o+1)+".0.0"+c:d&&(r=">="+o+"."+s+".0"+c+" <"+o+"."+(+s+1)+".0"+c),n("xRange return",r),r}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[s.STAR],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(o)}))),a=a.map((function(e){return new w(e,this.options)}),this)},P.prototype.intersects=function(e,t){if(!(e instanceof P))throw new TypeError("a Range is required");return this.set.some((function(n){return C(n,t)&&e.set.some((function(e){return C(e,t)&&n.every((function(n){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new P(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},P.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1},t.satisfies=R,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new P(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new d(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new P(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new d(r=e,n)))})),r},t.minVersion=function(e,t){e=new P(e,t);var n=new d("0.0.0");if(e.test(n))return n;if(n=new d("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r){e.set[r].forEach((function(e){var t=new d(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!g(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(n&&e.test(n))return n;return null},t.validRange=function(e,t){try{return new P(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return D(e,t,"<",n)},t.gtr=function(e,t,n){return D(e,t,">",n)},t.outside=D,t.prerelease=function(e,t){var n=u(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new P(e,n),t=new P(t,n),e.intersects(t)},t.coerce=function(e,t){if(e instanceof d)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var n=null;if((t=t||{}).rtl){for(var r;(r=i[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&r.index+r[0].length===n.index+n[0].length||(n=r),i[s.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;i[s.COERCERTL].lastIndex=-1}else n=e.match(i[s.COERCE]);if(null===n)return null;return u(n[2]+"."+(n[3]||"0")+"."+(n[4]||"0"),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78),i=n(328),o=n(22),s=Buffer.from("\r","ascii")[0],a=Buffer.from("\n","ascii")[0];class c{constructor(e="utf-8"){this._encoding=e,this.index=0,this.buffer=Buffer.allocUnsafe(8192)}get encoding(){return this._encoding}append(e){let t;if(t="string"==typeof e?Buffer.from(e,this._encoding):e,this.buffer.length-this.index>=t.length)this.buffer.set(t,this.index);else{var n=8192*(Math.ceil((this.index+t.length)/8192)+1);0===this.index?(this.buffer=Buffer.allocUnsafe(n),this.buffer.set(t)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],n)}this.index+=t.length}tryReadHeaders(){let e=0;for(;e+3<this.index&&(this.buffer[e]!==s||this.buffer[e+1]!==a||this.buffer[e+2]!==s||this.buffer[e+3]!==a);)e++;if(e+3>=this.index)return;const t=new Map;this.buffer.toString("ascii",0,e).split("\r\n").forEach(e=>{let n=e.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");let r=e.substr(0,n),i=e.substr(n+1).trim();t.set(r,i)});let n=e+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,t}tryReadBody(e){if(this.index<e)return;const t=Buffer.alloc(e);this.buffer.copy(t,0,0,e);const n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t}get numberOfBytes(){return this.index}}class l{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),i.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),i.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),i.Disposable.create(()=>this.stream.off("data",e))}}class u{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),i.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),i.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),i.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,r)=>{const i=e=>{null==e?n():r(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)})}end(){this.stream.end()}}const d=Object.freeze({messageBuffer:Object.freeze({create:e=>new c(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new o.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new l(e),asWritableStream:e=>new u(e)}),console:console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setImmediate(e,...t),clearImmediate(e){clearImmediate(e)}})});function h(){return d}!function(e){e.install=function(){r.default.install(d)}}(h||(h={})),t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78),i=n(114),o=n(115);var s;!function(e){e.is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error("Reader received error. Reason: "+(i.string(e.message)?e.message:"unknown"))}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){var t;let n,i;const o=new Map;let s;const a=new Map;if(void 0===e||"string"==typeof e)n=null!=e?e:"utf-8";else{if(n=null!==(t=e.charset)&&void 0!==t?t:"utf-8",void 0!==e.contentDecoder&&(i=e.contentDecoder,o.set(i.name,i)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(s=e.contentTypeDecoder,a.set(s.name,s)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)a.set(t.name,t)}return void 0===s&&(s=r.default().applicationJson.decoder,a.set(s.name,s)),{charset:n,contentDecoder:i,contentDecoders:o,contentTypeDecoder:s,contentTypeDecoders:a}}}(s||(s={}));t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=r.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then(e=>{this.options.contentTypeDecoder.decode(e,this.options).then(e=>{this.callback(e)},e=>{this.fireError(e)})},e=>{this.fireError(e)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(r.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=r.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78),i=n(114),o=n(658),s=n(115);var a;!function(e){e.is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error("Writer received error. Reason: "+(i.string(e.message)?e.message:"unknown"))}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){var t,n;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:r.default().applicationJson.encoder}:{charset:null!==(t=e.charset)&&void 0!==t?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(n=e.contentTypeEncoder)&&void 0!==n?n:r.default().applicationJson.encoder}}}(a||(a={}));t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e).then(t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&r.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(78),i=n(114),o=n(330),s=n(660),a=n(115),c=n(331);var l,u,d,h,p,f,g,m,v,y,b,S,E;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.type=new o.NotificationType("$/progress")}(u||(u={}));t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(d||(d={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(p=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(f=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(m=t.ConnectionErrors||(t.ConnectionErrors={}));class w extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,w.prototype)}}t.ConnectionError=w,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(v=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(y=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation(e,t){e.sendNotification(l.type,{id:t})},cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(b=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:y.Message,sender:b.Message}),e.is=function(e){const t=e;return t&&y.is(t.receiver)&&b.is(t.sender)}}(S=t.CancellationStrategy||(t.CancellationStrategy={})),function(e){e.is=function(e){const t=e;return t&&(S.is(t.cancellationStrategy)||v.is(t.connectionStrategy))}}(t.ConnectionOptions||(t.ConnectionOptions={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(E||(E={})),t.createMessageConnection=function(e,n,v,y){const b=void 0!==v?v:t.NullLogger;let _=0,P=0,C=0,T=void 0;const I=Object.create(null);let O=void 0;const R=Object.create(null),D=new Map;let x,k,A=new s.LinkedMap,N=Object.create(null),j=Object.create(null),F=h.Off,M=p.Text,L=E.New;const U=new a.Emitter,W=new a.Emitter,B=new a.Emitter,V=new a.Emitter,H=new a.Emitter,q=y&&y.cancellationStrategy?y.cancellationStrategy:S.Message;function G(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function $(e,t){var n;o.isRequestMessage(t)?e.set(G(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++C).toString():"res-"+n.toString(),t):e.set("not-"+(++P).toString(),t)}function K(e){}function z(){return L===E.Listening}function Y(){return L===E.Closed}function J(){return L===E.Disposed}function X(){L!==E.New&&L!==E.Listening||(L=E.Closed,W.fire(void 0))}function Q(){x||0===A.size||(x=r.default().timer.setImmediate(()=>{x=void 0,function(){if(0===A.size)return;const e=A.shift();try{o.isRequestMessage(e)?function(e){if(J())return;function t(t,r,i){const s={jsonrpc:"2.0",id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ee(s,r,i),n.write(s)}function r(t,r,i){const o={jsonrpc:"2.0",id:e.id,error:t.toJson()};ee(o,r,i),n.write(o)}!function(e){if(F===h.Off||!k)return;if(M===p.Text){let t=void 0;F===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),k.log(`Received request '${e.method} - (${e.id})'.`,t)}else te("receive-request",e)}(e);const s=I[e.method];let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||T){const s=String(e.id),u=q.receiver.createCancellationTokenSource(s);j[s]=u;try{let d;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but recevied none.`),e.method,l);d=c(u.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);d=c(...e.params,u.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);d=c(e.params,u.token)}else T&&(d=T(e.method,e.params,u.token));const h=d;d?h.then?h.then(n=>{delete j[s],t(n,e.method,l)},t=>{delete j[s],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(delete j[s],t(d,e.method,l)):(delete j[s],function(t,r,i){void 0===t&&(t=null);const o={jsonrpc:"2.0",id:e.id,result:t};ee(o,r,i),n.write(o)}(d,e.method,l))}catch(n){delete j[s],n instanceof o.ResponseError?t(n,e.method,l):n&&i.string(n.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(J())return;let t,n=void 0;if(e.method===l.type.method)t=e=>{const t=e.id,n=j[String(t)];n&&n.cancel()};else{const r=R[e.method];r&&(t=r.handler,n=r.type)}if(t||O)try{!function(e){if(F===h.Off||!k||e.method===g.type.method)return;if(M===p.Text){let t=void 0;F===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),k.log(`Received notification '${e.method}'.`,t)}else te("receive-notification",e)}(e),t?void 0===e.params?(void 0!==n&&0!==n.numberOfParams&&n.parameterStructures!==o.ParameterStructures.byName&&b.error(`Notification ${e.method} defines ${n.numberOfParams} params but recevied none.`),t()):Array.isArray(e.params)?(void 0!==n&&(n.parameterStructures===o.ParameterStructures.byName&&b.error(`Notification ${e.method} defines parameters by name but received parameters by position`),n.numberOfParams!==e.params.length&&b.error(`Notification ${e.method} defines ${n.numberOfParams} params but received ${e.params.length} argumennts`)),t(...e.params)):(void 0!==n&&n.parameterStructures===o.ParameterStructures.byPosition&&b.error(`Notification ${e.method} defines parameters by position but received parameters by name`),t(e.params)):O&&O(e.method,e.params)}catch(t){t.message?b.error(`Notification handler '${e.method}' failed with message: ${t.message}`):b.error(`Notification handler '${e.method}' failed unexpectedly.`)}else B.fire(e)}(e):o.isResponseMessage(e)?function(e){if(J())return;if(null===e.id)e.error?b.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):b.error("Received response message without id. No further error information provided.");else{const t=String(e.id),n=N[t];if(function(e,t){if(F===h.Off||!k)return;if(M===p.Text){let n=void 0;if(F===h.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";k.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else k.log(`Received response ${e.id} without active response promise.`,n)}else te("receive-response",e)}(e,n),n){delete N[t];try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?b.error(`Response handler '${n.method}' failed with message: ${e.message}`):b.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void b.error("Received empty message.");b.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));const t=e;if(i.string(t.id)||i.number(t.id)){const e=String(t.id),n=N[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{Q()}}()}))}e.onClose(X),e.onError((function(e){U.fire([e,void 0,void 0])})),n.onClose(X),n.onError((function(e){U.fire(e)}));const Z=e=>{try{if(o.isNotificationMessage(e)&&e.method===l.type.method){const t=G(e.params.id),r=A.get(t);if(o.isRequestMessage(r)){const i=null==y?void 0:y.connectionStrategy,o=i&&i.cancelUndispatched?i.cancelUndispatched(r,K):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return A.delete(t),o.id=r.id,ee(o,e.method,Date.now()),void n.write(o)}}$(A,e)}finally{Q()}};function ee(e,t,n){if(F!==h.Off&&k)if(M===p.Text){let r=void 0;F===h.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),k.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else te("send-response",e)}function te(e,t){if(!k||F===h.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};k.log(n)}function ne(){if(Y())throw new w(m.Closed,"Connection is closed.");if(J())throw new w(m.Disposed,"Connection is disposed.")}function re(e){return void 0===e?null:e}function ie(e){return null===e?void 0:e}function oe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function se(e,t){switch(e){case o.ParameterStructures.auto:return oe(t)?ie(t):[re(t)];case o.ParameterStructures.byName:if(!oe(t))throw new Error("Recevied parameters by name but param is not an object literal.");return ie(t);case o.ParameterStructures.byPosition:return[re(t)];default:throw new Error("Unknown parameter structure "+e.toString())}}function ae(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=se(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(re(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ce={sendNotification:(e,...t)=>{let r,s;if(ne(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=se(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Recevied ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map(e=>re(e))}}else{const n=t;r=e.method,s=ae(e,n)}const a={jsonrpc:"2.0",method:r,params:s};!function(e){if(F!==h.Off&&k)if(M===p.Text){let t=void 0;F===h.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),k.log(`Sending notification '${e.method}'.`,t)}else te("send-notification",e)}(a),n.write(a)},onNotification:(e,t)=>{ne(),i.func(e)?O=e:t&&(i.string(e)?R[e]={type:void 0,handler:t}:R[e.method]={type:e,handler:t})},onProgress:(e,t,n)=>{if(D.has(t))throw new Error(`Progress handler for token ${t} already registered`);return D.set(t,n),{dispose:()=>{D.delete(t)}}},sendProgress:(e,t,n)=>{ce.sendNotification(u.type,{token:t,value:n})},onUnhandledProgress:V.event,sendRequest:(e,...t)=>{let r,s;ne(),function(){if(!z())throw new Error("Call listen() first.")}();let a=void 0;if(i.string(e)){r=e;const n=t[0],i=t[t.length-1];let l=0,u=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;c.CancellationToken.is(i)&&(d-=1,a=i);const h=d-l;switch(h){case 0:s=void 0;break;case 1:s=se(u,t[l]);break;default:if(u===o.ParameterStructures.byName)throw new Error(`Recevied ${h} parameters for 'by Name' request parameter structure.`);s=t.slice(l,d).map(e=>re(e))}}else{const n=t;r=e.method,s=ae(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const l=_++;let u;a&&(u=a.onCancellationRequested(()=>{q.sender.sendCancellation(ce,l)}));return new Promise((e,t)=>{const i={jsonrpc:"2.0",id:l,method:r,params:s};let a={method:r,timerStart:Date.now(),resolve:t=>{e(t),q.sender.cleanup(l),null==u||u.dispose()},reject:e=>{t(e),q.sender.cleanup(l),null==u||u.dispose()}};!function(e){if(F!==h.Off&&k)if(M===p.Text){let t=void 0;F===h.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),k.log(`Sending request '${e.method} - (${e.id})'.`,t)}else te("send-request",e)}(i);try{n.write(i)}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&(N[String(l)]=a)})},onRequest:(e,t)=>{ne(),d.is(e)?T=e:i.string(e)?void 0!==t&&(I[e]={handler:t,type:void 0}):void 0!==t&&(I[e.method]={type:e,handler:t})},trace:(e,t,n)=>{let r=!1,o=p.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||p.Text)),F=e,M=o,k=F===h.Off?void 0:t,!r||Y()||J()||ce.sendNotification(f.type,{value:h.toString(e)})},onError:U.event,onClose:W.event,onUnhandledNotification:B.event,onDispose:H.event,dispose:()=>{if(J())return;L=E.Disposed,H.fire(void 0);const t=new Error("Connection got disposed.");Object.keys(N).forEach(e=>{N[e].reject(t)}),N=Object.create(null),j=Object.create(null),A=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{ne(),function(){if(z())throw new w(m.AlreadyListening,"Connection is already listening")}(),L=E.Listening,e.listen(Z)},inspect:()=>{r.default().console.log("inspect")}};return ce.onNotification(g.type,e=>{F!==h.Off&&k&&k.log(e.message,F===h.Verbose?e.verbose:void 0)}),ce.onNotification(u.type,e=>{const t=D.get(e.token);t?t(e.value):V.fire(e)}),ce}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(r=t.Touch||(t.Touch={}));class i{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(n)return t!==r.None&&this.touch(n,t),n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===r.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i;t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){return super.set(e,t,r.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(51)),r(n(662)),r(n(48)),r(n(663));var i=n(676);t.createProtocolConnection=i.createProtocolConnection},function(e,t,n){"use strict";var r,i,o,s,a,c,l,u,d,h,p,f,g,m,v,y,b,S,E,w,_;n.r(t),n.d(t,"Position",(function(){return r})),n.d(t,"Range",(function(){return i})),n.d(t,"Location",(function(){return o})),n.d(t,"LocationLink",(function(){return s})),n.d(t,"Color",(function(){return a})),n.d(t,"ColorInformation",(function(){return c})),n.d(t,"ColorPresentation",(function(){return l})),n.d(t,"FoldingRangeKind",(function(){return u})),n.d(t,"FoldingRange",(function(){return d})),n.d(t,"DiagnosticRelatedInformation",(function(){return h})),n.d(t,"DiagnosticSeverity",(function(){return p})),n.d(t,"DiagnosticTag",(function(){return f})),n.d(t,"DiagnosticCode",(function(){return g})),n.d(t,"Diagnostic",(function(){return m})),n.d(t,"Command",(function(){return v})),n.d(t,"TextEdit",(function(){return y})),n.d(t,"TextDocumentEdit",(function(){return b})),n.d(t,"CreateFile",(function(){return S})),n.d(t,"RenameFile",(function(){return E})),n.d(t,"DeleteFile",(function(){return w})),n.d(t,"WorkspaceEdit",(function(){return _})),n.d(t,"WorkspaceChange",(function(){return Z})),n.d(t,"TextDocumentIdentifier",(function(){return P})),n.d(t,"VersionedTextDocumentIdentifier",(function(){return C})),n.d(t,"TextDocumentItem",(function(){return T})),n.d(t,"MarkupKind",(function(){return I})),n.d(t,"MarkupContent",(function(){return O})),n.d(t,"CompletionItemKind",(function(){return R})),n.d(t,"InsertTextFormat",(function(){return D})),n.d(t,"CompletionItemTag",(function(){return x})),n.d(t,"InsertReplaceEdit",(function(){return k})),n.d(t,"CompletionItem",(function(){return A})),n.d(t,"CompletionList",(function(){return N})),n.d(t,"MarkedString",(function(){return j})),n.d(t,"Hover",(function(){return F})),n.d(t,"ParameterInformation",(function(){return M})),n.d(t,"SignatureInformation",(function(){return L})),n.d(t,"DocumentHighlightKind",(function(){return U})),n.d(t,"DocumentHighlight",(function(){return W})),n.d(t,"SymbolKind",(function(){return B})),n.d(t,"SymbolTag",(function(){return V})),n.d(t,"SymbolInformation",(function(){return H})),n.d(t,"DocumentSymbol",(function(){return q})),n.d(t,"CodeActionKind",(function(){return G})),n.d(t,"CodeActionContext",(function(){return $})),n.d(t,"CodeAction",(function(){return K})),n.d(t,"CodeLens",(function(){return z})),n.d(t,"FormattingOptions",(function(){return Y})),n.d(t,"DocumentLink",(function(){return J})),n.d(t,"SelectionRange",(function(){return X})),n.d(t,"EOL",(function(){return te})),n.d(t,"TextDocument",(function(){return ee})),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return ne.objectLiteral(t)&&ne.number(t.line)&&ne.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(ne.number(e)&&ne.number(t)&&ne.number(n)&&ne.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return ne.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ne.defined(t)&&i.is(t.range)&&(ne.string(t.uri)||ne.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ne.defined(t)&&i.is(t.targetRange)&&ne.string(t.targetUri)&&(i.is(t.targetSelectionRange)||ne.undefined(t.targetSelectionRange))&&(i.is(t.originSelectionRange)||ne.undefined(t.originSelectionRange))}}(s||(s={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ne.number(t.red)&&ne.number(t.green)&&ne.number(t.blue)&&ne.number(t.alpha)}}(a||(a={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&a.is(t.color)}}(c||(c={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ne.string(t.label)&&(ne.undefined(t.textEdit)||y.is(t))&&(ne.undefined(t.additionalTextEdits)||ne.typedArray(t.additionalTextEdits,y.is))}}(l||(l={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(u||(u={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return ne.defined(n)&&(o.startCharacter=n),ne.defined(r)&&(o.endCharacter=r),ne.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return ne.number(t.startLine)&&ne.number(t.startLine)&&(ne.undefined(t.startCharacter)||ne.number(t.startCharacter))&&(ne.undefined(t.endCharacter)||ne.number(t.endCharacter))&&(ne.undefined(t.kind)||ne.string(t.kind))}}(d||(d={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ne.defined(t)&&o.is(t.location)&&ne.string(t.message)}}(h||(h={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(p||(p={})),function(e){e.Unnecessary=1,e.Deprecated=2}(f||(f={})),function(e){e.is=function(e){var t=e;return null!=t&&(ne.number(t.value)||ne.string(t.value))&&ne.string(t.target)}}(g||(g={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return ne.defined(n)&&(s.severity=n),ne.defined(r)&&(s.code=r),ne.defined(i)&&(s.source=i),ne.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return ne.defined(t)&&i.is(t.range)&&ne.string(t.message)&&(ne.number(t.severity)||ne.undefined(t.severity))&&(ne.number(t.code)||ne.string(t.code)||ne.undefined(t.code))&&(ne.string(t.source)||ne.undefined(t.source))&&(ne.undefined(t.relatedInformation)||ne.typedArray(t.relatedInformation,h.is))}}(m||(m={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return ne.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.title)&&ne.string(t.command)}}(v||(v={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ne.objectLiteral(t)&&ne.string(t.newText)&&i.is(t.range)}}(y||(y={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ne.defined(t)&&C.is(t.textDocument)&&Array.isArray(t.edits)}}(b||(b={})),function(e){e.create=function(e,t){var n={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"create"===t.kind&&ne.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ne.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ne.boolean(t.options.ignoreIfExists)))}}(S||(S={})),function(e){e.create=function(e,t,n){var r={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(r.options=n),r},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ne.string(t.oldUri)&&ne.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ne.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ne.boolean(t.options.ignoreIfExists)))}}(E||(E={})),function(e){e.create=function(e,t){var n={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(n.options=t),n},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ne.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ne.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ne.boolean(t.options.ignoreIfNotExists)))}}(w||(w={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ne.string(e.kind)?S.is(e)||E.is(e)||w.is(e):b.is(e)})))}}(_||(_={}));var P,C,T,I,O,R,D,x,k,A,N,j,F,M,L,U,W,B,V,H,q,G,$,K,z,Y,J,X,Q=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(y.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(y.replace(e,t))},e.prototype.delete=function(e){this.edits.push(y.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),Z=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach((function(e){if(b.is(e)){var n=new Q(e.edits);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new Q(e.changes[n]);t._textEditChanges[n]=r})))}return Object.defineProperty(e.prototype,"edit",{get:function(){return void 0===this._workspaceEdit?{documentChanges:[]}:this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(C.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new Q(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new Q(i),this._textEditChanges[e]=r}return r},e.prototype.createFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(S.create(e,t))},e.prototype.renameFile=function(e,t,n){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(E.create(e,t,n))},e.prototype.deleteFile=function(e,t){this.checkDocumentChanges(),this._workspaceEdit.documentChanges.push(w.create(e,t))},e.prototype.checkDocumentChanges=function(){if(!this._workspaceEdit||!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.")},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)}}(P||(P={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)&&(null===t.version||ne.number(t.version))}}(C||(C={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ne.defined(t)&&ne.string(t.uri)&&ne.string(t.languageId)&&ne.number(t.version)&&ne.string(t.text)}}(T||(T={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(I||(I={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(I||(I={})),function(e){e.is=function(e){var t=e;return ne.objectLiteral(e)&&I.is(t.kind)&&ne.string(t.value)}}(O||(O={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(R||(R={})),function(e){e.PlainText=1,e.Snippet=2}(D||(D={})),function(e){e.Deprecated=1}(x||(x={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ne.string(t.newText)&&i.is(t.insert)&&i.is(t.replace)}}(k||(k={})),function(e){e.create=function(e){return{label:e}}}(A||(A={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(N||(N={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ne.string(t)||ne.objectLiteral(t)&&ne.string(t.language)&&ne.string(t.value)}}(j||(j={})),function(e){e.is=function(e){var t=e;return!!t&&ne.objectLiteral(t)&&(O.is(t.contents)||j.is(t.contents)||ne.typedArray(t.contents,j.is))&&(void 0===e.range||i.is(e.range))}}(F||(F={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(M||(M={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return ne.defined(t)&&(i.documentation=t),ne.defined(n)?i.parameters=n:i.parameters=[],i}}(L||(L={})),function(e){e.Text=1,e.Read=2,e.Write=3}(U||(U={})),function(e){e.create=function(e,t){var n={range:e};return ne.number(t)&&(n.kind=t),n}}(W||(W={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(B||(B={})),function(e){e.Deprecated=1}(V||(V={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(H||(H={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&ne.string(t.name)&&ne.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||ne.string(t.detail))&&(void 0===t.deprecated||ne.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(q||(q={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(G||(G={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ne.defined(t)&&ne.typedArray(t.diagnostics,m.is)&&(void 0===t.only||ne.typedArray(t.only,ne.string))}}($||($={})),function(e){e.create=function(e,t,n){var r={title:e};return v.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ne.string(t.title)&&(void 0===t.diagnostics||ne.typedArray(t.diagnostics,m.is))&&(void 0===t.kind||ne.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||v.is(t.command))&&(void 0===t.isPreferred||ne.boolean(t.isPreferred))&&(void 0===t.edit||_.is(t.edit))}}(K||(K={})),function(e){e.create=function(e,t){var n={range:e};return ne.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ne.defined(t)&&i.is(t.range)&&(ne.undefined(t.command)||v.is(t.command))}}(z||(z={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ne.defined(t)&&ne.number(t.tabSize)&&ne.boolean(t.insertSpaces)}}(Y||(Y={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ne.defined(t)&&i.is(t.range)&&(ne.undefined(t.target)||ne.string(t.target))}}(J||(J={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&i.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(X||(X={}));var ee,te=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new re(e,t,n,r)},e.is=function(e){var t=e;return!!(ne.defined(t)&&ne.string(t.uri)&&(ne.undefined(t.languageId)||ne.string(t.languageId))&&ne.number(t.lineCount)&&ne.func(t.getText)&&ne.func(t.positionAt)&&ne.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);var s=0,a=0,c=0;for(;s<i.length&&a<o.length;){var l=n(i[s],o[a]);t[c++]=l<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Overlapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(ee||(ee={}));var ne,re=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);t[o]>e?i=o:n=o+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ne||(ne={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(664),i=n(51),o=n(48),s=n(665);t.ImplementationRequest=s.ImplementationRequest;const a=n(666);t.TypeDefinitionRequest=a.TypeDefinitionRequest;const c=n(667);t.WorkspaceFoldersRequest=c.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=c.DidChangeWorkspaceFoldersNotification;const l=n(668);t.ConfigurationRequest=l.ConfigurationRequest;const u=n(669);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const d=n(670);t.FoldingRangeRequest=d.FoldingRangeRequest;const h=n(671);t.DeclarationRequest=h.DeclarationRequest;const p=n(672);t.SelectionRangeRequest=p.SelectionRangeRequest;const f=n(673);t.WorkDoneProgress=f.WorkDoneProgress,t.WorkDoneProgressCreateRequest=f.WorkDoneProgressCreateRequest,t.WorkDoneProgressCancelNotification=f.WorkDoneProgressCancelNotification;const g=n(674);t.CallHierarchyIncomingCallsRequest=g.CallHierarchyIncomingCallsRequest,t.CallHierarchyOutgoingCallsRequest=g.CallHierarchyOutgoingCallsRequest,t.CallHierarchyPrepareRequest=g.CallHierarchyPrepareRequest;const m=n(675);var v,y;t.SemanticTokenTypes=m.SemanticTokenTypes,t.SemanticTokenModifiers=m.SemanticTokenModifiers,t.SemanticTokens=m.SemanticTokens,t.TokenFormat=m.TokenFormat,t.SemanticTokensRequest=m.SemanticTokensRequest,t.SemanticTokensDeltaRequest=m.SemanticTokensDeltaRequest,t.SemanticTokensRangeRequest=m.SemanticTokensRangeRequest,t.SemanticTokensRefreshNotification=m.SemanticTokensRefreshNotification,function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(v=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!v.is(t))return!1;return!0}}(y=t.DocumentSelector||(t.DocumentSelector={})),function(e){e.type=new o.ProtocolRequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new o.ProtocolRequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.Create="create",e.Rename="rename",e.Delete="delete"}(t.ResourceOperationKind||(t.ResourceOperationKind={})),function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"}(t.FailureHandlingKind||(t.FailureHandlingKind={})),function(e){e.hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0}}(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})),function(e){e.is=function(e){const t=e;return t&&(null===t.documentSelector||y.is(t.documentSelector))}}(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},e.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)}}(t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})),function(e){e.type=new o.ProtocolRequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new o.ProtocolNotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new o.ProtocolRequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new o.ProtocolNotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new o.ProtocolNotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new o.ProtocolNotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new o.ProtocolRequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new o.ProtocolNotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new o.ProtocolNotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.method="textDocument/didOpen",e.type=new o.ProtocolNotificationType(e.method)}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.method="textDocument/didChange",e.type=new o.ProtocolNotificationType(e.method)}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.method="textDocument/didClose",e.type=new o.ProtocolNotificationType(e.method)}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.method="textDocument/didSave",e.type=new o.ProtocolNotificationType(e.method)}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}(t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})),function(e){e.method="textDocument/willSave",e.type=new o.ProtocolNotificationType(e.method)}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.method="textDocument/willSaveWaitUntil",e.type=new o.ProtocolRequestType(e.method)}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new o.ProtocolNotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new o.ProtocolNotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.method="textDocument/completion",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.method="completionItem/resolve",e.type=new o.ProtocolRequestType(e.method)}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.method="textDocument/hover",e.type=new o.ProtocolRequestType(e.method)}(t.HoverRequest||(t.HoverRequest={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3}(t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})),function(e){e.method="textDocument/signatureHelp",e.type=new o.ProtocolRequestType(e.method)}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.method="textDocument/definition",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.method="textDocument/references",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.method="textDocument/documentHighlight",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.method="textDocument/documentSymbol",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.method="textDocument/codeAction",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.method="workspace/symbol",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new o.ProtocolRequestType("textDocument/codeLens"),e.resultType=new i.ProgressType}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new o.ProtocolRequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.method="textDocument/documentLink",e.type=new o.ProtocolRequestType(e.method),e.resultType=new i.ProgressType}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new o.ProtocolRequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.method="textDocument/formatting",e.type=new o.ProtocolRequestType(e.method)}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.method="textDocument/rangeFormatting",e.type=new o.ProtocolRequestType(e.method)}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.method="textDocument/onTypeFormatting",e.type=new o.ProtocolRequestType(e.method)}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.method="textDocument/rename",e.type=new o.ProtocolRequestType(e.method)}(t.RenameRequest||(t.RenameRequest={})),function(e){e.method="textDocument/prepareRename",e.type=new o.ProtocolRequestType(e.method)}(t.PrepareRenameRequest||(t.PrepareRenameRequest={})),function(e){e.type=new o.ProtocolRequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new o.ProtocolRequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=function(e){return!0===e||!1===e},t.string=r,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=i,t.stringArray=function(e){return i(e)&&e.every(e=>r(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.method="textDocument/implementation",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.method="textDocument/typeDefinition",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.ProtocolRequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.ProtocolRequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.method="textDocument/documentColor",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new i.ProtocolRequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.method="textDocument/foldingRange",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.method="textDocument/declaration",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.DeclarationRequest||(t.DeclarationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.method="textDocument/selectionRange",e.type=new i.ProtocolRequestType(e.method),e.resultType=new r.ProgressType}(t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51),i=n(48);!function(e){e.type=new r.ProgressType}(t.WorkDoneProgress||(t.WorkDoneProgress={})),function(e){e.type=new i.ProtocolRequestType("window/workDoneProgress/create")}(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})),function(e){e.type=new i.ProtocolNotificationType("window/workDoneProgress/cancel")}(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.method="textDocument/prepareCallHierarchy",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})),function(e){e.method="callHierarchy/incomingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})),function(e){e.method="callHierarchy/outgoingCalls",e.type=new r.ProtocolRequestType(e.method)}(t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.member="member",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"}(t.SemanticTokenTypes||(t.SemanticTokenTypes={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})),function(e){e.is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(t.SemanticTokens||(t.SemanticTokens={})),function(e){e.Relative="relative"}(t.TokenFormat||(t.TokenFormat={})),function(e){e.method="textDocument/semanticTokens/full",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRequest||(t.SemanticTokensRequest={})),function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})),function(e){e.method="textDocument/semanticTokens/range",e.type=new r.ProtocolRequestType(e.method)}(t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})),function(e){e.method="workspace/semanticTokens/refresh",e.type=new r.ProtocolNotificationType0(e.method)}(t.SemanticTokensRefreshNotification||(t.SemanticTokensRefreshNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(51);t.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),r.createMessageConnection(e,t,n,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(113),s=n(201),a=n(333),c=n(334);var l;!function(e){e.is=function(e){const t=e;return t&&!!t.inserting&&!!t.replacing}}(l||(l={})),t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function u(e){return{uri:t(e.uri)}}function d(e){return{uri:t(e.uri),version:e.version}}function h(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function p(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function f(e){switch(e){case r.SignatureHelpTriggerKind.Invoke:return i.SignatureHelpTriggerKind.Invoked;case r.SignatureHelpTriggerKind.TriggerCharacter:return i.SignatureHelpTriggerKind.TriggerCharacter;case r.SignatureHelpTriggerKind.ContentChange:return i.SignatureHelpTriggerKind.ContentChange}}function g(e){return{label:e.label}}function m(e){return{label:e.label,parameters:(t=e.parameters,t.map(g))};var t}function v(e){return{line:e.line,character:e.character}}function y(e){return null==e?e:{line:e.line,character:e.character}}function b(e){return null==e?e:{start:y(e.start),end:y(e.end)}}function S(e){return null==e?e:i.Location.create(n(e.uri),b(e.range))}function E(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function w(e){switch(e){case r.DiagnosticTag.Unnecessary:return i.DiagnosticTag.Unnecessary;case r.DiagnosticTag.Deprecated:return i.DiagnosticTag.Deprecated;default:return}}function _(e){return{message:e.message,location:S(e.location)}}function P(e){let t=i.Diagnostic.create(b(e.range),e.message);return o.number(e.severity)&&(t.severity=E(e.severity)),t.code=function(e){if(null!=e)return o.number(e)||o.string(e)?e:{value:e.value,target:n(e.target)}}(e.code),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=w(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(_)),e.source&&(t.source=e.source),t}function C(e){return null==e?e:e.map(P)}function T(e){switch(e){case r.CompletionItemTag.Deprecated:return i.CompletionItemTag.Deprecated}}function I(e){return{range:b(e.range),newText:e.newText}}function O(e){return e<=r.SymbolKind.TypeParameter?e+1:i.SymbolKind.Property}function R(e){return e}function D(e){return e.map(R)}function x(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:u,asVersionedTextDocumentIdentifier:d,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e)){return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]}}if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:u(e)}},asSaveTextDocumentParams:function(e,t=!1){let n={textDocument:d(e)};return t&&(n.text=e.getText()),n},asWillSaveTextDocumentParams:function(e){return{textDocument:u(e.document),reason:h(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:u(e),position:v(t)}},asCompletionParams:function(e,t,n){return{textDocument:u(e),position:v(t),context:{triggerKind:p(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asSignatureHelpParams:function(e,t,n){return{textDocument:u(e),position:v(t),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:f(n.triggerKind),activeSignatureHelp:(r=n.activeSignatureHelp,void 0===r?r:{signatures:(i=r.signatures,i.map(m)),activeSignature:r.activeSignature,activeParameter:r.activeParameter})}};var r,i},asWorkerPosition:v,asRange:b,asPosition:y,asPositions:function(e){let t=[];for(let n of e)t.push(y(n));return t},asLocation:S,asDiagnosticSeverity:E,asDiagnosticTag:w,asDiagnostic:P,asDiagnostics:C,asCompletionItem:function(e){let t={label:e.label},n=e instanceof s.default?e:void 0;var a,c;e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return"Unsupported Markup content received. Kind is: "+e}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n=i.InsertTextFormat.PlainText,o=void 0,s=void 0;t.textEdit?(o=t.textEdit.newText,s=t.textEdit.range):t.insertText instanceof r.SnippetString?(n=i.InsertTextFormat.Snippet,o=t.insertText.value):o=t.insertText;t.range&&(s=t.range);e.insertTextFormat=n,t.fromEdit&&void 0!==o&&void 0!==s?e.textEdit=function(e,t){return l.is(t)?i.InsertReplaceEdit.create(e,b(t.inserting),b(t.replacing)):{newText:e,range:b(t)}}(o,s):e.insertText=o}(t,e),o.number(e.kind)&&(t.kind=(a=e.kind,void 0!==(c=n&&n.originalItemKind)?c:a+1)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=function(e){if(null==e)return e;return e.map(I)}(e.additionalTextEdits)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=x(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect);const u=function(e){if(void 0===e)return e;const t=[];for(let n of e){const e=T(n);void 0!==e&&t.push(e)}return t}(e.tags);if(n&&(void 0!==n.data&&(t.data=n.data),!0===n.deprecated||!1===n.deprecated)){if(!0===n.deprecated&&void 0!==u&&u.length>0){const e=u.indexOf(r.CompletionItemTag.Deprecated);-1!==e&&u.splice(e,1)}t.deprecated=n.deprecated}return void 0!==u&&u.length>0&&(t.tags=u),t},asTextEdit:I,asSymbolKind:O,asSymbolTag:R,asSymbolTags:D,asReferenceParams:function(e,t,n){return{textDocument:u(e),position:v(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){if(null==e)return e;let t;return e.only&&o.string(e.only.value)&&(t=[e.only.value]),i.CodeActionContext.create(C(e.diagnostics),t)},asCommand:x,asCodeLens:function(e){let t=i.CodeLens.create(b(e.range));return e.command&&(t.command=x(e.command)),e instanceof a.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:u(e)}},asCodeLensParams:function(e){return{textDocument:u(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(b(e.range));e.target&&(t.target=n(e.target)),void 0!==e.tooltip&&(t.tooltip=e.tooltip);let r=e instanceof c.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:u(e)}},asCallHierarchyItem:function(e){const t={name:e.name,kind:O(e.kind),uri:n(e.uri),range:b(e.range),selectionRange:b(e.selectionRange)};return void 0!==e.detail&&e.detail.length>0&&(t.detail=e.detail),void 0!==e.tags&&(t.tags=D(e.tags)),t}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(113),s=n(201),a=n(333),c=n(334);var l;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(l||(l={})),t.createConverter=function(e){const t=e||(e=>r.Uri.parse(e));function n(e){return t(e)}function u(e){return e.map(d)}function d(e){let t=new r.Diagnostic(g(e.range),e.message,v(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),i.DiagnosticCode.is(e.code)&&(t.code={value:e.code.value,target:n(e.code.target)}),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=e.relatedInformation.map(h)),Array.isArray(e.tags)&&(t.tags=function(e){if(!e)return;let t=[];for(let n of e){let e=p(n);void 0!==e&&t.push(e)}return t.length>0?t:void 0}(e.tags)),t}function h(e){return new r.DiagnosticRelatedInformation(O(e.location),e.message)}function p(e){switch(e){case i.DiagnosticTag.Unnecessary:return r.DiagnosticTag.Unnecessary;case i.DiagnosticTag.Deprecated:return r.DiagnosticTag.Deprecated;default:return}}function f(e){if(e)return new r.Position(e.line,e.character)}function g(e){if(e)return new r.Range(f(e.start),f(e.end))}function m(e){return e.map(e=>g(e))}function v(e){if(null==e)return r.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function y(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return"Unsupported Markup content received. Kind is: "+e.kind}}function b(e){switch(e){case i.CompletionItemTag.Deprecated:return r.CompletionItemTag.Deprecated}}function S(e){let t=function(e){if(null==e)return[];const t=[];for(let n of e){const e=b(n);void 0!==e&&t.push(e)}return t}(e.tags),n=new s.default(e.label);e.detail&&(n.detail=e.detail),e.documentation&&(n.documentation=y(e.documentation),n.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(n.filterText=e.filterText);let a=function(e){return e.textEdit?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.textEdit.newText),range:E(e.textEdit),fromEdit:!0}:{text:e.textEdit.newText,range:E(e.textEdit),fromEdit:!0}:e.insertText?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(a&&(n.insertText=a.text,n.range=a.range,n.fromEdit=a.fromEdit),o.number(e.kind)){let[t,o]=(c=e.kind,i.CompletionItemKind.Text<=c&&c<=i.CompletionItemKind.TypeParameter?[c-1,void 0]:[r.CompletionItemKind.Text,c]);n.kind=t,o&&(n.originalItemKind=o)}var c;return e.sortText&&(n.sortText=e.sortText),e.additionalTextEdits&&(n.additionalTextEdits=_(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(n.commitCharacters=e.commitCharacters.slice()),e.command&&(n.command=U(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(n.deprecated=e.deprecated,!0===e.deprecated&&t.push(r.CompletionItemTag.Deprecated)),!0!==e.preselect&&!1!==e.preselect||(n.preselect=e.preselect),void 0!==e.data&&(n.data=e.data),t.length>0&&(n.tags=t),n}function E(e){return i.InsertReplaceEdit.is(e)?{inserting:g(e.insert),replacing:g(e.replace)}:g(e.range)}function w(e){if(e)return new r.TextEdit(g(e.range),e.newText)}function _(e){if(e)return e.map(w)}function P(e){return e.map(C)}function C(e){let t=new r.SignatureInformation(e.label);return void 0!==e.documentation&&(t.documentation=y(e.documentation)),void 0!==e.parameters&&(t.parameters=T(e.parameters)),void 0!==e.activeParameter&&(t.activeParameter=e.activeParameter),t}function T(e){return e.map(I)}function I(e){let t=new r.ParameterInformation(e.label);return e.documentation&&(t.documentation=y(e.documentation)),t}function O(e){if(e)return new r.Location(t(e.uri),g(e.range))}function R(e){if(!e)return;let n={targetUri:t(e.targetUri),targetRange:g(e.targetRange),originSelectionRange:g(e.originSelectionRange),targetSelectionRange:g(e.targetSelectionRange)};if(!n.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return n}function D(e){if(e){if(o.array(e)){if(0===e.length)return[];if(i.LocationLink.is(e[0])){return e.map(e=>R(e))}return e.map(e=>O(e))}return i.LocationLink.is(e)?[R(e)]:O(e)}}function x(e){let t=new r.DocumentHighlight(g(e.range));return o.number(e.kind)&&(t.kind=k(e.kind)),t}function k(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}function A(e){return e<=i.SymbolKind.TypeParameter?e-1:r.SymbolKind.Property}function N(e){switch(e){case i.SymbolTag.Deprecated:return r.SymbolTag.Deprecated;default:return}}function j(e){if(null==e)return;const t=[];for(const n of e){const e=N(n);void 0!==e&&t.push(e)}return 0===t.length?void 0:t}function F(e,n){let i=new r.SymbolInformation(e.name,A(e.kind),g(e.location.range),e.location.uri?t(e.location.uri):n);return L(i,e),e.containerName&&(i.containerName=e.containerName),i}function M(e){let t=new r.DocumentSymbol(e.name,e.detail||"",A(e.kind),g(e.range),g(e.selectionRange));if(L(t,e),void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(M(t));t.children=n}return t}function L(e,t){e.tags=j(t.tags),t.deprecated&&(e.tags?e.tags.includes(r.SymbolTag.Deprecated)||(e.tags=e.tags.concat(r.SymbolTag.Deprecated)):e.tags=[r.SymbolTag.Deprecated])}function U(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const W=new Map;function B(e){if(null==e)return;let t=W.get(e);if(t)return t;let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}function V(e){if(!e)return;let t=new a.default(g(e.range));return e.command&&(t.command=U(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function H(e){if(!e)return;let n=new r.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach(e=>{if(i.CreateFile.is(e))n.createFile(t(e.uri),e.options);else if(i.RenameFile.is(e))n.renameFile(t(e.oldUri),t(e.newUri),e.options);else if(i.DeleteFile.is(e))n.deleteFile(t(e.uri),e.options);else{if(!i.TextDocumentEdit.is(e))throw new Error("Unknown workspace edit change received:\n"+JSON.stringify(e,void 0,4));n.set(t(e.textDocument.uri),_(e.edits))}}):e.changes&&Object.keys(e.changes).forEach(r=>{n.set(t(r),_(e.changes[r]))}),n}function q(e){let t=g(e.range),r=e.target?n(e.target):void 0,i=new c.default(t,r);return void 0!==e.tooltip&&(i.tooltip=e.tooltip),void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function G(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function $(e){return new r.ColorInformation(g(e.range),G(e.color))}function K(e){let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=_(e.additionalTextEdits),e.textEdit&&(t.textEdit=w(e.textEdit)),t}function z(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}function Y(e){return new r.FoldingRange(e.startLine,e.endLine,z(e.kind))}function J(e){return new r.SelectionRange(g(e.range),e.parent?J(e.parent):void 0)}function X(e){if(null===e)return;let t=new r.CallHierarchyItem(A(e.kind),e.name,e.detail||"",n(e.uri),g(e.range),g(e.selectionRange));return void 0!==e.tags&&(t.tags=j(e.tags)),t}function Q(e){return new r.CallHierarchyIncomingCall(X(e.from),m(e.fromRanges))}function Z(e){return new r.CallHierarchyOutgoingCall(X(e.to),m(e.fromRanges))}function ee(e){return new r.SemanticTokensEdit(e.start,e.deleteCount,void 0!==e.data?new Uint32Array(e.data):void 0)}return W.set(i.CodeActionKind.Empty,r.CodeActionKind.Empty),W.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix),W.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor),W.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract),W.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline),W.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite),W.set(i.CodeActionKind.Source,r.CodeActionKind.Source),W.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports),{asUri:n,asDiagnostics:u,asDiagnostic:d,asRange:g,asRanges:m,asPosition:f,asDiagnosticSeverity:v,asDiagnosticTag:p,asHover:function(e){if(e)return new r.Hover(function(e){if(o.string(e))return new r.MarkdownString(e);if(l.is(e)){return(new r.MarkdownString).appendCodeblock(e.value,e.language)}if(Array.isArray(e)){let t=[];for(let n of e){let e=new r.MarkdownString;l.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return t=new r.MarkdownString,t.appendText(e.value),t;default:return t=new r.MarkdownString,t.appendText("Unsupported Markup content received. Kind is: "+e.kind),t}}}(e.contents),g(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e)){return e.map(S)}let t=e;return new r.CompletionList(t.items.map(S),t.isIncomplete)},asCompletionItem:S,asTextEdit:w,asTextEdits:_,asSignatureHelp:function(e){if(!e)return;let t=new r.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=P(e.signatures)),t},asSignatureInformations:P,asSignatureInformation:C,asParameterInformations:T,asParameterInformation:I,asDeclarationResult:function(e){if(e)return D(e)},asDefinitionResult:function(e){if(e)return D(e)},asLocation:O,asReferences:function(e){if(e)return e.map(e=>O(e))},asDocumentHighlights:function(e){if(e)return e.map(x)},asDocumentHighlight:x,asDocumentHighlightKind:k,asSymbolKind:A,asSymbolTag:N,asSymbolTags:j,asSymbolInformations:function(e,t){if(e)return e.map(e=>F(e,t))},asSymbolInformation:F,asDocumentSymbols:function(e){if(null!=e)return e.map(M)},asDocumentSymbol:M,asCommand:U,asCommands:function(e){if(e)return e.map(U)},asCodeAction:function(e){if(null==e)return;let t=new r.CodeAction(e.title);return void 0!==e.kind&&(t.kind=B(e.kind)),e.diagnostics&&(t.diagnostics=u(e.diagnostics)),e.edit&&(t.edit=H(e.edit)),e.command&&(t.command=U(e.command)),void 0!==e.isPreferred&&(t.isPreferred=e.isPreferred),t},asCodeActionKind:B,asCodeActionKinds:function(e){if(null!=e)return e.map(e=>B(e))},asCodeLens:V,asCodeLenses:function(e){if(e)return e.map(e=>V(e))},asWorkspaceEdit:H,asDocumentLink:q,asDocumentLinks:function(e){if(e)return e.map(q)},asFoldingRangeKind:z,asFoldingRange:Y,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(Y)},asColor:G,asColorInformation:$,asColorInformations:function(e){if(Array.isArray(e))return e.map($)},asColorPresentation:K,asColorPresentations:function(e){if(Array.isArray(e))return e.map(K)},asSelectionRange:J,asSelectionRanges:function(e){if(!Array.isArray(e))return[];let t=[];for(let n of e)t.push(J(n));return t},asSemanticTokensLegend:function(e){return e},asSemanticTokens:function(e){if(null!=e)return new r.SemanticTokens(new Uint32Array(e.data),e.resultId)},asSemanticTokensEdit:ee,asSemanticTokensEdits:function(e){if(null!=e)return new r.SemanticTokensEdits(e.edits.map(ee),e.resultId)},asCallHierarchyItem:X,asCallHierarchyItems:function(e){if(null!==e)return e.map(e=>X(e))},asCallHierarchyIncomingCall:Q,asCallHierarchyIncomingCalls:function(e){if(null!==e)return e.map(e=>Q(e))},asCallHierarchyOutgoingCall:Z,asCallHierarchyOutgoingCalls:function(e){if(null!==e)return e.map(e=>Z(e))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35);t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e})),(t>=0||void 0===this.timeout)&&(this.timeout=r.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(r.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.DocumentColorRequest.type)}fillClientCapabilities(e){s(s(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.colorProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideColorPresentations:(e,t,n)=>{const r=this._client,o=(e,t,n)=>{const o={color:e,textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:r.code2ProtocolConverter.asRange(t.range)};return r.sendRequest(i.ColorPresentationRequest.type,o,n).then(this.asColorPresentations.bind(this),e=>r.handleFailedRequest(i.ColorPresentationRequest.type,e,null))},s=r.clientOptions.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,n,o):o(e,t,n)},provideDocumentColors:(e,t)=>{const n=this._client,r=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(i.DocumentColorRequest.type,r,t).then(this.asColorInformations.bind(this),e=>n.handleFailedRequest(i.ColorPresentationRequest.type,e,null))},o=n.clientOptions.middleware;return o.provideDocumentColors?o.provideDocumentColors(e,t,r):r(e,t)}};return[r.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(e=>new r.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(e=>{let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t}):[]}}t.ColorProviderFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.ImplementationRequest.type)}fillClientCapabilities(e){let t=s(s(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.implementationProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideImplementation:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.ImplementationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDefinitionResult,e=>r.handleFailedRequest(i.ImplementationRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideImplementation?s.provideImplementation(e,t,n,o):o(e,t,n)}};return[r.languages.registerImplementationProvider(e.documentSelector,t),t]}}t.ImplementationFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.TypeDefinitionRequest.type)}fillClientCapabilities(e){s(s(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=s(s(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.typeDefinitionProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideTypeDefinition:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.TypeDefinitionRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDefinitionResult,e=>r.handleFailedRequest(i.TypeDefinitionRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,n,o):o(e,t,n)}};return[r.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}}t.TypeDefinitionFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(335),i=n(2),o=n(35);function s(e,t){if(void 0!==e)return e[t]}function a(e,t){return e.filter(e=>t.indexOf(e)<0)}t.arrayDiff=a;t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=i.workspace.workspaceFolders;this.initializeWithFolders(t),e.workspaceFolders=void 0===t?null:t.map(e=>this.asProtocol(e))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,e=>{let n=()=>{let e=i.workspace.workspaceFolders;return void 0===e?null:e.map(e=>this.asProtocol(e))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()});let n,a=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof a?n=a:!0===a&&(n=r.generateUuid()),n&&this.register(this.messages,{id:n,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){const t=a(this._initialFolders,e),n=a(e,this._initialFolders);(n.length>0||t.length>0)&&this.doSendEvent(n,t)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,t){let n={event:{added:e.map(e=>this.asProtocol(e)),removed:t.map(e=>this.asProtocol(e))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,n)}register(e,t){let n=t.id,r=this._client,o=i.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{this.doSendEvent(e.added,e.removed)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(n,o),this.sendInitialEvent(i.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=s(s(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.foldingRangeProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideFoldingRanges:(e,t,n)=>{const r=this._client,o=(e,t,n)=>{const o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e)};return r.sendRequest(i.FoldingRangeRequest.type,o,n).then(a.asFoldingRanges,e=>r.handleFailedRequest(i.FoldingRangeRequest.type,e,null))},s=r.clientOptions.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,n,o):o(e,0,n)}};return[r.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}static asFoldingRangeKind(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(e=>new r.FoldingRange(e.startLine,e.endLine,a.asFoldingRangeKind(e.kind))):[]}}t.FoldingRangeFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.DeclarationRequest.type)}fillClientCapabilities(e){const t=s(s(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.declarationProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideDeclaration:(e,t,n)=>{const r=this._client,o=(e,t,n)=>r.sendRequest(i.DeclarationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then(r.protocol2CodeConverter.asDeclarationResult,e=>r.handleFailedRequest(i.DeclarationRequest.type,e,null)),s=r.clientOptions.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,n,o):o(e,t,n)}};return[r.languages.registerDeclarationProvider(e.documentSelector,t),t]}}t.DeclarationFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]=Object.create(null)),e[t]}class a extends o.TextDocumentFeature{constructor(e){super(e,i.SelectionRangeRequest.type)}fillClientCapabilities(e){s(s(e,"textDocument"),"selectionRange").dynamicRegistration=!0}initialize(e,t){let[n,r]=this.getRegistration(t,e.selectionRangeProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t={provideSelectionRanges:(e,t,n)=>{const r=this._client,o=(e,t,n)=>{const o={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:r.code2ProtocolConverter.asPositions(t)};return r.sendRequest(i.SelectionRangeRequest.type,o,n).then(e=>r.protocol2CodeConverter.asSelectionRanges(e),e=>r.handleFailedRequest(i.SelectionRangeRequest.type,e,null))},s=r.clientOptions.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,n,o):o(e,t,n)}};return[r.languages.registerSelectionRangeProvider(e.documentSelector,t),t]}}t.SelectionRangeFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(35),i=n(336);t.ProgressFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){var t,n;(t=e,n="window",void 0===t[n]&&(t[n]=Object.create(null)),t[n]).workDoneProgress=!0}initialize(){this._client.onRequest(r.WorkDoneProgressCreateRequest.type,e=>{new i.ProgressPart(this._client,e.token)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(35),o=n(58);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,n){const r=this.client,o=this.middleware,s=(e,t,n)=>{const o=r.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return r.sendRequest(i.CallHierarchyPrepareRequest.type,o,n).then(e=>r.protocol2CodeConverter.asCallHierarchyItems(e),e=>r.handleFailedRequest(i.CallHierarchyPrepareRequest.type,e,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,n,s):s(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client,r=this.middleware,o=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(i.CallHierarchyIncomingCallsRequest.type,r,t).then(e=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(e),e=>n.handleFailedRequest(i.CallHierarchyIncomingCallsRequest.type,e,null))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client,r=this.middleware,o=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(i.CallHierarchyOutgoingCallsRequest.type,r,t).then(e=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e),e=>n.handleFailedRequest(i.CallHierarchyOutgoingCallsRequest.type,e,null))};return r.provideCallHierarchyOutgingCalls?r.provideCallHierarchyOutgingCalls(e,t,o):o(e,t)}}class c extends o.TextDocumentFeature{constructor(e){super(e,i.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){s(s(e,"textDocument"),"callHierarchy").dynamicRegistration=!0}initialize(e,t){const[n,r]=this.getRegistration(t,e.callHierarchyProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client,n=new a(t);return[r.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}}t.CallHierarchyFeature=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(58),o=n(35);function s(e,t){return void 0===e[t]&&(e[t]={}),e[t]}class a extends i.TextDocumentFeature{constructor(e){super(e,o.SemanticTokensRequest.type)}fillClientCapabilities(e){const t=s(s(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[o.SemanticTokenTypes.namespace,o.SemanticTokenTypes.type,o.SemanticTokenTypes.class,o.SemanticTokenTypes.enum,o.SemanticTokenTypes.interface,o.SemanticTokenTypes.struct,o.SemanticTokenTypes.typeParameter,o.SemanticTokenTypes.parameter,o.SemanticTokenTypes.variable,o.SemanticTokenTypes.property,o.SemanticTokenTypes.enumMember,o.SemanticTokenTypes.event,o.SemanticTokenTypes.function,o.SemanticTokenTypes.member,o.SemanticTokenTypes.macro,o.SemanticTokenTypes.keyword,o.SemanticTokenTypes.modifier,o.SemanticTokenTypes.comment,o.SemanticTokenTypes.string,o.SemanticTokenTypes.number,o.SemanticTokenTypes.regexp,o.SemanticTokenTypes.operator],t.tokenModifiers=[o.SemanticTokenModifiers.declaration,o.SemanticTokenModifiers.definition,o.SemanticTokenModifiers.readonly,o.SemanticTokenModifiers.static,o.SemanticTokenModifiers.deprecated,o.SemanticTokenModifiers.abstract,o.SemanticTokenModifiers.async,o.SemanticTokenModifiers.modification,o.SemanticTokenModifiers.documentation,o.SemanticTokenModifiers.defaultLibrary],t.formats=[o.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}}}initialize(e,t){this._client.onNotification(o.SemanticTokensRefreshNotification.type,()=>{for(const e of this.getAllProviders())e.onDidChangeSemanticTokensEmitter.fire()});const[n,r]=this.getRegistration(t,e.semanticTokensProvider);n&&r&&this.register(this.messages,{id:n,registerOptions:r})}registerLanguageProvider(e){const t=void 0!==e.full&&"boolean"!=typeof e.full&&!0===e.full.delta,n=new r.EventEmitter,i={onDidChangeSemanticTokens:n.event,provideDocumentSemanticTokens:(e,t)=>{const n=this._client,r=n.clientOptions.middleware,i=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(o.SemanticTokensRequest.type,r,t).then(e=>n.protocol2CodeConverter.asSemanticTokens(e),e=>n.handleFailedRequest(o.SemanticTokensRequest.type,e,null))};return r.provideDocumentSemanticTokens?r.provideDocumentSemanticTokens(e,t,i):i(e,t)},provideDocumentSemanticTokensEdits:t?(e,t,n)=>{const r=this._client,i=r.clientOptions.middleware,s=(e,t,n)=>{const i={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return r.sendRequest(o.SemanticTokensDeltaRequest.type,i,n).then(e=>o.SemanticTokens.is(e)?r.protocol2CodeConverter.asSemanticTokens(e):r.protocol2CodeConverter.asSemanticTokensEdits(e),e=>r.handleFailedRequest(o.SemanticTokensDeltaRequest.type,e,null))};return i.provideDocumentSemanticTokensEdits?i.provideDocumentSemanticTokensEdits(e,t,n,s):s(e,t,n)}:void 0},s=!0===e.range?{provideDocumentRangeSemanticTokens:(e,t,n)=>{const r=this._client,i=r.clientOptions.middleware,s=(e,t,n)=>{const i={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),range:r.code2ProtocolConverter.asRange(t)};return r.sendRequest(o.SemanticTokensRangeRequest.type,i,n).then(e=>r.protocol2CodeConverter.asSemanticTokens(e),e=>r.handleFailedRequest(o.SemanticTokensRangeRequest.type,e,null))};return i.provideDocumentRangeSemanticTokens?i.provideDocumentRangeSemanticTokens(e,t,n,s):s(e,t,n)}}:void 0,a=[],c=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return a.push(r.languages.registerDocumentSemanticTokensProvider(e.documentSelector,i,c)),void 0!==s&&a.push(r.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,s,c)),[new r.Disposable(()=>a.forEach(e=>e.dispose())),{range:s,full:i,onDidChangeSemanticTokensEmitter:n}]}}t.SemanticTokensFeature=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(55),i=n(4),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),r.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=i.join(__dirname,"terminateProcess.sh");return!r.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(35)),r(n(58)),r(n(326))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageClientFactory=void 0;const o=n(0),s=n(4),a=n(10),c=n(12);let l=class{constructor(e){this.interpreterService=e}async createLanguageClient(e,t,r){const i=s.join(a.EXTENSION_ROOT_DIR,"pythonFiles","runJediLanguageServer.py"),o=await this.interpreterService.getActiveInterpreter(e),c={command:o?o.path:"python",args:[i]};return new(n(47).LanguageClient)(a.PYTHON_LANGUAGE,"Python Tools",c,r)}};l=r([o.injectable(),i(0,o.inject(c.IInterpreterService))],l),t.JediLanguageClientFactory=l},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerProxy=void 0,n(11);const s=n(0),a=n(47),c=n(24),l=n(5),u=n(1),d=n(15),h=n(23),p=n(14),f=n(141),g=n(7),m=n(9),v=n(19),y=n(338),b=n(202),S=n(16);let E=r=class{constructor(e,t,n,r,i){this.factory=e,this.testManager=t,this.configurationService=n,this.experiments=r,this.interpreterPathService=i,this.disposables=[],this.disposed=!1,this.startupCompleted=d.createDeferred()}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){for(this.languageClient&&(this.languageClient.stop().then(p.noop,e=>l.traceError("Stopping language client failed",e)),this.languageClient=void 0),this.cancellationStrategy&&(this.cancellationStrategy.dispose(),this.cancellationStrategy=void 0);this.disposables.length>0;){this.disposables.shift().dispose()}this.startupCompleted.completed&&(this.startupCompleted.reject(new Error("Disposed language server")),this.startupCompleted=d.createDeferred()),this.disposed=!0}async start(e,t,n){var r;if(this.languageClient)await this.startupCompleted.promise;else{if(this.lsVersion=null!==(r=n.middleware?n.middleware.serverVersion:void 0)&&void 0!==r?r:"0.19.3",this.cancellationStrategy=new y.FileBasedCancellationStrategy,n.connectionOptions={cancellationStrategy:this.cancellationStrategy},this.languageClient=await this.factory.createLanguageClient(e,t,n),this.disposables.push(this.languageClient.start()),await this.serverReady(),this.disposed)return;const i=new b.ProgressReporting(this.languageClient);this.disposables.push(i),this.experiments.inExperiment(c.DeprecatePythonPath.experiment)&&this.disposables.push(this.interpreterPathService.onDidChange(()=>{var e;null===(e=this.languageClient)||void 0===e||e.sendNotification(a.DidChangeConfigurationNotification.type,{settings:null})}));this.configurationService.getSettings(e).downloadLanguageServer&&this.languageClient.onTelemetry(e=>{var t;const n=e.EventName||m.EventName.LANGUAGE_SERVER_TELEMETRY,r={...e.Properties,method:null===(t=e.Properties.method)||void 0===t?void 0:t.replace(/\//g,".")};g.sendTelemetryEvent(n,e.Measurements,r)}),await this.registerTestServices()}}loadExtension(e){}async serverReady(){for(;this.languageClient&&!this.languageClient.initializeResult;)await d.sleep(100);this.languageClient&&await this.languageClient.onReady(),this.startupCompleted.resolve()}async registerTestServices(){if(!this.languageClient)throw new Error("languageClient not initialized");await this.testManager.activate(new f.LanguageServerSymbolProvider(this.languageClient))}};i([l.traceDecorators.verbose("Stopping language server")],E.prototype,"dispose",null),i([l.traceDecorators.error("Failed to start language server"),g.captureTelemetry(m.EventName.LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,r.versionTelemetryProps)],E.prototype,"start",null),i([g.captureTelemetry(m.EventName.LANGUAGE_SERVER_READY,void 0,!0,void 0,r.versionTelemetryProps)],E.prototype,"serverReady",null),i([h.swallowExceptions("Activating Unit Tests Manager for Jedi language server")],E.prototype,"registerTestServices",null),E=r=i([s.injectable(),o(0,s.inject(S.ILanguageClientFactory)),o(1,s.inject(v.ITestManagementService)),o(2,s.inject(u.IConfigurationService)),o(3,s.inject(u.IExperimentsManager)),o(4,s.inject(u.IInterpreterPathService))],E),t.JediLanguageServerProxy=E},function(e,t,n){var r=n(20),i=n(695),o=function(e){return function(t,n,r){return"function"==typeof n&&(r=n,n={}),i[e](t,n,r)}},s={darwin:o("ps"),sunos:o("ps"),freebsd:o("ps"),netbsd:o("proc"),win:o("win"),linux:o("proc"),aix:o("ps"),unsupported:function(e,t,n){(n="function"==typeof t?t:n)(new Error(r.platform()+" is not supported yet, please fire an issue (https://github.com/soyuka/pidusage)"))}},a=r.platform();a=a.match(/^win/)?"win":a,a=s[a]?a:"unsupported",t.stat=function(){s[a].apply(i,[].slice.call(arguments))},t.unmonitor=function(e){delete i.history[e]},t._history=i.history},function(e,t,n){var r=n(20),i=n(29),o=n(4),s=n(55).exec,a=n(55).spawn,c=n(696),l=n(22).format,u=r.platform(),d={history:{},cpu:null,proc:function(e,t,n){var o=this;null!==this.cpu?i.readFile("/proc/uptime","utf8",(function(i,s){return i?n(i,null):(void 0===s?(console.error("[pidusage] We couldn't find uptime from /proc/uptime"),o.cpu.uptime=r.uptime()):o.cpu.uptime=s.split(" ")[0],o.proc_calc(e,t,n))})):c.cpu((function(r,i){return r?n(r,null):(o.cpu=i,o.proc_calc(e,t,n))}))},proc_calc:function(e,t,n){e=parseInt(e,10);var r=this.history[e]?this.history[e]:{},s=this.cpu,a=this;i.readFile(o.join("/proc",""+e,"stat"),"utf8",(function(i,o){if(i)return n(i,null);var c=o.lastIndexOf(")");o=o.substr(c+2).split(" ");var l={utime:parseFloat(o[11]),stime:parseFloat(o[12]),cutime:parseFloat(o[13]),cstime:parseFloat(o[14]),start:parseFloat(o[19])/s.clockTick,rss:parseFloat(o[21])},u=t.childrens?l.cutime+l.cstime:0,d=l.stime-(r.stime||0)+l.utime-(r.utime||0)+u;d/=s.clockTick;var h=void 0!==r.uptime?s.uptime-r.uptime:l.start-s.uptime;h=0===(h=Math.abs(h))?1:h,a.history[e]=l,a.history[e].uptime=s.uptime;var p=d/h*100,f=l.rss*s.pagesize;return t.advanced?n(null,{cpu:p,memory:f,time:l.utime+l.stime,start:l.start}):n(null,{cpu:p,memory:f})}))},ps:function(e,t,n){e=parseInt(e,10);var i="ps -o pcpu,rss -p ";t.advanced?(i="ps -o pcpu,rss,time,start -p ","aix"===u&&(i="ps -o pcpu,rssize,time,start -p ")):"aix"===u&&(i="ps -o pcpu,rssize -p "),s(i+e,(function(e,i,o){if(e)return n(e,null);i=(i=i.split(r.EOL)[1]).replace(/^\s+/,"").replace(/\s\s+/g," ").split(" ");var s=parseFloat(i[0].replace(",",".")),a=1024*parseFloat(i[1]);return t.advanced?n(null,{cpu:s,memory:a,time:parseFloat(i[2]),start:parseFloat(i[3])}):n(null,{cpu:s,memory:a})}))},win:function(e,t,n){e=parseInt(e,10);var i=this.history[e]?this.history[e]:{},o="PROCESS "+e+" get workingsetsize,usermodetime,kernelmodetime",s=a("wmic",o.split(" "),{detached:!0}),c="",u="",d=this,h=Math.floor(r.uptime());s.stdout.on("data",(function(e){c+=e.toString()})),s.stderr.on("data",(function(e){u+=e.toString()})),s.on("error",(function(e){console.error('[pidusage] Command "wmic '+o+'" failed with error %s',e)})),s.on("close",(function(s){if(c=c.trim(),u=u.trim(),!c||0!==s){var a=l("%s Wmic errored, please open an issue on https://github.com/soyuka/pidusage with this message.%s",(new Date).toString(),r.EOL);return a+=l('Command was "wmic %s" %s System informations: %s - release: %s %s - type %s %s',o,r.EOL,r.EOL,r.release(),r.EOL,r.type(),r.EOL),u=a+(u?l("Wmic reported the following error: %s.",u):"Wmic reported no errors (stderr empty)."),u=l("%s%s%sWmic exited with code %d.",r.EOL,u,r.EOL,s),u=l("%s%sStdout was %s",u,r.EOL,c||"empty"),n(new Error(u,null))}c=c.split(r.EOL)[1].replace(/\s\s+/g," ").split(" ");var p={kernelmodetime:parseFloat(c[0]),usermodetime:parseFloat(c[1])},f=parseFloat(c[2]),g=p.kernelmodetime-(i.kernelmodetime||0)+p.usermodetime-(i.usermodetime||0);g/=1e7;var m=void 0!==i.uptime?h-i.uptime:0,v=0;return m>0&&(v=g/m*100),d.history[e]=p,d.history[e].uptime=h,t.advanced?n(null,{cpu:v,memory:f,time:p.usermodetime+p.kernelmodetime,start:m}):n(null,{cpu:v,memory:f})})),s.stdin.end()}};e.exports=d},function(e,t,n){var r=n(20),i=n(55).exec;e.exports={getconf:function(e,t,n){"function"==typeof t&&(n=t,t={default:""}),i("getconf "+e,(function(r,i,o){return null!==r?(console.error("Error while getting "+e,r),n(null,t.default)):(i=parseInt(i),isNaN(i)?n(null,t.default):n(null,i))}))},cpu:function(e){var t=this;t.getconf("CLK_TCK",{default:100},(function(n,i){if(n)return e(n);t.getconf("PAGESIZE",{default:4096},(function(t,n){if(t)return e(t);e(null,{clockTick:i,uptime:r.uptime(),pagesize:n})}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.run_adapter=void 0;const r=n(4),i=n(41),o=r.join(i._SCRIPTS_DIR,"testing_tools");t.run_adapter=function(e){return[[r.join(o,"run_adapter.py"),...e],function(e){return JSON.parse(e)}]}},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerManager=void 0;const s=n(109),a=n(4);n(11);const c=n(0),l=n(3),u=n(5),d=n(23),h=n(61),p=n(8),f=n(7),g=n(9),m=n(139),v=n(203),y=n(16);let b=r=class{constructor(e,t,n){this.serviceContainer=e,this.analysisOptions=t,this.disposables=[],this.connected=!1,this.disposables.push(n.registerCommand(m.Commands.RestartLS,()=>{this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.languageProxy&&this.languageProxy.dispose(),this.disposables.forEach(e=>e.dispose())}get languageProxy(){return this.languageServerProxy}async start(e,t){if(this.languageProxy)throw new Error("Language server already started");this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);const n=await s.readFile(a.join(h.EXTENSION_ROOT_DIR,"requirements.txt"),"utf-8"),r=/jedi-language-server==([0-9\.]*)/.exec(n);r&&r.length>1?this.lsVersion=r[1]:this.lsVersion="0.19.3",await this.analysisOptions.initialize(e,t),await this.startLanguageServer()}connect(){var e;this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect()}disconnect(){var e;this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect()}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){this.languageProxy&&this.languageProxy.dispose(),await this.startLanguageServer()}async startLanguageServer(){this.languageServerProxy=this.serviceContainer.get(y.ILanguageServerProxy);const e=await this.analysisOptions.getAnalysisOptions();e.middleware=this.middleware=new v.LanguageClientMiddleware(this.serviceContainer,y.LanguageServerType.Jedi,()=>{var e;return null===(e=this.languageServerProxy)||void 0===e?void 0:e.languageClient},this.lsVersion),this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}};i([u.traceDecorators.error("Failed to start language server")],b.prototype,"start",null),i([d.debounceSync(1e3)],b.prototype,"restartLanguageServerDebounced",null),i([u.traceDecorators.error("Failed to restart language server"),u.traceDecorators.verbose("Restarting language server")],b.prototype,"restartLanguageServer",null),i([f.captureTelemetry(g.EventName.LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,r.versionTelemetryProps),u.traceDecorators.verbose("Starting language server")],b.prototype,"startLanguageServer",null),b=r=i([c.injectable(),o(0,c.inject(p.IServiceContainer)),o(1,c.inject(y.ILanguageServerAnalysisOptions)),o(1,c.named(y.LanguageServerType.Jedi)),o(2,c.inject(l.ICommandManager))],b),t.JediLanguageServerManager=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookMiddlewareAddon=void 0;const r=n(47),i=n(5),o=n(15),s=n(14),a=n(700);t.NotebookMiddlewareAddon=class{constructor(e,t,n,r,i){this.getClient=t,this.converter=new a.NotebookConverter(e,n,r,i)}dispose(){this.converter.dispose()}didChange(e,t){const n=this.getClient();if(s.isNotebookCell(e.document.uri)&&n){const t=this.converter.toOutgoingChangeEvent(e),i=n.code2ProtocolConverter.asChangeTextDocumentParams(t);n.sendNotification(r.DidChangeTextDocumentNotification.type,i)}else t(e)}didOpen(e,t){if(s.isNotebookCell(e.uri)){if(!this.converter.hasFiredOpen(e)){this.converter.firedOpen(e);return t(this.converter.toOutgoingDocument(e))}}else t(e)}didClose(e,t){if(s.isNotebookCell(e.uri)){if(this.converter.hasCell(e)&&!this.converter.hasFiredClose(e)){this.converter.firedClose(e);return t(this.converter.toOutgoingDocument(e))}}else t(e)}didSave(e,t){return t(e)}willSave(e,t){return t(e)}willSaveWaitUntil(e,t){return t(e)}provideCompletionItem(e,t,n,r,i){if(s.isNotebookCell(e.uri)){const s=i(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n,r);return o.isThenable(s)?s.then(this.converter.toIncomingCompletions.bind(this.converter,e)):this.converter.toIncomingCompletions(e,s)}return i(e,t,n,r)}provideHover(e,t,n,r){if(s.isNotebookCell(e.uri)){const i=r(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n);return o.isThenable(i)?i.then(this.converter.toIncomingHover.bind(this.converter,e)):this.converter.toIncomingHover(e,i)}return r(e,t,n)}resolveCompletionItem(e,t,n){return n(e,t)}provideSignatureHelp(e,t,n,r,i){if(s.isNotebookCell(e.uri)){return i(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n,r)}return i(e,t,n,r)}provideDefinition(e,t,n,r){if(s.isNotebookCell(e.uri)){const i=r(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n);return o.isThenable(i)?i.then(this.converter.toIncomingLocations.bind(this.converter,e)):this.converter.toIncomingLocations(e,i)}return r(e,t,n)}provideReferences(e,t,n,r,i){if(s.isNotebookCell(e.uri)){const s=i(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n,r);return o.isThenable(s)?s.then(this.converter.toIncomingLocations.bind(this.converter,e)):this.converter.toIncomingLocations(e,s)}return i(e,t,n,r)}provideDocumentHighlights(e,t,n,r){if(s.isNotebookCell(e.uri)){const i=r(this.converter.toOutgoingDocument(e),this.converter.toOutgoingPosition(e,t),n);return o.isThenable(i)?i.then(this.converter.toIncomingHighlight.bind(this.converter,e)):this.converter.toIncomingHighlight(e,i)}return r(e,t,n)}provideDocumentSymbols(e,t,n){if(s.isNotebookCell(e.uri)){const r=n(this.converter.toOutgoingDocument(e),t);return o.isThenable(r)?r.then(this.converter.toIncomingSymbols.bind(this.converter,e)):this.converter.toIncomingSymbols(e,r)}return n(e,t)}provideWorkspaceSymbols(e,t,n){const r=n(e,t);return o.isThenable(r)?r.then(this.converter.toIncomingWorkspaceSymbols.bind(this.converter)):this.converter.toIncomingWorkspaceSymbols(r)}provideCodeActions(e,t,n,r,o){if(!s.isNotebookCell(e.uri))return o(e,t,n,r);i.traceInfo("provideCodeActions not currently supported for notebooks")}provideCodeLenses(e,t,n){if(!s.isNotebookCell(e.uri))return n(e,t);i.traceInfo("provideCodeLenses not currently supported for notebooks")}resolveCodeLens(e,t,n){return n(e,t)}provideDocumentFormattingEdits(e,t,n,r){if(!s.isNotebookCell(e.uri))return r(e,t,n);i.traceInfo("provideDocumentFormattingEdits not currently supported for notebooks")}provideDocumentRangeFormattingEdits(e,t,n,r,o){if(!s.isNotebookCell(e.uri))return o(e,t,n,r);i.traceInfo("provideDocumentRangeFormattingEdits not currently supported for notebooks")}provideOnTypeFormattingEdits(e,t,n,r,o,a){if(!s.isNotebookCell(e.uri))return a(e,t,n,r,o);i.traceInfo("provideOnTypeFormattingEdits not currently supported for notebooks")}provideRenameEdits(e,t,n,r,o){if(!s.isNotebookCell(e.uri))return o(e,t,n,r);i.traceInfo("provideRenameEdits not currently supported for notebooks")}prepareRename(e,t,n,r){if(!s.isNotebookCell(e.uri))return r(e,t,n);i.traceInfo("prepareRename not currently supported for notebooks")}provideDocumentLinks(e,t,n){if(!s.isNotebookCell(e.uri))return n(e,t);i.traceInfo("provideDocumentLinks not currently supported for notebooks")}resolveDocumentLink(e,t,n){return n(e,t)}provideDeclaration(e,t,n,r){if(!s.isNotebookCell(e.uri))return r(e,t,n);i.traceInfo("provideDeclaration not currently supported for notebooks")}handleDiagnostics(e,t,n){const r=this.converter.toIncomingDiagnosticsMap(e,t);[...r.keys()].forEach(e=>n(e,r.get(e)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookConverter=void 0;const r=n(20),i=n(2),o=n(701);t.NotebookConverter=class{constructor(e,t,n,r){this.api=e,this.fs=t,this.cellSelector=n,this.notebookFilter=r,this.activeDocuments=new Map,this.activeDocumentsOutgoingMap=new Map,this.disposables=[],this.disposables.push(e.onDidOpenNotebookDocument(this.onDidOpenNotebook.bind(this))),this.disposables.push(e.onDidCloseNotebookDocument(this.onDidCloseNotebook.bind(this))),e.notebookDocuments.forEach(this.onDidOpenNotebook.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}hasCell(e){const t=this.getConcatDocument(e);return t&&t.contains(e.uri)}hasFiredOpen(e){const t=this.getTextDocumentWrapper(e);if(t)return t.firedOpen}firedOpen(e){const t=this.getTextDocumentWrapper(e);t&&(t.firedOpen=!0)}hasFiredClose(e){const t=this.getTextDocumentWrapper(e);if(t)return t.firedClose}firedClose(e){const t=this.getTextDocumentWrapper(e);t&&(t.firedClose=!0,t.firedOpen=!1)}toIncomingDiagnosticsMap(e,t){const n=this.getWrapperFromOutgoingUri(e),r=new Map;return n?(n.notebook.cells.forEach(e=>{r.set(e.uri,[])}),t.forEach(e=>{const t=n.concatDocument.locationAt(e.range);let i=r.get(t.uri);i||(i=[],r.set(t.uri,i)),i.push(this.toIncomingDiagnostic(t.uri,e))})):r.set(e,t),r}toIncomingWorkspaceSymbols(e){return Array.isArray(e)?e.map(this.toIncomingWorkspaceSymbol.bind(this)):e}toIncomingWorkspaceEdit(e){if(e){const t=new Map;e.entries().forEach(([e,n])=>{n.forEach(n=>{const r=this.toIncomingLocation(e,n.range);let i=t.get(r.uri);i||(i=[],t.set(r.uri,i)),i.push({...n,range:r.range})})});const n=new i.WorkspaceEdit;return t.forEach((e,t)=>n.set(t,e)),n}return e}toOutgoingDocument(e){const t=this.getTextDocumentWrapper(e);return t||e}toOutgoingUri(e){const t=e instanceof i.Uri?e:e.uri,n=this.getTextDocumentWrapper(e);return n?n.uri:t}toOutgoingChangeEvent(e){return{document:this.toOutgoingDocument(e.document),contentChanges:e.contentChanges.map(this.toOutgoingContentChangeEvent.bind(this,e.document))}}toOutgoingPosition(e,t){const n=this.getConcatDocument(e);return n?n.positionAt(new i.Location(e.uri,t)):t}toOutgoingRange(e,t){const n=this.getConcatDocument(e);if(n){const r=n.positionAt(new i.Location(e.uri,t.start)),o=n.positionAt(new i.Location(e.uri,t.end));return new i.Range(r,o)}return t}toOutgoingOffset(e,t){const n=this.getConcatDocument(e);if(n){const r=e.positionAt(t),o=n.positionAt(new i.Location(e.uri,r));return n.offsetAt(o)}return t}toOutgoingContext(e,t){return{...t,diagnostics:t.diagnostics.map(this.toOutgoingDiagnostic.bind(this,e))}}toIncomingHover(e,t){return t&&t.range?{...t,range:this.toIncomingRange(e,t.range)}:t}toIncomingCompletions(e,t){return t?Array.isArray(t)?t.map(this.toIncomingCompletion.bind(this,e)):{...t,items:t.items.map(this.toIncomingCompletion.bind(this,e))}:t}toIncomingLocations(e,t){return Array.isArray(t)?t.map(this.toIncomingLocationFromLink.bind(this,e)):(null==t?void 0:t.range)?this.toIncomingLocation(t.uri,t.range):t}toIncomingHighlight(e,t){return t?t.map(t=>({...t,range:this.toIncomingRange(e,t.range)})):t}toIncomingSymbols(e,t){return t&&Array.isArray(t)&&t.length?t[0]instanceof i.DocumentSymbol?t.map(this.toIncomingSymbolFromDocumentSymbol.bind(this,e)):t.map(this.toIncomingSymbolFromSymbolInformation.bind(this,e)):t}toIncomingSymbolFromSymbolInformation(e,t){return{...t,location:this.toIncomingLocation(e,t.location.range)}}toIncomingDiagnostic(e,t){return{...t,range:this.toIncomingRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toIncomingRelatedInformation.bind(this,e)):void 0}}toIncomingActions(e,t){if(!Array.isArray(t))return t}toIncomingCodeLenses(e,t){return Array.isArray(t)?t.map(t=>({...t,range:this.toIncomingRange(e,t.range)})):t}toIncomingEdits(e,t){return Array.isArray(t)?t.map(t=>({...t,range:this.toIncomingRange(e,t.range)})):t}toIncomingRename(e,t){return t?t instanceof i.Range?this.toIncomingLocation(e,t).range:{...t,range:this.toIncomingLocation(e,t.range).range}:t}toIncomingDocumentLinks(e,t){return t&&Array.isArray(t)?t.map(t=>{const n=t.target?t.target:e.uri,r=this.toIncomingLocation(n,t.range);return{...t,range:r.range,target:t.target?r.uri:void 0}}):t}toIncomingRange(e,t){return this.toIncomingLocation(e,t).range}toIncomingPosition(e,t){return this.toIncomingLocation(e,new i.Range(t,t)).range.start}getCellAtLocation(e){const t=this.getDocumentKey(e.uri),n=this.activeDocuments.get(t);if(n)return n.getCellAtPosition(e.range.start)}toIncomingWorkspaceSymbol(e){const t=this.getCellAtLocation(e.location);return t?this.toIncomingSymbolFromSymbolInformation(t.document,e):e}toOutgoingDiagnostic(e,t){return{...t,range:this.toOutgoingRange(e,t.range),relatedInformation:t.relatedInformation?t.relatedInformation.map(this.toOutgoingRelatedInformation.bind(this,e)):void 0}}toOutgoingRelatedInformation(e,t){const n=this.toOutgoingDocument(e);return{...t,location:t.location.uri===n.uri?this.toOutgoingLocation(e,t.location):t.location}}toOutgoingLocation(e,t){return{uri:this.toOutgoingDocument(e).uri,range:this.toOutgoingRange(e,t.range)}}toIncomingRelatedInformation(e,t){const n=this.toOutgoingUri(e);return{...t,location:t.location.uri===n?this.toIncomingLocationFromLink(e,t.location):t.location}}toIncomingSymbolFromDocumentSymbol(e,t){return{...t,range:this.toIncomingRange(e,t.range),selectionRange:this.toIncomingRange(e,t.selectionRange),children:t.children.map(this.toIncomingSymbolFromDocumentSymbol.bind(this,e))}}toIncomingLocationFromLink(e,t){const n=t,r=t,i=this.toIncomingUri(n.targetUri||r.uri,n.targetRange?n.targetRange:r.range);return{originSelectionRange:n.originSelectionRange?this.toIncomingRange(i,n.originSelectionRange):void 0,uri:i,range:n.targetRange?this.toIncomingRange(i,n.targetRange):this.toIncomingRange(i,r.range),targetSelectionRange:n.targetSelectionRange?this.toIncomingRange(i,n.targetSelectionRange):void 0}}toIncomingUri(e,t){const n=this.getWrapperFromOutgoingUri(e);if(n){return n.concatDocument.locationAt(t).uri}return e}toIncomingCompletion(e,t){return t.range?t.range instanceof i.Range?{...t,range:this.toIncomingRange(e,t.range)}:{...t,range:{inserting:this.toIncomingRange(e,t.range.inserting),replacing:this.toIncomingRange(e,t.range.replacing)}}:t}toIncomingLocation(e,t){const n=e instanceof i.Uri?e:e.uri,r=this.getConcatDocument(e);if(r){const e=r.locationAt(t.start),n=r.locationAt(t.end);return{uri:e.uri,range:new i.Range(e.range.start,n.range.end)}}return{uri:n,range:t}}toOutgoingContentChangeEvent(e,t){return{range:this.toOutgoingRange(e,t.range),rangeLength:t.rangeLength,rangeOffset:this.toOutgoingOffset(e,t.rangeOffset),text:t.text}}getDocumentKey(e){return"win32"===r.platform()?e.fsPath.toLowerCase():e.fsPath}onDidOpenNotebook(e){this.notebookFilter.test(e.fileName)&&this.getTextDocumentWrapper(e.uri)}onDidCloseNotebook(e){if(this.notebookFilter.test(e.fileName)){const t=this.getDocumentKey(e.uri),n=this.getTextDocumentWrapper(e.uri);this.activeDocuments.delete(t),this.activeDocumentsOutgoingMap.delete(this.getDocumentKey(n.uri))}}getWrapperFromOutgoingUri(e){return this.activeDocumentsOutgoingMap.get(this.getDocumentKey(e))}getTextDocumentWrapper(e){const t=e instanceof i.Uri?e:e.uri,n=this.getDocumentKey(t);let r=this.activeDocuments.get(n);if(!r){const e=this.api.notebookDocuments.find(e=>this.fs.arePathsSame(t.fsPath,e.uri.fsPath));if(!e)throw new Error("Invalid uri, not a notebook: "+t.fsPath);r=new o.NotebookConcatDocument(e,this.api,this.cellSelector),this.activeDocuments.set(n,r),this.activeDocumentsOutgoingMap.set(this.getDocumentKey(r.uri),r)}return r}getConcatDocument(e){var t;return null===(t=this.getTextDocumentWrapper(e))||void 0===t?void 0:t.concatDocument}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookConcatDocument=t.NotebookConcatPrefix=void 0;const r=n(4),i=n(702),o=n(2);t.NotebookConcatPrefix="_NotebookConcat_";t.NotebookConcatDocument=class{constructor(e,n,s){this.notebook=e,this.firedOpen=!1,this.firedClose=!1,this._version=1;const a=r.dirname(e.uri.fsPath);this.dummyFilePath=r.join(a,`${t.NotebookConcatPrefix}${i().replace(/-/g,"")}.py`),this.dummyUri=o.Uri.file(this.dummyFilePath),this.concatDocument=n.createConcatTextDocument(e,s),this.onDidChangeSubscription=this.concatDocument.onDidChange(this.onDidChange,this)}get notebookUri(){return this.notebook.uri}get uri(){return this.dummyUri}get fileName(){return this.dummyFilePath}get isUntitled(){return this.notebook.isUntitled}get languageId(){return this.notebook.languages[0]}get version(){return this._version}get isDirty(){return this.notebook.isDirty}get isClosed(){return this.concatDocument.isClosed}get eol(){return o.EndOfLine.LF}get lineCount(){return this.notebook.cells.map(e=>e.document.lineCount).reduce((e,t)=>e+t)}dispose(){this.onDidChangeSubscription.dispose()}isCellOfDocument(e){return this.concatDocument.contains(e)}save(){throw new Error("Not implemented")}lineAt(e){const t="number"==typeof e?new o.Position(e,0):e,n=this.concatDocument.locationAt(t);return this.notebook.cells.find(e=>e.uri.toString()===n.uri.toString()).document.lineAt(n.range.start)}offsetAt(e){return this.concatDocument.offsetAt(e)}positionAt(e){return this.concatDocument.positionAt(e)}getText(e){return e?this.concatDocument.getText(e):this.concatDocument.getText()}getWordRangeAtPosition(e,t){const n=this.concatDocument.locationAt(e);return this.notebook.cells.find(e=>e.uri.toString()===n.uri.toString()).document.getWordRangeAtPosition(n.range.start,t)}validateRange(e){return this.concatDocument.validateRange(e)}validatePosition(e){return this.concatDocument.validatePosition(e)}getCellAtPosition(e){const t=this.concatDocument.locationAt(e);return this.notebook.cells.find(e=>e.uri===t.uri)}onDidChange(){this._version+=1}}},function(e,t,n){var r=n(703),i=n(704);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){var r=n(73);e.exports=function(){return r.randomBytes(16)}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MultiplexingJediLanguageServerActivator=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(24),u=n(6),d=n(1),h=n(8),p=n(706),f=n(16),g=n(749);let m=class{constructor(e,t,n){this.manager=e,this.proposePylancePopup=n,this.onDidChangeCodeLensesEmitter=new s.EventEmitter,this.realLanguageServerPromise=t.inExperiment(l.JediLSP.experiment).then(e=>(this.realLanguageServer=e?new g.JediLanguageServerActivator(this.manager.get(f.ILanguageServerManager),this.manager.get(a.IWorkspaceService),this.manager.get(u.IFileSystem),this.manager.get(d.IConfigurationService)):new p.JediExtensionActivator(this.manager),this.realLanguageServer))}async start(e,t){const n=await this.realLanguageServerPromise;return c.isTestExecution()||this.proposePylancePopup.showBanner().ignoreErrors(),n.start(e,t)}activate(){this.realLanguageServer&&this.realLanguageServer.activate()}deactivate(){this.realLanguageServer&&this.realLanguageServer.deactivate()}get onDidChangeCodeLenses(){return this.onDidChangeCodeLensesEmitter.event}get connection(){if(this.realLanguageServer)return this.realLanguageServer.connection}get capabilities(){if(this.realLanguageServer)return this.realLanguageServer.capabilities}async provideRenameEdits(e,t,n,r){return(await this.realLanguageServerPromise).provideRenameEdits(e,t,n,r)}async provideDefinition(e,t,n){return(await this.realLanguageServerPromise).provideDefinition(e,t,n)}async provideHover(e,t,n){return(await this.realLanguageServerPromise).provideHover(e,t,n)}async provideReferences(e,t,n,r){return(await this.realLanguageServerPromise).provideReferences(e,t,n,r)}async provideCompletionItems(e,t,n,r){return(await this.realLanguageServerPromise).provideCompletionItems(e,t,n,r)}async provideCodeLenses(e,t){return(await this.realLanguageServerPromise).provideCodeLenses(e,t)}async provideDocumentSymbols(e,t){return(await this.realLanguageServerPromise).provideDocumentSymbols(e,t)}async provideSignatureHelp(e,t,n,r){return(await this.realLanguageServerPromise).provideSignatureHelp(e,t,n,r)}dispose(){this.realLanguageServer&&(this.realLanguageServer.dispose(),this.realLanguageServer=void 0)}};m=r([o.injectable(),i(0,o.inject(h.IServiceManager)),i(1,o.inject(d.IExperimentService)),i(2,o.inject(d.IPythonExtensionBanner)),i(2,o.named(d.BANNER_NAME_PROPOSE_LS))],m),t.MultiplexingJediLanguageServerActivator=m},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediExtensionActivator=void 0;const s=n(0),a=n(2),c=n(10),l=n(5),u=n(1),d=n(12),h=n(8),p=n(707),f=n(708),g=n(342),m=n(724),v=n(725),y=n(726),b=n(727),S=n(731),E=n(141),w=n(19),_=n(732),P=n(735),C=n(736),T=n(740);let I=r=class{constructor(e){this.serviceManager=e,this.registrations=[],this.context=this.serviceManager.get(u.IExtensionContext),this.documentSelector=c.PYTHON}async start(e,t){if(this.jediFactory)throw new Error("Jedi already started");const n=this.context,i=this.jediFactory=new p.JediFactory(t,this.serviceManager);n.subscriptions.push(i);const o=this.serviceManager.get(h.IServiceContainer);this.renameProvider=new b.PythonRenameProvider(this.serviceManager),this.definitionProvider=new g.PythonDefinitionProvider(i),this.hoverProvider=new m.PythonHoverProvider(i),this.referenceProvider=new y.PythonReferenceProvider(i),this.completionProvider=new f.PythonCompletionItemProvider(i,this.serviceManager),this.codeLensProvider=this.serviceManager.get(d.IShebangCodeLensProvider),this.objectDefinitionProvider=new v.PythonObjectDefinitionProvider(i),this.symbolProvider=new E.JediSymbolProvider(o,i),this.signatureProvider=new S.PythonSignatureProvider(i),r.workspaceSymbols||(r.workspaceSymbols=new T.WorkspaceSymbols(o),n.subscriptions.push(r.workspaceSymbols));this.serviceManager.get(w.ITestManagementService).activate(this.symbolProvider).catch(e=>l.traceError("Failed to activate Unit Tests",e))}deactivate(){this.registrations.forEach(e=>e.dispose()),this.registrations=[]}activate(){if(0===this.registrations.length&&this.renameProvider&&this.definitionProvider&&this.hoverProvider&&this.referenceProvider&&this.completionProvider&&this.codeLensProvider&&this.symbolProvider&&this.signatureProvider){this.registrations.push(a.commands.registerCommand("python.goToPythonObject",()=>this.objectDefinitionProvider.goToObjectDefinition())),this.registrations.push(a.languages.registerRenameProvider(this.documentSelector,this.renameProvider)),this.registrations.push(a.languages.registerDefinitionProvider(this.documentSelector,this.definitionProvider)),this.registrations.push(a.languages.registerHoverProvider(this.documentSelector,this.hoverProvider)),this.registrations.push(a.languages.registerReferenceProvider(this.documentSelector,this.referenceProvider)),this.registrations.push(a.languages.registerCompletionItemProvider(this.documentSelector,this.completionProvider,".")),this.registrations.push(a.languages.registerCodeLensProvider(this.documentSelector,this.codeLensProvider));const e=new P.OnTypeFormattingDispatcher({"\n":new C.OnEnterFormatter,":":new _.BlockFormatProviders}),t=e.getTriggerCharacters();t&&this.registrations.push(a.languages.registerOnTypeFormattingEditProvider(c.PYTHON,e,t.first,...t.more)),this.registrations.push(a.languages.registerDocumentSymbolProvider(this.documentSelector,this.symbolProvider));-1===this.serviceManager.get(u.IConfigurationService).getSettings().devOptions.indexOf("DISABLE_SIGNATURE")&&this.registrations.push(a.languages.registerSignatureHelpProvider(this.documentSelector,this.signatureProvider,"(",","))}}provideRenameEdits(e,t,n,r){if(this.renameProvider)return this.renameProvider.provideRenameEdits(e,t,n,r)}provideDefinition(e,t,n){if(this.definitionProvider)return this.definitionProvider.provideDefinition(e,t,n)}provideHover(e,t,n){if(this.hoverProvider)return this.hoverProvider.provideHover(e,t,n)}provideReferences(e,t,n,r){if(this.referenceProvider)return this.referenceProvider.provideReferences(e,t,n,r)}provideCompletionItems(e,t,n,r){if(this.completionProvider)return this.completionProvider.provideCompletionItems(e,t,n)}resolveCompletionItem(e,t){if(this.completionProvider)return this.completionProvider.resolveCompletionItem(e,t)}get onDidChangeCodeLenses(){return this.codeLensProvider?this.codeLensProvider.onDidChangeCodeLenses:void 0}provideCodeLenses(e,t){if(this.codeLensProvider)return this.codeLensProvider.provideCodeLenses(e,t)}provideDocumentSymbols(e,t){if(this.symbolProvider)return this.symbolProvider.provideDocumentSymbols(e,t)}provideSignatureHelp(e,t,n,r){if(this.signatureProvider)return this.signatureProvider.provideSignatureHelp(e,t,n)}dispose(){this.registrations.forEach(e=>e.dispose()),this.jediFactory&&this.jediFactory.dispose()}};I=r=i([s.injectable(),o(0,s.inject(h.IServiceManager))],I),t.JediExtensionActivator=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediFactory=void 0;const r=n(2),i=n(85);t.JediFactory=class{constructor(e,t){this.interpreter=e,this.serviceContainer=t,this.disposables=[],this.jediProxyHandlers=new Map}dispose(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}getJediProxyHandler(e){const t=this.getWorkspacePath(e);if(!this.jediProxyHandlers.has(t)){const e=new i.JediProxy(t,this.interpreter,this.serviceContainer),n=new i.JediProxyHandler(e);this.disposables.push(e,n),this.jediProxyHandlers.set(t,n)}return this.jediProxyHandlers.get(t)}getWorkspacePath(e){if(e){const t=r.workspace.getWorkspaceFolder(e);if(t)return t.uri.fsPath}return Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0?r.workspace.workspaceFolders[0].uri.fsPath:__dirname}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonCompletionItemProvider=void 0;const i=n(1),o=n(7),s=n(9),a=n(709),c=n(341);class l{constructor(e,t){this.completionSource=new a.CompletionSource(e,t,new c.ItemInfoSource(e)),this.configService=t.get(i.IConfigurationService)}async provideCompletionItems(e,t,n){const r=await this.completionSource.getVsCodeCompletionItems(e,t,n);if(this.configService.isTestExecution())for(let e=0;e<Math.min(3,r.length);e+=1)r[e]=await this.resolveCompletionItem(r[e],n);return r}async resolveCompletionItem(e,t){if(!e.documentation){const n=await this.completionSource.getDocumentation(e,t);n&&n.length>0&&(e.documentation=n[0].tooltip)}return e}}r([o.captureTelemetry(s.EventName.COMPLETION)],l.prototype,"provideCompletionItems",null),t.PythonCompletionItemProvider=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionSource=void 0;const r=n(2),i=n(1),o=n(85),s=n(204);class a{constructor(e,t){this.document=e,this.position=t}static fromObject(e){return e._documentPosition}attachTo(e){e._documentPosition=this}}t.CompletionSource=class{constructor(e,t,n){this.serviceContainer=t,this.itemInfoSource=n,this.jediFactory=e}async getVsCodeCompletionItems(e,t,n){const r=await this.getCompletionResult(e,t,n);return void 0===r?Promise.resolve([]):this.toVsCodeCompletions(new a(e,t),r,e.uri)}async getDocumentation(e,t){const n=a.fromObject(e);if(void 0===n)return;const i=n.document,o=n.position,s=i.getWordRangeAtPosition(o),c=void 0!==s?new r.Range(new r.Position(0,0),s.start):new r.Range(new r.Position(0,0),o),l=e.label,u=`${i.getText(c)}${l}`,d=new r.Range(c.end,c.end.translate(0,l.length));return this.itemInfoSource.getItemInfoFromText(i.uri,i.fileName,d,u,t)}async getCompletionResult(e,t,n){if(t.character<=0||s.isPositionInsideStringOrComment(e,t))return;const r=o.CommandType.Completions,i=t.character,a=e.getText(),c={command:r,fileName:e.fileName,columnIndex:i,lineIndex:t.line,source:a};return this.jediFactory.getJediProxyHandler(e.uri).sendCommand(c,n)}toVsCodeCompletions(e,t,n){return t&&t.items.length>0?t.items.map(t=>this.toVsCodeCompletion(e,t,n)):[]}toVsCodeCompletion(e,t,n){const o=new r.CompletionItem(t.text);o.kind=t.type;return!0!==this.serviceContainer.get(i.IConfigurationService).getSettings(n).autoComplete.addBrackets||t.kind!==r.SymbolKind.Function&&t.kind!==r.SymbolKind.Method||(o.insertText=new r.SnippetString(t.text).appendText("(").appendTabstop().appendText(")")),o.sortText=(o.label.startsWith("__")?"z":o.label.startsWith("_")?"y":"__")+o.label,e.attachTo(o),o}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getUnicodeCategory=t.UnicodeCategory=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.UppercaseLetter=1]="UppercaseLetter",e[e.LowercaseLetter=2]="LowercaseLetter",e[e.TitlecaseLetter=3]="TitlecaseLetter",e[e.ModifierLetter=4]="ModifierLetter",e[e.OtherLetter=5]="OtherLetter",e[e.LetterNumber=6]="LetterNumber",e[e.NonSpacingMark=7]="NonSpacingMark",e[e.SpacingCombiningMark=8]="SpacingCombiningMark",e[e.DecimalDigitNumber=9]="DecimalDigitNumber",e[e.ConnectorPunctuation=10]="ConnectorPunctuation"}(r=t.UnicodeCategory||(t.UnicodeCategory={})),t.getUnicodeCategory=function(e){const t=n(711),i=n(712),o=n(713),s=n(714),a=n(715),c=n(716),l=n(717),u=n(718),d=n(719),h=n(720);return t[e]?r.UppercaseLetter:i[e]?r.LowercaseLetter:o[e]?r.TitlecaseLetter:s[e]?r.OtherLetter:a[e]?r.ModifierLetter:c[e]?r.LetterNumber:l[e]?r.NonSpacingMark:u[e]?r.SpacingCombiningMark:d[e]?r.DecimalDigitNumber:h[e]?r.ConnectorPunctuation:r.Unknown}},function(e,t){e.exports=require("./node_modules/unicode/category/Lu")},function(e,t){e.exports=require("./node_modules/unicode/category/Ll")},function(e,t){e.exports=require("./node_modules/unicode/category/Lt")},function(e,t){e.exports=require("./node_modules/unicode/category/Lo")},function(e,t){e.exports=require("./node_modules/unicode/category/Lm")},function(e,t){e.exports=require("./node_modules/unicode/category/Nl")},function(e,t){e.exports=require("./node_modules/unicode/category/Mn")},function(e,t){e.exports=require("./node_modules/unicode/category/Mc")},function(e,t){e.exports=require("./node_modules/unicode/category/Nd")},function(e,t){e.exports=require("./node_modules/unicode/category/Pc")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterStream=void 0;const r=n(142),i=n(722);t.CharacterStream=class{constructor(e){this.text="string"==typeof e?new i.TextIterator(e):e,this._position=0,this._currentChar=e.length>0?e.charCodeAt(0):0,this._isEndOfStream=0===e.length}getText(){return this.text.getText()}get position(){return this._position}set position(e){this._position=e,this.checkBounds()}get currentChar(){return this._currentChar}get nextChar(){return this.position+1<this.text.length?this.text.charCodeAt(this.position+1):0}get prevChar(){return this.position-1>=0?this.text.charCodeAt(this.position-1):0}isEndOfStream(){return this._isEndOfStream}lookAhead(e){const t=this._position+e;return t<0||t>=this.text.length?0:this.text.charCodeAt(t)}advance(e){this.position+=e}moveNext(){return this._position<this.text.length-1?(this._position+=1,this._currentChar=this.text.charCodeAt(this._position),!0):(this.advance(1),!this.isEndOfStream())}isAtWhiteSpace(){return r.isWhiteSpace(this.currentChar)}isAtLineBreak(){return r.isLineBreak(this.currentChar)}skipLineBreak(){13===this._currentChar?(this.moveNext(),10===this.currentChar&&this.moveNext()):10===this._currentChar&&this.moveNext()}skipWhitespace(){for(;!this.isEndOfStream()&&this.isAtWhiteSpace();)this.moveNext()}skipToEol(){for(;!this.isEndOfStream()&&!this.isAtLineBreak();)this.moveNext()}skipToWhitespace(){for(;!this.isEndOfStream()&&!this.isAtWhiteSpace();)this.moveNext()}isAtString(){return 39===this.currentChar||34===this.currentChar}charCodeAt(e){return this.text.charCodeAt(e)}get length(){return this.text.length}checkBounds(){this._position<0&&(this._position=0),this._isEndOfStream=this._position>=this.text.length,this._isEndOfStream&&(this._position=this.text.length),this._currentChar=this._isEndOfStream?0:this.text.charCodeAt(this._position)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentTextIterator=t.TextIterator=void 0;const r=n(2);t.TextIterator=class{constructor(e){this.text=e}charCodeAt(e){return e>=0&&e<this.text.length?this.text.charCodeAt(e):0}get length(){return this.text.length}getText(){return this.text}};t.DocumentTextIterator=class{constructor(e){this.document=e;const t=this.document.lineCount-1,n=this.document.lineAt(t),i=new r.Position(t,n.range.end.character);this.length=this.document.offsetAt(i)}charCodeAt(e){const t=this.document.positionAt(e);return this.document.getText(new r.Range(t,t.translate(0,1))).charCodeAt(t.character)}getText(){return this.document.getText()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestTextConverter=void 0;const r=n(20),i=n(142);var o;!function(e){e[e.Default=0]="Default",e[e.Preformatted=1]="Preformatted",e[e.Code=2]="Code"}(o||(o={}));t.RestTextConverter=class{constructor(){this.state=o.Default,this.md=[]}toMarkdown(e){const t=this.transformLines(e);return this.state=o.Default,this.md=[],t}escapeMarkdown(e){return e.replace(/\#/g,"\\#").replace(/\*/g,"\\*").replace(/\ _/g," \\_").replace(/^_/,"\\_")}transformLines(e){const t=e.split(/\r?\n/);for(let e=0;e<t.length;e+=1){const n=t[e];if(0!==this.md.length||0!==n.length)switch(this.state){case o.Default:e+=this.inDefaultState(t,e);break;case o.Preformatted:e+=this.inPreformattedState(t,e);break;case o.Code:this.inCodeState(n)}}return this.endCodeBlock(),this.endPreformattedBlock(),this.md.join(r.EOL).trim()}inDefaultState(e,t){let n=e[t];if(n.startsWith("```"))return this.startCodeBlock(),0;if(n.startsWith("===")||n.startsWith("---"))return 0;if(this.handleDoubleColon(n))return 0;if(this.isIgnorable(n))return 0;if(this.handleSectionHeader(e,t))return 1;const r=this.checkPreContent(e,t);return this.state!==o.Default?r:(n=this.cleanup(n),n=n.replace(/``/g,"`"),n=this.escapeMarkdown(n),this.md.push(n),0)}inPreformattedState(e,t){let n=e[t];if(this.isIgnorable(n))return 0;if(n.length>0&&!i.isWhiteSpace(n.charCodeAt(0))&&!this.isListItem(n))return this.endPreformattedBlock(),-1;const r=this.md.length>0?this.md[this.md.length-1]:void 0;return 0===n.length&&r&&(0===r.length||r.startsWith("```"))||(n=n.replace(/</g," ").replace(/>/g," "),n=n.replace(/``/g,"`"),this.md.push(n+"  ")),0}inCodeState(e){const t=this.md.length>0?this.md[this.md.length-1]:void 0;0===e.length&&t&&(0===t.length||t.startsWith("```"))||(e.startsWith("```")?this.endCodeBlock():this.md.push(e))}isIgnorable(e){if(e.indexOf("generated/")>=0)return!0;const t=e.trim();return!!(t.startsWith("..")&&t.indexOf("::")>0)}checkPreContent(e,t){const n=e[t];return 0===t||0===n.trim().length?0:i.isWhiteSpace(n.charCodeAt(0))||this.isListItem(n)?(this.startPreformattedBlock(),-1):0}handleSectionHeader(e,t){const n=e[t];return t<e.length-1&&e[t+1].startsWith("===")?(this.md.push("### "+this.cleanup(n)),!0):!!(t<e.length-1&&e[t+1].startsWith("---"))&&(this.md.push("#### "+this.cleanup(n)),!0)}handleDoubleColon(e){return!!e.endsWith("::")&&(e.length>2&&!e.startsWith("..")&&this.md.push(e.substring(0,e.length-1)),this.startPreformattedBlock(),!0)}startPreformattedBlock(){this.tryRemovePrecedingEmptyLines(),this.md.push("```html"),this.state=o.Preformatted}endPreformattedBlock(){this.state===o.Preformatted&&(this.tryRemovePrecedingEmptyLines(),this.md.push("```"),this.state=o.Default)}startCodeBlock(){this.tryRemovePrecedingEmptyLines(),this.md.push("```python"),this.state=o.Code}endCodeBlock(){this.state===o.Code&&(this.tryRemovePrecedingEmptyLines(),this.md.push("```"),this.state=o.Default)}tryRemovePrecedingEmptyLines(){for(;this.md.length>0&&0===this.md[this.md.length-1].trim().length;)this.md.pop()}isListItem(e){const t=e.trim(),n=t.length>0?t.charCodeAt(0):0;return 42===n||45===n||i.isDecimal(n)}cleanup(e){return e.replace(/:mod:/g,"module:")}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonHoverProvider=void 0;const i=n(2),o=n(7),s=n(9),a=n(341);class c{constructor(e){this.itemInfoSource=new a.ItemInfoSource(e)}async provideHover(e,t,n){const r=await this.itemInfoSource.getItemInfoFromDocument(e,t,n);if(r)return new i.Hover(r.map(e=>e.tooltip))}}r([o.captureTelemetry(s.EventName.HOVER_DEFINITION)],c.prototype,"provideHover",null),t.PythonHoverProvider=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonObjectDefinitionProvider=void 0;const i=n(2),o=n(7),s=n(9),a=n(342);class c{constructor(e){this._defProvider=new a.PythonDefinitionProvider(e)}async goToObjectDefinition(){const e=await this.getObjectDefinition();if("string"!=typeof e||0===e.length)return;const t=e.split(".");let n="",r=0;if(1===t.length)n="import "+t[0],r="import ".length;else{const e=t.shift();n=`from ${e} import ${t.join(".")}`,r=`from ${e} import `.length}const o=new i.Range(0,r,0,n.length-1),s={fileName:"test.py",lineAt:e=>({text:n}),getWordRangeAtPosition:e=>o,isDirty:!0,getText:()=>n},a=new i.CancellationTokenSource,c=await this._defProvider.provideDefinition(s,o.start,a.token);if(null===c)return void await i.window.showInformationMessage(`Definition not found for '${e}'`);let l,u;if(Array.isArray(c)&&c.length>0&&(l=c[0].uri,u=c[0].range.start.line),c&&!Array.isArray(c)&&c.uri&&(l=c.uri,u=c.range.start.line),l){const e=await i.workspace.openTextDocument(l);await i.window.showTextDocument(e),await i.commands.executeCommand("revealLine",{lineNumber:u,at:"top"})}else await i.window.showInformationMessage(`Definition not found for '${e}'`)}intputValidation(e){return"string"!=typeof e||0===(e=e.trim()).length?"":null}async getObjectDefinition(){return i.window.showInputBox({prompt:"Enter Object Path",validateInput:this.intputValidation})}}r([o.captureTelemetry(s.EventName.GO_TO_OBJECT_DEFINITION)],c.prototype,"goToObjectDefinition",null),t.PythonObjectDefinitionProvider=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonReferenceProvider=void 0;const i=n(2),o=n(7),s=n(9),a=n(85);class c{constructor(e){this.jediFactory=e}static parseData(e){if(e&&e.references.length>0){return e.references.filter(e=>!(!e||"number"!=typeof e.columnIndex||"number"!=typeof e.lineIndex||"string"!=typeof e.fileName||-1===e.columnIndex||-1===e.lineIndex||0===e.fileName.length)).map(e=>{const t=i.Uri.file(e.fileName),n=new i.Range(e.lineIndex,e.columnIndex,e.lineIndex,e.columnIndex);return new i.Location(t,n)})}return[]}async provideReferences(e,t,n,r){const i=e.fileName;if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const o=e.getWordRangeAtPosition(t);if(!o)return;const s=o.isEmpty?t.character:o.end.character,l={command:a.CommandType.Usages,fileName:i,columnIndex:s,lineIndex:t.line};e.isDirty&&(l.source=e.getText());const u=await this.jediFactory.getJediProxyHandler(e.uri).sendCommand(l,r);return u?c.parseData(u):void 0}}r([o.captureTelemetry(s.EventName.REFERENCE)],c.prototype,"provideReferences",null),t.PythonReferenceProvider=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonRenameProvider=void 0;const i=n(2),o=n(10),s=n(143),a=n(5),c=n(6),l=n(18),u=n(1),d=n(344),h=n(7),p=n(9);class f{constructor(e){this.serviceContainer=e,this.outputChannel=e.get(u.IOutputChannel,o.STANDARD_OUTPUT_CHANNEL)}provideRenameEdits(e,t,n,r){return i.workspace.saveAll(!1).then(()=>this.doRename(e,t,n))}doRename(e,t,n){if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const r=e.getWordRangeAtPosition(t);if(!r||r.isEmpty)return;if(e.getText(r)===n)return;let o=i.workspace.getWorkspaceFolder(e.uri);!o&&Array.isArray(i.workspace.workspaceFolders)&&i.workspace.workspaceFolders.length>0&&(o=i.workspace.workspaceFolders[0]);const h=o?o.uri.fsPath:__dirname;return new d.RefactorProxy(h,async()=>this.serviceContainer.get(l.IPythonExecutionFactory).create({resource:i.Uri.file(h)})).rename(e,n,e.uri.fsPath,r).then(e=>{const t=e.results.map(e=>e.diff),n=this.serviceContainer.get(c.IFileSystem);return s.getWorkspaceEditsFromPatch(t,h,n)}).catch(t=>{if("Not installed"===t){return this.serviceContainer.get(u.IInstaller).promptToInstall(u.Product.rope,e.uri).catch(e=>a.traceError("Python Extension: promptToInstall",e)),Promise.reject("")}return i.window.showErrorMessage(t),this.outputChannel.appendLine(t),Promise.reject(t)})}}r([h.captureTelemetry(p.EventName.REFACTOR_RENAME)],f.prototype,"provideRenameEdits",null),t.PythonRenameProvider=f},function(e,t){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?t.push(n.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}},e.exports=r},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePosition=t.parseRange=t.getWindowsLineEndingCount=void 0;const r=n(2),i=n(322);function o(e){if(i.isNumber(e))return new r.Position(e,0);if(""===e)return new r.Position(0,0);const t=e.split(":");if(t.length>2)throw new Error("invalid position "+e);let n=0;if(""!==t[0]){if(!/^\d+$/.test(t[0]))throw new Error("invalid position "+e);n=+t[0]}let o=0;if(2===t.length&&""!==t[1]){if(!/^\d+$/.test(t[1]))throw new Error("invalid position "+e);o=+t[1]}return new r.Position(n,o)}t.getWindowsLineEndingCount=function(e,t){const n=/\r\n/g;let i=0,o=t.valueOf();for(let s=0;s<t;s+=1024){const t=e.positionAt(s);let a;o>=1024?(a=e.positionAt(s+1024),o-=1024):a=e.positionAt(s+o);const c=e.getText(new r.Range(t,a)).match(n);i+=c?c.length:0}return i},t.parseRange=function(e){if(i.isNumber(e))return new r.Range(e,0,e,0);if(""===e)return new r.Range(0,0,0,0);const t=e.split("-");if(t.length>2)throw new Error("invalid range "+e);const n=o(t[0]);let s=n;return 2===t.length&&(s=o(t[1])),new r.Range(n,s)},t.parsePosition=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonSignatureProvider=void 0;const i=n(20),o=n(2),s=n(7),a=n(9),c=n(85),l=n(204),u=["\\s*:type\\s*PARAMNAME:\\s*([^\\n, ]+)","\\s*:param\\s*(\\w?)\\s*PARAMNAME:[^\\n]+","\\s*@type\\s*PARAMNAME:\\s*([^\\n, ]+)"];class d{constructor(e){this.jediFactory=e}static parseData(e){if(e&&Array.isArray(e.definitions)&&e.definitions.length>0){const t=new o.SignatureHelp;return t.activeSignature=0,e.definitions.forEach(e=>{let n,r;t.activeParameter=e.paramindex;if(e.params&&e.params.length>0&&e.docstring&&e.docstring.startsWith(e.name+"(")){const t=e.docstring.splitLines();n=t.shift().trim(),r=t.join(i.EOL).trim()}else e.params&&e.params.length>0?(n=`${e.name}(${e.params.map(e=>e.name).join(", ")})`,r=e.docstring):(n=e.description,r=e.docstring);const o={label:n,documentation:r,parameters:[]};e.params&&e.params.length&&(o.parameters=e.params.map(t=>(0===t.docstring.length&&(t.docstring=function(e,t){let n="";return e=e.replace(new RegExp("\\*","g"),"\\\\\\*"),u.forEach(r=>{if(n.length>0)return;r=r.replace("PARAMNAME",e);const i=new RegExp(r).exec(t);i&&i.length>0&&(n=i[0],n.indexOf(":")>=0&&(n=n.substring(n.indexOf(":")+1)),n.indexOf(":")>=0&&(n=n.substring(n.indexOf(":")+1)))}),n.trim()}(t.name,e.docstring)),{documentation:t.docstring.length>0?t.docstring:t.description,label:t.name.trim()}))),t.signatures.push(o)}),t}return new o.SignatureHelp}provideSignatureHelp(e,t,n){if(t.character<=0||l.isPositionInsideStringOrComment(e,t))return Promise.resolve(new o.SignatureHelp);const r={command:c.CommandType.Arguments,fileName:e.fileName,columnIndex:t.character,lineIndex:t.line,source:e.getText()};return this.jediFactory.getJediProxyHandler(e.uri).sendCommand(r,n).then(e=>e?d.parseData(e):new o.SignatureHelp)}}r([s.captureTelemetry(a.EventName.SIGNATURE)],d.prototype,"provideSignatureHelp",null),t.PythonSignatureProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockFormatProviders=void 0;const r=n(733),i=n(734);t.BlockFormatProviders=class{constructor(){this.providers=[];const e=[i.DEF_REGEX,i.ASYNC_DEF_REGEX,i.CLASS_REGEX],t=[i.IF_REGEX,i.ELIF_REGEX,i.FOR_IN_REGEX,i.ASYNC_FOR_IN_REGEX,i.WHILE_REGEX,i.TRY_REGEX,i.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.ELSE_REGEX,t,e));const n=[i.IF_REGEX,i.ELIF_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.ELIF_REGEX,n,e));const o=[i.TRY_REGEX,i.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.EXCEPT_REGEX,o,e));const s=[i.TRY_REGEX,i.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.FINALLY_REGEX,s,e))}provideOnTypeFormattingEdits(e,t,n,r,i){if(0===t.line)return[];const o=e.lineAt(t.line),s=e.lineAt(t.line-1);if(o.firstNonWhitespaceCharacterIndex!==s.firstNonWhitespaceCharacterIndex)return[];const a=o.text,c=this.providers.find(e=>e.canProvideEdits(a));return c?c.provideEdits(e,t,n,r,o):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlockFormatProvider=void 0;const r=n(2);t.CodeBlockFormatProvider=class{constructor(e,t,n){this.blockRegExp=e,this.previousBlockRegExps=t,this.boundaryRegExps=n}canProvideEdits(e){return this.blockRegExp.test(e)}provideEdits(e,t,n,i,o){for(let n=t.line-1;n>=0;n-=1){const s=e.lineAt(n),a=s.text;if(this.boundaryRegExps.some(e=>e.test(a)))return[];if(!this.previousBlockRegExps.find(e=>e.test(a)))continue;const c=s.firstNonWhitespaceCharacterIndex;if(c>o.firstNonWhitespaceCharacterIndex)continue;const l=new r.Position(t.line,0),u=new r.Position(t.line,o.firstNonWhitespaceCharacterIndex-c);if(!l.isEqual(u)){if(i.insertSpaces)return[r.TextEdit.delete(new r.Range(l,u))];{const e=a.substring(0,c),n=new r.Position(t.line,0),i=new r.Position(t.line,o.firstNonWhitespaceCharacterIndex);return[r.TextEdit.delete(new r.Range(n,i)),r.TextEdit.insert(n,e)]}}}return[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASS_REGEX=t.ASYNC_DEF_REGEX=t.DEF_REGEX=t.EXCEPT_REGEX=t.FINALLY_REGEX=t.TRY_REGEX=t.WHILE_REGEX=t.ASYNC_FOR_IN_REGEX=t.FOR_IN_REGEX=t.ELSE_REGEX=t.ELIF_REGEX=t.IF_REGEX=t.BlockRegEx=void 0;class r{constructor(e,t){this.regEx=e,this.startWord=t}test(e){return this.regEx.lastIndex=-1,this.regEx.test(e)}}t.BlockRegEx=r,t.IF_REGEX=new r(/^( |\t)*if +.*: *$/g,"if"),t.ELIF_REGEX=new r(/^( |\t)*elif +.*: *$/g,"elif"),t.ELSE_REGEX=new r(/^( |\t)*else *: *$/g,"else"),t.FOR_IN_REGEX=new r(/^( |\t)*for \w in .*: *$/g,"for"),t.ASYNC_FOR_IN_REGEX=new r(/^( |\t)*async *for \w in .*: *$/g,"for"),t.WHILE_REGEX=new r(/^( |\t)*while .*: *$/g,"while"),t.TRY_REGEX=new r(/^( |\t)*try *: *$/g,"try"),t.FINALLY_REGEX=new r(/^( |\t)*finally *: *$/g,"finally"),t.EXCEPT_REGEX=new r(/^( |\t)*except *\w* *(as)? *\w* *: *$/g,"except"),t.DEF_REGEX=new r(/^( |\t)*def \w *\(.*$/g,"def"),t.ASYNC_DEF_REGEX=new r(/^( |\t)*async *def \w *\(.*$/g,"async"),t.CLASS_REGEX=new r(/^( |\t)*class *\w* *.*: *$/g,"class")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnTypeFormattingDispatcher=void 0;t.OnTypeFormattingDispatcher=class{constructor(e){this.providers=e}provideOnTypeFormattingEdits(e,t,n,r,i){const o=this.providers[n];return o?o.provideOnTypeFormattingEdits(e,t,n,r,i):[]}getTriggerCharacters(){const e=Object.keys(this.providers);e.sort();const t=e.shift();if(t)return{first:t,more:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnEnterFormatter=void 0;const r=n(2),i=n(737),o=n(116),s=n(204);t.OnEnterFormatter=class{constructor(){this.formatter=new i.LineFormatter}provideOnTypeFormattingEdits(e,t,n,i,a){if(0===t.line)return[];const c=e.lineAt(t.line-1),l=s.getDocumentTokens(e,t,o.TokenizerMode.CommentsAndStrings),u=l.getItemContaining(e.offsetAt(c.range.start)),d=l.getItemContaining(e.offsetAt(c.range.end));if(u>=0&&u===d){const e=l.getItemAt(u);if(e.type===o.TokenType.Semicolon||e.type===o.TokenType.String)return[]}const h=this.formatter.formatLine(e,c.lineNumber);return h===c.text?[]:[new r.TextEdit(c.range,h)]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineFormatter=void 0;const r=n(2),i=n(738),o=n(739),s=n(340),a=n(339),c=n(116),l=["and","as","assert","await","del","except","elif","for","from","global","if","import","in","is","lambda","nonlocal","not","or","raise","return","while","with","yield"];t.LineFormatter=class{constructor(){this.builder=new o.TextBuilder,this.tokens=new s.TextRangeCollection([]),this.braceCounter=new i.BraceCounter,this.text="",this.lineNumber=0}formatLine(e,t){if(this.document=e,this.lineNumber=t,this.text=e.lineAt(t).text,this.tokens=(new a.Tokenizer).tokenize(this.text),this.builder=new o.TextBuilder,this.braceCounter=new i.BraceCounter,0===this.tokens.count)return this.text;const n=this.text.substr(0,this.tokens.getItemAt(0).start);n.length>0&&this.builder.append(n);for(let e=0;e<this.tokens.count;e+=1){const t=this.tokens.getItemAt(e),n=e>0?this.tokens.getItemAt(e-1):void 0,r=e<this.tokens.count-1?this.tokens.getItemAt(e+1):void 0;switch(t.type){case c.TokenType.Operator:this.handleOperator(e);break;case c.TokenType.Comma:this.builder.append(","),r&&!this.isCloseBraceType(r.type)&&r.type!==c.TokenType.Colon&&this.builder.softAppendSpace();break;case c.TokenType.Identifier:n&&!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Colon&&n.type!==c.TokenType.Operator&&this.builder.softAppendSpace();const i=this.text.substring(t.start,t.end);this.builder.append(i),this.isKeywordWithSpaceBeforeBrace(i)&&r&&this.isOpenBraceType(r.type)&&this.builder.softAppendSpace();break;case c.TokenType.Colon:this.builder.append(":"),!this.braceCounter.isOpened(c.TokenType.OpenBracket)&&r&&r.type!==c.TokenType.Colon&&this.builder.softAppendSpace();break;case c.TokenType.Comment:n&&this.builder.softAppendSpace(2),this.builder.append(this.text.substring(t.start,t.end));break;case c.TokenType.Semicolon:this.builder.append(";");break;default:this.handleOther(t,e)}}return this.builder.getText()}handleOperator(e){const t=this.tokens.getItemAt(e),n=e>0?this.tokens.getItemAt(e-1):void 0,r=this.text.charCodeAt(t.start),i=e<this.tokens.count-1?this.tokens.getItemAt(e+1):void 0;if(1===t.length)switch(r){case 61:return void this.handleEqual(t,e);case 46:return n&&this.isKeyword(n,"from")&&this.builder.softAppendSpace(),this.builder.append("."),void(i&&this.isKeyword(i,"import")&&this.builder.softAppendSpace());case 64:return void(n?(this.builder.softAppendSpace(),this.builder.append("@"),this.builder.softAppendSpace()):this.builder.append("@"));case 33:return void this.builder.append("!");case 42:if(n&&this.isKeyword(n,"lambda"))return this.builder.softAppendSpace(),void this.builder.append("*");if(this.handleStarOperator(t,n))return}else if(2===t.length&&42===this.text.charCodeAt(t.start)&&42===this.text.charCodeAt(t.start+1)&&this.handleStarOperator(t,n))return;!n||!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Comma?(this.builder.softAppendSpace(),this.builder.append(this.text.substring(t.start,t.end)),(!n||n.type!==c.TokenType.Operator||45!==r&&43!==r&&126!==r)&&this.builder.softAppendSpace()):this.builder.append(this.text.substring(t.start,t.end))}handleStarOperator(e,t){if(42===this.text.charCodeAt(e.start)&&42===this.text.charCodeAt(e.start+1)){if(!t||t.type!==c.TokenType.Identifier&&t.type!==c.TokenType.Number)return this.builder.append("**"),!0;if(t&&this.isKeyword(t,"lambda"))return this.builder.softAppendSpace(),this.builder.append("**"),!0}const n=this.getPreviousLineTokens(),r=n&&n.count>0?n.getItemAt(n.count-1):void 0;return!(!r||!this.isOpenBraceType(r.type)&&r.type!==c.TokenType.Comma)&&(this.builder.append(this.text.substring(e.start,e.end)),!0)}handleEqual(e,t){if(this.isMultipleStatements(t)&&!this.braceCounter.isOpened(c.TokenType.OpenBrace))return this.builder.softAppendSpace(),this.builder.append("="),void this.builder.softAppendSpace();this.isEqualsInsideArguments(t)?this.builder.append("="):(this.builder.softAppendSpace(),this.builder.append("="),this.builder.softAppendSpace())}handleOther(e,t){if(this.isBraceType(e.type))return this.braceCounter.countBrace(e),void this.builder.append(this.text.substring(e.start,e.end));const n=t>0?this.tokens.getItemAt(t-1):void 0;n&&1===n.length&&61===this.text.charCodeAt(n.start)&&this.isEqualsInsideArguments(t-1)?this.builder.append(this.text.substring(e.start,e.end)):!n||!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Colon?e.type===c.TokenType.Number&&n&&n.type===c.TokenType.Operator&&1===n.length&&126===this.text.charCodeAt(n.start)?this.builder.append(this.text.substring(e.start,e.end)):e.type===c.TokenType.Unknown?this.handleUnknown(e):(this.builder.softAppendSpace(),this.builder.append(this.text.substring(e.start,e.end))):this.builder.append(this.text.substring(e.start,e.end))}handleUnknown(e){const t=e.start>0?this.text.charCodeAt(e.start-1):0;32!==t&&9!==t||this.builder.softAppendSpace(),this.builder.append(this.text.substring(e.start,e.end));const n=e.end<this.text.length-1?this.text.charCodeAt(e.end):0;32!==n&&9!==n||this.builder.softAppendSpace()}isEqualsInsideArguments(e){if(e<1)return!1;return this.tokens.getItemAt(e-1).type===c.TokenType.Identifier&&(!(e>1&&this.tokens.getItemAt(e-2).type===c.TokenType.Colon)&&this.isInsideFunctionArguments(this.tokens.getItemAt(e).start))}isOpenBraceType(e){return e===c.TokenType.OpenBrace||e===c.TokenType.OpenBracket||e===c.TokenType.OpenCurly}isCloseBraceType(e){return e===c.TokenType.CloseBrace||e===c.TokenType.CloseBracket||e===c.TokenType.CloseCurly}isBraceType(e){return this.isOpenBraceType(e)||this.isCloseBraceType(e)}isMultipleStatements(e){for(let t=e;t>=0;t-=1)if(this.tokens.getItemAt(t).type===c.TokenType.Semicolon)return!0;return!1}isKeywordWithSpaceBeforeBrace(e){return l.indexOf(e)>=0}isKeyword(e,t){return e.type===c.TokenType.Identifier&&e.length===t.length&&this.text.substr(e.start,e.length)===t}isInsideFunctionArguments(e){if(!this.document)return!1;let t=new r.Position(0,0);for(let e=this.lineNumber;e>=0;e-=1){const n=this.document.lineAt(e),r=(new a.Tokenizer).tokenize(n.text);if(0===r.count)continue;const i=r.getItemAt(0);if(r.count>=3&&3===i.length&&"def"===n.text.substr(i.start,i.length)&&r.getItemAt(1).type===c.TokenType.Identifier&&r.getItemAt(2).type===c.TokenType.OpenBrace){t=n.range.start;break}if(r.count>0&&e<this.lineNumber){const n=r.getItemAt(r.count-1);if(n.type===c.TokenType.Colon){t=this.document.lineAt(e+1).range.start;break}if(r.count>1){if(r.getItemAt(r.count-2).type===c.TokenType.Colon&&n.type===c.TokenType.Comment){t=this.document.lineAt(e+1).range.start;break}}}}const n=this.document.lineAt(this.lineNumber),i=this.document.getText(new r.Range(t,n.range.end)),o=(new a.Tokenizer).tokenize(i);e=this.document.offsetAt(n.range.start)+e-this.document.offsetAt(t);let s=-1,l=-1;for(let t=0;t<o.count-1;t+=1){const n=o.getItemAt(t);if(n.type===c.TokenType.Identifier){const r=o.getItemAt(t+1);if(r.type===c.TokenType.OpenBrace&&!this.isKeywordWithSpaceBeforeBrace(i.substr(n.start,n.length))){let n=this.findClosingBrace(o,t+1);n=n>0?n:o.count-1,e>r.start&&e<o.getItemAt(n).start&&(s=t,l=n)}}}if(s<0)for(let t=0;t<o.count;t+=1){const n=o.getItemAt(t);if(n.type===c.TokenType.Identifier&&"lambda"===i.substr(n.start,n.length)){if(e<n.start)break;let r=this.findNearestColon(o,t+1);r=r>0?r:o.count-1,e>n.start&&e<o.getItemAt(r).start&&(s=t,l=r)}}return s>=0&&l>0}findNearestColon(e,t){for(let n=t;n<e.count;n+=1)if(e.getItemAt(n).type===c.TokenType.Colon)return n;return-1}findClosingBrace(e,t){const n=new i.BraceCounter;for(let r=t;r<e.count;r+=1){const t=e.getItemAt(r);if(t.type!==c.TokenType.OpenBrace&&t.type!==c.TokenType.CloseBrace||n.countBrace(t),0===n.count)return r}return-1}getPreviousLineTokens(){if(!this.document||0===this.lineNumber)return;const e=this.document.lineAt(this.lineNumber-1);return(new a.Tokenizer).tokenize(e.text)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BraceCounter=void 0;const r=n(116);class i{constructor(e,t){this.openBrace=e,this.closeBrace=t}}class o{constructor(){this.store=[]}push(e){this.store.push(e)}pop(){return this.store.pop()}get length(){return this.store.length}}t.BraceCounter=class{constructor(){this.bracePairs=[new i(r.TokenType.OpenBrace,r.TokenType.CloseBrace),new i(r.TokenType.OpenBracket,r.TokenType.CloseBracket),new i(r.TokenType.OpenCurly,r.TokenType.CloseCurly)],this.braceStacks=[new o,new o,new o]}get count(){let e=0;for(const t of this.braceStacks)e+=t.length;return e}isOpened(e){for(let t=0;t<this.bracePairs.length;t+=1){const n=this.bracePairs[t];if(n.openBrace===e||n.closeBrace===e)return this.braceStacks[t].length>0}return!1}countBrace(e){for(let t=0;t<this.bracePairs.length;t+=1){const n=this.bracePairs[t];if(n.openBrace===e.type)return this.braceStacks[t].push(e),!0;if(n.closeBrace===e.type)return this.braceStacks[t].length>0&&this.braceStacks[t].pop(),!0}return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextBuilder=void 0;const r=n(142);t.TextBuilder=class{constructor(){this.segments=[]}getText(){return this.isLastWhiteSpace()&&this.segments.pop(),this.segments.join("")}softAppendSpace(e=1){if(0!==this.segments.length){this.isLastWhiteSpace()&&(e-=1);for(let t=0;t<e;t+=1)this.segments.push(" ")}}append(e){this.segments.push(e)}isLastWhiteSpace(){return this.segments.length>0&&this.isWhitespace(this.segments[this.segments.length-1])}isWhitespace(e){for(let t=0;t<e.length;t+=1)if(!r.isWhiteSpace(e.charCodeAt(t)))return!1;return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbols=void 0;const r=n(2),i=n(3),o=n(10),s=n(144),a=n(6),c=n(18),l=n(1),u=n(741),d=n(742);t.WorkspaceSymbols=class{constructor(e){this.serviceContainer=e,this.generators=[],this.outputChannel=this.serviceContainer.get(l.IOutputChannel,o.STANDARD_OUTPUT_CHANNEL),this.commandMgr=this.serviceContainer.get(i.ICommandManager),this.fs=this.serviceContainer.get(a.IFileSystem),this.workspace=this.serviceContainer.get(i.IWorkspaceService),this.processFactory=this.serviceContainer.get(c.IProcessServiceFactory),this.appShell=this.serviceContainer.get(i.IApplicationShell),this.configurationService=this.serviceContainer.get(l.IConfigurationService),this.documents=this.serviceContainer.get(i.IDocumentManager),this.disposables=[],this.disposables.push(this.outputChannel),this.registerCommands(),this.initializeGenerators(),r.languages.registerWorkspaceSymbolProvider(new d.WorkspaceSymbolProvider(this.fs,this.commandMgr,this.generators)),this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(()=>this.initializeGenerators())),this.disposables.push(this.documents.onDidSaveTextDocument(e=>this.onDocumentSaved(e))),this.buildSymbolsOnStart()}dispose(){this.disposables.forEach(e=>e.dispose())}initializeGenerators(){for(;this.generators.length>0;){this.generators.shift().dispose()}Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.forEach(e=>{this.generators.push(new u.Generator(e.uri,this.outputChannel,this.appShell,this.fs,this.processFactory,this.configurationService))})}buildSymbolsOnStart(){Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.forEach(e=>{if(this.configurationService.getSettings(e.uri).workspaceSymbols.rebuildOnStart){const e=this.buildWorkspaceSymbols(!0);return Promise.all(e)}})}registerCommands(){this.disposables.push(this.commandMgr.registerCommand(o.Commands.Build_Workspace_Symbols,async(e=!0,t)=>{const n=this.buildWorkspaceSymbols(e,t);return Promise.all(n)}))}onDocumentSaved(e){const t=this.workspace.getWorkspaceFolder(e.uri);if(this.configurationService.getSettings(null==t?void 0:t.uri).workspaceSymbols.rebuildOnFileSave){const e=this.buildWorkspaceSymbols(!0);return Promise.all(e)}}buildWorkspaceSymbols(e=!0,t){if(t&&t.isCancellationRequested)return[];if(0===this.generators.length)return[];let n,r;return this.generators.map(async i=>{if(!i.enabled)return;const o=await this.fs.fileExists(i.tagFilePath);if(e||!o)for(let e=0;e<2;e+=1){try{return void await i.generateWorkspaceTags()}catch(e){if(!s.isNotInstalledError(e))return}if(!t||t.isCancellationRequested)return;if(n)r=await n;else{{const e=this.serviceContainer.get(l.IInstaller);n=e.promptToInstall(l.Product.ctags,this.workspace.workspaceFolders[0].uri),r=await n}if(r!==l.InstallerResponse.Installed||!t||t.isCancellationRequested)return}}})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=void 0;const i=n(4),o=n(61),s=n(7),a=n(9);class c{constructor(e,t,n,r,s,a){this.workspaceFolder=e,this.output=t,this.appShell=n,this.fs=r,this.processServiceFactory=s,this.disposables=[],this.optionsFile=i.join(o.EXTENSION_ROOT_DIR,"resources","ctagOptions"),this.pythonSettings=a.getSettings(e)}get tagFilePath(){return this.pythonSettings.workspaceSymbols.tagFilePath}get enabled(){return this.pythonSettings.workspaceSymbols.enabled}dispose(){this.disposables.forEach(e=>e.dispose())}async generateWorkspaceTags(){if(this.pythonSettings.workspaceSymbols.enabled)return this.generateTags({directory:this.workspaceFolder.fsPath})}buildCmdArgs(){const e=this.pythonSettings.workspaceSymbols.exclusionPatterns,t=0===e.length?[]:e.map(e=>"--exclude="+e);return["--options="+this.optionsFile,"--languages=Python"].concat(t)}async generateTags(e){const t=i.normalize(this.pythonSettings.workspaceSymbols.tagFilePath),n=this.pythonSettings.workspaceSymbols.ctagsPath,r=this.buildCmdArgs();let o=t;e.file&&e.file.length>0&&(e.directory=i.dirname(e.file)),i.dirname(o)===e.directory&&(o=i.basename(o));const s=i.dirname(o);await this.fs.directoryExists(s)||await this.fs.createDirectory(s),r.push("-o",o,"."),this.output.appendLine(`${"-".repeat(10)}Generating Tags${"-".repeat(10)}`),this.output.appendLine(`${n} ${r.join(" ")}`);const a=new Promise(async(t,i)=>{try{const o=(await this.processServiceFactory.create()).execObservable(n,r,{cwd:e.directory});let s="";o.out.subscribe(e=>{"stderr"===e.source&&(s+=e.out),this.output.append(e.out)},i,()=>{s.length>0?i(new Error(s)):t()})}catch(e){i(e)}});this.appShell.setStatusBarMessage("Generating Tags",a),await a}}r([s.captureTelemetry(a.EventName.WORKSPACE_SYMBOLS_BUILD)],c.prototype,"generateTags",null),t.Generator=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolProvider=void 0;const i=n(208),o=n(2),s=n(10),a=n(7),c=n(9),l=n(746);class u{constructor(e,t,n){this.fs=e,this.commands=t,this.tagGenerators=n}async provideWorkspaceSymbols(e,t){if(0===this.tagGenerators.length)return[];(await Promise.all(this.tagGenerators.map(e=>this.fs.fileExists(e.tagFilePath)))).filter(e=>e).length!==this.tagGenerators.length&&await this.commands.executeCommand(s.Commands.Build_Workspace_Symbols,!0,t);const n=[];await Promise.all(this.tagGenerators.map(async e=>{await this.fs.fileExists(e.tagFilePath)&&n.push(e)}));const r=n.filter(e=>void 0!==e&&e.enabled).map(async n=>{const r=await l.parseTags(n.workspaceFolder.fsPath,n.tagFilePath,e,t,this.fs);return Array.isArray(r)?r.map(e=>new o.SymbolInformation(e.symbolName,e.symbolKind,"",new o.Location(o.Uri.file(e.fileName),e.position))):[]}),a=await Promise.all(r);return i(a)}}r([a.captureTelemetry(c.EventName.WORKSPACE_SYMBOLS_GO_TO)],u.prototype,"provideWorkspaceSymbols",null),t.WorkspaceSymbolProvider=u},function(e,t,n){var r=n(744),i=n(745);e.exports=function e(t,n,o,s,a){var c=-1,l=t.length;for(o||(o=i),a||(a=[]);++c<l;){var u=t[c];n>0&&o(u)?n>1?e(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(175),i=n(264),o=n(265),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTags=t.matchNamedRegEx=void 0;const r=n(4),i=n(2),o=n(747),s=n(345),a=n(748),c=/\tkind:file\tline:\d+$/g;function l(e,t){const n=s(t,"g").exec(e);return null!==n?n.groups():null}t.matchNamedRegEx=l;const u=new Map;u.set("_array",i.SymbolKind.Array),u.set("_boolean",i.SymbolKind.Boolean),u.set("_class",i.SymbolKind.Class),u.set("_classes",i.SymbolKind.Class),u.set("_constant",i.SymbolKind.Constant),u.set("_constants",i.SymbolKind.Constant),u.set("_constructor",i.SymbolKind.Constructor),u.set("_enum",i.SymbolKind.Enum),u.set("_enums",i.SymbolKind.Enum),u.set("_enumeration",i.SymbolKind.Enum),u.set("_enumerations",i.SymbolKind.Enum),u.set("_field",i.SymbolKind.Field),u.set("_fields",i.SymbolKind.Field),u.set("_file",i.SymbolKind.File),u.set("_files",i.SymbolKind.File),u.set("_function",i.SymbolKind.Function),u.set("_functions",i.SymbolKind.Function),u.set("_member",i.SymbolKind.Function),u.set("_interface",i.SymbolKind.Interface),u.set("_interfaces",i.SymbolKind.Interface),u.set("_key",i.SymbolKind.Key),u.set("_keys",i.SymbolKind.Key),u.set("_method",i.SymbolKind.Method),u.set("_methods",i.SymbolKind.Method),u.set("_module",i.SymbolKind.Module),u.set("_modules",i.SymbolKind.Module),u.set("_namespace",i.SymbolKind.Namespace),u.set("_namespaces",i.SymbolKind.Namespace),u.set("_number",i.SymbolKind.Number),u.set("_numbers",i.SymbolKind.Number),u.set("_null",i.SymbolKind.Null),u.set("_object",i.SymbolKind.Object),u.set("_package",i.SymbolKind.Package),u.set("_packages",i.SymbolKind.Package),u.set("_property",i.SymbolKind.Property),u.set("_properties",i.SymbolKind.Property),u.set("_objects",i.SymbolKind.Object),u.set("_string",i.SymbolKind.String),u.set("_variable",i.SymbolKind.Variable),u.set("_variables",i.SymbolKind.Variable),u.set("_projects",i.SymbolKind.Package),u.set("_defines",i.SymbolKind.Module),u.set("_labels",i.SymbolKind.Interface),u.set("_macros",i.SymbolKind.Function),u.set("_types (structs and records)",i.SymbolKind.Class),u.set("_subroutine",i.SymbolKind.Method),u.set("_subroutines",i.SymbolKind.Method),u.set("_types",i.SymbolKind.Class),u.set("_programs",i.SymbolKind.Class),u.set("_Object's method",i.SymbolKind.Method),u.set("_Module or functor",i.SymbolKind.Module),u.set("_Global variable",i.SymbolKind.Variable),u.set("_Type name",i.SymbolKind.Class),u.set("_A function",i.SymbolKind.Function),u.set("_A constructor",i.SymbolKind.Constructor),u.set("_An exception",i.SymbolKind.Class),u.set("_A 'structure' field",i.SymbolKind.Field),u.set("_procedure",i.SymbolKind.Function),u.set("_procedures",i.SymbolKind.Function),u.set("_constant definitions",i.SymbolKind.Constant),u.set("_javascript functions",i.SymbolKind.Function),u.set("_singleton methods",i.SymbolKind.Method);const d={};u.forEach((e,t)=>{d[t.substring(1)]=e}),Object.keys(d).forEach(e=>{u.set(e,d[e])}),t.parseTags=function(e,t,n,s,d){return d.fileExists(t).then(d=>d?new Promise((d,h)=>{const p=new o(t);let f=0;const g=[];p.on("error",e=>{h(e)}),p.on("line",t=>{if(f+=1,s.isCancellationRequested)return void p.close();const o=function(e,t,n){if(c.test(t))return;const o=l(t,'(?<name>\\w+)\\t(?<file>.*)\\t\\/\\^(?<code>.*)\\$\\/;"\\tkind:(?<type>\\w+)\\tline:(?<line>\\d+)$');if(!o)return;if(!a.test(n,o.name))return;let s=o.file;r.isAbsolute(s)||(s=r.resolve(e,".vscode",s));const d=u.get(o.type)||i.SymbolKind.Null;return{fileName:s,code:o.code,position:new i.Position(Number(o.line)-1,0),symbolName:o.name,symbolKind:d}}(e,t,n);o&&g.push(o),g.length>=100&&p.close()}),p.on("end",()=>{d(g)})}):Promise.resolve([]))}},function(e,t,n){var r=n(54),i=n(180).StringDecoder,o=n(4),s=n(29),a=n(72);void 0===global.setImmediate&&(setImmediate=process.nextTick);var c=function(e,t){var n=this;this._encoding=t&&t.encoding||"utf8",e instanceof r.Readable?this._readStream=e:(this._readStream=null,this._filepath=o.normalize(e),this._streamOptions={encoding:this._encoding},t&&t.start&&(this._streamOptions.start=t.start),t&&t.end&&(this._streamOptions.end=t.end)),this._skipEmptyLines=t&&t.skipEmptyLines||!1,this._lines=[],this._lineFragment="",this._paused=!1,this._end=!1,this._ended=!1,this.decoder=new i(this._encoding),a.EventEmitter.call(this),setImmediate((function(){n._initStream()}))};(c.prototype=Object.create(a.EventEmitter.prototype,{constructor:{value:c,enumerable:!1}}))._initStream=function(){var e=this,t=this._readStream?this._readStream:s.createReadStream(this._filepath,this._streamOptions);t.on("error",(function(t){e.emit("error",t)})),t.on("open",(function(){e.emit("open")})),t.on("data",(function(t){e._readStream.pause();var n=t;t instanceof Buffer&&(n=e.decoder.write(t)),e._lines=e._lines.concat(n.split(/(?:\n|\r\n|\r)/g)),e._lines[0]=e._lineFragment+e._lines[0],e._lineFragment=e._lines.pop()||"",setImmediate((function(){e._nextLine()}))})),t.on("end",(function(){e._end=!0,setImmediate((function(){e._nextLine()}))})),this._readStream=t},c.prototype._nextLine=function(){var e,t=this;this._paused||(0!==this._lines.length?(e=this._lines.shift(),(!this._skipEmptyLines||e.length>0)&&this.emit("line",e),setImmediate((function(){this._paused||t._nextLine()}))):this._end?(this._lineFragment&&(this.emit("line",this._lineFragment),this._lineFragment=""),this._paused||this.end()):this._readStream.resume())},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){var e=this;this._paused=!1,setImmediate((function(){e._nextLine()}))},c.prototype.end=function(){this._ended||(this._ended=!0,this.emit("end"))},c.prototype.close=function(){var e=this;this._readStream.destroy(),this._end=!0,this._lines=[],setImmediate((function(){e._nextLine()}))},e.exports=c},function(e,t,n){var r;r={},e.exports=r,r.simpleFilter=function(e,t){return t.filter((function(t){return r.test(e,t)}))},r.test=function(e,t){return null!==r.match(e,t)},r.match=function(e,t,n){n=n||{};var r,i=0,o=[],s=t.length,a=0,c=0,l=n.pre||"",u=n.post||"",d=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<s;h++)r=t[h],d[h]===e[i]?(r=l+r+u,i+=1,c+=1+c):c=0,a+=c,o[o.length]=r;return i===e.length?(a=d===e?1/0:a,{rendered:o.join(""),score:a}):null},r.filter=function(e,t,n){return t&&0!==t.length?"string"!=typeof e?t:(n=n||{},t.reduce((function(t,i,o,s){var a=i;n.extract&&(a=n.extract(i));var c=r.match(e,a,n);return null!=c&&(t[t.length]={string:c.rendered,score:c.score,index:o,original:i}),t}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerActivator=void 0;const o=n(0),s=n(3),a=n(6),c=n(1),l=n(209),u=n(16);let d=class extends l.LanguageServerActivatorBase{constructor(e,t,n,r){super(e,t,n,r)}async ensureLanguageServerIsAvailable(e){}};d=r([o.injectable(),i(0,o.inject(u.ILanguageServerManager)),i(1,o.inject(s.IWorkspaceService)),i(2,o.inject(a.IFileSystem)),i(3,o.inject(c.IConfigurationService))],d),t.JediLanguageServerActivator=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerActivator=void 0;const o=n(0),s=n(4),a=n(3),c=n(10),l=n(6),u=n(1),d=n(209),h=n(16);let p=class extends d.LanguageServerActivatorBase{constructor(e,t,n,r,i,o,s){super(e,t,n,o),this.lsDownloader=r,this.languageServerFolderService=i,this.proposePylancePopup=s}async start(e,t){return c.isTestExecution()||this.proposePylancePopup.showBanner().ignoreErrors(),super.start(e,t)}async ensureLanguageServerIsAvailable(e){const t=await this.ensureLanguageServerFileIsAvailable(e,"mscorlib.dll");t&&await this.prepareLanguageServerForNoICU(t)}async prepareLanguageServerForNoICU(e){const t=s.join(e,"Microsoft.Python.LanguageServer.runtimeconfig.json");let n={};if(await this.fs.fileExists(t))try{if(n=JSON.parse(await this.fs.readFile(t)),n.runtimeOptions&&n.runtimeOptions.configProperties&&!0===n.runtimeOptions.configProperties["System.Globalization.Invariant"])return}catch(e){}n.runtimeOptions=n.runtimeOptions||{},n.runtimeOptions.configProperties=n.runtimeOptions.configProperties||{},n.runtimeOptions.configProperties["System.Globalization.Invariant"]=!0,await this.fs.writeFile(t,JSON.stringify(n))}async ensureLanguageServerFileIsAvailable(e,t){if(!1===this.configurationService.getSettings(e).downloadLanguageServer)return;const n=await this.languageServerFolderService.getLanguageServerFolderName(e);if(n){const r=s.join(c.EXTENSION_ROOT_DIR,n),i=s.join(r,t);return await this.fs.fileExists(i)||await this.lsDownloader.downloadLanguageServer(r,e),r}}};p=r([o.injectable(),i(0,o.inject(h.ILanguageServerManager)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(l.IFileSystem)),i(3,o.inject(h.ILanguageServerDownloader)),i(4,o.inject(h.ILanguageServerFolderService)),i(5,o.inject(u.IConfigurationService)),i(6,o.inject(u.IPythonExtensionBanner)),i(6,o.named(u.BANNER_NAME_PROPOSE_LS))],p),t.DotNetLanguageServerActivator=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerAnalysisOptions=void 0;const o=n(0),s=n(4),a=n(3),c=n(5),l=n(1),u=n(23),d=n(57),h=n(200),p=n(16);let f=class extends h.LanguageServerAnalysisOptionsBase{constructor(e,t,n,r,i,o,s){super(t,i),this.context=e,this.configuration=n,this.workspace=r,this.pathUtils=o,this.languageServerFolderService=s,this.languageServerFolder="",this.excludedFiles=[],this.typeshedPaths=[]}async initialize(e,t){await super.initialize(e,t),this.resource=e,this.interpreter=t,this.languageServerFolder=await this.languageServerFolderService.getLanguageServerFolderName(e);const n=this.workspace.onDidChangeConfiguration(this.onSettingsChangedHandler,this);this.disposables.push(n)}getWorkspaceFolder(){return this.workspace.getWorkspaceFolder(this.resource)}getDocumentFilters(e){const t=super.getDocumentFilters(e);return e&&Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>1&&(t[0].pattern=e.uri.fsPath+"/**/*"),t}async getInitializationOptions(){const e={},t=this.interpreter;if(!t)throw Error("did not find an active interpreter");e.InterpreterPath=t.path;const n=t.version;n?e.Version=`${n.major}.${n.minor}.${n.patch}`:c.traceError("Unable to determine Python version. Analysis may be limited.");let r=[];const i=this.configuration.getSettings(this.resource);if(i.autoComplete){const e=i.autoComplete.extraPaths;e&&e.length>0&&r.push(...e)}const o=await this.getEnvPythonPath();if(""!==o){const e=o.split(this.pathUtils.delimiter).filter(e=>e.trim().length>0);r.push(...e)}return r=r.map(e=>s.normalize(e)),this.excludedFiles=this.getExcludedFiles(),this.typeshedPaths=this.getTypeshedPaths(),{interpreter:{properties:e},searchPaths:r,typeStubSearchPaths:this.typeshedPaths,cacheFolderPath:this.getCacheFolderPath(),excludeFiles:this.excludedFiles}}getExcludedFiles(){const e=["**/Lib/**","**/site-packages/**"];return this.getVsCodeExcludeSection("search.exclude",e),this.getVsCodeExcludeSection("files.exclude",e),this.getVsCodeExcludeSection("files.watcherExclude",e),this.getPythonExcludeSection(e),e}getVsCodeExcludeSection(e,t){const n=this.workspace.getConfiguration(e);n&&Object.keys(n).filter(e=>(e.indexOf("*")>=0||e.indexOf("/")>=0)&&n[e]).forEach(e=>t.push(e))}getPythonExcludeSection(e){const t=this.configuration.getSettings(this.resource),n=t&&t.linting?t.linting.ignorePatterns:void 0;n&&Array.isArray(n)&&n.filter(e=>e&&e.length>0).forEach(t=>e.push(t))}getTypeshedPaths(){const e=this.configuration.getSettings(this.resource);return e.analysis.typeshedPaths&&e.analysis.typeshedPaths.length>0?e.analysis.typeshedPaths:[s.join(this.context.extensionPath,this.languageServerFolder,"Typeshed")]}getCacheFolderPath(){const e=this.configuration.getSettings(this.resource);return e.analysis.cacheFolderPath&&e.analysis.cacheFolderPath.length>0?e.analysis.cacheFolderPath:null}async onSettingsChangedHandler(e){e&&!e.affectsConfiguration("python",this.resource)||this.onSettingsChanged()}onSettingsChanged(){this.notifyIfSettingsChanged().ignoreErrors()}async notifyIfSettingsChanged(){const e=this.getExcludedFiles();await this.notifyIfValuesHaveChanged(this.excludedFiles,e);const t=this.getTypeshedPaths();await this.notifyIfValuesHaveChanged(this.typeshedPaths,t)}async notifyIfValuesHaveChanged(e,t){if(t.length===e.length){for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return void this.didChange.fire()}else this.didChange.fire()}};r([u.debounceSync(1e3)],f.prototype,"onSettingsChanged",null),r([c.traceDecorators.verbose("Changes in python settings detected in analysis options")],f.prototype,"notifyIfSettingsChanged",null),f=r([o.injectable(),i(0,o.inject(l.IExtensionContext)),i(1,o.inject(d.IEnvironmentVariablesProvider)),i(2,o.inject(l.IConfigurationService)),i(3,o.inject(a.IWorkspaceService)),i(4,o.inject(p.ILanguageServerOutputChannel)),i(5,o.inject(l.IPathUtils)),i(6,o.inject(p.ILanguageServerFolderService))],f),t.DotNetLanguageServerAnalysisOptions=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageClientFactory=t.DotNetSimpleLanguageClientFactory=t.DotNetDownloadedLanguageClientFactory=void 0;const o=n(0),s=n(4),a=n(10),c=n(1),l=n(57),u=n(112),d=n(16);class h{constructor(e,t){this.platformData=e,this.languageServerFolderService=t}async createLanguageClient(e,t,r,i){const o=await this.languageServerFolderService.getLanguageServerFolderName(e),c=s.join(a.EXTENSION_ROOT_DIR,o,this.platformData.engineExecutableName),l={stdio:"pipe",env:i},u={run:{command:c,args:[],options:l},debug:{command:c,args:["--debug"],options:l}};return new(n(47).LanguageClient)(a.PYTHON_LANGUAGE,"Python Tools",u,r)}}t.DotNetDownloadedLanguageClientFactory=h;class p{constructor(e,t){this.platformData=e,this.languageServerFolderService=t}async createLanguageClient(e,t,r,i){const o=await this.languageServerFolderService.getLanguageServerFolderName(e),c={stdio:"pipe",env:i},l=s.join(a.EXTENSION_ROOT_DIR,o,this.platformData.engineDllName),u={run:{command:"dotnet",args:[l],options:c},debug:{command:"dotnet",args:[l,"--debug"],options:c}};return new(n(47).LanguageClient)(a.PYTHON_LANGUAGE,"Python Tools",u,r)}}t.DotNetSimpleLanguageClientFactory=p;let f=class{constructor(e,t,n,r,i,o,s){this.configurationService=e,this.envVarsProvider=t,this.environmentActivationService=n,this.platformData=r,this.languageServerFolderService=i,this.downloadedFactory=o,this.simpleFactory=s}async createLanguageClient(e,t,n){const r=this.configurationService.getSettings(e);let i;i=this.platformData&&this.languageServerFolderService?r.downloadLanguageServer?new h(this.platformData,this.languageServerFolderService):new p(this.platformData,this.languageServerFolderService):r.downloadLanguageServer?this.downloadedFactory:this.simpleFactory;const o=await this.getEnvVars(e,t);return i.createLanguageClient(e,t,n,o)}async getEnvVars(e,t){const n=await this.environmentActivationService.getActivatedEnvironmentVariables(e,t);return n&&Object.keys(n).length>0?n:this.envVarsProvider.getEnvironmentVariables(e)}};f=r([o.injectable(),i(0,o.inject(c.IConfigurationService)),i(1,o.inject(l.IEnvironmentVariablesProvider)),i(2,o.inject(u.IEnvironmentActivationService)),i(3,o.inject(d.IPlatformData)),i(4,o.inject(d.ILanguageServerFolderService)),i(5,o.unmanaged()),i(6,o.unmanaged())],f),t.DotNetLanguageClientFactory=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerCompatibilityService=void 0;const o=n(0),s=n(197),a=n(5),c=n(7),l=n(9);let u=class{constructor(e){this.dotnetCompatibility=e}async isSupported(){try{const e=await this.dotnetCompatibility.isSupported();return c.sendTelemetryEvent(l.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED,void 0,{supported:e}),e}catch(e){return a.traceError("Unable to determine whether LS is supported",e),c.sendTelemetryEvent(l.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED,void 0,{supported:!1,failureType:"UnknownError"}),!1}}};u=r([o.injectable(),i(0,o.inject(s.IDotNetCompatibilityService))],u),t.LanguageServerCompatibilityService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerExtension=void 0;const o=n(0),s=n(2),a=n(3);n(11);let c=class{constructor(e){this.commandManager=e,this._invoked=new s.EventEmitter}dispose(){this.disposable&&this.disposable.dispose()}async register(){this.disposable||(this.disposable=this.commandManager.registerCommand("python._loadLanguageServerExtension",e=>{this.loadExtensionArgs=e,this._invoked.fire()}))}get invoked(){return this._invoked.event}};c=r([o.injectable(),i(0,o.inject(a.ICommandManager))],c),t.LanguageServerExtension=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerFolderService=t.DotNetLanguageServerMinVersionKey=void 0;const o=n(0),s=n(3),a=n(8),c=n(346),l=n(16);t.DotNetLanguageServerMinVersionKey="languageServerVersion";let u=class extends c.LanguageServerFolderService{constructor(e){super(e,l.DotNetLanguageServerFolder)}getMinimalLanguageServerVersion(){let e="0.0.0";try{const n=this.serviceContainer.get(s.IApplicationEnvironment);n&&(e=n.packageJson[t.DotNetLanguageServerMinVersionKey])}catch(e){}return e}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.DotNetLanguageServerFolderService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DailyDotNetLanguageServerPackageRepository=t.BetaDotNetLanguageServerPackageRepository=t.StableDotNetLanguageServerPackageRepository=void 0;const o=n(0),s=n(8),a=n(140);let c=class extends a.StableLanguageServerPackageRepository{constructor(e){super(e,"python-language-server")}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.StableDotNetLanguageServerPackageRepository=c;let l=class extends a.BetaLanguageServerPackageRepository{constructor(e){super(e,"python-language-server")}};l=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],l),t.BetaDotNetLanguageServerPackageRepository=l;let u=class extends a.DailyLanguageServerPackageRepository{constructor(e){super(e,"python-language-server")}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.DailyDotNetLanguageServerPackageRepository=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerPackageService=t.PackageNames=void 0;const o=n(0),s=n(3),a=n(6),c=n(27),l=n(8),u=n(347),d=n(16);t.PackageNames={[d.PlatformName.Windows32Bit]:"Python-Language-Server-"+d.PlatformName.Windows32Bit,[d.PlatformName.Windows64Bit]:"Python-Language-Server-"+d.PlatformName.Windows64Bit,[d.PlatformName.Linux64Bit]:"Python-Language-Server-"+d.PlatformName.Linux64Bit,[d.PlatformName.Mac64Bit]:"Python-Language-Server-"+d.PlatformName.Mac64Bit};let h=class extends u.LanguageServerPackageService{constructor(e,t,n){super(e,t,n)}getNugetPackageName(){switch(this.platform.osType){case c.OSType.Windows:return t.PackageNames[this.platform.is64bit?d.PlatformName.Windows64Bit:d.PlatformName.Windows32Bit];case c.OSType.OSX:return t.PackageNames[d.PlatformName.Mac64Bit];default:return t.PackageNames[d.PlatformName.Linux64Bit]}}};h=r([o.injectable(),i(0,o.inject(l.IServiceContainer)),i(1,o.inject(s.IApplicationEnvironment)),i(2,o.inject(a.IPlatformService))],h),t.DotNetLanguageServerPackageService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerProxy=void 0,n(11);const o=n(0),s=n(5),a=n(1),c=n(15),l=n(23),u=n(14),d=n(141),h=n(7),p=n(9),f=n(19),g=n(202),m=n(16);let v=class{constructor(e,t,n){this.factory=e,this.testManager=t,this.configurationService=n,this.disposables=[],this.extensionLoadedArgs=new Set,this.disposed=!1,this.startupCompleted=c.createDeferred()}dispose(){for(this.languageClient&&(this.languageClient.stop().then(u.noop,e=>s.traceError("Stopping language client failed",e)),this.languageClient=void 0);this.disposables.length>0;){this.disposables.shift().dispose()}this.startupCompleted.completed&&(this.startupCompleted.reject(new Error("Disposed language server")),this.startupCompleted=c.createDeferred()),this.disposed=!0}async start(e,t,n){if(this.languageClient)await this.startupCompleted.promise;else{if(this.languageClient=await this.factory.createLanguageClient(e,t,n),this.disposables.push(this.languageClient.start()),await this.serverReady(),this.disposed)return;const r=new g.ProgressReporting(this.languageClient);this.disposables.push(r);this.configurationService.getSettings(e).downloadLanguageServer&&this.languageClient.onTelemetry(e=>{var t;const n=e.EventName||p.EventName.PYTHON_LANGUAGE_SERVER_TELEMETRY,r={...e.Properties,method:null===(t=e.Properties.method)||void 0===t?void 0:t.replace(/\//g,".")};h.sendTelemetryEvent(n,e.Measurements,r)}),await this.registerTestServices()}}loadExtension(e){this.extensionLoadedArgs.has(e||"")||(this.extensionLoadedArgs.add(e||""),this.startupCompleted.promise.then(()=>this.languageClient.sendRequest("python/loadExtension",e).then(u.noop,e=>s.traceError("Request python/loadExtension failed",e))).ignoreErrors())}async serverReady(){for(;this.languageClient&&!this.languageClient.initializeResult;)await c.sleep(100);this.languageClient&&await this.languageClient.onReady(),this.startupCompleted.resolve()}async registerTestServices(){if(!this.languageClient)throw new Error("languageClient not initialized");await this.testManager.activate(new d.LanguageServerSymbolProvider(this.languageClient))}};r([s.traceDecorators.verbose("Stopping language server")],v.prototype,"dispose",null),r([s.traceDecorators.error("Failed to start language server"),h.captureTelemetry(p.EventName.PYTHON_LANGUAGE_SERVER_ENABLED,void 0,!0)],v.prototype,"start",null),r([s.traceDecorators.error("Failed to load language server extension")],v.prototype,"loadExtension",null),r([h.captureTelemetry(p.EventName.PYTHON_LANGUAGE_SERVER_READY,void 0,!0)],v.prototype,"serverReady",null),r([l.swallowExceptions("Activating Unit Tests Manager for Microsoft Python Language Server")],v.prototype,"registerTestServices",null),v=r([o.injectable(),i(0,o.inject(m.ILanguageClientFactory)),i(1,o.inject(f.ITestManagementService)),i(2,o.inject(a.IConfigurationService))],v),t.DotNetLanguageServerProxy=v},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetLanguageServerManager=void 0,n(11);const s=n(0),a=n(3),c=n(5),l=n(23),u=n(8),d=n(7),h=n(9),p=n(139),f=n(203),g=n(16);let m=r=class{constructor(e,t,n,r,i){this.serviceContainer=e,this.analysisOptions=t,this.lsExtension=n,this.folderService=r,this.disposables=[],this.connected=!1,this.disposables.push(i.registerCommand(p.Commands.RestartLS,()=>{this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.languageProxy&&this.languageProxy.dispose(),this.disposables.forEach(e=>e.dispose())}get languageProxy(){return this.languageServerProxy}async start(e,t){if(this.languageProxy)throw new Error("Language server already started");this.registerCommandHandler(),this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);const n=await this.folderService.getCurrentLanguageServerDirectory();this.lsVersion=null==n?void 0:n.version.format(),await this.analysisOptions.initialize(e,t),await this.startLanguageServer()}connect(){var e;this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect()}disconnect(){var e;this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect()}registerCommandHandler(){this.lsExtension.invoked(this.loadExtensionIfNecessary,this,this.disposables)}loadExtensionIfNecessary(){this.languageProxy&&this.lsExtension.loadExtensionArgs&&this.languageProxy.loadExtension(this.lsExtension.loadExtensionArgs)}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){this.languageProxy&&this.languageProxy.dispose(),await this.startLanguageServer()}async startLanguageServer(){this.languageServerProxy=this.serviceContainer.get(g.ILanguageServerProxy);const e=await this.analysisOptions.getAnalysisOptions();e.middleware=this.middleware=new f.LanguageClientMiddleware(this.serviceContainer,g.LanguageServerType.Microsoft,()=>{var e;return null===(e=this.languageServerProxy)||void 0===e?void 0:e.languageClient},this.lsVersion),this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e),this.loadExtensionIfNecessary()}};i([c.traceDecorators.error("Failed to start language server")],m.prototype,"start",null),i([l.debounceSync(1e3)],m.prototype,"restartLanguageServerDebounced",null),i([c.traceDecorators.error("Failed to restart language server"),c.traceDecorators.verbose("Restarting language server")],m.prototype,"restartLanguageServer",null),i([d.captureTelemetry(h.EventName.PYTHON_LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,r.versionTelemetryProps),c.traceDecorators.verbose("Starting language server")],m.prototype,"startLanguageServer",null),m=r=i([s.injectable(),o(0,s.inject(u.IServiceContainer)),o(1,s.inject(g.ILanguageServerAnalysisOptions)),o(1,s.named(g.LanguageServerType.Microsoft)),o(2,s.inject(g.ILanguageServerExtension)),o(3,s.inject(g.ILanguageServerFolderService)),o(4,s.inject(a.ICommandManager))],m),t.DotNetLanguageServerManager=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerOutputChannel=void 0;const o=n(0),s=n(3);n(11);const a=n(13);let c=class{constructor(e,t){this.appShell=e,this.commandManager=t,this.registered=!1}get channel(){return this.output||(this.output=this.appShell.createOutputChannel(a.OutputChannelNames.languageServer()),this.registerCommand().ignoreErrors()),this.output}async registerCommand(){this.registered||(this.registered=!0,await this.commandManager.executeCommand("setContext","python.hasLanguageServerOutputChannel",!0),this.commandManager.registerCommand("python.viewLanguageServerOutput",()=>this.output.show(!0)))}};c=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(s.ICommandManager))],c),t.LanguageServerOutputChannel=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformData=t.PlatformLSExecutables=t.PlatformName=void 0;const o=n(0),s=n(6);var a,c;!function(e){e.Windows32Bit="win-x86",e.Windows64Bit="win-x64",e.Mac64Bit="osx-x64",e.Linux64Bit="linux-x64"}(a=t.PlatformName||(t.PlatformName={})),function(e){e.Windows="Microsoft.Python.LanguageServer.exe",e.MacOS="Microsoft.Python.LanguageServer",e.Linux="Microsoft.Python.LanguageServer"}(c=t.PlatformLSExecutables||(t.PlatformLSExecutables={}));let l=class{constructor(e){this.platform=e}get platformName(){if(this.platform.isWindows)return this.platform.is64bit?a.Windows64Bit:a.Windows32Bit;if(this.platform.isMac)return a.Mac64Bit;if(this.platform.isLinux){if(!this.platform.is64bit)throw new Error("Microsoft Python Language Server does not support 32-bit Linux.");return a.Linux64Bit}throw new Error("Unknown OS platform.")}get engineDllName(){return"Microsoft.Python.LanguageServer.dll"}get engineExecutableName(){return this.platform.isWindows?c.Windows:this.platform.isLinux?c.Linux:this.platform.isMac?c.MacOS:"unknown-platform"}};l=r([o.injectable(),i(0,o.inject(s.IPlatformService))],l),t.PlatformData=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerActivator=void 0;const o=n(0),s=n(201),a=n(47),c=n(3),l=n(10),u=n(6),d=n(1),h=n(13),p=n(209),f=n(324),g=n(16);let m=class extends p.LanguageServerActivatorBase{constructor(e,t,n,r,i,o,s){super(e,t,n,r),this.extensions=i,this.appShell=o,this.appEnv=s}async ensureLanguageServerIsAvailable(e){if(!1!==this.configurationService.getSettings(e).downloadLanguageServer&&!this.extensions.getExtension(l.PYLANCE_EXTENSION_ID))throw await f.promptForPylanceInstall(this.appShell,this.appEnv),new Error(h.Pylance.pylanceNotInstalledMessage())}resolveCompletionItem(e,t){return this.handleResolveCompletionItem(e,t)}async handleResolveCompletionItem(e,t){const n=this.getLanguageClient();if(n){const r=new s.default(e.label);Object.assign(r,e);const i=n.code2ProtocolConverter.asCompletionItem(r),o=await n.sendRequest(a.CompletionResolveRequest.type,i,t);if(o)return n.protocol2CodeConverter.asCompletionItem(o)}}};m=r([o.injectable(),i(0,o.inject(g.ILanguageServerManager)),i(1,o.inject(c.IWorkspaceService)),i(2,o.inject(u.IFileSystem)),i(3,o.inject(d.IConfigurationService)),i(4,o.inject(d.IExtensions)),i(5,o.inject(c.IApplicationShell)),i(6,o.inject(c.IApplicationEnvironment))],m),t.NodeLanguageServerActivator=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerAnalysisOptions=void 0;const o=n(0),s=n(57),a=n(200),c=n(16);let l=class extends a.LanguageServerAnalysisOptionsBase{constructor(e,t){super(e,t)}};l=r([o.injectable(),i(0,o.inject(s.IEnvironmentVariablesProvider)),i(1,o.inject(c.ILanguageServerOutputChannel))],l),t.NodeLanguageServerAnalysisOptions=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageClientFactory=void 0;const o=n(0),s=n(4),a=n(47),c=n(10),l=n(6),u=n(16);let d=class{constructor(e,t){this.fs=e,this.languageServerFolderService=t}async createLanguageClient(e,t,r){var i;const o=(null===(i=r.connectionOptions)||void 0===i?void 0:i.cancellationStrategy).getCommandLineArguments(),l=await this.languageServerFolderService.getLanguageServerFolderName(e),u=s.isAbsolute(l)?l:s.join(c.EXTENSION_ROOT_DIR,l),d=s.join(u,"server.bundle.js"),h=s.join(u,"server.js"),p=await this.fs.fileExists(h)?h:d,f={run:{module:d,transport:a.TransportKind.ipc,args:o},debug:{module:p,transport:a.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=6600"]},args:o}};return new(n(47).LanguageClient)(c.PYTHON_LANGUAGE,"Python Tools",f,r)}};d=r([o.injectable(),i(0,o.inject(l.IFileSystem)),i(1,o.inject(u.ILanguageServerFolderService))],d),t.NodeLanguageClientFactory=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerFolderService=void 0;const o=n(67),s=n(0),a=n(4),c=n(38),l=n(3),u=n(10),d=n(1),h=n(8),p=n(346),f=n(16);class g extends p.LanguageServerFolderService{constructor(e){super(e,f.NodeLanguageServerFolder)}getMinimalLanguageServerVersion(){return"0.0.0"}}let m=class{constructor(e,t,n,r){this.configService=t,this.workspaceService=n,this.extensions=r,this.fallback=new g(e)}async skipDownload(){return void 0!==await this.lsExtensionApi()}async getLanguageServerFolderName(e){const t=await this.languageServerFolder();return t?(o.ok(a.isAbsolute(t.path)),t.path):this.fallback.getLanguageServerFolderName(e)}async getLatestLanguageServerVersion(e){if(!await this.lsExtensionApi())return this.fallback.getLatestLanguageServerVersion(e)}async getCurrentLanguageServerDirectory(){const e=await this.languageServerFolder();return e?(o.ok(a.isAbsolute(e.path)),{path:e.path,version:new c.SemVer(e.version)}):this.fallback.getCurrentLanguageServerDirectory()}async languageServerFolder(){const e=await this.lsExtensionApi();if(null==e?void 0:e.languageServerFolder)return e.languageServerFolder()}async lsExtensionApi(){if(!this.configService.getSettings().downloadLanguageServer||this.workspaceService.getConfiguration("python").get("packageName"))return;const e=this.extensions.getExtension(u.PYLANCE_EXTENSION_ID);return e?e.isActive?e.exports:e.activate():void 0}};m=r([s.injectable(),i(0,s.inject(h.IServiceContainer)),i(1,s.inject(d.IConfigurationService)),i(2,s.inject(l.IWorkspaceService)),i(3,s.inject(d.IExtensions))],m),t.NodeLanguageServerFolderService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DailyNodeLanguageServerPackageRepository=t.BetaNodeLanguageServerPackageRepository=t.StableNodeLanguageServerPackageRepository=void 0;const o=n(0),s=n(3),a=n(8),c=n(140);let l=class extends c.StableLanguageServerPackageRepository{constructor(e){const t=e.get(s.IWorkspaceService).getConfiguration("python");super(e,t.get("blobName")||"")}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l),t.StableNodeLanguageServerPackageRepository=l;let u=class extends c.BetaLanguageServerPackageRepository{constructor(e){const t=e.get(s.IWorkspaceService).getConfiguration("python");super(e,t.get("blobName")||"")}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.BetaNodeLanguageServerPackageRepository=u;let d=class extends c.DailyLanguageServerPackageRepository{constructor(e){const t=e.get(s.IWorkspaceService).getConfiguration("python");super(e,t.get("blobName")||"")}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.DailyNodeLanguageServerPackageRepository=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerPackageService=void 0;const o=n(0),s=n(3),a=n(6),c=n(8),l=n(347);let u=class extends l.LanguageServerPackageService{constructor(e,t,n){super(e,t,n)}getNugetPackageName(){return this.serviceContainer.get(s.IWorkspaceService).getConfiguration("python").get("packageName")||""}};u=r([o.injectable(),i(0,o.inject(c.IServiceContainer)),i(1,o.inject(s.IApplicationEnvironment)),i(2,o.inject(a.IPlatformService))],u),t.NodeLanguageServerPackageService=u},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerProxy=void 0,n(11);const s=n(0),a=n(47),c=n(24),l=n(5),u=n(1),d=n(15),h=n(23),p=n(14),f=n(141),g=n(7),m=n(9),v=n(19),y=n(338),b=n(202),S=n(16);let E=r=class{constructor(e,t,n,r,i,o){this.factory=e,this.testManager=t,this.configurationService=n,this.folderService=r,this.experiments=i,this.interpreterPathService=o,this.disposables=[],this.disposed=!1,this.startupCompleted=d.createDeferred()}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){for(this.languageClient&&(this.languageClient.stop().then(p.noop,e=>l.traceError("Stopping language client failed",e)),this.languageClient=void 0),this.cancellationStrategy&&(this.cancellationStrategy.dispose(),this.cancellationStrategy=void 0);this.disposables.length>0;){this.disposables.shift().dispose()}this.startupCompleted.completed&&(this.startupCompleted.reject(new Error("Disposed language server")),this.startupCompleted=d.createDeferred()),this.disposed=!0}async start(e,t,n){if(this.languageClient)await this.startupCompleted.promise;else{const r=await this.folderService.getCurrentLanguageServerDirectory();if(this.lsVersion=null==r?void 0:r.version.format(),this.cancellationStrategy=new y.FileBasedCancellationStrategy,n.connectionOptions={cancellationStrategy:this.cancellationStrategy},this.languageClient=await this.factory.createLanguageClient(e,t,n),this.disposables.push(this.languageClient.start()),await this.serverReady(),this.disposed)return;const i=new b.ProgressReporting(this.languageClient);this.disposables.push(i),this.experiments.inExperiment(c.DeprecatePythonPath.experiment)&&this.disposables.push(this.interpreterPathService.onDidChange(()=>{this.languageClient.sendNotification(a.DidChangeConfigurationNotification.type,{settings:null})}));this.configurationService.getSettings(e).downloadLanguageServer&&this.languageClient.onTelemetry(e=>{var t;const n=e.EventName||m.EventName.LANGUAGE_SERVER_TELEMETRY,r={...e.Properties,method:null===(t=e.Properties.method)||void 0===t?void 0:t.replace(/\//g,".")};g.sendTelemetryEvent(n,e.Measurements,r,e.Exception)}),await this.registerTestServices()}}loadExtension(e){}async serverReady(){for(;this.languageClient&&!this.languageClient.initializeResult;)await d.sleep(100);this.languageClient&&await this.languageClient.onReady(),this.startupCompleted.resolve()}async registerTestServices(){if(!this.languageClient)throw new Error("languageClient not initialized");await this.testManager.activate(new f.LanguageServerSymbolProvider(this.languageClient))}};i([l.traceDecorators.verbose("Stopping language server")],E.prototype,"dispose",null),i([l.traceDecorators.error("Failed to start language server"),g.captureTelemetry(m.EventName.LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,r.versionTelemetryProps)],E.prototype,"start",null),i([g.captureTelemetry(m.EventName.LANGUAGE_SERVER_READY,void 0,!0,void 0,r.versionTelemetryProps)],E.prototype,"serverReady",null),i([h.swallowExceptions("Activating Unit Tests Manager for Pylance language server")],E.prototype,"registerTestServices",null),E=r=i([s.injectable(),o(0,s.inject(S.ILanguageClientFactory)),o(1,s.inject(v.ITestManagementService)),o(2,s.inject(u.IConfigurationService)),o(3,s.inject(S.ILanguageServerFolderService)),o(4,s.inject(u.IExperimentsManager)),o(5,s.inject(u.IInterpreterPathService))],E),t.NodeLanguageServerProxy=E},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerManager=void 0,n(11);const s=n(0),a=n(3),c=n(5),l=n(23),u=n(8),d=n(7),h=n(9),p=n(139),f=n(203),g=n(16);let m=r=class{constructor(e,t,n,r){this.serviceContainer=e,this.analysisOptions=t,this.folderService=n,this.disposables=[],this.connected=!1,this.disposables.push(r.registerCommand(p.Commands.RestartLS,()=>{this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.languageProxy&&this.languageProxy.dispose(),this.disposables.forEach(e=>e.dispose())}get languageProxy(){return this.languageServerProxy}async start(e,t){if(this.languageProxy)throw new Error("Language server already started");this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);const n=await this.folderService.getCurrentLanguageServerDirectory();this.lsVersion=null==n?void 0:n.version.format(),await this.analysisOptions.initialize(e,t),await this.startLanguageServer()}connect(){var e;this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect()}disconnect(){var e;this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect()}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){this.languageProxy&&this.languageProxy.dispose(),await this.startLanguageServer()}async startLanguageServer(){this.languageServerProxy=this.serviceContainer.get(g.ILanguageServerProxy);const e=await this.analysisOptions.getAnalysisOptions();e.middleware=this.middleware=new f.LanguageClientMiddleware(this.serviceContainer,g.LanguageServerType.Node,()=>{var e;return null===(e=this.languageServerProxy)||void 0===e?void 0:e.languageClient},this.lsVersion),this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}};i([c.traceDecorators.error("Failed to start language server")],m.prototype,"start",null),i([l.debounceSync(1e3)],m.prototype,"restartLanguageServerDebounced",null),i([c.traceDecorators.error("Failed to restart language server"),c.traceDecorators.verbose("Restarting language server")],m.prototype,"restartLanguageServer",null),i([d.captureTelemetry(h.EventName.LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,r.versionTelemetryProps),c.traceDecorators.verbose("Starting language server")],m.prototype,"startLanguageServer",null),m=r=i([s.injectable(),o(0,s.inject(u.IServiceContainer)),o(1,s.inject(g.ILanguageServerAnalysisOptions)),o(1,s.named(g.LanguageServerType.Node)),o(2,s.inject(g.ILanguageServerFolderService)),o(3,s.inject(a.ICommandManager))],m),t.NodeLanguageServerManager=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.NoLanguageServerExtensionActivator=void 0;const o=n(0),s=n(10),a=n(1);let c=class{constructor(e){this.proposePylancePopup=e}async start(e,t){s.isTestExecution()||this.proposePylancePopup.showBanner().ignoreErrors()}dispose(){}activate(){}deactivate(){}provideRenameEdits(e,t,n,r){return null}provideDefinition(e,t,n){return null}provideHover(e,t,n){return null}provideReferences(e,t,n,r){return null}provideCompletionItems(e,t,n,r){return null}provideCodeLenses(e,t){return null}provideDocumentSymbols(e,t){return null}provideSignatureHelp(e,t,n,r){return null}};c=r([o.injectable(),i(0,o.inject(a.IPythonExtensionBanner)),i(0,o.named(a.BANNER_NAME_PROPOSE_LS))],c),t.NoLanguageServerExtensionActivator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(772),o=n(786),s=n(34),a=n(787);t.registerTypes=function(e,t){e.addSingleton(s.ISourceMapSupportService,o.SourceMapSupportService),i.registerTypes(e,t),e.add(r.IExtensionSingleActivationService,a.JoinMailingListPrompt)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(198),o=n(773),s=n(774),a=n(775),c=n(348),l=n(323),u=n(776),d=n(349),h=n(778),p=n(779),f=n(780),g=n(781),m=n(70),v=n(785),y=n(63),b=n(34);t.registerTypes=function(e,t){e.addSingleton(b.IDiagnosticFilterService,v.DiagnosticFilterService),e.addSingleton(b.IDiagnosticHandlerService,y.DiagnosticCommandPromptHandlerService,y.DiagnosticCommandPromptHandlerServiceId),e.addSingleton(b.IDiagnosticsService,s.EnvironmentPathVariableDiagnosticsService,s.EnvironmentPathVariableDiagnosticsServiceId),e.addSingleton(b.IDiagnosticsService,a.InvalidLaunchJsonDebuggerService,a.InvalidLaunchJsonDebuggerServiceId),e.addSingleton(b.IDiagnosticsService,h.InvalidPythonInterpreterService,h.InvalidPythonInterpreterServiceId),e.addSingleton(b.IDiagnosticsService,c.InvalidPythonPathInDebuggerService,c.InvalidPythonPathInDebuggerServiceId),e.addSingleton(b.IDiagnosticsService,d.PowerShellActivationHackDiagnosticsService,d.PowerShellActivationHackDiagnosticsServiceId),e.addSingleton(b.IDiagnosticsService,u.InvalidMacPythonInterpreterService,u.InvalidMacPythonInterpreterServiceId),e.addSingleton(b.IDiagnosticsService,p.PythonPathDeprecatedDiagnosticService,p.PythonPathDeprecatedDiagnosticServiceId),e.addSingleton(b.IDiagnosticsService,f.UpgradeCodeRunnerDiagnosticService,f.UpgradeCodeRunnerDiagnosticServiceId),e.addSingleton(m.IDiagnosticsCommandFactory,g.DiagnosticsCommandFactory),e.addSingleton(i.IApplicationDiagnostics,o.ApplicationDiagnostics),t===r.LanguageServerType.Microsoft&&e.addSingleton(b.IDiagnosticsService,l.LSNotSupportedDiagnosticService,l.LSNotSupportedDiagnosticServiceId)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDiagnostics=void 0;const o=n(0),s=n(2),a=n(10),c=n(5),l=n(1),u=n(8),d=n(34);let h=class{constructor(e,t){this.serviceContainer=e,this.outputChannel=t}register(){this.serviceContainer.get(d.ISourceMapSupportService).register()}async performPreStartupHealthCheck(e){if(a.isTestExecution())return;const t=this.serviceContainer.getAll(d.IDiagnosticsService);await this.runDiagnostics(t.filter(e=>!e.runInBackground),e),this.runDiagnostics(t.filter(e=>e.runInBackground),e).ignoreErrors()}async runDiagnostics(e,t){await Promise.all(e.map(async e=>{const n=await e.diagnose(t);n.length>0&&(this.log(n),await e.handle(n))}))}log(e){e.forEach(e=>{const t=`Diagnostic Code: ${e.code}, Message: ${e.message}`;switch(e.severity){case s.DiagnosticSeverity.Error:c.traceError(t),this.outputChannel.appendLine(t);break;case s.DiagnosticSeverity.Warning:c.traceWarning(t),this.outputChannel.appendLine(t);break;default:c.traceInfo(t)}})}};h=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(l.IOutputChannel)),i(1,o.named(a.STANDARD_OUTPUT_CHANNEL))],h),t.ApplicationDiagnostics=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentPathVariableDiagnosticsService=t.EnvironmentPathVariableDiagnosticsServiceId=t.InvalidEnvironmentPathVariableDiagnostic=void 0;const o=n(0),s=n(2),a=n(3);n(11);const c=n(6),l=n(1),u=n(8),d=n(69),h=n(70),p=n(71),f=n(63),g=n(34),m="The environment variable '{0}' seems to have some paths containing the '\"' character. The existence of such a character is known to have caused the {1} extension to not load. If the extension fails to load please modify your paths to remove this '\"' character.";class v extends d.BaseDiagnostic{constructor(e,t){super(p.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic,e,s.DiagnosticSeverity.Warning,g.DiagnosticScope.Global,t)}}t.InvalidEnvironmentPathVariableDiagnostic=v,t.EnvironmentPathVariableDiagnosticsServiceId="EnvironmentPathVariableDiagnosticsServiceId";let y=class extends d.BaseDiagnosticsService{constructor(e,t){super([p.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic],e,t,!0),this.platform=this.serviceContainer.get(c.IPlatformService),this.messageService=e.get(g.IDiagnosticHandlerService,f.DiagnosticCommandPromptHandlerServiceId)}async diagnose(e){if(this.platform.isWindows&&this.doesPathVariableHaveInvalidEntries()){const t=this.serviceContainer.get(a.IApplicationEnvironment),n=m.format(this.platform.pathVariableName,t.extensionName);return[new v(n,e)]}return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(h.IDiagnosticsCommandFactory),r=[{prompt:"Ignore"},{prompt:"Always Ignore",command:n.createCommand(t,{type:"ignore",options:g.DiagnosticScope.Global})},{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/Niq35h"})}];await this.messageService.handle(t,{commandPrompts:r})}doesPathVariableHaveInvalidEntries(){const e=this.serviceContainer.get(l.ICurrentProcess).env[this.platform.pathVariableName],t=this.serviceContainer.get(l.IPathUtils).delimiter;return(e||"").split(t).filter(e=>e.indexOf('"')>=0).length>0}};y=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(l.IDisposableRegistry))],y),t.EnvironmentPathVariableDiagnosticsService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidLaunchJsonDebuggerService=t.InvalidLaunchJsonDebuggerServiceId=t.InvalidLaunchJsonDebuggerDiagnostic=void 0;const o=n(0),s=n(4),a=n(2),c=n(3);n(11);const l=n(6),u=n(1),d=n(13),h=n(8),p=n(69),f=n(71),g=n(63),m=n(34),v={[f.DiagnosticCodes.InvalidDebuggerTypeDiagnostic]:d.Diagnostics.invalidDebuggerTypeDiagnostic(),[f.DiagnosticCodes.JustMyCodeDiagnostic]:d.Diagnostics.justMyCodeDiagnostic(),[f.DiagnosticCodes.ConsoleTypeDiagnostic]:d.Diagnostics.consoleTypeDiagnostic(),[f.DiagnosticCodes.ConfigPythonPathDiagnostic]:""};class y extends p.BaseDiagnostic{constructor(e,t,n=!0){super(e,v[e],a.DiagnosticSeverity.Error,m.DiagnosticScope.WorkspaceFolder,t,"always",n)}}t.InvalidLaunchJsonDebuggerDiagnostic=y,t.InvalidLaunchJsonDebuggerServiceId="InvalidLaunchJsonDebuggerServiceId";let b=class extends p.BaseDiagnosticsService{constructor(e,t,n,r,i){super([f.DiagnosticCodes.InvalidDebuggerTypeDiagnostic,f.DiagnosticCodes.JustMyCodeDiagnostic,f.DiagnosticCodes.ConsoleTypeDiagnostic,f.DiagnosticCodes.ConfigPythonPathDiagnostic],e,n,!0),this.fs=t,this.workspaceService=r,this.messageService=i}async diagnose(e){if(!this.workspaceService.hasWorkspaceFolders)return[];const t=e?this.workspaceService.getWorkspaceFolder(e):this.workspaceService.workspaceFolders[0];return this.diagnoseWorkspace(t,e)}async onHandle(e){e.forEach(e=>this.handleDiagnostic(e))}async fixLaunchJson(e){this.workspaceService.hasWorkspaceFolders&&await Promise.all(this.workspaceService.workspaceFolders.map(t=>this.fixLaunchJsonInWorkspace(e,t)))}async diagnoseWorkspace(e,t){const n=this.getLaunchJsonFile(e);if(!await this.fs.fileExists(n))return[];const r=await this.fs.readFile(n),i=[];return r.indexOf('"pythonExperimental"')>0&&i.push(new y(f.DiagnosticCodes.InvalidDebuggerTypeDiagnostic,t)),r.indexOf('"debugStdLib"')>0&&i.push(new y(f.DiagnosticCodes.JustMyCodeDiagnostic,t)),r.indexOf('"console": "none"')>0&&i.push(new y(f.DiagnosticCodes.ConsoleTypeDiagnostic,t)),(r.indexOf('"pythonPath":')>0||r.indexOf("{config:python.pythonPath}")>0||r.indexOf("{config:python.interpreterPath}")>0)&&i.push(new y(f.DiagnosticCodes.ConfigPythonPathDiagnostic,t,!1)),i}async handleDiagnostic(e){if(!this.canHandle(e))return;if(!e.shouldShowPrompt)return this.fixLaunchJson(e.code);const t=[{prompt:d.Diagnostics.yesUpdateLaunch(),command:{diagnostic:e,invoke:async()=>{await this.fixLaunchJson(e.code)}}},{prompt:d.Common.noIWillDoItLater()}];await this.messageService.handle(e,{commandPrompts:t})}async fixLaunchJsonInWorkspace(e,t){if(0===(await this.diagnoseWorkspace(t,void 0)).length)return;const n=this.getLaunchJsonFile(t);let r=await this.fs.readFile(n);switch(e){case f.DiagnosticCodes.InvalidDebuggerTypeDiagnostic:r=this.findAndReplace(r,'"pythonExperimental"','"python"'),r=this.findAndReplace(r,'"Python Experimental:','"Python:');break;case f.DiagnosticCodes.JustMyCodeDiagnostic:r=this.findAndReplace(r,'"debugStdLib": false','"justMyCode": true'),r=this.findAndReplace(r,'"debugStdLib": true','"justMyCode": false');break;case f.DiagnosticCodes.ConsoleTypeDiagnostic:r=this.findAndReplace(r,'"console": "none"','"console": "internalConsole"');break;case f.DiagnosticCodes.ConfigPythonPathDiagnostic:r=this.findAndReplace(r,'"pythonPath":','"python":'),r=this.findAndReplace(r,"{config:python.pythonPath}","{command:python.interpreterPath}"),r=this.findAndReplace(r,"{config:python.interpreterPath}","{command:python.interpreterPath}");break;default:return}await this.fs.writeFile(n,r)}findAndReplace(e,t,n){const r=new RegExp(t,"g");return e.replace(r,n)}getLaunchJsonFile(e){return s.join(e.uri.fsPath,".vscode","launch.json")}};b=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.inject(l.IFileSystem)),i(2,o.inject(u.IDisposableRegistry)),i(3,o.inject(c.IWorkspaceService)),i(4,o.inject(m.IDiagnosticHandlerService)),i(4,o.named(g.DiagnosticCommandPromptHandlerServiceId))],b),t.InvalidLaunchJsonDebuggerService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidMacPythonInterpreterService=t.InvalidMacPythonInterpreterServiceId=t.InvalidMacPythonInterpreterDiagnostic=void 0;const o=n(0),s=n(2),a=n(3),c=n(24);n(11);const l=n(6),u=n(1),d=n(12),h=n(8),p=n(28),f=n(69),g=n(70),m=n(71),v=n(63),y=n(34),b={[m.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic]:"You have selected the macOS system install of Python, which is not recommended for use with the Python extension. Some functionality will be limited, please select a different interpreter.",[m.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic]:"The macOS system install of Python is not recommended, some functionality in the extension will be limited. Install another version of Python for the best experience."};class S extends f.BaseDiagnostic{constructor(e,t){super(e,b[e],s.DiagnosticSeverity.Error,y.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidMacPythonInterpreterDiagnostic=S,t.InvalidMacPythonInterpreterServiceId="InvalidMacPythonInterpreterServiceId";let E=class extends f.BaseDiagnosticsService{constructor(e,t,n,r,i){super([m.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic,m.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic],e,n,!0),this.interpreterService=t,this.platform=r,this.helper=i,this.changeThrottleTimeout=1e3,this.addPythonPathChangedHandler()}dispose(){this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0)}async diagnose(e){if(!this.platform.isMac)return[];const t=this.serviceContainer.get(u.IConfigurationService).getSettings(e);if(!0===t.disableInstallationChecks)return[];if(!await this.interpreterService.hasInterpreters)return[];const n=await this.interpreterService.getActiveInterpreter(e);if(!n)return[];if(!await this.helper.isMacDefaultPythonPath(t.pythonPath))return[];if(!n||n.envType!==p.EnvironmentType.Unknown)return[];const r=await this.interpreterService.getInterpreters(e);for(const t of r)if(!await this.helper.isMacDefaultPythonPath(t.path))return[new S(m.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic,e)];return[new S(m.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic,e)]}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(y.IDiagnosticHandlerService,v.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map(async e=>{const n=await this.canHandle(e),r=await this.filterService.shouldIgnoreDiagnostic(e.code);if(!n||r)return;const i=this.getCommandPrompts(e);return t.handle(e,{commandPrompts:i,message:e.message})}))}addPythonPathChangedHandler(){const e=this.serviceContainer.get(a.IWorkspaceService),t=this.serviceContainer.get(u.IDisposableRegistry),n=this.serviceContainer.get(u.IInterpreterPathService),r=this.serviceContainer.get(u.IExperimentsManager);r.inExperiment(c.DeprecatePythonPath.experiment)&&t.push(n.onDidChange(e=>this.onDidChangeConfiguration(void 0,e))),r.sendTelemetryIfInExperiment(c.DeprecatePythonPath.control),t.push(e.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this)))}async onDidChangeConfiguration(e,t){let n;if(e){const t=this.serviceContainer.get(a.IWorkspaceService),r=t.hasWorkspaceFolders?t.workspaceFolders.map(e=>e.uri):[void 0],i=r.findIndex(t=>e.affectsConfiguration("python.pythonPath",t));if(-1===i)return;n=r[i]}else{if(!t)throw new Error("One of `interpreterConfigurationScope` or `event` should be defined when calling `onDidChangeConfiguration`.");n=t.uri}this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0),this.timeOut=setTimeout(()=>{this.timeOut=void 0,this.diagnose(n).then(e=>this.handle(e)).ignoreErrors()},this.changeThrottleTimeout)}getCommandPrompts(e){const t=this.serviceContainer.get(g.IDiagnosticsCommandFactory);switch(e.code){case m.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic:return[{prompt:"Select Python Interpreter",command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})},{prompt:"Do not show again",command:t.createCommand(e,{type:"ignore",options:y.DiagnosticScope.Global})}];case m.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic:return[{prompt:"Learn more",command:t.createCommand(e,{type:"launch",options:"https://code.visualstudio.com/docs/python/python-tutorial#_prerequisites"})},{prompt:"Download",command:t.createCommand(e,{type:"launch",options:"https://www.python.org/downloads"})},{prompt:"Do not show again",command:t.createCommand(e,{type:"ignore",options:y.DiagnosticScope.Global})}];default:throw new Error("Invalid diagnostic for 'InvalidMacPythonInterpreterService'")}}};E=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.inject(d.IInterpreterService)),i(2,o.inject(u.IDisposableRegistry)),i(3,o.inject(l.IPlatformService)),i(4,o.inject(d.IInterpreterHelper))],E),t.InvalidMacPythonInterpreterService=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCommandPromptAsDefaultShell=t.getCommandPromptLocation=void 0;const r=n(4),i=n(2);function o(e){const t=e.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),n=r.join(e.env.windir,t?"Sysnative":"System32");return r.join(n,"cmd.exe")}t.getCommandPromptLocation=o,t.useCommandPromptAsDefaultShell=async function(e,t){const n=o(e);await t.updateSectionSetting("terminal","integrated.shell.windows",n,void 0,i.ConfigurationTarget.Global)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonInterpreterService=t.InvalidPythonInterpreterServiceId=t.InvalidPythonInterpreterDiagnostic=void 0;const o=n(0),s=n(2);n(11);const a=n(1),c=n(12),l=n(8),u=n(7),d=n(9),h=n(69),p=n(70),f=n(71),g=n(63),m=n(34),v={[f.DiagnosticCodes.NoPythonInterpretersDiagnostic]:"Python is not installed. Please download and install Python before using the extension.",[f.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic]:"No Python interpreter is selected. You need to select a Python interpreter to enable features such as IntelliSense, linting, and debugging."};class y extends h.BaseDiagnostic{constructor(e,t){super(e,v[e],s.DiagnosticSeverity.Error,m.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidPythonInterpreterDiagnostic=y,t.InvalidPythonInterpreterServiceId="InvalidPythonInterpreterServiceId";let b=class extends h.BaseDiagnosticsService{constructor(e,t){super([f.DiagnosticCodes.NoPythonInterpretersDiagnostic,f.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic],e,t,!1)}async diagnose(e){if(!0===this.serviceContainer.get(a.IConfigurationService).getSettings(e).disableInstallationChecks)return[];const t=this.serviceContainer.get(c.IInterpreterService);if(!(await t.hasInterpreters||(await t.getInterpreters(e)).length>0))return[new y(f.DiagnosticCodes.NoPythonInterpretersDiagnostic,e)];return await t.getActiveInterpreter(e)?[]:[new y(f.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic,e)]}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(m.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map(async e=>{if(!this.canHandle(e))return;const n=this.getCommandPrompts(e),r=this.getOnCloseHandler(e);return t.handle(e,{commandPrompts:n,message:e.message,onClose:r})}))}getCommandPrompts(e){const t=this.serviceContainer.get(p.IDiagnosticsCommandFactory);switch(e.code){case f.DiagnosticCodes.NoPythonInterpretersDiagnostic:return[{prompt:"Download",command:t.createCommand(e,{type:"launch",options:"https://www.python.org/downloads"})}];case f.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic:return[{prompt:"Select Python Interpreter",command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];default:throw new Error("Invalid diagnostic for 'InvalidPythonInterpreterService'")}}getOnCloseHandler(e){if(e.code===f.DiagnosticCodes.NoPythonInterpretersDiagnostic)return e=>{u.sendTelemetryEvent(d.EventName.PYTHON_NOT_INSTALLED_PROMPT,void 0,{selection:e?"Download":"Ignore"})}}};b=r([o.injectable(),i(0,o.inject(l.IServiceContainer)),i(1,o.inject(a.IDisposableRegistry))],b),t.InvalidPythonInterpreterService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathDeprecatedDiagnosticService=t.PythonPathDeprecatedDiagnosticServiceId=t.PythonPathDeprecatedDiagnostic=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(24),u=n(1),d=n(13),h=n(8),p=n(69),f=n(70),g=n(71),m=n(63),v=n(34);class y extends p.BaseDiagnostic{constructor(e,t){super(g.DiagnosticCodes.PythonPathDeprecatedDiagnostic,e,s.DiagnosticSeverity.Information,v.DiagnosticScope.WorkspaceFolder,t)}}t.PythonPathDeprecatedDiagnostic=y,t.PythonPathDeprecatedDiagnosticServiceId="PythonPathDeprecatedDiagnosticServiceId";let b=class extends p.BaseDiagnosticsService{constructor(e,t,n){super([g.DiagnosticCodes.PythonPathDeprecatedDiagnostic],e,n,!0),this.messageService=t,this.workspaceService=this.serviceContainer.get(a.IWorkspaceService),this.output=this.serviceContainer.get(u.IOutputChannel,c.STANDARD_OUTPUT_CHANNEL)}async diagnose(e){const t=this.serviceContainer.get(u.IExperimentsManager);if(t.sendTelemetryIfInExperiment(l.DeprecatePythonPath.control),!t.inExperiment(l.DeprecatePythonPath.experiment))return[];const n=this.workspaceService.getConfiguration("python",e).inspect("pythonPath");if(!n)return[];const r=this.workspaceService.workspaceFile&&void 0!==n.workspaceValue,i=void 0!==n.workspaceFolderValue;return r||i?[new y(d.Diagnostics.removedPythonPathFromSettings(),e)]:[]}async _removePythonPathFromWorkspaceSettings(e){const t=this.workspaceService.getConfiguration("python",e);await Promise.all([t.update("pythonPath",void 0,s.ConfigurationTarget.Workspace),t.update("pythonPath",void 0,s.ConfigurationTarget.WorkspaceFolder)])}async onHandle(e){if(0===e.length||!await this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;await this._removePythonPathFromWorkspaceSettings(t.resource);const n=this.serviceContainer.get(f.IDiagnosticsCommandFactory),r=[{prompt:d.Common.openOutputPanel(),command:{diagnostic:t,invoke:async()=>this.output.show(!0)}},{prompt:d.Common.doNotShowAgain(),command:n.createCommand(t,{type:"ignore",options:v.DiagnosticScope.Global})}];await this.messageService.handle(t,{commandPrompts:r})}};b=r([i(0,o.inject(h.IServiceContainer)),i(1,o.inject(v.IDiagnosticHandlerService)),i(1,o.named(m.DiagnosticCommandPromptHandlerServiceId)),i(2,o.inject(u.IDisposableRegistry))],b),t.PythonPathDeprecatedDiagnosticService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradeCodeRunnerDiagnosticService=t.UpgradeCodeRunnerDiagnosticServiceId=t.UpgradeCodeRunnerDiagnostic=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(24),u=n(1),d=n(13),h=n(8),p=n(69),f=n(70),g=n(71),m=n(63),v=n(34);class y extends p.BaseDiagnostic{constructor(e,t){super(g.DiagnosticCodes.UpgradeCodeRunnerDiagnostic,e,s.DiagnosticSeverity.Information,v.DiagnosticScope.Global,t)}}t.UpgradeCodeRunnerDiagnostic=y,t.UpgradeCodeRunnerDiagnosticServiceId="UpgradeCodeRunnerDiagnosticServiceId";let b=class extends p.BaseDiagnosticsService{constructor(e,t,n,r){super([g.DiagnosticCodes.UpgradeCodeRunnerDiagnostic],e,n,!0),this.messageService=t,this.extensions=r,this._diagnosticReturned=!1,this.workspaceService=this.serviceContainer.get(a.IWorkspaceService)}async diagnose(e){var t,n;if(this._diagnosticReturned)return[];const r=this.serviceContainer.get(u.IExperimentsManager);if(r.sendTelemetryIfInExperiment(l.DeprecatePythonPath.control),!r.inExperiment(l.DeprecatePythonPath.experiment))return[];const i=this.extensions.getExtension(c.CODE_RUNNER_EXTENSION_ID);if(!i)return[];if(null===(n=null===(t=i.packageJSON)||void 0===t?void 0:t.featureFlags)||void 0===n?void 0:n.usingNewPythonInterpreterPathApiV2)return[];const o=this.workspaceService.getConfiguration("code-runner",e).get("executorMap.python");return(null==o?void 0:o.includes("$pythonPath"))?(this._diagnosticReturned=!0,[new y(d.Diagnostics.upgradeCodeRunner(),e)]):[]}async onHandle(e){if(0===e.length||!await this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(f.IDiagnosticsCommandFactory),r=[{prompt:d.Common.doNotShowAgain(),command:n.createCommand(t,{type:"ignore",options:v.DiagnosticScope.Global})}];await this.messageService.handle(t,{commandPrompts:r})}};b=r([i(0,o.inject(h.IServiceContainer)),i(1,o.inject(v.IDiagnosticHandlerService)),i(1,o.named(m.DiagnosticCommandPromptHandlerServiceId)),i(2,o.inject(u.IDisposableRegistry)),i(3,o.inject(u.IExtensions))],b),t.UpgradeCodeRunnerDiagnosticService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsCommandFactory=void 0;const o=n(0),s=n(8),a=n(782),c=n(783),l=n(784);let u=class{constructor(e){this.serviceContainer=e}createCommand(e,t){const n=t.type;switch(t.type){case"ignore":return new c.IgnoreDiagnosticCommand(e,this.serviceContainer,t.options);case"launch":return new l.LaunchBrowserCommand(e,this.serviceContainer,t.options);case"executeVSCCommand":return new a.ExecuteVSCCommand(e,this.serviceContainer,t.options);default:throw new Error(`Unknown Diagnostic command commandType '${n}'`)}}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.DiagnosticsCommandFactory=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteVSCCommand=void 0;const r=n(3),i=n(7),o=n(9),s=n(210);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.commandName=n}async invoke(){i.sendTelemetryEvent(o.EventName.DIAGNOSTICS_ACTION,void 0,{commandName:this.commandName});return this.serviceContainer.get(r.ICommandManager).executeCommand(this.commandName).then(()=>{})}}t.ExecuteVSCCommand=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoreDiagnosticCommand=void 0;const r=n(7),i=n(9),o=n(34),s=n(210);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.scope=n}invoke(){r.sendTelemetryEvent(i.EventName.DIAGNOSTICS_ACTION,void 0,{ignoreCode:this.diagnostic.code});return this.serviceContainer.get(o.IDiagnosticFilterService).ignoreDiagnostic(this.diagnostic.code,this.scope)}}t.IgnoreDiagnosticCommand=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchBrowserCommand=void 0;const r=n(1),i=n(7),o=n(9),s=n(210);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.url=n}async invoke(){i.sendTelemetryEvent(o.EventName.DIAGNOSTICS_ACTION,void 0,{url:this.url});return this.serviceContainer.get(r.IBrowserService).launch(this.url)}}t.LaunchBrowserCommand=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFilterService=t.FilterKeys=void 0;const o=n(0),s=n(1),a=n(8),c=n(34);var l;!function(e){e.GlobalDiagnosticFilter="GLOBAL_DIAGNOSTICS_FILTER",e.WorkspaceDiagnosticFilter="WORKSPACE_DIAGNOSTICS_FILTER"}(l=t.FilterKeys||(t.FilterKeys={}));let u=class{constructor(e){this.serviceContainer=e}async shouldIgnoreDiagnostic(e){const t=this.serviceContainer.get(s.IPersistentStateFactory),n=t.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]),r=t.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]);return n.value.indexOf(e)>=0||r.value.indexOf(e)>=0}async ignoreDiagnostic(e,t){const n=this.serviceContainer.get(s.IPersistentStateFactory),r=t===c.DiagnosticScope.Global?n.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]):n.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]),i=r.value.slice();await r.updateValue(i.concat(e))}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.DiagnosticFilterService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapSupportService=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(1),u=n(13);let d=class{constructor(e,t,n,r){this.commandManager=e,this.disposables=t,this.configurationService=n,this.shell=r}register(){this.disposables.push(this.commandManager.registerCommand(c.Commands.Enable_SourceMap_Support,this.onEnable,this))}async enable(){await this.configurationService.updateSetting("diagnostics.sourceMapsEnabled",!0,void 0,s.ConfigurationTarget.Global),await this.commandManager.executeCommand("workbench.action.reloadWindow")}async onEnable(){const e=u.Diagnostics.enableSourceMapsAndReloadVSC();await this.shell.showWarningMessage(u.Diagnostics.warnBeforeEnablingSourceMaps(),e)===e&&await this.enable()}};d=r([o.injectable(),i(0,o.inject(a.ICommandManager)),i(1,o.inject(l.IDisposableRegistry)),i(2,o.inject(l.IConfigurationService)),i(3,o.inject(a.IApplicationShell))],d),t.SourceMapSupportService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JoinMailingListPrompt=void 0;const o=n(0),s=n(325),a=n(2),c=n(3),l=n(24),u=n(1),d=n(23),h=n(13),p=n(7),f=n(9);let g=class{constructor(e,t,n,r,i){this.shell=e,this.factory=t,this.experiments=n,this.browserService=r,this.appEnvironment=i,this.storage=this.factory.createGlobalPersistentState("JoinMailingListPrompt",!1)}async activate(){if(this.storage.value||a.env.uiKind===(null===a.UIKind||void 0===a.UIKind?void 0:a.UIKind.Web))return;let e;e=await this.experiments.inExperiment(l.JoinMailingListPromptVariants.variant1)?await this.experiments.getExperimentValue(l.JoinMailingListPromptVariants.variant1):await this.experiments.inExperiment(l.JoinMailingListPromptVariants.variant2)?await this.experiments.getExperimentValue(l.JoinMailingListPromptVariants.variant2):await this.experiments.inExperiment(l.JoinMailingListPromptVariants.variant3)?await this.experiments.getExperimentValue(l.JoinMailingListPromptVariants.variant3):void 0,e&&this.showTip(e).ignoreErrors(),await this.storage.updateValue(!0)}async showTip(e){const t=await this.shell.showInformationMessage(e,h.Common.bannerLabelYes(),h.Common.bannerLabelNo());if(t===h.Common.bannerLabelYes()){p.sendTelemetryEvent(f.EventName.JOIN_MAILING_LIST_PROMPT,void 0,{selection:"Yes"});const e="https://aka.ms/python-vscode-mailinglist?"+s.stringify({m:encodeURIComponent(this.appEnvironment.sessionId),utm_source:"vscode"});this.browserService.launch(e)}else t===h.Common.bannerLabelNo()?p.sendTelemetryEvent(f.EventName.JOIN_MAILING_LIST_PROMPT,void 0,{selection:"No"}):p.sendTelemetryEvent(f.EventName.JOIN_MAILING_LIST_PROMPT,void 0,{selection:void 0})}};r([d.swallowExceptions("Failed to display tip")],g.prototype,"showTip",null),g=r([o.injectable(),i(0,o.inject(c.IApplicationShell)),i(1,o.inject(u.IPersistentStateFactory)),i(2,o.inject(u.IExperimentService)),i(3,o.inject(u.IBrowserService)),i(4,o.inject(c.IApplicationEnvironment))],g),t.JoinMailingListPrompt=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(3),i=n(789),o=n(1),s=n(792),a=n(793),c=n(795),l=n(796),u=n(797),d=n(798),h=n(799),p=n(800),f=n(146);t.registerTypes=function(e){e.addSingleton(f.IModuleInstaller,a.CondaInstaller),e.addSingleton(f.IModuleInstaller,u.PipInstaller),e.addSingleton(f.IModuleInstaller,l.PipEnvInstaller),e.addSingleton(f.IModuleInstaller,d.PoetryInstaller),e.addSingleton(f.IInstallationChannelManager,s.InstallationChannelManager),e.addSingleton(f.IExtensionBuildInstaller,c.StableBuildInstaller,f.STABLE_INSTALLER),e.addSingleton(f.IExtensionBuildInstaller,c.InsidersBuildInstaller,f.INSIDERS_INSTALLER),e.addSingleton(f.IProductService,p.ProductService),e.addSingleton(f.IProductPathService,h.CTagsProductPathService,o.ProductType.WorkspaceSymbols),e.addSingleton(f.IProductPathService,h.FormatterProductPathService,o.ProductType.Formatter),e.addSingleton(f.IProductPathService,h.LinterProductPathService,o.ProductType.Linter),e.addSingleton(f.IProductPathService,h.TestFrameworkProductPathService,o.ProductType.TestFramework),e.addSingleton(f.IProductPathService,h.RefactoringLibraryProductPathService,o.ProductType.RefactoringLibrary),e.addSingleton(f.IProductPathService,h.DataScienceProductPathService,o.ProductType.DataScience),e.addSingleton(r.IWebviewPanelProvider,i.WebviewPanelProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelProvider=void 0;const o=n(0),s=n(4),a=n(2),c=n(6),l=n(1),u=n(790);let d=class{constructor(e,t,n){this.disposableRegistry=e,this.fs=t,this.context=n}async create(e){const t=[a.Uri.file(s.join(this.context.extensionPath,"tmp"))];return Array.isArray(e.additionalPaths)&&t.push(...e.additionalPaths.map(e=>a.Uri.file(e))),new u.WebviewPanel(this.fs,this.disposableRegistry,e,t)}};d=r([o.injectable(),i(0,o.inject(l.IDisposableRegistry)),i(1,o.inject(c.IFileSystem)),i(2,o.inject(l.IExtensionContext))],d),t.WebviewPanelProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanel=void 0,n(11);const r=n(2),i=n(5),o=n(13),s=n(791);class a extends s.Webview{constructor(e,t,n,i=[]){super(e,n),this.disposableRegistry=t,this.panelOptions=n,this.loadFailedEmitter=new r.EventEmitter;const o={enableScripts:!0,localResourceRoots:[r.Uri.file(this.panelOptions.rootPath),r.Uri.file(this.panelOptions.cwd),...i]};n.webViewPanel?(this.panel=n.webViewPanel,this.panel.webview.options=o):this.panel=r.window.createWebviewPanel(n.title.toLowerCase().replace(" ",""),n.title,{viewColumn:n.viewColumn,preserveFocus:!0},{retainContextWhenHidden:!0,enableFindWidget:!0,...o}),this.webview=this.panel.webview,this.loadPromise=this.load()}get loadFailed(){return this.loadFailedEmitter.event}async show(e){await this.loadPromise,this.panel&&this.panel.reveal(this.panel.viewColumn,e)}updateCwd(e){}close(){this.panel&&this.panel.dispose()}isVisible(){return!!this.panel&&this.panel.visible}isActive(){return!!this.panel&&this.panel.active}setTitle(e){this.panelOptions.title=e,this.panel&&(this.panel.title=e)}async load(){try{if(this.panel){if((await Promise.all(this.panelOptions.scripts.map(e=>this.fs.fileExists(e)))).every(e=>!0===e))this.panel.webview.html=await this.generateLocalReactHtml(),this.disposableRegistry.push(this.panel.onDidDispose(()=>{this.panel=void 0,this.panelOptions.listener.dispose().ignoreErrors()})),this.disposableRegistry.push(this.panel.webview.onDidReceiveMessage(e=>{this.panelOptions.listener.onMessage(e.type,e.payload)})),this.disposableRegistry.push(this.panel.onDidChangeViewState(e=>{this.panelOptions.listener.onChangeViewState(this)})),this.panelOptions.listener.onChangeViewState(this);else{const e=o.StartPage.badWebPanelFormatString();this.panel.webview.html=e.format(this.panelOptions.scripts.join(", "))}}}catch(e){i.traceError("Error Loading WebPanel: "+e),this.loadFailedEmitter.fire()}}}t.WebviewPanel=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Webview=void 0,n(11);const r=n(4),i=n(2);t.Webview=class{constructor(e,t){this.fs=e,this.options=t}asWebviewUri(e){if(!this.webview)throw new Error("WebView not initialized, too early to get a Uri");return this.webview.asWebviewUri(e)}postMessage(e){this.webview&&this.webview.postMessage(e)}async generateLocalReactHtml(){if(!this.webview)throw new Error("WebView not initialized, too early to get a Uri");const e=this.webview.asWebviewUri(i.Uri.file(this.options.cwd)).toString(),t=this.options.scripts.map(e=>this.webview.asWebviewUri(i.Uri.file(e)));(await this.fs.getFiles(this.options.rootPath)).filter(e=>e.toLowerCase().endsWith(".js")||e.toLowerCase().endsWith(".js.map")).forEach(e=>this.webview.asWebviewUri(i.Uri.file(e)));const n=this.webview.asWebviewUri(i.Uri.file(this.options.rootPath)).toString(),o=this.webview.asWebviewUri(i.Uri.file(r.join(this.options.rootPath,"node_modules","font-awesome","css","font-awesome.min.css"))).toString();return`<!doctype html>\n        <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n                <meta http-equiv="Content-Security-Policy" content="img-src 'self' data: https: http: blob: ${this.webview.cspSource}; default-src 'unsafe-inline' 'unsafe-eval' data: https: http: blob: ${this.webview.cspSource};">\n                <meta name="theme-color" content="#000000">\n                <title>VS Code Python React UI</title>\n                <base href="${e}${e.endsWith("/")?"":"/"}"/>\n                <link rel="stylesheet" href="${o}">\n                </head>\n            <body>\n                <noscript>You need to enable JavaScript to run this app.</noscript>\n                <div id="root"></div>\n                <script type="text/javascript">\n                    // Public path that will be used by webpack.\n                    window.__PVSC_Public_Path = "${n}/";\n                    function resolvePath(relativePath) {\n                        if (relativePath && relativePath[0] == '.' && relativePath[1] != '.') {\n                            return "${e}" + relativePath.substring(1);\n                        }\n\n                        return "${e}" + relativePath;\n                    }\n                <\/script>\n                ${t.map(e=>`<script type="text/javascript" src="${e}"><\/script>`).join("\n")}\n            </body>\n        </html>`}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationChannelManager=void 0;const o=n(0),s=n(12),a=n(8),c=n(28),l=n(3),u=n(6),d=n(13),h=n(14),p=n(211),f=n(146);let g=class{constructor(e){this.serviceContainer=e}async getInstallationChannel(e,t){const n=await this.getInstallationChannels(t);if(1===n.length)return n[0];const r=p.ProductNames.get(e),i=this.serviceContainer.get(l.IApplicationShell);if(0===n.length)return void await this.showNoInstallersMessage(h.isResource(t)?t:void 0);const o="Select an option to install "+r,s=n.map(e=>({label:"Install using "+e.displayName,description:"",installer:e})),a=await i.showQuickPick(s,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?a.installer:void 0}async getInstallationChannels(e){const t=this.serviceContainer.getAll(f.IModuleInstaller),n=[];if(0===t.length)return[];t.sort((e,t)=>t.priority-e.priority);let r=t[0].priority;for(const i of t){if(i.priority!==r){if(n.length>0)break;r=i.priority}await i.isSupported(e)&&n.push(i)}return n}async showNoInstallersMessage(e){const t=this.serviceContainer.get(s.IInterpreterService),n=await t.getActiveInterpreter(e);if(!n)return;const r=this.serviceContainer.get(l.IApplicationShell);let i;if(i=n.envType===c.EnvironmentType.Conda?await r.showErrorMessage(d.Installer.noCondaOrPipInstaller(),d.Installer.searchForHelp()):await r.showErrorMessage(d.Installer.noPipInstaller(),d.Installer.searchForHelp()),"Search for help"===i){const e=this.serviceContainer.get(u.IPlatformService),t=e.isWindows?"Windows":e.isMac?"MacOS":"Linux";r.openUrl(`https://www.bing.com/search?q=Install Pip ${t} ${n.envType===c.EnvironmentType.Conda?"Conda":""}`)}}};g=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],g),t.InstallationChannelManager=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInstaller=void 0;const o=n(0),s=n(12),a=n(8),c=n(1),l=n(14),u=n(147);let d=class extends u.ModuleInstaller{constructor(e){super(e)}get name(){return"Conda"}get displayName(){return"Conda"}get priority(){return 0}async isSupported(e){if(!1===this._isCondaAvailable)return!1;const t=this.serviceContainer.get(s.ICondaService);return this._isCondaAvailable=await t.isCondaAvailable(),!!this._isCondaAvailable&&this.isCurrentEnvironmentACondaEnvironment(e)}async getExecutionInfo(e,t){const n=this.serviceContainer.get(s.ICondaService),r=await n.getCondaFile(),i=l.isResource(t)?this.serviceContainer.get(c.IConfigurationService).getSettings(t).pythonPath:t.path,o=await n.getCondaEnvironment(i),a=["install"];return o&&o.name?(a.push("--name"),a.push(o.name.toCommandArgument())):o&&o.path&&(a.push("--prefix"),a.push(o.path.fileToCommandArgument())),a.push(e),a.push("-y"),{args:a,execPath:r}}async isCurrentEnvironmentACondaEnvironment(e){const t=this.serviceContainer.get(s.ICondaService),n=l.isResource(e)?this.serviceContainer.get(c.IConfigurationService).getSettings(e).pythonPath:e.path;return t.isCondaEnvironment(n)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.CondaInstaller=d},function(e,t){e.exports=require("./node_modules/sudo-prompt")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InsidersBuildInstaller=t.StableBuildInstaller=t.vsixFileExtension=t.developmentBuildUri=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(5),u=n(6),d=n(1),h=n(13);t.developmentBuildUri="https://pvsc.blob.core.windows.net/extension-builds/ms-python-insiders.vsix",t.vsixFileExtension=".vsix";let p=class{constructor(e,t,n){this.output=e,this.cmdManager=t,this.appShell=n}async install(){this.output.append(h.ExtensionChannels.installingStableMessage()),await this.appShell.withProgressCustomIcon(c.Octicons.Installing,async e=>(e.report({message:h.ExtensionChannels.installingStableMessage()}),this.cmdManager.executeCommand("workbench.extensions.installExtension",c.PVSC_EXTENSION_ID))),this.output.appendLine(h.ExtensionChannels.installationCompleteMessage())}};r([l.traceDecorators.error("Installing stable build of extension failed")],p.prototype,"install",null),p=r([o.injectable(),i(0,o.inject(d.IOutputChannel)),i(0,o.named(c.STANDARD_OUTPUT_CHANNEL)),i(1,o.inject(a.ICommandManager)),i(2,o.inject(a.IApplicationShell))],p),t.StableBuildInstaller=p;let f=class{constructor(e,t,n,r,i){this.output=e,this.fileDownloader=t,this.fs=n,this.cmdManager=r,this.appShell=i}async install(){const e=await this.downloadInsiders();this.output.append(h.ExtensionChannels.installingInsidersMessage()),await this.appShell.withProgressCustomIcon(c.Octicons.Installing,async t=>(t.report({message:h.ExtensionChannels.installingInsidersMessage()}),this.cmdManager.executeCommand("workbench.extensions.installExtension",s.Uri.file(e)))),this.output.appendLine(h.ExtensionChannels.installationCompleteMessage()),await this.fs.deleteFile(e)}async downloadInsiders(){this.output.appendLine(h.ExtensionChannels.startingDownloadOutputMessage());const e={extension:t.vsixFileExtension,outputChannel:this.output,progressMessagePrefix:h.ExtensionChannels.downloadingInsidersMessage()};return this.fileDownloader.downloadFile(t.developmentBuildUri,e).then(e=>(this.output.appendLine(h.ExtensionChannels.downloadCompletedOutputMessage()),e))}};r([l.traceDecorators.error("Installing insiders build of extension failed")],f.prototype,"install",null),r([l.traceDecorators.error("Downloading insiders build of extension failed")],f.prototype,"downloadInsiders",null),f=r([o.injectable(),i(0,o.inject(d.IOutputChannel)),i(0,o.named(c.STANDARD_OUTPUT_CHANNEL)),i(1,o.inject(d.IFileDownloader)),i(2,o.inject(u.IFileSystem)),i(3,o.inject(a.ICommandManager)),i(4,o.inject(a.IApplicationShell))],f),t.InsidersBuildInstaller=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvInstaller=t.pipenvName=void 0;const o=n(0),s=n(12),a=n(8),c=n(28),l=n(14),u=n(147);t.pipenvName="pipenv";let d=class extends u.ModuleInstaller{constructor(e){super(e),this.pipenv=this.serviceContainer.get(s.IInterpreterLocatorService,s.PIPENV_SERVICE)}get name(){return"pipenv"}get displayName(){return t.pipenvName}get priority(){return 10}async isSupported(e){if(l.isResource(e)){return(await this.pipenv.getInterpreters(e)).length>0}return e.envType===c.EnvironmentType.Pipenv}async getExecutionInfo(e,n){const r=["install",e,"--dev"];return"black"===e&&r.push("--pre"),{args:r,execPath:t.pipenvName}}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.PipEnvInstaller=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipInstaller=void 0;const o=n(0),s=n(8),a=n(3),c=n(18),l=n(14),u=n(147);let d=class extends u.ModuleInstaller{get name(){return"Pip"}get displayName(){return"Pip"}get priority(){return 0}constructor(e){super(e)}isSupported(e){return this.isPipAvailable(e)}async getExecutionInfo(e,t){const n=[],r=this.serviceContainer.get(a.IWorkspaceService).getConfiguration("http").get("proxy","");return r.length>0&&(n.push("--proxy"),n.push(r)),{args:[...n,"install","-U",e],moduleName:"pip"}}isPipAvailable(e){const t=this.serviceContainer.get(c.IPythonExecutionFactory),n=l.isResource(e)?e:void 0,r=l.isResource(e)?void 0:e.path;return t.create({resource:n,pythonPath:r}).then(e=>e.isModuleInstalled("pip")).catch(()=>!1)}};d=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],d),t.PipInstaller=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryInstaller=t.poetryName=void 0;const o=n(0),s=n(4),a=n(8),c=n(3),l=n(5),u=n(6),d=n(18),h=n(1),p=n(14),f=n(147);t.poetryName="poetry";let g=class extends f.ModuleInstaller{constructor(e,t,n,r,i){super(e),this.workspaceService=t,this.configurationService=n,this.fs=r,this.processFactory=i}get name(){return"poetry"}get displayName(){return t.poetryName}get priority(){return 10}async isSupported(e){if(!e)return!1;const t=this.workspaceService.getWorkspaceFolder(p.isResource(e)?e:void 0);return!!t&&(!!await this.fs.fileExists(s.join(t.uri.fsPath,"poetry.lock"))&&this.isPoetryAvailable(t.uri))}async isPoetryAvailable(e){try{const t=await this.processFactory.create(e),n=this.configurationService.getSettings(e).poetryPath,r=await t.exec(n,["list"],{cwd:e.fsPath});return r&&0===(r.stderr||"").trim().length}catch(e){return l.traceError("poetry.lock exists but Poetry not found",e),!1}}async getExecutionInfo(e,t){const n=this.configurationService.getSettings(p.isResource(t)?t:void 0).poetryPath,r=["add","--dev",e];return"black"===e&&r.push("--allow-prereleases"),{args:r,execPath:n}}};g=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(c.IWorkspaceService)),i(2,o.inject(h.IConfigurationService)),i(3,o.inject(u.IFileSystem)),i(4,o.inject(d.IProcessServiceFactory))],g),t.PoetryInstaller=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceProductPathService=t.RefactoringLibraryProductPathService=t.TestFrameworkProductPathService=t.LinterProductPathService=t.FormatterProductPathService=t.CTagsProductPathService=t.BaseProductPathsService=void 0;const o=n(0),s=n(4),a=n(212),c=n(8),l=n(43),u=n(17),d=n(1);let h=class{constructor(e){this.serviceContainer=e,this.configService=e.get(d.IConfigurationService),this.productInstaller=e.get(d.IInstaller)}isExecutableAModule(e,t){let n;try{n=this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}catch(e){}const r=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&s.basename(r)===r}};h=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],h),t.BaseProductPathsService=h;let p=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.configService.getSettings(t).workspaceSymbols.ctagsPath}};p=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],p),t.CTagsProductPathService=p;let f=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.configService.getSettings(t),r=this.serviceContainer.get(a.IFormatterHelper).getSettingsPropertyNames(e);return n.formatting[r.pathName]}};f=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],f),t.FormatterProductPathService=f;let g=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.serviceContainer.get(l.ILinterManager).getLinterInfo(e).pathName(t)}};g=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],g),t.LinterProductPathService=g;let m=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.serviceContainer.get(u.ITestsHelper).getSettingsPropertyNames(e);if(!n.pathName)return this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run);return this.configService.getSettings(t).testing[n.pathName]}};m=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],m),t.TestFrameworkProductPathService=m;let v=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}};v=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],v),t.RefactoringLibraryProductPathService=v;let y=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}};y=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],y),t.DataScienceProductPathService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductService=void 0;const i=n(0),o=n(1);let s=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(o.Product.bandit,o.ProductType.Linter),this.ProductTypes.set(o.Product.flake8,o.ProductType.Linter),this.ProductTypes.set(o.Product.mypy,o.ProductType.Linter),this.ProductTypes.set(o.Product.pycodestyle,o.ProductType.Linter),this.ProductTypes.set(o.Product.prospector,o.ProductType.Linter),this.ProductTypes.set(o.Product.pydocstyle,o.ProductType.Linter),this.ProductTypes.set(o.Product.pylama,o.ProductType.Linter),this.ProductTypes.set(o.Product.pylint,o.ProductType.Linter),this.ProductTypes.set(o.Product.ctags,o.ProductType.WorkspaceSymbols),this.ProductTypes.set(o.Product.nosetest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.pytest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.unittest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.autopep8,o.ProductType.Formatter),this.ProductTypes.set(o.Product.black,o.ProductType.Formatter),this.ProductTypes.set(o.Product.yapf,o.ProductType.Formatter),this.ProductTypes.set(o.Product.rope,o.ProductType.RefactoringLibrary),this.ProductTypes.set(o.Product.jupyter,o.ProductType.DataScience),this.ProductTypes.set(o.Product.notebook,o.ProductType.DataScience),this.ProductTypes.set(o.Product.ipykernel,o.ProductType.DataScience),this.ProductTypes.set(o.Product.nbconvert,o.ProductType.DataScience),this.ProductTypes.set(o.Product.kernelspec,o.ProductType.DataScience),this.ProductTypes.set(o.Product.pandas,o.ProductType.DataScience)}getProductType(e){return this.ProductTypes.get(e)}};s=r([i.injectable()],s),t.ProductService=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(192),i=n(802),o=n(214),s=n(6);t.registerTypes=function(e){e.addSingleton(s.IPlatformService,i.PlatformService),e.addSingleton(s.IFileSystem,r.FileSystem),e.addSingleton(s.IRegistry,o.RegistryImplementation)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=void 0;const i=n(0),o=n(20),s=n(38),a=n(7),c=n(9),l=n(27),u=n(213),d=n(86);let h=class{constructor(){this.osType=l.getOSType(),this.osType===l.OSType.Unknown&&a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{failureType:c.PlatformErrors.FailedToDetermineOS})}get pathVariableName(){return this.isWindows?d.WINDOWS_PATH_VARIABLE_NAME:d.NON_WINDOWS_PATH_VARIABLE_NAME}get virtualEnvBinName(){return this.isWindows?"Scripts":"bin"}async getVersion(){if(this.version)return this.version;switch(this.osType){case l.OSType.Windows:case l.OSType.OSX:try{const e=s.coerce(o.release());if(e)return a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{osVersion:`${e.major}.${e.minor}.${e.patch}`}),this.version=e;throw new Error("Unable to parse version")}catch(e){return a.sendTelemetryEvent(c.EventName.PLATFORM_INFO,void 0,{failureType:c.PlatformErrors.FailedToParseVersion}),u.parseVersion(o.release())}default:throw new Error("Not Supported")}}get isWindows(){return this.osType===l.OSType.Windows}get isMac(){return this.osType===l.OSType.OSX}get isLinux(){return this.osType===l.OSType.Linux}get osRelease(){return o.release()}get is64bit(){return"x64"===n(803)()}};h=r([i.injectable()],h),t.PlatformService=h},function(e,t,n){var r=n(55),i=n(29),o=n(4);e.exports=function(){if("x64"===process.arch)return"x64";if("darwin"===process.platform)return"x64";if("win32"===process.platform){var e=!1;try{e=!(!process.env.SYSTEMROOT||!i.statSync(process.env.SYSTEMROOT))}catch(e){}var t=e?process.env.SYSTEMROOT:"C:\\Windows",n=!1;try{n=!!i.statSync(o.join(t,"sysnative"))}catch(e){}return n?"x64":"x86"}return"linux"===process.platform&&"64\n"===r.execSync("getconf LONG_BIT",{encoding:"utf8"})?"x64":"x86"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(805),i=n(824),o=n(827),s=n(832),a=n(18);t.registerTypes=function(e){e.addSingleton(a.IBufferDecoder,r.BufferDecoder),e.addSingleton(a.IProcessServiceFactory,i.ProcessServiceFactory),e.addSingleton(a.IPythonExecutionFactory,o.PythonExecutionFactory),e.addSingleton(a.IPythonToolExecutionService,s.PythonToolExecutionService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecoder=void 0;const i=n(806),o=n(0),s=n(355);let a=class{decode(e,t=s.DEFAULT_ENCODING){return t=i.encodingExists(t)?t:s.DEFAULT_ENCODING,i.decode(Buffer.concat(e),t)}};a=r([o.injectable()],a),t.BufferDecoder=a},function(e,t,n){"use strict";var r=n(100).Buffer,i=n(807),o=e.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(e,t,n){e=""+(e||"");var i=o.getEncoder(t,n),s=i.write(e),a=i.end();return a&&a.length>0?r.concat([s,a]):s},o.decode=function(e,t,n){"string"==typeof e&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=o.getDecoder(t,n),s=i.write(e),a=i.end();return a?s+a:s},o.encodingExists=function(e){try{return o.getCodec(e),!0}catch(e){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(e){o.encodings||(o.encodings=n(808));for(var t=o._canonicalizeEncoding(e),r={};;){var i=o._codecDataCache[t];if(i)return i;var s=o.encodings[t];switch(typeof s){case"string":t=s;break;case"object":for(var a in s)r[a]=s[a];r.encodingName||(r.encodingName=t),t=s.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new s(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},o._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(e,t){var n=o.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},o.getDecoder=function(e,t){var n=o.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new i.StripBOM(r,t)),r};var s="undefined"!=typeof process&&process.versions&&process.versions.node;if(s){var a=s.split(".").map(Number);(a[0]>0||a[1]>=10)&&n(822)(o),n(823)(o)}},function(e,t,n){"use strict";function r(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=r,r.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},r.prototype.end=function(){return this.encoder.end()},t.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t||("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0),t},i.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";for(var r=[n(809),n(810),n(811),n(812),n(813),n(814),n(815),n(816)],i=0;i<r.length;i++){e=r[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}},function(e,t,n){"use strict";var r=n(100).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=l,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=u,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=a,i.prototype.decoder=s;var o=n(180).StringDecoder;function s(e,t){o.call(this,t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function l(e,t){}function u(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype=o.prototype,a.prototype.write=function(e){return r.from(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),r.from(e,"base64")},c.prototype.end=function(){return r.from(this.prevStr,"base64")},l.prototype.write=function(e){for(var t=r.alloc(3*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},l.prototype.end=function(){},u.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(n>0&&(i+=this.defaultCharUnicode,n=0),s<128?i+=String.fromCharCode(s):s<224?(t=31&s,n=1,r=1):s<240?(t=15&s,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,r++,0===--n&&(i+=2===r&&t<128&&t>0||3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},u.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){"use strict";var r=n(100).Buffer;function i(){}function o(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function l(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function u(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(e.length-e.length%2,64),s=0;s<o;s+=2)0===e[s]&&0!==e[s+1]&&i++,0!==e[s]&&0===e[s+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}t.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=s,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=0;n<t.length;n+=2){var i=t[n];t[n]=t[n+1],t[n+1]=i}return t},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var t=r.alloc(e.length+1),n=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,i=2);n<e.length-1;n+=2,i+=2)t[i]=e[n+1],t[i+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},s.prototype.end=function(){},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=l,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},l.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=u(e=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},l.prototype.end=function(){if(!this.decoder){var e=r.concat(this.initialBytes),t=u(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(e,t,n){"use strict";var r=n(100).Buffer;function i(e,t){this.iconv=t}t.utf7=i,t.unicode11utf7="utf7",i.prototype.encoder=s,i.prototype.decoder=a,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return r.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,l=[],u=0;u<256;u++)l[u]=c.test(String.fromCharCode(u));var d="+".charCodeAt(0),h="-".charCodeAt(0),p="&".charCodeAt(0);function f(e,t){this.iconv=t}function g(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!l[e[s]]){if(s==n&&e[s]==h)t+="+";else{var a=o+e.slice(n,s).toString();t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=h&&s--,n=s+1,i=!1,o=""}}else e[s]==d&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString()).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=f,f.prototype.encoder=g,f.prototype.decoder=m,f.prototype.bomAware=!0,g.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(i>0&&(s+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),i=0),o[s++]=h,t=!1),t||(o[s++]=c,c===p&&(o[s++]=h))):(t||(o[s++]=p,t=!0),t&&(n[i++]=c>>8,n[i++]=255&c,i==n.length&&(s+=o.write(n.toString("base64").replace(/\//g,","),s),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,s)},g.prototype.end=function(){var e=r.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=h,this.inBase64=!1),e.slice(0,t)};var v=l.slice();v[",".charCodeAt(0)]=!0,m.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!v[e[s]]){if(s==n&&e[s]==h)t+="&";else{var a=o+e.slice(n,s).toString().replace(/,/g,"/");t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=h&&s--,n=s+1,i=!1,o=""}}else e[s]==p&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString().replace(/,/g,"/")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},m.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,n){"use strict";var r=n(100).Buffer;function i(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);e.chars=n+e.chars}this.decodeBuf=r.from(e.chars,"ucs2");var o=r.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=s,o.prototype.write=function(e){for(var t=r.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=r.alloc(2*e.length),i=0,o=0,s=0;s<e.length;s++)i=2*e[s],n[o=2*s]=t[i],n[o+1]=t[i+1];return n.toString("ucs2")},s.prototype.end=function(){}},function(e,t,n){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,n){"use strict";var r=n(100).Buffer;t._dbcs=s;for(var i=new Array(256),o=0;o<256;o++)i[o]=-1;function s(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=i.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var o={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var s=e.encodeSkipVals[r];if("number"==typeof s)o[s]=!0;else for(var a=s.from;a<=s.to;a++)o[a]=!0}if(this._fillEncodeTable(0,0,o),e.encodeAdd)for(var c in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,c)&&this._setEncodeChar(c.charCodeAt(0),e.encodeAdd[c]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],-1===this.defCharSB&&(this.defCharSB=this.encodeTable[0]["?"]),-1===this.defCharSB&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var l=this.decodeTables.length,u=this.decodeTables[l]=i.slice(0),d=this.decodeTables.length,h=this.decodeTables[d]=i.slice(0);for(r=129;r<=254;r++){var p=-1e3-this.decodeTables[0][r],f=this.decodeTables[p];for(a=48;a<=57;a++)f[a]=-1e3-l}for(r=129;r<=254;r++)u[r]=-1e3-d;for(r=48;r<=57;r++)h[r]=-2}}function a(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function c(e,t){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function l(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}s.prototype.encoder=a,s.prototype.decoder=c,s.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var o=n[t[r]];if(-1==o)n[t[r]]=-1e3-this.decodeTables.length,this.decodeTables.push(n=i.slice(0));else{if(!(o<=-1e3))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[-1e3-o]}}return n},s.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var o=0;o<i.length;){var s=i.charCodeAt(o++);if(55296<=s&&s<56320){var a=i.charCodeAt(o++);if(!(56320<=a&&a<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(s-55296)+(a-56320)}else if(4080<s&&s<=4095){for(var c=4095-s+2,l=[],u=0;u<c;u++)l.push(i.charCodeAt(o++));n[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(l)}else n[t++]=s}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);var d=n[t-1]+1;for(o=0;o<i;o++)n[t++]=d++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},s.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=i.slice(0)),this.encodeTable[t]},s.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=t:-1==n[r]&&(n[r]=t)},s.prototype._setEncodeSequence=function(e,t){var n,r=e[0],i=this._getEncodeBucket(r),o=255&r;i[o]<=-10?n=this.encodeTableSeq[-10-i[o]]:(n={},-1!==i[o]&&(n[-1]=i[o]),i[o]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var s=1;s<e.length-1;s++){var a=n[r];"object"==typeof a?n=a:(n=n[r]={},void 0!==a&&(n[-1]=a))}n[r=e[e.length-1]]=t},s.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var o=r[i],s=t+i;n[s]||(o>=0?this._setEncodeChar(o,s):o<=-1e3?this._fillEncodeTable(-1e3-o,s<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],s))}},a.prototype.write=function(e){for(var t=r.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,i=this.seqObj,o=-1,s=0,a=0;;){if(-1===o){if(s==e.length)break;var c=e.charCodeAt(s++)}else{c=o;o=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===n){n=c;continue}n=c,c=-1}else-1!==n?(c=65536+1024*(n-55296)+(c-56320),n=-1):c=-1;else-1!==n&&(o=c,c=-1,n=-1);var u=-1;if(void 0!==i&&-1!=c){var d=i[c];if("object"==typeof d){i=d;continue}"number"==typeof d?u=d:null==d&&void 0!==(d=i[-1])&&(u=d,o=c),i=void 0}else if(c>=0){var h=this.encodeTable[c>>8];if(void 0!==h&&(u=h[255&c]),u<=-10){i=this.encodeTableSeq[-10-u];continue}if(-1==u&&this.gb18030){var p=l(this.gb18030.uChars,c);if(-1!=p){u=this.gb18030.gbChars[p]+(c-this.gb18030.uChars[p]);t[a++]=129+Math.floor(u/12600),u%=12600,t[a++]=48+Math.floor(u/1260),u%=1260,t[a++]=129+Math.floor(u/10),u%=10,t[a++]=48+u;continue}}}-1===u&&(u=this.defaultCharSingleByte),u<256?t[a++]=u:u<65536?(t[a++]=u>>8,t[a++]=255&u):(t[a++]=u>>16,t[a++]=u>>8&255,t[a++]=255&u)}return this.seqObj=i,this.leadSurrogate=n,t.slice(0,a)},a.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=r.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},a.prototype.findIdx=l,c.prototype.write=function(e){var t=r.alloc(2*e.length),n=this.nodeIdx,i=this.prevBuf,o=this.prevBuf.length,s=-this.prevBuf.length;o>0&&(i=r.concat([i,e.slice(0,10)]));for(var a=0,c=0;a<e.length;a++){var u,d=a>=0?e[a]:i[a+o];if((u=this.decodeTables[n][d])>=0);else if(-1===u)a=s,u=this.defaultCharUnicode.charCodeAt(0);else if(-2===u){var h=s>=0?e.slice(s,a+1):i.slice(s+o,a+1+o),p=12600*(h[0]-129)+1260*(h[1]-48)+10*(h[2]-129)+(h[3]-48),f=l(this.gb18030.gbChars,p);u=this.gb18030.uChars[f]+p-this.gb18030.gbChars[f]}else{if(u<=-1e3){n=-1e3-u;continue}if(!(u<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+u+" at "+n+"/"+d);for(var g=this.decodeTableSeq[-10-u],m=0;m<g.length-1;m++)u=g[m],t[c++]=255&u,t[c++]=u>>8;u=g[g.length-1]}if(u>65535){u-=65536;var v=55296+Math.floor(u/1024);t[c++]=255&v,t[c++]=v>>8,u=56320+u%1024}t[c++]=255&u,t[c++]=u>>8,n=0,s=a+1}return this.nodeIdx=n,this.prevBuf=s>=0?e.slice(s):i.slice(s+o),t.slice(0,c).toString("ucs2")},c.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(817)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(818)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(216)}},gbk:{type:"_dbcs",table:function(){return n(216).concat(n(353))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(216).concat(n(353))},gb18030:function(){return n(819)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(820)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(354)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(354).concat(n(821))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(e){e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(e){e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(e,t,n){"use strict";var r=n(66).Buffer,i=n(54).Transform;function o(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,i.call(this,t)}function s(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",i.call(this,t)}e.exports=function(e){e.encodeStream=function(t,n){return new o(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new s(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=o,e.IconvLiteDecoderStream=s,e._collect=s.prototype.collect},o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",(function(e){t.push(e)})),this.on("end",(function(){e(null,r.concat(t))})),this},s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(e,t,n){if(!r.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),n()}catch(e){n(e)}},s.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},s.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",(function(e){t+=e})),this.on("end",(function(){e(null,t)})),this}},function(e,t,n){"use strict";var r=n(66).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(r.from||new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var o=n(66).SlowBuffer;if(t.SlowBufferToString=o.prototype.toString,o.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.SlowBufferWrite=o.prototype.write,o.prototype.write=function(n,i,o,s){if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var a=s;s=i,i=o,o=a}i=+i||0;var c=this.length-i;if(o?(o=+o)>c&&(o=c):o=c,s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.SlowBufferWrite.call(this,n,i,o,s);if(n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var l=e.encode(n,s);return l.length<o&&(o=l.length),l.copy(this,i,0,o),o},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=o.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,o,s){var a=i,c=o,l=s;if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var u=s;s=i,i=o,o=u}if(s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.BufferWrite.call(this,n,a,c,l);i=+i||0;var d=this.length-i;if(o?(o=+o)>d&&(o=d):o=d,n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var h=e.encode(n,s);return h.length<o&&(o=h.length),h.copy(this,i,0,o),o},e.supportsStreams){var s=n(54).Readable;t.ReadableSetEncoding=s.prototype.setEncoding,s.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},s.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(66).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var o=n(54).Readable;o.prototype.setEncoding=t.ReadableSetEncoding,delete o.prototype.collect}t=void 0}}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessServiceFactory=void 0;const o=n(0),s=n(1),a=n(57),c=n(356),l=n(18);let u=class{constructor(e,t,n,r){this.envVarsService=e,this.processLogger=t,this.decoder=n,this.disposableRegistry=r}async create(e){const t=await this.envVarsService.getEnvironmentVariables(e),n=new c.ProcessService(this.decoder,t);return this.disposableRegistry.push(n),n.on("exec",this.processLogger.logProcess.bind(this.processLogger))}};u=r([o.injectable(),i(0,o.inject(a.IEnvironmentVariablesProvider)),i(1,o.inject(l.IProcessLogger)),i(2,o.inject(l.IBufferDecoder)),i(3,o.inject(s.IDisposableRegistry))],u),t.ProcessServiceFactory=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(826))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1136);t.Observable=r.Observable},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExecutionFactory=t.CONDA_RUN_VERSION=void 0;const o=n(0),s=n(38),a=n(112),c=n(12),l=n(8),u=n(98),d=n(7),h=n(9),p=n(6),f=n(1),g=n(356),m=n(828),v=n(831),y=n(18);t.CONDA_RUN_VERSION="4.6.0";let b=class{constructor(e,t,n,r,i,o,s){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.configService=r,this.condaService=i,this.decoder=o,this.windowsStoreInterpreter=s,this.disposables=this.serviceContainer.get(f.IDisposableRegistry),this.logger=this.serviceContainer.get(y.IProcessLogger),this.fileSystem=this.serviceContainer.get(p.IFileSystem)}async create(e){const t=e.pythonPath?e.pythonPath:this.configService.getSettings(e.resource).pythonPath,n=await this.processServiceFactory.create(e.resource);return n.on("exec",this.logger.logProcess.bind(this.logger)),S(t,n,this.fileSystem,void 0,await this.windowsStoreInterpreter.isWindowsStoreInterpreter(t))}async createActivatedEnvironment(e){const t=await this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter,e.allowEnvironmentFetchExceptions),n=t&&Object.keys(t).length>0;if(d.sendTelemetryEvent(h.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,void 0,{hasEnvVars:n}),!n)return this.create({resource:e.resource,pythonPath:e.interpreter?e.interpreter.path:void 0});const r=e.interpreter?e.interpreter.path:this.configService.getSettings(e.resource).pythonPath,i=new g.ProcessService(this.decoder,{...t});return i.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(i),S(r,i,this.fileSystem)}async createCondaExecutionService(e,n,r){const i=n?Promise.resolve(n):this.processServiceFactory.create(r),[o,a,c,l]=await Promise.all([this.condaService.getCondaVersion(),this.condaService.getCondaEnvironment(e),this.condaService.getCondaFile(),i]);return o&&s.gte(o,t.CONDA_RUN_VERSION)&&a&&c&&l?(n||(l.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(l)),S(e,l,this.fileSystem,[c,a])):Promise.resolve(void 0)}};function S(e,t,n,r,i){let o=m.createPythonEnv(e,t,n);if(r){const[i,s]=r;o=m.createCondaEnv(i,s,e,t,n)}else i&&(o=m.createWindowsStoreEnv(e,t));const s=v.createPythonProcessService(t,o);return{getInterpreterInformation:()=>o.getInterpreterInformation(),getExecutablePath:()=>o.getExecutablePath(),isModuleInstalled:e=>o.isModuleInstalled(e),getExecutionInfo:e=>o.getExecutionInfo(e),execObservable:(e,t)=>s.execObservable(e,t),execModuleObservable:(e,t,n)=>s.execModuleObservable(e,t,n),exec:(e,t)=>s.exec(e,t),execModule:(e,t,n)=>s.execModule(e,t,n)}}b=r([o.injectable(),i(0,o.inject(l.IServiceContainer)),i(1,o.inject(a.IEnvironmentActivationService)),i(2,o.inject(y.IProcessServiceFactory)),i(3,o.inject(f.IConfigurationService)),i(4,o.inject(c.ICondaService)),i(5,o.inject(y.IBufferDecoder)),i(6,o.inject(u.WindowsStoreInterpreter))],b),t.PythonExecutionFactory=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWindowsStoreEnv=t.createCondaEnv=t.createPythonEnv=void 0;const r=n(88),i=n(829),o=n(830),s=n(5),a=n(59);class c{constructor(e,t){this.pythonPath=e,this.deps=t,this.cachedInterpreterInformation=null}getExecutionInfo(e=[]){const t=this.deps.getPythonArgv(this.pythonPath);return r.buildPythonExecInfo(t,e)}getExecutionObservableInfo(e=[]){const t=this.deps.getObservablePythonArgv(this.pythonPath);return r.buildPythonExecInfo(t,e)}async getInterpreterInformation(){return null===this.cachedInterpreterInformation&&(this.cachedInterpreterInformation=await this.getInterpreterInformationImpl()),this.cachedInterpreterInformation}async getExecutablePath(){if(await this.deps.isValidExecutable(this.pythonPath))return this.pythonPath;const e=this.getExecutionInfo();return i.getExecutablePath(e,this.deps.exec)}async isModuleInstalled(e){const[t]=a.isModuleInstalled(e),n=this.getExecutionInfo(t);try{await this.deps.exec(n.command,n.args)}catch(e){return!1}return!0}async getInterpreterInformationImpl(){try{const e=this.getExecutionInfo();return await o.getInterpreterInfo(e,this.deps.shellExec,{info:s.traceInfo,error:s.traceError})}catch(e){s.traceError(`Failed to get interpreter information for '${this.pythonPath}'`,e)}}}function l(e,t,n,r,i){return{getPythonArgv:e=>t||[e],getObservablePythonArgv:e=>n||[e],isValidExecutable:e,exec:async(e,t)=>r(e,t,{throwOnStdErr:!0}),shellExec:async(e,t)=>i(e,{timeout:t})}}t.createPythonEnv=function(e,t,n){const r=l(async e=>n.fileExists(e),void 0,void 0,(e,n,r)=>t.exec(e,n,r),(e,n)=>t.shellExec(e,n));return new c(e,r)},t.createCondaEnv=function(e,t,n,r,i){const o=["run"];""===t.name?o.push("-p",t.path):o.push("-n",t.name);const s=l(async e=>i.fileExists(e),[e,...o,"python"],void 0,(e,t,n)=>r.exec(e,t,n),(e,t)=>r.shellExec(e,t));return new c(n,s)},t.createWindowsStoreEnv=function(e,t){const n=l(async e=>!0,void 0,void 0,(e,n,r)=>t.exec(e,n,r),(e,n)=>t.shellExec(e,n));return new c(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExecutablePath=void 0;const r=n(59),i=n(88);t.getExecutablePath=async function(e,t){const[n,o]=r.getExecutable(),s=i.copyPythonExecInfo(e,n);return o((await t(s.command,s.args)).stdout)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=t.extractInterpreterInfo=void 0;const r=n(41),i=n(27),o=n(88),s=n(145);function a(e,t){const n=`${t.versionInfo.slice(0,3).join(".")}-${t.versionInfo[3]}`;return{architecture:t.is64Bit?i.Architecture.x64:i.Architecture.x86,path:e,version:s.parsePythonVersion(n),sysVersion:t.sysVersion,sysPrefix:t.sysPrefix}}t.extractInterpreterInfo=a,t.getInterpreterInfo=async function(e,t,n){const[i,s]=r.interpreterInfo(),c=o.copyPythonExecInfo(e,i),l=[c.command,...c.args],u=l.reduce((e,t)=>e?`${e} "${t}"`:`"${t.replace("\\","\\\\")}"`,""),d=await t(u,15e3);if(d.stderr)return void(n&&n.error(`Failed to parse interpreter information for ${l} stderr: ${d.stderr}`));const h=s(d.stdout);return n&&n.info("Found interpreter for "+l),a(e.pythonExecutable,h)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonProcessService=void 0;const r=n(206),i=n(207),o=n(59);class s{constructor(e){this.deps=e}execObservable(e,t){const n={...t},r=this.deps.getExecutionObservableInfo(e);return this.deps.execObservable(r.command,r.args,n)}execModuleObservable(e,t,n){const r=o.execModule(e,t),i={...n},s=this.deps.getExecutionObservableInfo(r);return this.deps.execObservable(s.command,s.args,i)}async exec(e,t){const n={...t},r=this.deps.getExecutionInfo(e);return this.deps.exec(r.command,r.args,n)}async execModule(e,t,n){const s=o.execModule(e,t),a={...n},c=this.deps.getExecutionInfo(s),l=await this.deps.exec(c.command,c.args,a);if(e&&r.ErrorUtils.outputHasModuleNotInstalledError(e,l.stderr)){if(!await this.deps.isModuleInstalled(e))throw new i.ModuleNotInstalledError(e)}return l}}t.createPythonProcessService=function(e,t){return new s({isModuleInstalled:async e=>t.isModuleInstalled(e),getExecutionInfo:e=>t.getExecutionInfo(e),getExecutionObservableInfo:e=>t.getExecutionObservableInfo(e),exec:async(t,n,r)=>e.exec(t,n,r),execObservable:(t,n,r)=>e.execObservable(t,n,r)})}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonToolExecutionService=void 0;const o=n(0),s=n(8),a=n(18);let c=class{constructor(e){this.serviceContainer=e}async execObservable(e,t,n){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModuleObservable(e.moduleName,e.args,t)}return(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).execObservable(e.execPath,e.args,{...t})}async exec(e,t,n){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModule(e.moduleName,e.args,t)}return(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).exec(e.execPath,e.args,{...t})}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.PythonToolExecutionService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(834),i=n(835),o=n(57);t.registerTypes=function(e){e.addSingleton(o.IEnvironmentVariablesService,r.EnvironmentVariablesService),e.addSingleton(o.IEnvironmentVariablesProvider,i.EnvironmentVariablesProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnvFile=t.EnvironmentVariablesService=void 0;const o=n(0),s=n(4),a=n(7),c=n(9),l=n(6),u=n(1);let d=class{constructor(e,t){this.pathUtils=e,this.fs=t}async parseFile(e,t){if(e&&await this.fs.fileExists(e))return h(await this.fs.readFile(e),t)}mergeVariables(e,t){if(!t)return;const n=["PYTHONPATH",this.pathVariable];Object.keys(e).forEach(r=>{n.indexOf(r)>=0||void 0===t[r]&&(t[r]=e[r])})}appendPythonPath(e,...t){return this.appendPaths(e,"PYTHONPATH",...t)}appendPath(e,...t){return this.appendPaths(e,this.pathVariable,...t)}get pathVariable(){return this._pathVariable||(this._pathVariable=this.pathUtils.getPathVariableName()),this._pathVariable}appendPaths(e,t,...n){const r=n.filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim()).join(s.delimiter);if(0===r.length)return e;const i=e?e[t]:void 0;return i&&"string"==typeof i&&i.length>0?e[t]=i+s.delimiter+r:e[t]=r,e}};function h(e,t){const n=t||{},r={};return e.toString().split("\n").forEach((e,t)=>{const[i,o]=function(e){const t=e.match(/^\s*([a-zA-Z]\w*)\s*=\s*(.*?)?\s*$/);if(!t)return["",""];const n=t[1];let r=t[2];r&&""!==r?("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1])&&(r=r.substring(1,r.length-1),r=r.replace(/\\n/gm,"\n")):r="";return[n,r]}(e);""!==i&&(r[i]=function(e,t,n,r=""){let i=!1,o=e;o=o.replace(p,(e,o,s,a,c)=>a>0&&"\\"===c[a-1]?e:s&&""!==s||!o||""===o?(i=!0,e):t[o]||n[o]||r),i||o===e||(e=o,a.sendTelemetryEvent(c.EventName.ENVFILE_VARIABLE_SUBSTITUTION));return e.replace(/\\\$/g,"$")}(o,r,n))}),r}d=r([o.injectable(),i(0,o.inject(u.IPathUtils)),i(1,o.inject(l.IFileSystem))],d),t.EnvironmentVariablesService=d,t.parseEnvFile=h;const p=/\${([a-zA-Z]\w*)?([^}\w].*)?}/g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentVariablesProvider=void 0;const o=n(0),s=n(2),a=n(8),c=n(199),l=n(3),u=n(5),d=n(6),h=n(1),p=n(183),f=n(23),g=n(57);let m=class{constructor(e,t,n,r,i,o,a,c=36e5){this.envVarsService=e,this.platformService=n,this.workspaceService=r,this.configurationService=i,this.process=o,this.serviceContainer=a,this.cacheDuration=c,this.trackedWorkspaceFolders=new Set,this.fileWatchers=new Map,this.disposables=[],t.push(this),this.changeEventEmitter=new s.EventEmitter;const l=this.workspaceService.onDidChangeConfiguration(this.configurationChanged,this);this.disposables.push(l)}get onDidEnvironmentVariablesChange(){return this.changeEventEmitter.event}dispose(){this.changeEventEmitter.dispose(),this.fileWatchers.forEach(e=>{e&&e.dispose()})}async getEnvironmentVariables(e){const t=new p.InMemoryInterpreterSpecificCache("getEnvironmentVariables",this.cacheDuration,[e],this.serviceContainer);if(t.hasData)return u.traceVerbose("Cached data exists getEnvironmentVariables, "+(e?e.fsPath:"<No Resource>")),Promise.resolve(t.data);const n=this._getEnvironmentVariables(e);return n.then(e=>t.data=e).ignoreErrors(),n}async _getEnvironmentVariables(e){let t=await this.getCustomEnvironmentVariables(e);t||(t={}),this.envVarsService.mergeVariables(this.process.env,t);const n=this.platformService.pathVariableName,r=this.process.env[n];return r&&this.envVarsService.appendPath(t,r),this.process.env.PYTHONPATH&&this.envVarsService.appendPythonPath(t,this.process.env.PYTHONPATH),t}async getCustomEnvironmentVariables(e){const t=this.configurationService.getSettings(e),n=this.getWorkspaceFolderUri(e);return this.trackedWorkspaceFolders.add(n?n.fsPath:""),this.createFileWatcher(t.envFile,n),this.envVarsService.parseFile(t.envFile,this.process.env)}configurationChanged(e){this.trackedWorkspaceFolders.forEach(t=>{const n=t&&t.length>0?s.Uri.file(t):void 0;e.affectsConfiguration("python.envFile",n)&&this.onEnvironmentFileChanged(n)})}createFileWatcher(e,t){if(this.fileWatchers.has(e))return;const n=this.workspaceService.createFileSystemWatcher(e);this.fileWatchers.set(e,n),n&&(this.disposables.push(n.onDidChange(()=>this.onEnvironmentFileChanged(t))),this.disposables.push(n.onDidCreate(()=>this.onEnvironmentFileCreated(t))),this.disposables.push(n.onDidDelete(()=>this.onEnvironmentFileChanged(t))))}getWorkspaceFolderUri(e){if(!e)return;const t=this.workspaceService.getWorkspaceFolder(e);return t?t.uri:void 0}onEnvironmentFileCreated(e){this.onEnvironmentFileChanged(e),c.sendFileCreationTelemetry()}onEnvironmentFileChanged(e){f.clearCachedResourceSpecificIngterpreterData("getEnvironmentVariables",e,this.serviceContainer),f.clearCachedResourceSpecificIngterpreterData("CustomEnvironmentVariables",e,this.serviceContainer),this.changeEventEmitter.fire(e)}};m=r([o.injectable(),i(0,o.inject(g.IEnvironmentVariablesService)),i(1,o.inject(h.IDisposableRegistry)),i(2,o.inject(d.IPlatformService)),i(3,o.inject(l.IWorkspaceService)),i(4,o.inject(h.IConfigurationService)),i(5,o.inject(h.ICurrentProcess)),i(6,o.inject(a.IServiceContainer)),i(7,o.optional())],m),t.EnvironmentVariablesProvider=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionEventDispatcher=void 0;const o=n(0),s=n(3),a=n(1),c=n(149);let l=class{constructor(e,t,n){this.eventHandlers=e,this.debugService=t,this.disposables=n}registerEventHandlers(){this.disposables.push(this.debugService.onDidReceiveDebugSessionCustomEvent(e=>{this.eventHandlers.forEach(t=>t.handleCustomEvent?t.handleCustomEvent(e).ignoreErrors():void 0)})),this.disposables.push(this.debugService.onDidTerminateDebugSession(e=>{this.eventHandlers.forEach(t=>t.handleTerminateEvent?t.handleTerminateEvent(e).ignoreErrors():void 0)}))}};l=r([i(0,o.multiInject(c.IDebugSessionEventHandlers)),i(1,o.inject(s.IDebugService)),i(2,o.inject(a.IDisposableRegistry))],l),t.DebugSessionEventDispatcher=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(838),o=n(839),s=n(840),a=n(841),c=n(842),l=n(217),u=n(847),d=n(848),h=n(849),p=n(850),f=n(851),g=n(852),m=n(853),v=n(854),y=n(855),b=n(856),S=n(857),E=n(858),w=n(859),_=n(860),P=n(360),C=n(861),T=n(219),I=n(862),O=n(864),R=n(149),D=n(42);t.registerTypes=function(e){e.addSingleton(r.IExtensionSingleActivationService,h.LaunchJsonCompletionProvider),e.addSingleton(r.IExtensionSingleActivationService,p.InterpreterPathCommand),e.addSingleton(r.IExtensionSingleActivationService,f.LaunchJsonUpdaterService),e.addSingleton(D.IDebugConfigurationService,d.PythonDebugConfigurationService),e.addSingleton(D.IDebuggerBanner,u.DebuggerBanner),e.addSingleton(R.IChildProcessAttachService,O.ChildProcessAttachService),e.addSingleton(R.IDebugSessionEventHandlers,I.ChildProcessAttachEventHandler),e.addSingleton(T.IDebugConfigurationResolver,C.LaunchConfigurationResolver,"launch"),e.addSingleton(T.IDebugConfigurationResolver,_.AttachConfigurationResolver,"attach"),e.addSingleton(T.IDebugConfigurationProviderFactory,S.DebugConfigurationProviderFactory),e.addSingleton(D.IDebugConfigurationProvider,m.FileLaunchDebugConfigurationProvider,D.DebugConfigurationType.launchFile),e.addSingleton(D.IDebugConfigurationProvider,g.DjangoLaunchDebugConfigurationProvider,D.DebugConfigurationType.launchDjango),e.addSingleton(D.IDebugConfigurationProvider,v.FlaskLaunchDebugConfigurationProvider,D.DebugConfigurationType.launchFlask),e.addSingleton(D.IDebugConfigurationProvider,w.RemoteAttachDebugConfigurationProvider,D.DebugConfigurationType.remoteAttach),e.addSingleton(D.IDebugConfigurationProvider,y.ModuleLaunchDebugConfigurationProvider,D.DebugConfigurationType.launchModule),e.addSingleton(D.IDebugConfigurationProvider,E.PyramidLaunchDebugConfigurationProvider,D.DebugConfigurationType.launchPyramid),e.addSingleton(D.IDebugConfigurationProvider,b.PidAttachDebugConfigurationProvider,D.DebugConfigurationType.pidAttach),e.addSingleton(P.IDebugEnvironmentVariablesService,P.DebugEnvironmentVariablesHelper),e.addSingleton(r.IExtensionSingleActivationService,i.DebugAdapterActivator),e.addSingleton(D.IDebugAdapterDescriptorFactory,o.DebugAdapterDescriptorFactory),e.addSingleton(D.IDebugSessionLoggingFactory,s.DebugSessionLoggingFactory),e.addSingleton(D.IOutdatedDebuggerPromptFactory,a.OutdatedDebuggerPromptFactory),e.addSingleton(l.IAttachProcessProviderFactory,c.AttachProcessProviderFactory)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugAdapterActivator=void 0;const o=n(0),s=n(3),a=n(1),c=n(52),l=n(217),u=n(42);let d=class{constructor(e,t,n,r,i,o){this.debugService=e,this.descriptorFactory=t,this.debugSessionLoggingFactory=n,this.debuggerPromptFactory=r,this.disposables=i,this.attachProcessProviderFactory=o}async activate(){this.attachProcessProviderFactory.registerCommands(),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(c.DebuggerTypeName,this.debugSessionLoggingFactory)),this.disposables.push(this.debugService.registerDebugAdapterTrackerFactory(c.DebuggerTypeName,this.debuggerPromptFactory)),this.disposables.push(this.debugService.registerDebugAdapterDescriptorFactory(c.DebuggerTypeName,this.descriptorFactory))}};d=r([o.injectable(),i(0,o.inject(s.IDebugService)),i(1,o.inject(u.IDebugAdapterDescriptorFactory)),i(2,o.inject(u.IDebugSessionLoggingFactory)),i(3,o.inject(u.IOutdatedDebuggerPromptFactory)),i(4,o.inject(a.IDisposableRegistry)),i(5,o.inject(l.IAttachProcessProviderFactory))],d),t.DebugAdapterActivator=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugAdapterDescriptorFactory=void 0;const o=n(0),s=n(4),a=n(2),c=n(3),l=n(5),u=n(61),d=n(12),h=n(7),p=n(9);let f=class{constructor(e,t){this.interpreterService=e,this.appShell=t}async createDebugAdapterDescriptor(e,t){var n,r;const i=e.configuration;if("attach"===i.request){if(void 0!==i.connect)return new a.DebugAdapterServer(i.connect.port,null!==(n=i.connect.host)&&void 0!==n?n:"127.0.0.1");if(void 0!==i.port)return new a.DebugAdapterServer(i.port,null!==(r=i.host)&&void 0!==r?r:"127.0.0.1");if(void 0===i.listen&&void 0===i.processId)throw new Error('"request":"attach" requires either "connect", "listen", or "processId"')}const o=await this.getDebugAdapterPython(i,e.workspaceFolder);if(0!==o.length){"attach"===i.request&&void 0!==i.processId&&h.sendTelemetryEvent(p.EventName.DEBUGGER_ATTACH_TO_LOCAL_PROCESS);const e=i.logToFile?["--log-dir",u.EXTENSION_ROOT_DIR]:[];if(void 0!==i.debugAdapterPath)return new a.DebugAdapterExecutable(o,[i.debugAdapterPath,...e]);const t=s.join(u.EXTENSION_ROOT_DIR,"pythonFiles","lib","python","debugpy","adapter");return h.sendTelemetryEvent(p.EventName.DEBUG_ADAPTER_USING_WHEELS_PATH,void 0,{usingWheels:!0}),new a.DebugAdapterExecutable(o,[t,...e])}throw new Error("Debug Adapter Executable not provided")}async getDebugAdapterPython(e,t){if(void 0!==e.debugAdapterPython)return e.debugAdapterPython;if(e.pythonPath)return e.pythonPath;const n=t?t.uri:void 0,r=await this.interpreterService.getActiveInterpreter(n);if(r)return l.traceVerbose(`Selecting active interpreter as Python Executable for DA '${r.path}'`),r.path;const i=await this.interpreterService.getInterpreters(n);return 0===i.length?(this.notifySelectInterpreter().ignoreErrors(),""):(l.traceVerbose(`Picking first available interpreter to launch the DA '${i[0].path}'`),i[0].path)}async notifySelectInterpreter(){await this.appShell.showErrorMessage("Please install Python or select a Python Interpreter to use the debugger.")}};f=r([o.injectable(),i(0,o.inject(d.IInterpreterService)),i(1,o.inject(c.IApplicationShell))],f),t.DebugAdapterDescriptorFactory=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionLoggingFactory=void 0;const o=n(0),s=n(4),a=n(6),c=n(30),l=n(61);class u{constructor(e,t){if(this.session=e,this.enabled=!1,this.timer=new c.StopWatch,this.enabled=this.session.configuration.logToFile,this.enabled){const e=`debugger.vscode_${this.session.id}.log`;this.stream=t.createWriteStream(s.join(l.EXTENSION_ROOT_DIR,e))}}onWillStartSession(){this.timer.reset(),this.log(`Starting Session:\n${this.stringify(this.session.configuration)}\n`)}onWillReceiveMessage(e){this.log(`Client --\x3e Adapter:\n${this.stringify(e)}\n`)}onDidSendMessage(e){this.log(`Client <-- Adapter:\n${this.stringify(e)}\n`)}onWillStopSession(){this.log("Stopping Session\n")}onError(e){this.log(`Error:\n${this.stringify(e)}\n`)}onExit(e,t){var n;this.log(`Exit:\nExit-Code: ${e||0}\nSignal: ${t||"none"}\n`),null===(n=this.stream)||void 0===n||n.close()}log(e){this.enabled&&this.stream.write(`${this.timer.elapsedTime} ${e}`)}stringify(e){return JSON.stringify(e,null,4)}}let d=class{constructor(e){this.fileSystem=e}createDebugAdapterTracker(e){return new u(e,this.fileSystem)}};d=r([o.injectable(),i(0,o.inject(a.IFileSystem))],d),t.DebugSessionLoggingFactory=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OutdatedDebuggerPromptFactory=void 0;const o=n(0),s=n(3),a=n(1),c=n(13);class l{constructor(e,t,n){this.promptCheck=e,this.appShell=t,this.browserService=n}onDidSendMessage(e){if(this.promptCheck.shouldShowPrompt()&&this.isPtvsd(e)){const e=[c.Common.moreInfo()];this.appShell.showInformationMessage(c.OutdatedDebugger.outdatedDebuggerMessage(),...e).then(t=>{t===e[0]&&this.browserService.launch("https://aka.ms/migrateToDebugpy")})}}isPtvsd(e){if("event"===e.type){const t=e;if("output"===t.event){const e=t;if("telemetry"===e.body.category){if("ptvsd"===e.body.output&&!e.body.data.packageVersion.startsWith("1"))return this.promptCheck.setShowPrompt(!1),!0;"debugpy"===e.body.output&&this.promptCheck.setShowPrompt(!1)}}}return!1}}class u{constructor(){this.shouldShow=!0}shouldShowPrompt(){return this.shouldShow}setShowPrompt(e){this.shouldShow=e}}let d=class{constructor(e,t){this.appShell=e,this.browserService=t,this.promptCheck=new u}createDebugAdapterTracker(e){return new l(this.promptCheck,this.appShell,this.browserService)}};d=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(a.IBrowserService))],d),t.OutdatedDebuggerPromptFactory=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachProcessProviderFactory=void 0;const o=n(0),s=n(3),a=n(10),c=n(6),l=n(18),u=n(1),d=n(843),h=n(844);let p=class{constructor(e,t,n,r,i){this.applicationShell=e,this.commandManager=t,this.platformService=n,this.processServiceFactory=r,this.disposableRegistry=i}registerCommands(){const e=new h.AttachProcessProvider(this.platformService,this.processServiceFactory),t=new d.AttachPicker(this.applicationShell,e),n=this.commandManager.registerCommand(a.Commands.PickLocalProcess,()=>t.showQuickPick(),this);this.disposableRegistry.push(n)}};p=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(s.ICommandManager)),i(2,o.inject(c.IPlatformService)),i(3,o.inject(l.IProcessServiceFactory)),i(4,o.inject(u.IDisposableRegistry))],p),t.AttachProcessProviderFactory=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachPicker=void 0;const o=n(0),s=n(3),a=n(357),c=n(13),l=n(217);let u=class{constructor(e,t){this.applicationShell=e,this.attachItemsProvider=t}showQuickPick(){return new Promise(async(e,t)=>{const n=await this.attachItemsProvider.getAttachItems(),r={iconPath:a.getIcon(l.REFRESH_BUTTON_ICON),tooltip:c.AttachProcess.refreshList()},i=this.applicationShell.createQuickPick();i.title=c.AttachProcess.attachTitle(),i.placeholder=c.AttachProcess.selectProcessPlaceholder(),i.canSelectMany=!1,i.matchOnDescription=!0,i.matchOnDetail=!0,i.items=n,i.buttons=[r];const o=[];i.onDidTriggerButton(async()=>{const e=await this.attachItemsProvider.getAttachItems();i.items=e},this,o),i.onDidAccept(()=>{1!==i.selectedItems.length&&t(new Error(c.AttachProcess.noProcessSelected()));const n=i.selectedItems[0].id;o.forEach(e=>e.dispose()),i.dispose(),e(n)},void 0,o),i.onDidHide(()=>{o.forEach(e=>e.dispose()),i.dispose(),t(new Error(c.AttachProcess.noProcessSelected()))},void 0,o),i.show()})}};u=r([o.injectable(),i(0,o.inject(s.IApplicationShell))],u),t.AttachPicker=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachProcessProvider=void 0;const o=n(0),s=n(6),a=n(18),c=n(13),l=n(845),u=n(846);let d=class{constructor(e,t){this.platformService=e,this.processServiceFactory=t}getAttachItems(){return this._getInternalProcessEntries().then(e=>(e.sort(({processName:e,commandLine:t},{processName:n,commandLine:r})=>{const i=(e,t)=>{const n=e.toLowerCase(),r=t.toLowerCase();return n===r?0:n<r?-1:1},o=e.startsWith("python"),s=n.startsWith("python");return o||s?o&&!s?-1:s&&!o?1:o?i(t,r):i(r,t):i(e,n)}),e))}async _getInternalProcessEntries(){let e;if(this.platformService.isMac)e=l.PsProcessParser.psDarwinCommand;else if(this.platformService.isLinux)e=l.PsProcessParser.psLinuxCommand;else{if(!this.platformService.isWindows)throw new Error(c.AttachProcess.unsupportedOS().format(this.platformService.osType));e=u.WmicProcessParser.wmicCommand}const t=await this.processServiceFactory.create(),n=await t.exec(e.command,e.args,{throwOnStdErr:!0});return this.platformService.isWindows?u.WmicProcessParser.parseProcesses(n.stdout):l.PsProcessParser.parseProcesses(n.stdout)}};d=r([o.injectable(),i(0,o.inject(s.IPlatformService)),i(1,o.inject(a.IProcessServiceFactory))],d),t.AttachProcessProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PsProcessParser=void 0,function(e){const t="".padStart(50,"a");function n(e){const t=new RegExp("^\\s*([0-9]+)\\s+(.{49})\\s+(.*)$").exec(e);if(4===(null==t?void 0:t.length)){const e=t[1].trim(),n=t[2].trim(),r=t[3].trim();return{label:n,description:e,detail:r,id:e,processName:n,commandLine:r}}}e.psLinuxCommand={command:"ps",args:["axww","-o",`pid=,comm=${t},args=`]},e.psDarwinCommand={command:"ps",args:["axww","-o",`pid=,comm=${t},args=`,"-c"]},e.parseProcesses=function(e){return function(e){const t=[];for(let r=1;r<e.length;r+=1){const i=e[r];if(!i)continue;const o=n(i);o&&t.push(o)}return t}(e.split("\n"))}}(t.PsProcessParser||(t.PsProcessParser={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WmicProcessParser=void 0,function(e){const t={label:"",description:"",detail:"",id:"",processName:"",commandLine:""};function n(e,t){const n=e.indexOf("="),r=t;if(n>0){const t=e.slice(0,n).trim();let i=e.slice(n+1).trim();if("Name"===t)r.label=i,r.processName=i;else if("ProcessId"===t)r.description=i,r.id=i;else if("CommandLine"===t){const e="\\??\\";0===i.lastIndexOf(e,0)&&(i=i.slice(e.length)),r.detail=i,r.commandLine=i}}return r}e.wmicCommand={command:"wmic",args:["process","get","Name,ProcessId,CommandLine","/FORMAT:list"]},e.parseProcesses=function(e){const r=e.split("\r\n"),i=[];let o={...t};for(const e of r)e.length&&(n(e,o),0===e.lastIndexOf("ProcessId",0)&&(i.push(o),o={...t}));return i}}(t.WmicProcessParser||(t.WmicProcessParser={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerBanner=t.PersistentStateKeys=void 0;const o=n(0),s=n(2),a=n(3);n(11);const c=n(5),l=n(1),u=n(8),d=n(52);var h;!function(e){e.ShowBanner="ShowBanner",e.DebuggerLaunchCounter="DebuggerLaunchCounter",e.DebuggerLaunchThresholdCounter="DebuggerLaunchThresholdCounter",e.UserSelected="DebuggerUserSelected"}(h=t.PersistentStateKeys||(t.PersistentStateKeys={}));let p=class{constructor(e){this.serviceContainer=e}initialize(){this.initialized||(this.initialized=!0,this.isEnabled()&&this.addCallback())}isEnabled(){const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.ShowBanner;return e.createGlobalPersistentState(t,!0).value}async disable(){const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.ShowBanner,n=e.createGlobalPersistentState(t,!1);await n.updateValue(!1)}async shouldShow(){return!(!this.isEnabled()||this.disabledInCurrentSession||s.env.uiKind===(null===s.UIKind||void 0===s.UIKind?void 0:s.UIKind.Web))&&(!!await this.passedThreshold()&&this.isUserSelected())}async show(){const e=this.serviceContainer.get(a.IApplicationShell),t="Yes, take survey now",n="No thanks";switch(await e.showInformationMessage("Can you please take 2 minutes to tell us how the debugger is working for you?",t,n,"Remind me later")){case t:await this.action(),await this.disable();break;case n:await this.disable();break;default:this.disabledInCurrentSession=!0}}async action(){const e=await this.getGetDebuggerLaunchCounter();this.serviceContainer.get(l.IBrowserService).launch("https://www.research.net/r/N7B25RV?n="+e)}async isUserSelected(){if(void 0!==this.userSelected)return this.userSelected;const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.UserSelected,n=e.createGlobalPersistentState(t,void 0);let r=n.value;if(void 0===r){r=this.serviceContainer.get(l.IRandom).getRandomInt(0,100)<10,n.updateValue(r).ignoreErrors()}return this.userSelected=r,r}async passedThreshold(){const[e,t]=await Promise.all([this.getDebuggerLaunchThresholdCounter(),this.getGetDebuggerLaunchCounter()]);return t>=e}async incrementDebuggerLaunchCounter(){const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.DebuggerLaunchCounter,n=e.createGlobalPersistentState(t,0);await n.updateValue(n.value+1)}async getGetDebuggerLaunchCounter(){const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.DebuggerLaunchCounter;return e.createGlobalPersistentState(t,0).value}async getDebuggerLaunchThresholdCounter(){const e=this.serviceContainer.get(l.IPersistentStateFactory),t=h.DebuggerLaunchThresholdCounter,n=e.createGlobalPersistentState(t,void 0);if(void 0===n.value){const e=this.serviceContainer.get(l.IRandom).getRandomInt(1,11);await n.updateValue(e)}return n.value}addCallback(){const e=this.serviceContainer.get(a.IDebugService).onDidTerminateDebugSession(async e=>{e.type===d.DebuggerTypeName&&await this.onDidTerminateDebugSession().catch(e=>c.traceError("Error in debugger Banner",e))});this.serviceContainer.get(l.IDisposableRegistry).push(e)}async onDidTerminateDebugSession(){if(!this.isEnabled())return;await this.incrementDebuggerLaunchCounter();await this.shouldShow()&&await this.show()}};p=r([o.injectable(),i(0,o.inject(u.IServiceContainer))],p),t.DebuggerBanner=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonDebugConfigurationService=void 0;const o=n(0),s=n(13),a=n(218),c=n(42),l=n(219);let u=class{constructor(e,t,n,r){this.attachResolver=e,this.launchResolver=t,this.providerFactory=n,this.multiStepFactory=r}async provideDebugConfigurations(e,t){const n={config:{},folder:e,token:t},r=this.multiStepFactory.create();return await r.run((e,t)=>this.pickDebugConfiguration(e,t),n),0===Object.keys(n.config).length?void 0:[n.config]}async resolveDebugConfiguration(e,t,n){if("attach"===t.request)return this.attachResolver.resolveDebugConfiguration(e,t,n);if("test"===t.request)throw Error("Please use the command 'Python: Debug Unit Tests'");if(0===Object.keys(t).length){const r=await this.provideDebugConfigurations(e,n);if(void 0===r)return;Array.isArray(r)&&1===r.length&&(t=r[0])}return this.launchResolver.resolveDebugConfiguration(e,t,n)}async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){function r(r){return r.resolveDebugConfigurationWithSubstitutedVariables(e,t,n)}return"attach"===t.request?r(this.attachResolver):r(this.launchResolver)}async pickDebugConfiguration(e,t){const n=[{label:s.DebugConfigStrings.file.selectConfiguration.label(),type:c.DebugConfigurationType.launchFile,description:s.DebugConfigStrings.file.selectConfiguration.description()},{label:s.DebugConfigStrings.module.selectConfiguration.label(),type:c.DebugConfigurationType.launchModule,description:s.DebugConfigStrings.module.selectConfiguration.description()},{label:s.DebugConfigStrings.attach.selectConfiguration.label(),type:c.DebugConfigurationType.remoteAttach,description:s.DebugConfigStrings.attach.selectConfiguration.description()},{label:s.DebugConfigStrings.attachPid.selectConfiguration.label(),type:c.DebugConfigurationType.pidAttach,description:s.DebugConfigStrings.attachPid.selectConfiguration.description()},{label:s.DebugConfigStrings.django.selectConfiguration.label(),type:c.DebugConfigurationType.launchDjango,description:s.DebugConfigStrings.django.selectConfiguration.description()},{label:s.DebugConfigStrings.flask.selectConfiguration.label(),type:c.DebugConfigurationType.launchFlask,description:s.DebugConfigStrings.flask.selectConfiguration.description()},{label:s.DebugConfigStrings.pyramid.selectConfiguration.label(),type:c.DebugConfigurationType.launchPyramid,description:s.DebugConfigStrings.pyramid.selectConfiguration.description()}];t.config={};const r=await e.showQuickPick({title:s.DebugConfigStrings.selectConfiguration.title(),placeholder:s.DebugConfigStrings.selectConfiguration.placeholder(),activeItem:n[0],items:n});if(r){const e=this.providerFactory.create(r.type);return e.buildConfiguration.bind(e)}}};u=r([o.injectable(),i(0,o.inject(l.IDebugConfigurationResolver)),i(0,o.named("attach")),i(1,o.inject(l.IDebugConfigurationResolver)),i(1,o.named("launch")),i(2,o.inject(l.IDebugConfigurationProviderFactory)),i(3,o.inject(a.IMultiStepInputFactory))],u),t.PythonDebugConfigurationService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCompletionProvider=void 0;const o=n(0),s=n(91),a=n(4),c=n(2),l=n(3),u=n(1),d=n(13);var h;!function(e){e.json="json",e.jsonWithComments="jsonc"}(h||(h={}));let p=class{constructor(e,t){this.languageService=e,this.disposableRegistry=t}async activate(){this.disposableRegistry.push(this.languageService.registerCompletionItemProvider({language:h.json},this)),this.disposableRegistry.push(this.languageService.registerCompletionItemProvider({language:h.jsonWithComments},this))}async provideCompletionItems(e,t,n){return this.canProvideCompletions(e,t)?[{command:{command:"python.SelectAndInsertDebugConfiguration",title:d.DebugConfigStrings.launchJsonCompletions.description(),arguments:[e,t,n]},documentation:d.DebugConfigStrings.launchJsonCompletions.description(),sortText:"AAAA",preselect:!0,kind:c.CompletionItemKind.Enum,label:d.DebugConfigStrings.launchJsonCompletions.label(),insertText:new c.SnippetString}]:[]}canProvideCompletions(e,t){if("launch.json"!==a.basename(e.uri.fsPath))return!1;const n=s.getLocation(e.getText(),e.offsetAt(t));return"configurations"===n.path[0]&&2===n.path.length}};p=r([o.injectable(),i(0,o.inject(l.ILanguageService)),i(1,o.inject(u.IDisposableRegistry))],p),t.LaunchJsonCompletionProvider=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathCommand=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(1);let u=class{constructor(e,t,n){this.commandManager=e,this.configurationService=t,this.disposables=n}async activate(){this.disposables.push(this.commandManager.registerCommand(c.Commands.GetSelectedInterpreterPath,e=>this._getSelectedInterpreterPath(e)))}_getSelectedInterpreterPath(e){const t="workspaceFolder"in e?e.workspaceFolder:e[1]?e[1]:void 0;return this.configurationService.getSettings(t?s.Uri.parse(t):void 0).pythonPath}};u=r([o.injectable(),i(0,o.inject(a.ICommandManager)),i(1,o.inject(l.IConfigurationService)),i(2,o.inject(l.IDisposableRegistry))],u),t.InterpreterPathCommand=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonUpdaterService=t.LaunchJsonUpdaterServiceHelper=void 0;const o=n(0),s=n(91),a=n(2),c=n(3),l=n(1),u=n(14),d=n(7),h=n(9),p=n(42);class f{constructor(e,t,n,r){this.commandManager=e,this.workspace=t,this.documentManager=n,this.configurationProvider=r}async selectAndInsertDebugConfig(e,t,n){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document===e){const r=this.workspace.getWorkspaceFolder(e.uri),i=await this.configurationProvider.provideDebugConfigurations(r,n);!n.isCancellationRequested&&Array.isArray(i)&&i.length>0&&await this.insertDebugConfiguration(e,t,i[0])}}async insertDebugConfiguration(e,t,n){const r=this.getCursorPositionInConfigurationsArray(e,t);if(!r)return;const i=this.isCommaImmediatelyBeforeCursor(e,t)?"BeforeCursor":void 0,o=this.getTextForInsertion(n,r,i),s=new a.WorkspaceEdit;s.insert(e.uri,t,o),await this.documentManager.applyEdit(s),this.commandManager.executeCommand("editor.action.formatDocument").then(u.noop,u.noop)}getTextForInsertion(e,t,n){const r=JSON.stringify(e);return"AfterItem"===t?"BeforeCursor"===n?r:","+r:"BeforeItem"===t?r+",":r}getCursorPositionInConfigurationsArray(e,t){if(this.isConfigurationArrayEmpty(e))return"InsideEmptyArray";const n=s.createScanner(e.getText(),!0);n.setPosition(e.offsetAt(t));const r=n.scan();return 5===r||4===r?"AfterItem":1===r?"BeforeItem":void 0}isConfigurationArrayEmpty(e){const t=s.parse(e.getText(),[],{allowTrailingComma:!0,disallowComments:!1});return!t||!Array.isArray(t.configurations)||0===t.configurations.length}isCommaImmediatelyBeforeCursor(e,t){const n=e.lineAt(t.line),r=e.getText(new a.Range(n.range.start,t));if(r.trim().endsWith(","))return!0;if(0!==r.trim().length)return!1;let i=t.line-1;for(;i>0;){const t=e.lineAt(i).text;if(t.trim().endsWith(","))return!0;if(0!==t.trim().length)return!1;i-=1}return!1}}r([d.captureTelemetry(h.EventName.DEBUGGER_CONFIGURATION_PROMPTS_IN_LAUNCH_JSON)],f.prototype,"selectAndInsertDebugConfig",null),t.LaunchJsonUpdaterServiceHelper=f;let g=class{constructor(e,t,n,r,i){this.commandManager=e,this.disposableRegistry=t,this.workspace=n,this.documentManager=r,this.configurationProvider=i}async activate(){const e=new f(this.commandManager,this.workspace,this.documentManager,this.configurationProvider);this.disposableRegistry.push(this.commandManager.registerCommand("python.SelectAndInsertDebugConfiguration",e.selectAndInsertDebugConfig,e))}};g=r([o.injectable(),i(0,o.inject(c.ICommandManager)),i(1,o.inject(l.IDisposableRegistry)),i(2,o.inject(c.IWorkspaceService)),i(3,o.inject(c.IDocumentManager)),i(4,o.inject(p.IDebugConfigurationService))],g),t.LaunchJsonUpdaterService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoLaunchDebugConfigurationProvider=void 0;const o=n(0),s=n(4),a=n(3),c=n(6),l=n(1),u=n(13),d=n(99),h=n(7),p=n(9),f=n(52),g=n(42);let m=class{constructor(e,t,n){this.fs=e,this.workspace=t,this.pathUtils=n}async buildConfiguration(e,t){const n=await this.getManagePyPath(t.folder);let r;const i=`\${workspaceFolder}${this.pathUtils.separator}manage.py`,o={name:u.DebugConfigStrings.django.snippet.name(),type:f.DebuggerTypeName,request:"launch",program:n||i,args:["runserver"],django:!0};if(!n){const n=await e.showInputBox({title:u.DebugConfigStrings.django.enterManagePyPath.title(),value:i,prompt:u.DebugConfigStrings.django.enterManagePyPath.prompt(),validate:e=>this.validateManagePy(t.folder,i,e)});n&&(r=!0,o.program=n)}h.sendTelemetryEvent(p.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:g.DebugConfigurationType.launchDjango,autoDetectedDjangoManagePyPath:!!n,manuallyEnteredAValue:r}),Object.assign(t.config,o)}async validateManagePy(e,t,n){const r=u.DebugConfigStrings.django.enterManagePyPath.invalid();if(!n||0===n.trim().length)return r;const i=this.resolveVariables(n,e?e.uri:void 0);return(n===t||await this.fs.fileExists(i))&&i.trim().toLowerCase().endsWith(".py")?void 0:r}resolveVariables(e,t){return new d.SystemVariables(t,void 0,this.workspace).resolveAny(e)}async getManagePyPath(e){if(!e)return;const t=s.join(e.uri.fsPath,"manage.py");return await this.fs.fileExists(t)?`\${workspaceFolder}${this.pathUtils.separator}manage.py`:void 0}};m=r([o.injectable(),i(0,o.inject(c.IFileSystem)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(l.IPathUtils))],m),t.DjangoLaunchDebugConfigurationProvider=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.FileLaunchDebugConfigurationProvider=void 0;const i=n(0),o=n(13),s=n(7),a=n(9),c=n(52),l=n(42);let u=class{async buildConfiguration(e,t){const n={name:o.DebugConfigStrings.file.snippet.name(),type:c.DebuggerTypeName,request:"launch",program:"${file}",console:"integratedTerminal"};Object.assign(t.config,n)}};r([s.captureTelemetry(a.EventName.DEBUGGER_CONFIGURATION_PROMPTS,{configurationType:l.DebugConfigurationType.launchFile},!1)],u.prototype,"buildConfiguration",null),u=r([i.injectable()],u),t.FileLaunchDebugConfigurationProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlaskLaunchDebugConfigurationProvider=void 0;const o=n(0),s=n(4),a=n(6),c=n(13),l=n(7),u=n(9),d=n(52),h=n(42);let p=class{constructor(e){this.fs=e}isSupported(e){return e===h.DebugConfigurationType.launchFlask}async buildConfiguration(e,t){const n=await this.getApplicationPath(t.folder);let r;const i={name:c.DebugConfigStrings.flask.snippet.name(),type:d.DebuggerTypeName,request:"launch",module:"flask",env:{FLASK_APP:n||"app.py",FLASK_ENV:"development",FLASK_DEBUG:"0"},args:["run","--no-debugger"],jinja:!0};if(!n){const t=await e.showInputBox({title:c.DebugConfigStrings.flask.enterAppPathOrNamePath.title(),value:"app.py",prompt:c.DebugConfigStrings.flask.enterAppPathOrNamePath.prompt(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:c.DebugConfigStrings.flask.enterAppPathOrNamePath.invalid())});t&&(r=!0,i.env.FLASK_APP=t)}l.sendTelemetryEvent(u.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:h.DebugConfigurationType.launchFlask,autoDetectedFlaskAppPyPath:!!n,manuallyEnteredAValue:r}),Object.assign(t.config,i)}async getApplicationPath(e){if(!e)return;const t=s.join(e.uri.fsPath,"app.py");return await this.fs.fileExists(t)?"app.py":void 0}};p=r([o.injectable(),i(0,o.inject(a.IFileSystem))],p),t.FlaskLaunchDebugConfigurationProvider=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleLaunchDebugConfigurationProvider=void 0;const i=n(0),o=n(13),s=n(7),a=n(9),c=n(52),l=n(42);let u=class{async buildConfiguration(e,t){let n;const r={name:o.DebugConfigStrings.module.snippet.name(),type:c.DebuggerTypeName,request:"launch",module:o.DebugConfigStrings.module.snippet.default()},i=await e.showInputBox({title:o.DebugConfigStrings.module.enterModule.title(),value:r.module||o.DebugConfigStrings.module.enterModule.default(),prompt:o.DebugConfigStrings.module.enterModule.prompt(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:o.DebugConfigStrings.module.enterModule.invalid())});i&&(n=!0,r.module=i),s.sendTelemetryEvent(a.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.launchModule,manuallyEnteredAValue:n}),Object.assign(t.config,r)}};u=r([i.injectable()],u),t.ModuleLaunchDebugConfigurationProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PidAttachDebugConfigurationProvider=void 0;const i=n(0),o=n(13),s=n(7),a=n(9),c=n(52),l=n(42);let u=class{async buildConfiguration(e,t){const n={name:o.DebugConfigStrings.attachPid.snippet.name(),type:c.DebuggerTypeName,request:"attach",processId:"${command:pickProcess}"};Object.assign(t.config,n)}};r([s.captureTelemetry(a.EventName.DEBUGGER_CONFIGURATION_PROMPTS,{configurationType:l.DebugConfigurationType.pidAttach},!1)],u.prototype,"buildConfiguration",null),u=r([i.injectable()],u),t.PidAttachDebugConfigurationProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugConfigurationProviderFactory=void 0;const o=n(0),s=n(42);let a=class{constructor(e,t,n,r,i,o,a){this.providers=new Map,this.providers.set(s.DebugConfigurationType.launchDjango,t),this.providers.set(s.DebugConfigurationType.launchFlask,e),this.providers.set(s.DebugConfigurationType.launchFile,r),this.providers.set(s.DebugConfigurationType.launchModule,n),this.providers.set(s.DebugConfigurationType.launchPyramid,i),this.providers.set(s.DebugConfigurationType.remoteAttach,o),this.providers.set(s.DebugConfigurationType.pidAttach,a)}create(e){return this.providers.get(e)}};a=r([o.injectable(),i(0,o.inject(s.IDebugConfigurationProvider)),i(0,o.named(s.DebugConfigurationType.launchFlask)),i(1,o.inject(s.IDebugConfigurationProvider)),i(1,o.named(s.DebugConfigurationType.launchDjango)),i(2,o.inject(s.IDebugConfigurationProvider)),i(2,o.named(s.DebugConfigurationType.launchModule)),i(3,o.inject(s.IDebugConfigurationProvider)),i(3,o.named(s.DebugConfigurationType.launchFile)),i(4,o.inject(s.IDebugConfigurationProvider)),i(4,o.named(s.DebugConfigurationType.launchPyramid)),i(5,o.inject(s.IDebugConfigurationProvider)),i(5,o.named(s.DebugConfigurationType.remoteAttach)),i(6,o.inject(s.IDebugConfigurationProvider)),i(6,o.named(s.DebugConfigurationType.pidAttach))],a),t.DebugConfigurationProviderFactory=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PyramidLaunchDebugConfigurationProvider=void 0;const o=n(0),s=n(4),a=n(3),c=n(6),l=n(1),u=n(13),d=n(99),h=n(7),p=n(9),f=n(52),g=n(42);let m=class{constructor(e,t,n){this.fs=e,this.workspace=t,this.pathUtils=n}async buildConfiguration(e,t){const n=await this.getDevelopmentIniPath(t.folder),r=`\${workspaceFolder}${this.pathUtils.separator}development.ini`;let i;const o={name:u.DebugConfigStrings.pyramid.snippet.name(),type:f.DebuggerTypeName,request:"launch",module:"pyramid.scripts.pserve",args:[n||r],pyramid:!0,jinja:!0};if(!n){const n=await e.showInputBox({title:u.DebugConfigStrings.pyramid.enterDevelopmentIniPath.title(),value:r,prompt:u.DebugConfigStrings.pyramid.enterDevelopmentIniPath.prompt(),validate:e=>this.validateIniPath(t?t.folder:void 0,r,e)});n&&(i=!0,o.args=[n])}h.sendTelemetryEvent(p.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:g.DebugConfigurationType.launchPyramid,autoDetectedPyramidIniPath:!!n,manuallyEnteredAValue:i}),Object.assign(t.config,o)}async validateIniPath(e,t,n){if(!e)return;const r=u.DebugConfigStrings.pyramid.enterDevelopmentIniPath.invalid();if(!n||0===n.trim().length)return r;const i=this.resolveVariables(n,e.uri);return(n===t||await this.fs.fileExists(i))&&i.trim().toLowerCase().endsWith(".ini")?void 0:r}resolveVariables(e,t){return new d.SystemVariables(t,void 0,this.workspace).resolveAny(e)}async getDevelopmentIniPath(e){if(!e)return;const t=s.join(e.uri.fsPath,"development.ini");return await this.fs.fileExists(t)?`\${workspaceFolder}${this.pathUtils.separator}development.ini`:void 0}};m=r([o.injectable(),i(0,o.inject(c.IFileSystem)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(l.IPathUtils))],m),t.PyramidLaunchDebugConfigurationProvider=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteAttachDebugConfigurationProvider=void 0;const i=n(0),o=n(13),s=n(7),a=n(9),c=n(52),l=n(42);let u=class{async buildConfiguration(e,t){const n={name:o.DebugConfigStrings.attach.snippet.name(),type:c.DebuggerTypeName,request:"attach",connect:{host:"localhost",port:5678},pathMappings:[{localRoot:"${workspaceFolder}",remoteRoot:"."}]},r=n.connect;return r.host=await e.showInputBox({title:o.DebugConfigStrings.attach.enterRemoteHost.title(),step:1,totalSteps:2,value:r.host||"localhost",prompt:o.DebugConfigStrings.attach.enterRemoteHost.prompt(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:o.DebugConfigStrings.attach.enterRemoteHost.invalid())}),r.host||(r.host="localhost"),s.sendTelemetryEvent(a.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.remoteAttach,manuallyEnteredAValue:"localhost"!==r.host}),Object.assign(t.config,n),n=>this.configurePort(e,t.config)}async configurePort(e,t){const n=t.connect||(t.connect={}),r=await e.showInputBox({title:o.DebugConfigStrings.attach.enterRemotePort.title(),step:2,totalSteps:2,value:(n.port||5678).toString(),prompt:o.DebugConfigStrings.attach.enterRemotePort.prompt(),validate:e=>Promise.resolve(e&&/^\d+$/.test(e.trim())?void 0:o.DebugConfigStrings.attach.enterRemotePort.invalid())});r&&/^\d+$/.test(r.trim())&&(n.port=parseInt(r,10)),n.port||(n.port=5678),s.sendTelemetryEvent(a.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.remoteAttach,manuallyEnteredAValue:5678!==n.port})}};u=r([i.injectable()],u),t.RemoteAttachDebugConfigurationProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AttachConfigurationResolver=void 0;const o=n(0),s=n(3),a=n(6),c=n(1),l=n(358),u=n(359);let d=class extends u.BaseConfigurationResolver{constructor(e,t,n,r){super(e,t,n,r)}async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){const r=this.getWorkspaceFolder(e);await this.provideAttachDefaults(r,t);const i=t;return Array.isArray(i.debugOptions)&&(i.debugOptions=i.debugOptions.filter((e,t)=>i.debugOptions.indexOf(e)===t)),t}async provideAttachDefaults(e,t){Array.isArray(t.debugOptions)||(t.debugOptions=[]),t.connect||t.listen||t.host||(t.host="localhost"),void 0===t.justMyCode&&(t.justMyCode=!t.debugStdLib),t.showReturnValue=!1!==t.showReturnValue,t.workspaceFolder=e?e.fsPath:void 0;const n=t.debugOptions;t.justMyCode||this.debugOption(n,l.DebugOptions.DebugStdLib),t.django&&this.debugOption(n,l.DebugOptions.Django),t.jinja&&this.debugOption(n,l.DebugOptions.Jinja),!0===t.subProcess&&this.debugOption(n,l.DebugOptions.SubProcess),t.pyramid&&-1===n.indexOf(l.DebugOptions.Jinja)&&!1!==t.jinja&&this.debugOption(n,l.DebugOptions.Jinja),(t.redirectOutput||void 0===t.redirectOutput)&&this.debugOption(n,l.DebugOptions.RedirectOutput);const r=this.isLocalHost(t.host);this.platformService.isWindows&&r&&this.debugOption(n,l.DebugOptions.FixFilePathCase),this.platformService.isWindows?this.debugOption(n,l.DebugOptions.WindowsClient):this.debugOption(n,l.DebugOptions.UnixClient),t.showReturnValue&&this.debugOption(n,l.DebugOptions.ShowReturnValue),t.pathMappings=this.resolvePathMappings(t.pathMappings||[],t.host,t.localRoot,t.remoteRoot,e),this.sendTelemetry("attach",t)}resolvePathMappings(e,t,n,r,i){return n&&r&&e.push({localRoot:n,remoteRoot:r}),this.isLocalHost(t)&&(e=this.fixUpPathMappings(e,i?i.fsPath:"")),e.length>0?e:void 0}};d=r([o.injectable(),i(0,o.inject(s.IWorkspaceService)),i(1,o.inject(s.IDocumentManager)),i(2,o.inject(a.IPlatformService)),i(3,o.inject(c.IConfigurationService))],d),t.AttachConfigurationResolver=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchConfigurationResolver=void 0;const o=n(0),s=n(348),a=n(34),c=n(3),l=n(6),u=n(1),d=n(52),h=n(358),p=n(359),f=n(360);let g=class extends p.BaseConfigurationResolver{constructor(e,t,n,r,i,o){super(e,t,r,i),this.invalidPythonPathInDebuggerService=n,this.debugEnvHelper=o}async resolveDebugConfiguration(e,t,n){if(void 0===t.name&&void 0===t.type&&void 0===t.request&&void 0===t.program&&void 0===t.env){const e=this.getProgram();t.name="Launch",t.type=d.DebuggerTypeName,t.request="launch",t.program=null!=e?e:"",t.env={}}const r=this.getWorkspaceFolder(e);return this.resolveAndUpdatePaths(r,t),t}async resolveDebugConfigurationWithSubstitutedVariables(e,t,n){const r=this.getWorkspaceFolder(e);await this.provideLaunchDefaults(r,t);if(await this.validateLaunchConfiguration(e,t))return Array.isArray(t.debugOptions)&&(t.debugOptions=t.debugOptions.filter((e,n)=>t.debugOptions.indexOf(e)===n)),t}async provideLaunchDefaults(e,t){if(void 0===t.python&&(t.python=t.pythonPath),void 0===t.debugAdapterPython&&(t.debugAdapterPython=t.pythonPath),void 0===t.debugLauncherPython&&(t.debugLauncherPython=t.pythonPath),delete t.pythonPath,"string"!=typeof t.cwd&&e&&(t.cwd=e.fsPath),"string"!=typeof t.envFile&&e){const n=this.configurationService.getSettings(e);t.envFile=n.envFile}t.env=await this.debugEnvHelper.getEnvironmentVariables(t),"boolean"!=typeof t.stopOnEntry&&(t.stopOnEntry=!1),t.showReturnValue=!1!==t.showReturnValue,t.console||(t.console="integratedTerminal"),"internalConsole"===t.console||t.internalConsoleOptions||(t.internalConsoleOptions="neverOpen"),Array.isArray(t.debugOptions)||(t.debugOptions=[]),void 0===t.justMyCode&&(t.justMyCode=!t.debugStdLib),t.workspaceFolder=e?e.fsPath:void 0;const n=t.debugOptions;t.justMyCode||this.debugOption(n,h.DebugOptions.DebugStdLib),t.stopOnEntry&&this.debugOption(n,h.DebugOptions.StopOnEntry),t.showReturnValue&&this.debugOption(n,h.DebugOptions.ShowReturnValue),t.django&&this.debugOption(n,h.DebugOptions.Django),t.jinja&&this.debugOption(n,h.DebugOptions.Jinja),void 0===t.redirectOutput&&"internalConsole"===t.console&&(t.redirectOutput=!0),t.redirectOutput&&this.debugOption(n,h.DebugOptions.RedirectOutput),t.sudo&&this.debugOption(n,h.DebugOptions.Sudo),!0===t.subProcess&&this.debugOption(n,h.DebugOptions.SubProcess),this.platformService.isWindows&&this.debugOption(n,h.DebugOptions.FixFilePathCase);const r=this.isDebuggingFlask(t);if((t.pyramid||r)&&-1===n.indexOf(h.DebugOptions.Jinja)&&!1!==t.jinja&&this.debugOption(n,h.DebugOptions.Jinja),t.pathMappings){let n=t.pathMappings;n.length>0&&(n=this.fixUpPathMappings(n||[],e?e.fsPath:"")),t.pathMappings=n.length>0?n:void 0}this.sendTelemetry(t.request,t)}async validateLaunchConfiguration(e,t){const n=this.invalidPythonPathInDebuggerService;return n.validatePythonPath(t.python,this.pythonPathSource,null==e?void 0:e.uri)&&n.validatePythonPath(t.debugAdapterPython,this.pythonPathSource,null==e?void 0:e.uri)&&n.validatePythonPath(t.debugLauncherPython,this.pythonPathSource,null==e?void 0:e.uri)}};g=r([o.injectable(),i(0,o.inject(c.IWorkspaceService)),i(1,o.inject(c.IDocumentManager)),i(2,o.inject(a.IDiagnosticsService)),i(2,o.named(s.InvalidPythonPathInDebuggerServiceId)),i(3,o.inject(l.IPlatformService)),i(4,o.inject(u.IConfigurationService)),i(5,o.inject(f.IDebugEnvironmentVariablesService))],g),t.LaunchConfigurationResolver=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcessAttachEventHandler=void 0;const o=n(0),s=n(23),a=n(863),c=n(149);let l=class{constructor(e){this.childProcessAttachService=e}async handleCustomEvent(e){if(!e)return;let t;e.event!==a.DebuggerEvents.PtvsdAttachToSubprocess&&e.event!==a.DebuggerEvents.DebugpyAttachToSubprocess||(t=e.body,Object.keys(t).length>0&&await this.childProcessAttachService.attach(t,e.session))}};r([s.swallowExceptions("Handle child process launch")],l.prototype,"handleCustomEvent",null),l=r([o.injectable(),i(0,o.inject(c.IChildProcessAttachService))],l),t.ChildProcessAttachEventHandler=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerEvents=void 0,function(e){e.PtvsdAttachToSubprocess="ptvsd_attach",e.DebugpyAttachToSubprocess="debugpyAttach"}(t.DebuggerEvents||(t.DebuggerEvents={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChildProcessAttachService=void 0;const o=n(0),s=n(3),a=n(14),c=n(7),l=n(9);let u=class{constructor(e,t,n){this.appShell=e,this.debugService=t,this.workspaceService=n}async attach(e,t){const n=e,r=n.subProcessId,i=this.getRelatedWorkspaceFolder(n);await this.debugService.startDebugging(i,n,t)||this.appShell.showErrorMessage("Failed to launch debugger for child process "+r).then(a.noop,a.noop)}getRelatedWorkspaceFolder(e){const t=e.workspaceFolder;if(this.workspaceService.hasWorkspaceFolders&&t)return this.workspaceService.workspaceFolders.find(e=>e.uri.fsPath===t)}};r([c.captureTelemetry(l.EventName.DEBUGGER_ATTACH_TO_CHILD_PROCESS)],u.prototype,"attach",null),u=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(s.IDebugService)),i(2,o.inject(s.IWorkspaceService))],u),t.ChildProcessAttachService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(866),i=n(212);t.registerTypes=function(e){e.addSingleton(i.IFormatterHelper,r.FormatterHelper)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormatterHelper=void 0;const o=n(0),s=n(4),a=n(1),c=n(8);let l=class{constructor(e){this.serviceContainer=e}translateToId(e){switch(e){case a.Product.autopep8:return"autopep8";case a.Product.black:return"black";case a.Product.yapf:return"yapf";default:throw new Error(`Unrecognized Formatter '${e}'`)}}getSettingsPropertyNames(e){const t=this.translateToId(e);return{argsName:t+"Args",pathName:t+"Path"}}getExecutionInfo(e,t,n){const r=this.serviceContainer.get(a.IConfigurationService).getSettings(n),i=this.getSettingsPropertyNames(e),o=r.formatting[i.pathName];let c,l=Array.isArray(r.formatting[i.argsName])?r.formatting[i.argsName]:[];return l=l.concat(t),s.basename(o)===o&&(c=o),{execPath:o,moduleName:c,args:l,product:e}}};l=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],l),t.FormatterHelper=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=t.registerInterpreterTypes=void 0;const r=n(16),i=n(868),o=n(869),s=n(870),a=n(112),c=n(871),l=n(872),u=n(874),d=n(875),h=n(876),p=n(877),f=n(878),g=n(879),m=n(880),v=n(881),y=n(882),b=n(40),S=n(883),E=n(884),w=n(885),_=n(886),P=n(887),C=n(888),T=n(889),I=n(77),O=n(12),R=n(893),D=n(894),x=n(895),k=n(896),A=n(361),N=n(897),j=n(898),F=n(899),M=n(900),L=n(150),U=n(901);function W(e){e.addSingleton(r.IExtensionSingleActivationService,d.InterpreterSecurityStorage),e.addSingleton(r.IExtensionSingleActivationService,w.SetInterpreterCommand),e.addSingleton(r.IExtensionSingleActivationService,E.ResetInterpreterCommand),e.addSingleton(r.IExtensionSingleActivationService,_.SetShebangInterpreterCommand),e.addSingleton(b.IInterpreterEvaluation,l.InterpreterEvaluation),e.addSingleton(b.IInterpreterSecurityStorage,d.InterpreterSecurityStorage),e.addSingleton(b.IInterpreterSecurityService,u.InterpreterSecurityService),e.addSingleton(L.IVirtualEnvironmentManager,M.VirtualEnvironmentManager),e.addSingleton(r.IExtensionActivationService,U.VirtualEnvironmentPrompt),e.addSingleton(r.IExtensionSingleActivationService,D.InterpreterSelectionTip),e.addSingleton(O.IInterpreterVersionService,j.InterpreterVersionService),e.addSingleton(O.IInterpreterService,N.InterpreterService),e.addSingleton(O.IInterpreterDisplay,R.InterpreterDisplay),e.addSingleton(I.IPythonPathUpdaterServiceFactory,T.PythonPathUpdaterServiceFactory),e.addSingleton(I.IPythonPathUpdaterServiceManager,C.PythonPathUpdaterService),e.addSingleton(I.IInterpreterSelector,P.InterpreterSelector),e.addSingleton(O.IShebangCodeLensProvider,k.ShebangCodeLensProvider),e.addSingleton(O.IInterpreterHelper,A.InterpreterHelper),e.addSingleton(I.IInterpreterComparer,S.InterpreterComparer),e.addSingleton(O.IInterpreterLocatorProgressHandler,x.InterpreterLocatorProgressStatubarHandler),e.addSingleton(b.IInterpreterAutoSelectionRule,f.CurrentPathInterpretersAutoSelectionRule,b.AutoSelectionRule.currentPath),e.addSingleton(b.IInterpreterAutoSelectionRule,m.SystemWideInterpretersAutoSelectionRule,b.AutoSelectionRule.systemWide),e.addSingleton(b.IInterpreterAutoSelectionRule,v.WindowsRegistryInterpretersAutoSelectionRule,b.AutoSelectionRule.windowsRegistry),e.addSingleton(b.IInterpreterAutoSelectionRule,y.WorkspaceVirtualEnvInterpretersAutoSelectionRule,b.AutoSelectionRule.workspaceVirtualEnvs),e.addSingleton(b.IInterpreterAutoSelectionRule,p.CachedInterpretersAutoSelectionRule,b.AutoSelectionRule.cachedInterpreters),e.addSingleton(b.IInterpreterAutoSelectionRule,g.SettingsInterpretersAutoSelectionRule,b.AutoSelectionRule.settings),e.addSingleton(b.IInterpreterAutoSelectionService,c.InterpreterAutoSelectionService),e.addSingleton(r.IExtensionActivationService,F.CondaInheritEnvPrompt),e.addSingleton(r.IExtensionSingleActivationService,i.PreWarmActivatedEnvironmentVariables),e.addSingleton(O.IInterpreterStatusbarVisibilityFilter,R.AlwaysDisplayStatusBar)}t.registerInterpreterTypes=W,t.registerTypes=function(e){W(e),e.addSingleton(b.IInterpreterAutoSeletionProxyService,h.InterpreterAutoSeletionProxyService),e.addSingleton(o.EnvironmentActivationService,o.EnvironmentActivationService),e.addSingleton(s.TerminalEnvironmentActivationService,s.TerminalEnvironmentActivationService),e.addSingleton(a.IEnvironmentActivationService,o.EnvironmentActivationService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PreWarmActivatedEnvironmentVariables=void 0;const o=n(0);n(11);const s=n(12),a=n(112);let c=class{constructor(e,t){this.activationService=e,this.interpreterService=t}async activate(){this.interpreterService.onDidChangeInterpreter(()=>this.activationService.getActivatedEnvironmentVariables(void 0).ignoreErrors()),this.activationService.getActivatedEnvironmentVariables(void 0).ignoreErrors()}};c=r([o.injectable(),i(0,o.inject(a.IEnvironmentActivationService)),i(1,o.inject(s.IInterpreterService))],c),t.PreWarmActivatedEnvironmentVariables=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentActivationService=t.EnvironmentActivationServiceCache=t.getEnvironmentTimeout=void 0,n(11);const o=n(0),s=n(3),a=n(10),c=n(5),l=n(6),u=n(41),d=n(18),h=n(25),p=n(1),f=n(15),g=n(183),m=n(27),v=n(57),y=n(7),b=n(9),S=n(12);t.getEnvironmentTimeout=3e4;const E={[m.OSType.Windows]:{shell:"cmd",shellType:h.TerminalShellType.commandPrompt},[m.OSType.OSX]:{shell:"bash",shellType:h.TerminalShellType.bash},[m.OSType.Linux]:{shell:"bash",shellType:h.TerminalShellType.bash},[m.OSType.Unknown]:void 0},w=["The process cannot access the file because it is being used by another process","The directory is not empty"];class _{constructor(){this.normalMap=new Map}static forceUseStatic(){_.useStatic=!0}static forceUseNormal(){_.useStatic=!1}get(e){return _.useStatic?_.staticMap.get(e):this.normalMap.get(e)}set(e,t){_.useStatic?_.staticMap.set(e,t):this.normalMap.set(e,t)}delete(e){_.useStatic?_.staticMap.delete(e):this.normalMap.delete(e)}clear(){_.useStatic||this.normalMap.clear()}}t.EnvironmentActivationServiceCache=_,_.useStatic=!1,_.staticMap=new Map;let P=class{constructor(e,t,n,r,i,o,s){this.helper=e,this.platform=t,this.processServiceFactory=n,this.currentProcess=r,this.workspace=i,this.interpreterService=o,this.envVarsService=s,this.disposables=[],this.activatedEnvVariablesCache=new _,this.envVarsService.onDidEnvironmentVariablesChange(()=>this.activatedEnvVariablesCache.clear(),this,this.disposables),this.interpreterService.onDidChangeInterpreter(()=>this.activatedEnvVariablesCache.clear(),this,this.disposables)}dispose(){this.disposables.forEach(e=>e.dispose())}async getActivatedEnvironmentVariables(e,t,n){var r;const i=`${this.workspace.getWorkspaceFolderIdentifier(e)}_${this.platform.isWindows?null==t?void 0:t.path.toLowerCase():null==t?void 0:t.path}`;if(null===(r=this.activatedEnvVariablesCache.get(i))||void 0===r?void 0:r.hasData)return this.activatedEnvVariablesCache.get(i).data;const o=new g.InMemoryCache(6e5,"");return this.getActivatedEnvironmentVariablesImpl(e,t,n).then(e=>(o.data=e,this.activatedEnvVariablesCache.set(i,o),e))}async getActivatedEnvironmentVariablesImpl(e,n,r){const i=E[this.platform.osType];if(!i)return;let o=!1;try{const r=await this.helper.getEnvironmentActivationShellCommands(e,i.shellType,n);if(c.traceVerbose(`Activation Commands received ${r} for shell ${i.shell}`),!r||!Array.isArray(r)||0===r.length)return;o=r.join(" ").toLowerCase().includes("conda");const s=this.fixActivationCommands(r).join(" && "),l=await this.processServiceFactory.create(e),d=await this.envVarsService.getEnvironmentVariables(e),h=Object.keys(d).length,p=h?d:{...this.currentProcess.env},g=p[a.PYTHON_WARNINGS];p[a.PYTHON_WARNINGS]="ignore",c.traceVerbose((h?"Has":"No")+" Custom Env Vars");const[m,v]=u.printEnvVariables();m.forEach((e,t)=>{m[t]=e.toCommandArgument()});const y=`${s} && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ${m.join(" ")}`;let b;c.traceVerbose("Activating Environment to capture Environment variables, "+y);let S=1;for(;!b;)try{if(b=await l.shellExec(y,{env:p,shell:i.shell,timeout:t.getEnvironmentTimeout,maxBuffer:1e6,throwOnStdErr:!1}),b.stderr&&b.stderr.length>0)throw new Error(`StdErr from ShellExec, ${b.stderr} for ${y}`)}catch(e){const t=e.toString();if(!(w.find(e=>t.includes(e))&&S<10))throw e;c.traceInfo("Conda is busy, attempting to retry ..."),b=void 0,S+=1,await f.sleep(500)}const E=this.parseEnvironmentOutput(b.stdout,v);return g&&E?E[a.PYTHON_WARNINGS]=g:E&&delete E[a.PYTHON_WARNINGS],E}catch(e){if(c.traceError("getActivatedEnvironmentVariables",e),y.sendTelemetryEvent(b.EventName.ACTIVATE_ENV_TO_GET_ENV_VARS_FAILED,void 0,{isPossiblyCondaEnv:o,terminal:i.shellType}),r)throw e}}fixActivationCommands(e){return e.map(e=>e.replace(/^source\s+/,". "))}parseEnvironmentOutput(e,t){return t((e=e.substring(e.indexOf("e8b39361-0157-4923-80e1-22d70d46dee6")+"e8b39361-0157-4923-80e1-22d70d46dee6".length)).substring(e.indexOf("{")).trim())}};r([c.traceDecorators.verbose("getActivatedEnvironmentVariables",c.LogOptions.Arguments),y.captureTelemetry(b.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,{failed:!1},!0)],P.prototype,"getActivatedEnvironmentVariables",null),r([c.traceDecorators.error("Failed to parse Environment variables"),c.traceDecorators.verbose("parseEnvironmentOutput",c.LogOptions.None)],P.prototype,"parseEnvironmentOutput",null),P=r([o.injectable(),i(0,o.inject(h.ITerminalHelper)),i(1,o.inject(l.IPlatformService)),i(2,o.inject(d.IProcessServiceFactory)),i(3,o.inject(p.ICurrentProcess)),i(4,o.inject(s.IWorkspaceService)),i(5,o.inject(S.IInterpreterService)),i(6,o.inject(v.IEnvironmentVariablesProvider))],P),t.EnvironmentActivationService=P},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalEnvironmentActivationService=void 0;const o=n(0),s=n(2),a=n(5),c=n(6),l=n(41),u=n(25),d=n(57),h=n(7),p=n(9);let f=class{constructor(e,t,n){this.terminalFactory=e,this.fs=t,this.envVarsProvider=n}async getActivatedEnvironmentVariables(e,t,n){const r=await this.envVarsProvider.getCustomEnvironmentVariables(e),i=this.terminalFactory.getTerminalService({env:r,hideFromUser:!0,interpreter:t,resource:e,title:`${null==t?void 0:t.displayName}${(new Date).getTime()}`}),o=(null==t?void 0:t.path)||"python",a=await this.fs.createTemporaryFile(".json");try{const[e,t]=l.printEnvVariablesToFile(a.filePath);await i.sendCommand(o,e,(new s.CancellationTokenSource).token,!1);return t(await this.fs.readFile(a.filePath))}finally{i.dispose(),a.dispose()}}};r([a.traceDecorators.verbose("getActivatedEnvironmentVariables",a.LogOptions.Arguments),h.captureTelemetry(p.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,{failed:!1,activatedInTerminal:!0},!0)],f.prototype,"getActivatedEnvironmentVariables",null),f=r([o.injectable(),i(0,o.inject(u.ITerminalServiceFactory)),i(1,o.inject(c.IFileSystem)),i(2,o.inject(d.IEnvironmentVariablesProvider))],f),t.TerminalEnvironmentActivationService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSelectionService=void 0;const o=n(0),s=n(38),a=n(2),c=n(3);n(11);const l=n(6),u=n(1),d=n(15),h=n(7),p=n(9),f=n(12),g=n(40);let m=class{constructor(e,t,n,r,i,o,s,c,l,u,d,h){this.workspaceService=e,this.stateFactory=t,this.fs=n,this.userDefinedInterpreter=c,this.interpreterHelper=d,this.interpreterSecurityService=h,this.autoSelectedWorkspacePromises=new Map,this.didAutoSelectedInterpreterEmitter=new a.EventEmitter,this.autoSelectedInterpreterByWorkspace=new Map,this.rules=[],this.rules.push(o,i,r,s,c,l),u.registerInstance(this),c.setNextRule(l),l.setNextRule(s),s.setNextRule(i),i.setNextRule(o),o.setNextRule(r)}async autoSelectInterpreter(e){const t=this.getWorkspacePathKey(e);if(!this.autoSelectedWorkspacePromises.has(t)){const n=d.createDeferred();this.autoSelectedWorkspacePromises.set(t,n),await this.initializeStore(e),await this.clearWorkspaceStoreIfInvalid(e),await this.userDefinedInterpreter.autoSelectInterpreter(e,this),this.didAutoSelectedInterpreterEmitter.fire(),Promise.all(this.rules.map(t=>t.autoSelectInterpreter(e))).ignoreErrors(),n.resolve()}return this.autoSelectedWorkspacePromises.get(t).promise}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){const t=this._getAutoSelectedInterpreter(e);return t&&!1===this.interpreterSecurityService.isSafe(t)?void 0:t}_getAutoSelectedInterpreter(e){const t=this.getWorkspaceState(e);if(t&&t.value)return t.value;const n=this.getWorkspacePathKey(e);return this.autoSelectedInterpreterByWorkspace.has(n)?this.autoSelectedInterpreterByWorkspace.get(n):this.globallyPreferredInterpreter.value}async setWorkspaceInterpreter(e,t){await this.storeAutoSelectedInterpreter(e,t)}async setGlobalInterpreter(e){await this.storeAutoSelectedInterpreter(void 0,e)}async clearWorkspaceStoreIfInvalid(e){const t=this.getWorkspaceState(e);t&&t.value&&!await this.fs.fileExists(t.value.path)&&(h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{interpreterMissing:!0}),await t.updateValue(void 0))}async storeAutoSelectedInterpreter(e,t){const n=this.getWorkspacePathKey(e);if(""===n){if(this.globallyPreferredInterpreter.value&&this.globallyPreferredInterpreter.value.version&&t&&t.version&&s.compare(this.globallyPreferredInterpreter.value.version.raw,t.version.raw)>0)return;await this.globallyPreferredInterpreter.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}else{const r=this.getWorkspaceState(e);r&&t&&await r.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}}async initializeStore(e){const t=this.getWorkspacePathKey(e);this.autoSelectedInterpreterByWorkspace.delete(t),this.globallyPreferredInterpreter||await this.clearStoreIfFileIsInvalid()}async clearStoreIfFileIsInvalid(){this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState("preferredGlobalPyInterpreter",void 0),this.globallyPreferredInterpreter.value&&!await this.fs.fileExists(this.globallyPreferredInterpreter.value.path)&&await this.globallyPreferredInterpreter.updateValue(void 0)}getWorkspacePathKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}getWorkspaceState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e);if(!t)return;const n="autoSelectedWorkspacePythonInterpreter-"+t.folderUri.fsPath;return this.stateFactory.createWorkspacePersistentState(n,void 0)}};r([h.captureTelemetry(p.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{rule:g.AutoSelectionRule.all},!0)],m.prototype,"autoSelectInterpreter",null),m=r([o.injectable(),i(0,o.inject(c.IWorkspaceService)),i(1,o.inject(u.IPersistentStateFactory)),i(2,o.inject(l.IFileSystem)),i(3,o.inject(g.IInterpreterAutoSelectionRule)),i(3,o.named(g.AutoSelectionRule.systemWide)),i(4,o.inject(g.IInterpreterAutoSelectionRule)),i(4,o.named(g.AutoSelectionRule.currentPath)),i(5,o.inject(g.IInterpreterAutoSelectionRule)),i(5,o.named(g.AutoSelectionRule.windowsRegistry)),i(6,o.inject(g.IInterpreterAutoSelectionRule)),i(6,o.named(g.AutoSelectionRule.cachedInterpreters)),i(7,o.inject(g.IInterpreterAutoSelectionRule)),i(7,o.named(g.AutoSelectionRule.settings)),i(8,o.inject(g.IInterpreterAutoSelectionRule)),i(8,o.named(g.AutoSelectionRule.workspaceVirtualEnvs)),i(9,o.inject(g.IInterpreterAutoSeletionProxyService)),i(10,o.inject(f.IInterpreterHelper)),i(11,o.inject(g.IInterpreterSecurityService))],m),t.InterpreterAutoSelectionService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterEvaluation=void 0;const o=n(0),s=n(3),a=n(1),c=n(13),l=n(7),u=n(9),d=n(12),h=n(361),p=n(363),f=n(40),g=[c.Common.bannerLabelYes(),c.Common.bannerLabelNo(),c.Common.learnMore(),c.Common.doNotShowAgain()],m=["Yes","No","Learn more","Do not show again"];let v=class{constructor(e,t,n,r){this.appShell=e,this.browserService=t,this.interpreterHelper=n,this.interpreterSecurityStorage=r}async evaluateIfInterpreterIsSafe(e,t){var n;const r=null===(n=this.interpreterHelper.getActiveWorkspaceUri(t))||void 0===n?void 0:n.folderUri;if(!r)return!0;const i=this.inferValueUsingCurrentState(e,t);return void 0!==i?i:this._inferValueUsingPrompt(r)}inferValueUsingCurrentState(e,t){var n;const r=null===(n=this.interpreterHelper.getActiveWorkspaceUri(t))||void 0===n?void 0:n.folderUri;if(!r)return!0;if(!h.isInterpreterLocatedInWorkspace(e,r))return!0;const i=this.interpreterSecurityStorage.hasUserApprovedWorkspaceInterpreters(r).value;return void 0!==i?i:!this.interpreterSecurityStorage.unsafeInterpreterPromptEnabled.value||void 0}async _inferValueUsingPrompt(e){const t=this.interpreterSecurityStorage.hasUserApprovedWorkspaceInterpreters(e);await this.interpreterSecurityStorage.storeKeyForWorkspace(e);let n=await this.showPromptAndGetSelection();for(;n===c.Common.learnMore();)this.browserService.launch(p.learnMoreOnInterpreterSecurityURI),n=await this.showPromptAndGetSelection();return n&&n!==c.Common.bannerLabelNo()?(n===c.Common.doNotShowAgain()&&await this.interpreterSecurityStorage.unsafeInterpreterPromptEnabled.updateValue(!1),await t.updateValue(!0),!0):(await t.updateValue(!1),!1)}async showPromptAndGetSelection(){const e=await this.appShell.showInformationMessage(c.Interpreters.unsafeInterpreterMessage(),...g);return l.sendTelemetryEvent(u.EventName.UNSAFE_INTERPRETER_PROMPT,void 0,{selection:e?m[g.indexOf(e)]:void 0}),e}};v=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(a.IBrowserService)),i(2,o.inject(d.IInterpreterHelper)),i(3,o.inject(f.IInterpreterSecurityStorage))],v),t.InterpreterEvaluation=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMacDefaultPythonPath=void 0,t.isMacDefaultPythonPath=function(e){return"python"===e||"/usr/bin/python"===e}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterSecurityService=void 0;const o=n(0),s=n(2),a=n(40);let c=class{constructor(e,t){this.interpreterSecurityStorage=e,this.interpreterEvaluation=t,this._didSafeInterpretersChange=new s.EventEmitter}isSafe(e,t){if(this.interpreterSecurityStorage.unsafeInterpreters.value.includes(e.path))return!1;return!!this.interpreterSecurityStorage.safeInterpreters.value.includes(e.path)||this.interpreterEvaluation.inferValueUsingCurrentState(e,t)}async evaluateAndRecordInterpreterSafety(e,t){const n=this.interpreterSecurityStorage.unsafeInterpreters.value,r=this.interpreterSecurityStorage.safeInterpreters.value;if(n.includes(e.path)||r.includes(e.path))return;await this.interpreterEvaluation.evaluateIfInterpreterIsSafe(e,t)?await this.interpreterSecurityStorage.safeInterpreters.updateValue([e.path,...r]):await this.interpreterSecurityStorage.unsafeInterpreters.updateValue([e.path,...n]),this._didSafeInterpretersChange.fire()}get onDidChangeSafeInterpreters(){return this._didSafeInterpretersChange.event}};c=r([o.injectable(),i(0,o.inject(a.IInterpreterSecurityStorage)),i(1,o.inject(a.IInterpreterEvaluation))],c),t.InterpreterSecurityService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterSecurityStorage=void 0;const o=n(0),s=n(3),a=n(10),c=n(1),l=n(363);let u=class{constructor(e,t,n,r){this.persistentStateFactory=e,this.workspaceService=t,this.commandManager=n,this.disposables=r,this._unsafeInterpreterPromptEnabled=this.persistentStateFactory.createGlobalPersistentState(l.unsafeInterpreterPromptKey,!0),this._unsafeInterpreters=this.persistentStateFactory.createGlobalPersistentState(l.unsafeInterpretersKey,[]),this._safeInterpreters=this.persistentStateFactory.createGlobalPersistentState(l.safeInterpretersKey,[]),this.flaggedWorkspacesKeysStorage=this.persistentStateFactory.createGlobalPersistentState(l.flaggedWorkspacesKeysStorageKey,[])}get unsafeInterpreterPromptEnabled(){return this._unsafeInterpreterPromptEnabled}get unsafeInterpreters(){return this._unsafeInterpreters}get safeInterpreters(){return this._safeInterpreters}hasUserApprovedWorkspaceInterpreters(e){return this.persistentStateFactory.createGlobalPersistentState(this._getKeyForWorkspace(e),void 0)}async activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.ResetInterpreterSecurityStorage,this.resetInterpreterSecurityStorage.bind(this)))}async resetInterpreterSecurityStorage(){this.flaggedWorkspacesKeysStorage.value.forEach(async e=>{const t=this.persistentStateFactory.createGlobalPersistentState(e,void 0);await t.updateValue(void 0)}),await this.flaggedWorkspacesKeysStorage.updateValue([]),await this._safeInterpreters.updateValue([]),await this._unsafeInterpreters.updateValue([]),await this._unsafeInterpreterPromptEnabled.updateValue(!0)}_getKeyForWorkspace(e){return"ARE_INTERPRETERS_SAFE_FOR_WS_"+this.workspaceService.getWorkspaceFolderIdentifier(e)}async storeKeyForWorkspace(e){const t=this._getKeyForWorkspace(e),n=this.flaggedWorkspacesKeysStorage.value;n.includes(t)||await this.flaggedWorkspacesKeysStorage.updateValue([t,...n])}};u=r([o.injectable(),i(0,o.inject(c.IPersistentStateFactory)),i(1,o.inject(s.IWorkspaceService)),i(2,o.inject(s.ICommandManager)),i(3,o.inject(c.IDisposableRegistry))],u),t.InterpreterSecurityStorage=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterAutoSeletionProxyService=void 0;const o=n(0),s=n(2),a=n(1);let c=class{constructor(e){this.disposables=e,this.didAutoSelectedInterpreterEmitter=new s.EventEmitter}registerInstance(e){this.instance=e,this.disposables.push(this.instance.onDidChangeAutoSelectedInterpreter(()=>this.didAutoSelectedInterpreterEmitter.fire()))}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){return this.instance?this.instance.getAutoSelectedInterpreter(e):void 0}async setWorkspaceInterpreter(e,t){return this.instance?this.instance.setWorkspaceInterpreter(e,t):void 0}};c=r([o.injectable(),i(0,o.inject(a.IDisposableRegistry))],c),t.InterpreterAutoSeletionProxyService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CachedInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(5),a=n(6),c=n(1),l=n(12),u=n(40),d=n(101);let h=class extends d.BaseRuleService{constructor(e,t,n,r,i,o){super(u.AutoSelectionRule.cachedInterpreters,e,n),this.helper=t,this.rules=[r,i,o]}async onAutoSelectInterpreter(e,t){const n=this.rules.map(t=>t.getPreviouslyAutoSelectedInterpreter(e)).filter(e=>!!e).map(e=>e),r=this.helper.getBestInterpreter(n);return s.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),await this.setGlobalInterpreter(r,t)?d.NextAction.exit:d.NextAction.runNextRule}};h=r([o.injectable(),i(0,o.inject(a.IFileSystem)),i(1,o.inject(l.IInterpreterHelper)),i(2,o.inject(c.IPersistentStateFactory)),i(3,o.inject(u.IInterpreterAutoSelectionRule)),i(3,o.named(u.AutoSelectionRule.systemWide)),i(4,o.inject(u.IInterpreterAutoSelectionRule)),i(4,o.named(u.AutoSelectionRule.currentPath)),i(5,o.inject(u.IInterpreterAutoSelectionRule)),i(5,o.named(u.AutoSelectionRule.windowsRegistry))],h),t.CachedInterpretersAutoSelectionRule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentPathInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(5),a=n(6),c=n(1),l=n(12),u=n(40),d=n(101);let h=class extends d.BaseRuleService{constructor(e,t,n,r){super(u.AutoSelectionRule.currentPath,e,n),this.helper=t,this.currentPathInterpreterLocator=r}async onAutoSelectInterpreter(e,t){const n=await this.currentPathInterpreterLocator.getInterpreters(e),r=this.helper.getBestInterpreter(n);return s.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),await this.setGlobalInterpreter(r,t)?d.NextAction.exit:d.NextAction.runNextRule}};h=r([o.injectable(),i(0,o.inject(a.IFileSystem)),i(1,o.inject(l.IInterpreterHelper)),i(2,o.inject(c.IPersistentStateFactory)),i(3,o.inject(l.IInterpreterLocatorService)),i(3,o.named(l.CURRENT_PATH_SERVICE))],h),t.CurrentPathInterpretersAutoSelectionRule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(3),a=n(24),c=n(6),l=n(1),u=n(40),d=n(101);let h=class extends d.BaseRuleService{constructor(e,t,n,r,i){super(u.AutoSelectionRule.settings,e,t),this.workspaceService=n,this.experiments=r,this.interpreterPathService=i}async onAutoSelectInterpreter(e,t){const n=this.workspaceService.getConfiguration("python",null),r=this.experiments.inExperiment(a.DeprecatePythonPath.experiment)?this.interpreterPathService.inspect(void 0):n.inspect("pythonPath");return this.experiments.sendTelemetryIfInExperiment(a.DeprecatePythonPath.control),r.globalValue&&"python"!==r.globalValue?d.NextAction.exit:d.NextAction.runNextRule}};h=r([o.injectable(),i(0,o.inject(c.IFileSystem)),i(1,o.inject(l.IPersistentStateFactory)),i(2,o.inject(s.IWorkspaceService)),i(3,o.inject(l.IExperimentsManager)),i(4,o.inject(l.IInterpreterPathService))],h),t.SettingsInterpretersAutoSelectionRule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemWideInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(5),a=n(6),c=n(1),l=n(28),u=n(12),d=n(40),h=n(101);let p=class extends h.BaseRuleService{constructor(e,t,n,r){super(d.AutoSelectionRule.systemWide,e,n),this.helper=t,this.interpreterService=r}async onAutoSelectInterpreter(e,t){const n=(await this.interpreterService.getInterpreters(e)).filter(e=>e.envType!==l.EnvironmentType.VirtualEnv&&e.envType!==l.EnvironmentType.Venv&&e.envType!==l.EnvironmentType.Pipenv),r=this.helper.getBestInterpreter(n);return s.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),await this.setGlobalInterpreter(r,t)?h.NextAction.exit:h.NextAction.runNextRule}};p=r([o.injectable(),i(0,o.inject(a.IFileSystem)),i(1,o.inject(u.IInterpreterHelper)),i(2,o.inject(c.IPersistentStateFactory)),i(3,o.inject(u.IInterpreterService))],p),t.SystemWideInterpretersAutoSelectionRule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsRegistryInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(5),a=n(6),c=n(1),l=n(27),u=n(12),d=n(40),h=n(101);let p=class extends h.BaseRuleService{constructor(e,t,n,r,i){super(d.AutoSelectionRule.windowsRegistry,e,n),this.helper=t,this.platform=r,this.winRegInterpreterLocator=i}async onAutoSelectInterpreter(e,t){if(this.platform.osType!==l.OSType.Windows)return h.NextAction.runNextRule;const n=await this.winRegInterpreterLocator.getInterpreters(e),r=this.helper.getBestInterpreter(n);return s.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),await this.setGlobalInterpreter(r,t)?h.NextAction.exit:h.NextAction.runNextRule}};p=r([o.injectable(),i(0,o.inject(a.IFileSystem)),i(1,o.inject(u.IInterpreterHelper)),i(2,o.inject(c.IPersistentStateFactory)),i(3,o.inject(a.IPlatformService)),i(4,o.inject(u.IInterpreterLocatorService)),i(4,o.named(u.WINDOWS_REGISTRY_SERVICE))],p),t.WindowsRegistryInterpretersAutoSelectionRule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceVirtualEnvInterpretersAutoSelectionRule=void 0;const o=n(0),s=n(2),a=n(3),c=n(24),l=n(5),u=n(6),d=n(1),h=n(15),p=n(27),f=n(12),g=n(40),m=n(101);let v=class extends m.BaseRuleService{constructor(e,t,n,r,i,o,s,a){super(g.AutoSelectionRule.workspaceVirtualEnvs,e,n),this.helper=t,this.platform=r,this.workspaceService=i,this.workspaceVirtualEnvInterpreterLocator=o,this.experiments=s,this.interpreterPathService=a}async onAutoSelectInterpreter(e,t){const n=this.helper.getActiveWorkspaceUri(e);if(!n)return m.NextAction.runNextRule;const r=this.workspaceService.getConfiguration("python",n.folderUri),i=this.experiments.inExperiment(c.DeprecatePythonPath.experiment)?this.interpreterPathService.inspect(n.folderUri):r.inspect("pythonPath");if(this.experiments.sendTelemetryIfInExperiment(c.DeprecatePythonPath.control),i.workspaceFolderValue||i.workspaceValue)return m.NextAction.runNextRule;const o=h.createDeferredFromPromise(this.getWorkspaceVirtualEnvInterpreters(n.folderUri)),s=await o.promise,a=Array.isArray(s)&&s.length>0?this.helper.getBestInterpreter(s):void 0;return a&&t&&(await super.cacheSelectedInterpreter(n.folderUri,a),await t.setWorkspaceInterpreter(n.folderUri,a)),l.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${a?JSON.stringify(a):"Nothing Selected"}`),m.NextAction.runNextRule}async getWorkspaceVirtualEnvInterpreters(e){if(!e)return;const t=this.workspaceService.getWorkspaceFolder(e);if(!t)return;const n=await this.workspaceVirtualEnvInterpreterLocator.getInterpreters(e,{ignoreCache:!0}),r=this.platform.osType===p.OSType.Windows?t.uri.fsPath.toUpperCase():t.uri.fsPath;return n.filter(e=>{const t=s.Uri.file(e.path).fsPath;return(this.platform.osType===p.OSType.Windows?t.toUpperCase():t).startsWith(r)})}};v=r([o.injectable(),i(0,o.inject(u.IFileSystem)),i(1,o.inject(f.IInterpreterHelper)),i(2,o.inject(d.IPersistentStateFactory)),i(3,o.inject(u.IPlatformService)),i(4,o.inject(a.IWorkspaceService)),i(5,o.inject(f.IInterpreterLocatorService)),i(5,o.named(f.WORKSPACE_VIRTUAL_ENV_SERVICE)),i(6,o.inject(d.IExperimentsManager)),i(7,o.inject(d.IInterpreterPathService))],v),t.WorkspaceVirtualEnvInterpretersAutoSelectionRule=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterComparer=void 0;const o=n(0),s=n(214),a=n(12);let c=class{constructor(e){this.interpreterHelper=e}compare(e,t){const n=this.getSortName(e),r=this.getSortName(t);return n===r?0:n>r?1:-1}getSortName(e){const t=[],n=[];if(e.version&&t.push(e.version.raw),e.architecture&&t.push(s.getArchitectureDisplayName(e.architecture)),e.companyDisplayName&&e.companyDisplayName.length>0?t.push(e.companyDisplayName.trim()):t.push("Python"),e.envType){const t=this.interpreterHelper.getInterpreterTypeDisplayName(e.envType);t&&n.push(t)}e.envName&&e.envName.length>0&&n.push(e.envName);const r=0===n.length?"":`(${n.join(": ")})`;return`${t.join(" ")} ${r}`.trim()}};c=r([o.injectable(),i(0,o.inject(a.IInterpreterHelper))],c),t.InterpreterComparer=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResetInterpreterCommand=void 0;const o=n(0),s=n(3),a=n(10),c=n(77),l=n(221);let u=class extends l.BaseInterpreterSelectorCommand{constructor(e,t,n,r){super(e,t,n,r)}async activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.ClearWorkspaceInterpreter,this.resetInterpreter.bind(this)))}async resetInterpreter(){const e=await this.getConfigTarget();if(!e)return;const t=e.configTarget,n=e.folderUri;await this.pythonPathUpdaterService.updatePythonPath(void 0,t,"ui",n)}};u=r([o.injectable(),i(0,o.inject(c.IPythonPathUpdaterServiceManager)),i(1,o.inject(s.ICommandManager)),i(2,o.inject(s.IApplicationShell)),i(3,o.inject(s.IWorkspaceService))],u),t.ResetInterpreterCommand=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetInterpreterCommand=void 0;const o=n(0),s=n(3),a=n(10),c=n(6),l=n(1),u=n(13),d=n(218),h=n(7),p=n(9),f=n(77),g=n(221);let m=class extends g.BaseInterpreterSelectorCommand{constructor(e,t,n,r,i,o,s,a,c){super(n,i,e,c),this.pathUtils=t,this.configurationService=r,this.multiStepFactory=o,this.platformService=s,this.interpreterSelector=a}async activate(){this.disposables.push(this.commandManager.registerCommand(a.Commands.Set_Interpreter,this.setInterpreter.bind(this)))}async _pickInterpreter(e,t){const n=await this.interpreterSelector.getSuggestions(t.workspace),r={label:u.InterpreterQuickPickList.enterPath.label(),detail:u.InterpreterQuickPickList.enterPath.detail(),alwaysShow:!0},i=[r,...n],o=this.pathUtils.getDisplayName(this.configurationService.getSettings(t.workspace).pythonPath,t.workspace?t.workspace.fsPath:void 0);t.path=void 0;const s=await e.showQuickPick({placeholder:u.InterpreterQuickPickList.quickPickListPlaceholder().format(o),items:i,activeItem:i[1],matchOnDetail:!0,matchOnDescription:!0});if(void 0!==s)return s.label===r.label?this._enterOrBrowseInterpreterPath(e,t):void(t.path=s.path)}async _enterOrBrowseInterpreterPath(e,t){const n=[{label:u.InterpreterQuickPickList.browsePath.label(),detail:u.InterpreterQuickPickList.browsePath.detail()}],r=await e.showQuickPick({placeholder:u.InterpreterQuickPickList.enterPath.placeholder(),items:n,acceptFilterBoxTextAsSelection:!0});if("string"==typeof r)h.sendTelemetryEvent(p.EventName.SELECT_INTERPRETER_ENTER_CHOICE,void 0,{choice:"enter"}),t.path=r;else if(r&&r.label===u.InterpreterQuickPickList.browsePath.label()){h.sendTelemetryEvent(p.EventName.SELECT_INTERPRETER_ENTER_CHOICE,void 0,{choice:"browse"});const e={Executables:["exe"]},n=await this.applicationShell.showOpenDialog({filters:this.platformService.isWindows?e:void 0,openLabel:u.InterpreterQuickPickList.browsePath.openButtonLabel(),canSelectMany:!1,title:u.InterpreterQuickPickList.browsePath.title()});n&&n.length>0&&(t.path=n[0].fsPath)}}async setInterpreter(){const e=await this.getConfigTarget();if(!e)return;const t=e.configTarget,n=e.folderUri,r={path:void 0,workspace:n},i=this.multiStepFactory.create();await i.run((e,t)=>this._pickInterpreter(e,t),r),void 0!==r.path&&await this.pythonPathUpdaterService.updatePythonPath(r.path,t,"ui",n)}};r([h.captureTelemetry(p.EventName.SELECT_INTERPRETER_ENTER_BUTTON)],m.prototype,"_enterOrBrowseInterpreterPath",null),r([h.captureTelemetry(p.EventName.SELECT_INTERPRETER)],m.prototype,"setInterpreter",null),m=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(l.IPathUtils)),i(2,o.inject(f.IPythonPathUpdaterServiceManager)),i(3,o.inject(l.IConfigurationService)),i(4,o.inject(s.ICommandManager)),i(5,o.inject(d.IMultiStepInputFactory)),i(6,o.inject(c.IPlatformService)),i(7,o.inject(f.IInterpreterSelector)),i(8,o.inject(s.IWorkspaceService))],m),t.SetInterpreterCommand=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetShebangInterpreterCommand=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(12),u=n(77),d=n(221);let h=class extends d.BaseInterpreterSelectorCommand{constructor(e,t,n,r,i,o){super(n,i,o,e),this.documentManager=t,this.shebangCodeLensProvider=r}async activate(){this.disposables.push(this.commandManager.registerCommand(c.Commands.Set_ShebangInterpreter,this.setShebangInterpreter.bind(this)))}async setShebangInterpreter(){const e=await this.shebangCodeLensProvider.detectShebang(this.documentManager.activeTextEditor.document,!0);if(!e)return;const t=!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length,n=this.workspaceService.getWorkspaceFolder(this.documentManager.activeTextEditor.document.uri),r=Array.isArray(this.workspaceService.workspaceFolders)&&1===this.workspaceService.workspaceFolders.length;t?await this.pythonPathUpdaterService.updatePythonPath(e,s.ConfigurationTarget.Global,"shebang"):!r&&n?await this.pythonPathUpdaterService.updatePythonPath(e,s.ConfigurationTarget.WorkspaceFolder,"shebang",n.uri):await this.pythonPathUpdaterService.updatePythonPath(e,s.ConfigurationTarget.Workspace,"shebang",this.workspaceService.workspaceFolders[0].uri)}};h=r([o.injectable(),i(0,o.inject(a.IWorkspaceService)),i(1,o.inject(a.IDocumentManager)),i(2,o.inject(u.IPythonPathUpdaterServiceManager)),i(3,o.inject(l.IShebangCodeLensProvider)),i(4,o.inject(a.ICommandManager)),i(5,o.inject(a.ICommandManager))],h),t.SetShebangInterpreterCommand=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterSelector=void 0;const o=n(0),s=n(24),a=n(1),c=n(40),l=n(12),u=n(77);let d=class{constructor(e,t,n,r,i){this.interpreterManager=e,this.interpreterComparer=t,this.experimentsManager=n,this.interpreterSecurityService=r,this.pathUtils=i,this.disposables=[]}dispose(){this.disposables.forEach(e=>e.dispose())}async getSuggestions(e){let t=await this.interpreterManager.getInterpreters(e,{onSuggestion:!0});return this.experimentsManager.inExperiment(s.DeprecatePythonPath.experiment)&&(t=t?t.filter(e=>!1!==this.interpreterSecurityService.isSafe(e)):[]),this.experimentsManager.sendTelemetryIfInExperiment(s.DeprecatePythonPath.control),t.sort(this.interpreterComparer.compare.bind(this.interpreterComparer)),Promise.all(t.map(t=>this.suggestionToQuickPickItem(t,e)))}async suggestionToQuickPickItem(e,t){const n=this.pathUtils.getDisplayName(e.path,t?t.fsPath:void 0),r=e.cachedEntry?"(cached) ":"";return{label:e.displayName,detail:`${r}${n}`,path:e.path,interpreter:e}}};d=r([o.injectable(),i(0,o.inject(l.IInterpreterService)),i(1,o.inject(u.IInterpreterComparer)),i(2,o.inject(a.IExperimentsManager)),i(3,o.inject(c.IInterpreterSecurityService)),i(4,o.inject(a.IPathUtils))],d),t.InterpreterSelector=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterService=void 0;const o=n(0),s=n(4),a=n(2),c=n(5),l=n(18),u=n(30),d=n(8),h=n(7),p=n(9),f=n(12),g=n(77);let m=class{constructor(e){this.pythonPathSettingsUpdaterFactory=e.get(g.IPythonPathUpdaterServiceFactory),this.interpreterVersionService=e.get(f.IInterpreterVersionService),this.executionFactory=e.get(l.IPythonExecutionFactory)}async updatePythonPath(e,t,n,r){const i=new u.StopWatch,o=this.getPythonUpdaterService(t,r);let l=!1;try{await o.updatePythonPath(e?s.normalize(e):void 0)}catch(e){l=!0;const t=e&&"string"==typeof e.message?e.message:"";a.window.showErrorMessage("Failed to set 'pythonPath'. Error: "+t),c.traceError(e)}this.sendTelemetry(i.elapsedTime,l,n,e).catch(e=>c.traceError("Python Extension: sendTelemetry",e))}async sendTelemetry(e,t,n,r){const i={failed:t,trigger:n};if(!t&&r){const e=(await this.executionFactory.create({pythonPath:r})).getInterpreterInformation().catch(()=>{}),t=this.interpreterVersionService.getPipVersion(r).then(e=>0===e.length?void 0:e).catch(()=>""),[n,o]=await Promise.all([e,t]);n&&(i.architecture=n.architecture,n.version&&(i.pythonVersion=n.version.raw)),o&&(i.pipVersion=o)}h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER,e,i)}getPythonUpdaterService(e,t){switch(e){case a.ConfigurationTarget.Global:return this.pythonPathSettingsUpdaterFactory.getGlobalPythonPathConfigurationService();case a.ConfigurationTarget.Workspace:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspacePythonPathConfigurationService(t);default:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspaceFolderPythonPathConfigurationService(t)}}};m=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],m),t.PythonPathUpdaterService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonPathUpdaterServiceFactory=void 0;const o=n(0),s=n(3),a=n(24),c=n(1),l=n(8),u=n(890),d=n(891),h=n(892);let p=class{constructor(e){const t=e.get(c.IExperimentsManager);this.workspaceService=e.get(s.IWorkspaceService),this.interpreterPathService=e.get(c.IInterpreterPathService),this.inDeprecatePythonPathExperiment=t.inExperiment(a.DeprecatePythonPath.experiment),t.sendTelemetryIfInExperiment(a.DeprecatePythonPath.control)}getGlobalPythonPathConfigurationService(){return new u.GlobalPythonPathUpdaterService(this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}getWorkspacePythonPathConfigurationService(e){return new h.WorkspacePythonPathUpdaterService(e,this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}getWorkspaceFolderPythonPathConfigurationService(e){return new d.WorkspaceFolderPythonPathUpdaterService(e,this.inDeprecatePythonPathExperiment,this.workspaceService,this.interpreterPathService)}};p=r([o.injectable(),i(0,o.inject(l.IServiceContainer))],p),t.PythonPathUpdaterServiceFactory=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalPythonPathUpdaterService=void 0;const r=n(2);t.GlobalPythonPathUpdaterService=class{constructor(e,t,n){this.inDeprecatePythonPathExperiment=e,this.workspaceService=t,this.interpreterPathService=n}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python"),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(void 0):t.inspect("pythonPath");n&&n.globalValue===e||(this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(void 0,r.ConfigurationTarget.Global,e):await t.update("pythonPath",e,!0))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFolderPythonPathUpdaterService=void 0;const r=n(4),i=n(2);t.WorkspaceFolderPythonPathUpdaterService=class{constructor(e,t,n,r){this.workspaceFolder=e,this.inDeprecatePythonPathExperiment=t,this.workspaceService=n,this.interpreterPathService=r}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python",this.workspaceFolder),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(this.workspaceFolder):t.inspect("pythonPath");n&&n.workspaceFolderValue===e||(e&&e.startsWith(this.workspaceFolder.fsPath)&&(e=r.relative(this.workspaceFolder.fsPath,e)),this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(this.workspaceFolder,i.ConfigurationTarget.WorkspaceFolder,e):await t.update("pythonPath",e,i.ConfigurationTarget.WorkspaceFolder))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspacePythonPathUpdaterService=void 0;const r=n(4),i=n(2);t.WorkspacePythonPathUpdaterService=class{constructor(e,t,n,r){this.workspace=e,this.inDeprecatePythonPathExperiment=t,this.workspaceService=n,this.interpreterPathService=r}async updatePythonPath(e){const t=this.workspaceService.getConfiguration("python",this.workspace),n=this.inDeprecatePythonPathExperiment?this.interpreterPathService.inspect(this.workspace):t.inspect("pythonPath");n&&n.workspaceValue===e||(e&&e.startsWith(this.workspace.fsPath)&&(e=r.relative(this.workspace.fsPath,e)),this.inDeprecatePythonPathExperiment?await this.interpreterPathService.update(this.workspace,i.ConfigurationTarget.Workspace,e):await t.update("pythonPath",e,!1))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterDisplay=t.AlwaysDisplayStatusBar=void 0;const o=n(0),s=n(2),a=n(3),c=n(10);n(11);const l=n(1),u=n(13),d=n(8),h=n(40),p=n(12);let f=class{get hidden(){return!1}};f=r([o.injectable()],f),t.AlwaysDisplayStatusBar=f;let g=class{constructor(e,t){this.serviceContainer=e,this.visibilityFilters=t,this.helper=e.get(p.IInterpreterHelper),this.workspaceService=e.get(a.IWorkspaceService),this.pathUtils=e.get(l.IPathUtils),this.interpreterService=e.get(p.IInterpreterService),this.autoSelection=e.get(h.IInterpreterAutoSelectionService);const n=e.get(a.IApplicationShell),r=e.get(l.IDisposableRegistry);this.statusBar=n.createStatusBarItem(s.StatusBarAlignment.Left,100),this.statusBar.command="python.setInterpreter",r.push(this.statusBar),this.interpreterService.onDidChangeInterpreterInformation(this.onDidChangeInterpreterInformation,this,r),this.visibilityFilters.filter(e=>e.changed).forEach(e=>e.changed(this.updateVisibility,this,r))}async refresh(e){if(e&&this.workspaceService.getWorkspaceFolder(e)&&(e=this.workspaceService.getWorkspaceFolder(e).uri),!e){const t=this.helper.getActiveWorkspaceUri(e);e=t?t.folderUri:void 0}await this.updateDisplay(e)}onDidChangeInterpreterInformation(e){this.currentlySelectedInterpreterPath&&this.currentlySelectedInterpreterPath!==e.path||this.updateDisplay(this.currentlySelectedWorkspaceFolder).ignoreErrors()}async updateDisplay(e){await this.autoSelection.autoSelectInterpreter(e);const t=await this.interpreterService.getActiveInterpreter(e);if(this.currentlySelectedWorkspaceFolder=e,t){if(this.statusBar.color="",this.statusBar.tooltip=this.pathUtils.getDisplayName(t.path,null==e?void 0:e.fsPath),this.interpreterPath!==t.path){this.serviceContainer.get(l.IOutputChannel,c.STANDARD_OUTPUT_CHANNEL).appendLine(u.Interpreters.pythonInterpreterPath().format(this.pathUtils.getDisplayName(t.path,null==e?void 0:e.fsPath))),this.interpreterPath=t.path}this.statusBar.text=t.displayName,this.currentlySelectedInterpreterPath=t.path}else this.statusBar.tooltip="",this.statusBar.color="yellow",this.statusBar.text="$(alert) Select Python Interpreter",this.currentlySelectedInterpreterPath=void 0;this.statusBarCanBeDisplayed=!0,this.updateVisibility()}updateVisibility(){this.statusBarCanBeDisplayed&&(0===this.visibilityFilters.length||this.visibilityFilters.every(e=>!e.hidden)?this.statusBar.show():this.statusBar.hide())}};g=r([o.injectable(),i(0,o.inject(d.IServiceContainer)),i(1,o.multiInject(p.IInterpreterStatusbarVisibilityFilter))],g),t.InterpreterDisplay=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterSelectionTip=void 0;const o=n(0),s=n(3),a=n(24),c=n(1),l=n(23),u=n(13),d=n(7),h=n(9);var p;!function(e){e[e.Tip=0]="Tip",e[e.Survey=1]="Survey",e[e.NoPrompt=2]="NoPrompt"}(p||(p={}));let f=class{constructor(e,t,n,r){this.shell=e,this.experiments=n,this.browserService=r,this.storage=t.createGlobalPersistentState("InterpreterSelectionTip",!1),this.notificationType=p.NoPrompt}async activate(){this.storage.value||(await this.experiments.inExperiment(a.SurveyAndInterpreterTipNotification.surveyExperiment)?(this.notificationType=p.Survey,this.notificationContent=await this.experiments.getExperimentValue(a.SurveyAndInterpreterTipNotification.surveyExperiment)):await this.experiments.inExperiment(a.SurveyAndInterpreterTipNotification.tipExperiment)&&(this.notificationType=p.Tip,this.notificationContent=await this.experiments.getExperimentValue(a.SurveyAndInterpreterTipNotification.tipExperiment)),this.showTip().ignoreErrors(),await this.storage.updateValue(!0))}async showTip(){if(this.notificationType===p.Tip)await this.shell.showInformationMessage(this.notificationContent,u.Common.gotIt()),d.sendTelemetryEvent(h.EventName.ACTIVATION_TIP_PROMPT,void 0);else if(this.notificationType===p.Survey){await this.shell.showInformationMessage(this.notificationContent,u.Common.bannerLabelYes(),u.Common.bannerLabelNo())===u.Common.bannerLabelYes()&&(d.sendTelemetryEvent(h.EventName.ACTIVATION_SURVEY_PROMPT,void 0),this.browserService.launch("https://aka.ms/mailingListSurvey"))}}};r([l.swallowExceptions("Failed to display tip")],f.prototype,"showTip",null),f=r([o.injectable(),i(0,o.inject(s.IApplicationShell)),i(1,o.inject(c.IPersistentStateFactory)),i(2,o.inject(c.IExperimentService)),i(3,o.inject(c.IBrowserService))],f),t.InterpreterSelectionTip=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterLocatorProgressStatubarHandler=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(1),u=n(15),d=n(13),h=n(12);let p=class{constructor(e,t,n){this.shell=e,this.progressService=t,this.disposables=n,this.isFirstTimeLoadingInterpreters=!0}register(){this.progressService.onRefreshing(()=>this.showProgress(),this,this.disposables),this.progressService.onRefreshed(()=>this.hideProgress(),this,this.disposables)}showProgress(){this.deferred||this.createProgress()}hideProgress(){this.deferred&&(this.deferred.resolve(),this.deferred=void 0)}createProgress(){const e={location:s.ProgressLocation.Window,title:this.isFirstTimeLoadingInterpreters?d.Common.loadingExtension():d.Interpreters.refreshing()};this.isFirstTimeLoadingInterpreters=!1,this.shell.withProgress(e,()=>(this.deferred=u.createDeferred(),this.deferred.promise))}};r([c.traceDecorators.verbose("Display locator refreshing progress")],p.prototype,"showProgress",null),r([c.traceDecorators.verbose("Hide locator refreshing progress")],p.prototype,"hideProgress",null),p=r([o.injectable(),i(0,o.inject(a.IApplicationShell)),i(1,o.inject(h.IInterpreterLocatorProgressService)),i(2,o.inject(l.IDisposableRegistry))],p),t.InterpreterLocatorProgressStatubarHandler=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShebangCodeLensProvider=void 0;const o=n(0),s=n(2),a=n(3),c=n(6),l=n(59),u=n(18),d=n(1);let h=class{constructor(e,t,n,r){this.processServiceFactory=e,this.configurationService=t,this.platformService=n,this.onDidChangeCodeLenses=r.onDidChangeConfiguration}async detectShebang(e,t=!1){const n=e.lineAt(0);if(n.isEmptyOrWhitespace)return;if(!n.text.startsWith("#!"))return;const r=n.text.substr(2).trim();if(t){const t=await this.getFullyQualifiedPathToInterpreter(r,e.uri);return"string"==typeof t&&t.length>0?t:void 0}return"string"==typeof r&&r.length>0?r:void 0}async provideCodeLenses(e,t){return this.createShebangCodeLens(e)}async getFullyQualifiedPathToInterpreter(e,t){let n=e;const[r,i]=l.getExecutable();if(e.indexOf("bin/env ")>=0&&!this.platformService.isWindows){const t=e.split(" ").map(e=>e.trim()).filter(e=>e.length>0);n=t.shift(),r.splice(0,0,...t)}return(await this.processServiceFactory.create(t)).exec(n,r).then(e=>i(e.stdout)).catch(()=>"")}async createShebangCodeLens(e){const t=await this.detectShebang(e);if(!t)return[];const n=this.configurationService.getSettings(e.uri).pythonPath;if(t===await this.getFullyQualifiedPathToInterpreter(n,e.uri))return[];const r=e.lineAt(0),i=new s.Position(0,0),o=new s.Position(0,r.text.length-1),a=new s.Range(i,o);return[new s.CodeLens(a,{command:"python.setShebangInterpreter",title:"Set as interpreter"})]}};h=r([o.injectable(),i(0,o.inject(u.IProcessServiceFactory)),i(1,o.inject(d.IConfigurationService)),i(2,o.inject(c.IPlatformService)),i(3,o.inject(a.IWorkspaceService))],h),t.ShebangCodeLensProvider=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterService=void 0;const o=n(0),s=n(205),a=n(4),c=n(2);n(11);const l=n(3),u=n(24),d=n(5),h=n(214),p=n(6),f=n(18),g=n(1),m=n(15),v=n(8),y=n(220),b=n(28),S=n(7),E=n(9),w=n(12),_=n(150);let P=class{constructor(e,t,n){this.serviceContainer=e,this.hashProviderFactory=t,this.pyenvs=n,this._pythonPathSetting="",this.didChangeInterpreterConfigurationEmitter=new c.EventEmitter,this.didChangeInterpreterEmitter=new c.EventEmitter,this.didChangeInterpreterInformation=new c.EventEmitter,this.inMemoryCacheOfDisplayNames=new Map,this.updatedInterpreters=new Set,this._onConfigChanged=e=>{this.didChangeInterpreterConfigurationEmitter.fire(e);const t=this.configService.getSettings(e);if(""===this._pythonPathSetting||this._pythonPathSetting!==t.pythonPath){this._pythonPathSetting=t.pythonPath,this.didChangeInterpreterEmitter.fire();this.serviceContainer.get(w.IInterpreterDisplay).refresh().catch(e=>d.traceError("Python Extension: display.refresh",e))}},this.locator=e.get(w.IInterpreterLocatorService,w.INTERPRETER_LOCATOR_SERVICE),this.persistentStateFactory=this.serviceContainer.get(g.IPersistentStateFactory),this.configService=this.serviceContainer.get(g.IConfigurationService),this.interpreterPathService=this.serviceContainer.get(g.IInterpreterPathService),this.experiments=this.serviceContainer.get(g.IExperimentsManager)}get hasInterpreters(){return this.locator.hasInterpreters}get onDidChangeInterpreter(){return this.didChangeInterpreterEmitter.event}get onDidChangeInterpreterInformation(){return this.didChangeInterpreterInformation.event}get onDidChangeInterpreterConfiguration(){return this.didChangeInterpreterConfigurationEmitter.event}async refresh(e){return this.serviceContainer.get(w.IInterpreterDisplay).refresh(e)}initialize(){const e=this.serviceContainer.get(g.IDisposableRegistry),t=this.serviceContainer.get(l.IDocumentManager);e.push(t.onDidChangeActiveTextEditor(e=>e&&e.document?this.refresh(e.document.uri):void 0));const n=this.serviceContainer.get(l.IWorkspaceService),r=this.configService.getSettings();if(this._pythonPathSetting=r.pythonPath,this.experiments.inExperiment(u.DeprecatePythonPath.experiment))e.push(this.interpreterPathService.onDidChange(e=>{this._onConfigChanged(e.uri)}));else{const t=n.hasWorkspaceFolders?n.workspaceFolders.map(e=>e.uri):[void 0],r=n.onDidChangeConfiguration(e=>{const n=t.findIndex(t=>e.affectsConfiguration("python.pythonPath",t)),r=-1===n?void 0:t[n];this._onConfigChanged(r)});e.push(r)}this.experiments.sendTelemetryIfInExperiment(u.DeprecatePythonPath.control)}async getInterpreters(e,t){const n=await this.locator.getInterpreters(e,t);return await Promise.all(n.filter(e=>!e.displayName).map(async t=>{t.displayName=await this.getDisplayName(t,e),t.cachedEntry||this.updateCachedInterpreterInformation(t,e).ignoreErrors()})),n}dispose(){this.locator.dispose(),this.didChangeInterpreterEmitter.dispose(),this.didChangeInterpreterInformation.dispose()}async getActiveInterpreter(e){const t=this.serviceContainer.tryGet(f.IPythonExecutionFactory),n=t?await t.create({resource:e}):void 0,r=n?await n.getExecutablePath().catch(()=>{}):void 0;if(r)return this.getInterpreterDetails(r,e)}async getInterpreterDetails(e,t){const n=await this.pyenvs.getInterpreterDetails(e);if(void 0!==n)return n;if(a.basename(e)===e){const n=this.serviceContainer.get(f.IPythonExecutionFactory),r=await n.create({resource:t});if(!(e=await r.getExecutablePath().catch(()=>"")))return}const r=await this.getInterpreterCache(e);if(r.value&&r.value.info)return r.value.info;const i=this.serviceContainer.get(p.IFileSystem),o=(async()=>{const n=this.collectInterpreterDetails(e,t);return await m.sleep(1e3),n})(),s=(async()=>{const n=(await this.getInterpreters(t)).find(t=>i.arePathsSame(t.path,e));return n?(n.__store=!0,n):o})();let c=await Promise.race([s,o]);if(!c){const e=await Promise.all([o,s]);c=e[0]?e[0]:e[1]}return c&&c.__store&&await this.updateCachedInterpreterInformation(c,t),c}async getDisplayName(e,t){if(!e.cachedEntry&&e.path&&this.inMemoryCacheOfDisplayNames.has(e.path))return this.inMemoryCacheOfDisplayNames.get(e.path);const n=`${(e.path?await this.getInterepreterFileHash(e.path).catch(()=>""):"")||""}-${s(JSON.stringify({...e,displayName:""}))}`,r=this.persistentStateFactory.createGlobalPersistentState(e.path+".interpreter.displayName.v7",void 0,864e5);if(r.value&&r.value.hash===n&&r.value.displayName)return this.inMemoryCacheOfDisplayNames.set(e.path,r.value.displayName),r.value.displayName;const i=await this.buildInterpreterDisplayName(e,t);return e.cachedEntry||(await r.updateValue({displayName:i,hash:n}),this.inMemoryCacheOfDisplayNames.set(e.path,i)),i}async getInterpreterCache(e){const t=(e?await this.getInterepreterFileHash(e).catch(()=>""):"")||"",n=this.persistentStateFactory.createGlobalPersistentState(e+".interpreter.Details.v7",void 0,864e5);return n.value&&n.value.fileHash===t||await n.updateValue({fileHash:t}),n}async getInterepreterFileHash(e){return this.hashProviderFactory.create({pythonPath:e}).then(t=>t.getInterpreterHash(e))}async updateCachedInterpreterInformation(e,t){const n=JSON.stringify(e);if(this.updatedInterpreters.has(n))return;this.updatedInterpreters.add(n);const r=await this.getInterpreterCache(e.path);e.displayName=await this.getDisplayName(e,t),r.value&&r.value.info&&JSON.stringify(e)===JSON.stringify(r.value.info)||(this.inMemoryCacheOfDisplayNames.delete(e.path),await r.updateValue({fileHash:r.value.fileHash,info:e}),this.didChangeInterpreterInformation.fire(e))}async buildInterpreterDisplayName(e,t){const n=["Python"],r=[];if(e.version&&n.push(`${e.version.major}.${e.version.minor}.${e.version.patch}`),e.architecture&&n.push(h.getArchitectureDisplayName(e.architecture)),!e.envName&&e.path&&e.envType&&e.envType===b.EnvironmentType.Pipenv){const n=this.serviceContainer.get(_.IVirtualEnvironmentManager);e.envName=await n.getEnvironmentName(e.path,t)}if(e.envName&&e.envName.length>0&&r.push(`'${e.envName}'`),e.envType){const t=this.serviceContainer.get(w.IInterpreterHelper).getInterpreterTypeDisplayName(e.envType);t&&r.push(t)}const i=0===r.length?"":`(${r.join(": ")})`;return`${n.join(" ")} ${i}`.trim()}async collectInterpreterDetails(e,t){const n=this.serviceContainer.get(w.IInterpreterHelper),r=this.serviceContainer.get(_.IVirtualEnvironmentManager),[i,o]=await Promise.all([n.getInterpreterInformation(e),r.getEnvironmentType(e)]);if(!i)return;const s={...{...i,path:e,envType:o},envName:o===b.EnvironmentType.Unknown?void 0:await r.getEnvironmentName(e,t)};return s.displayName=await this.getDisplayName(s,t),s}};r([S.captureTelemetry(E.EventName.PYTHON_INTERPRETER_DISCOVERY,{locator:"all"},!0)],P.prototype,"getInterpreters",null),P=r([o.injectable(),i(0,o.inject(v.IServiceContainer)),i(1,o.inject(y.InterpeterHashProviderFactory)),i(2,o.inject(w.IComponentAdapter))],P),t.InterpreterService=P},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterVersionService=t.PIP_VERSION_REGEX=void 0;const o=n(0);n(11);const s=n(59),a=n(18),c=n(145);t.PIP_VERSION_REGEX="\\d+\\.\\d+(\\.\\d+)?";let l=class{constructor(e){this.processServiceFactory=e}async getVersion(e,t){const n=await this.processServiceFactory.create();return c.getPythonVersion(e,t,(e,t)=>n.exec(e,t,{mergeStdOutErr:!0}))}async getPipVersion(e){const[n,r]=s.getModuleVersion("pip"),i=await this.processServiceFactory.create(),o=await i.exec(e,n,{mergeStdOutErr:!0}),a=r(o.stdout);if(a.length>0){const e=new RegExp(t.PIP_VERSION_REGEX,"g").exec(a);if(e&&e.length>0)return e[0].trim()}throw new Error(`Unable to determine pip version from output '${o.stdout}'`)}};l=r([o.injectable(),i(0,o.inject(a.IProcessServiceFactory))],l),t.InterpreterVersionService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInheritEnvPrompt=t.condaInheritEnvPromptKey=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(6),u=n(1),d=n(13),h=n(28),p=n(7),f=n(9),g=n(12);t.condaInheritEnvPromptKey="CONDA_INHERIT_ENV_PROMPT_KEY";let m=class{constructor(e,t,n,r,i,o,s=!1){this.interpreterService=e,this.workspaceService=t,this.browserService=n,this.appShell=r,this.persistentStateFactory=i,this.platformService=o,this.hasPromptBeenShownInCurrentSession=s}async activate(e){this.initializeInBackground(e).ignoreErrors()}async initializeInBackground(e){await this.shouldShowPrompt(e)&&await this.promptAndUpdate()}async promptAndUpdate(){const e=this.persistentStateFactory.createGlobalPersistentState(t.condaInheritEnvPromptKey,!0);if(!e.value)return;const n=[d.Common.bannerLabelYes(),d.Common.bannerLabelNo(),d.Common.moreInfo()],r=await this.appShell.showInformationMessage(d.Interpreters.condaInheritEnvMessage(),...n);p.sendTelemetryEvent(f.EventName.CONDA_INHERIT_ENV_PROMPT,void 0,{selection:r?["Yes","No","More Info"][n.indexOf(r)]:void 0}),r&&(r===n[0]?await this.workspaceService.getConfiguration("terminal").update("integrated.inheritEnv",!1,s.ConfigurationTarget.Global):r===n[1]?await e.updateValue(!1):r===n[2]&&this.browserService.launch("https://aka.ms/AA66i8f"))}async shouldShowPrompt(e){if(this.hasPromptBeenShownInCurrentSession)return!1;if(this.platformService.isWindows)return!1;const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==h.EnvironmentType.Conda)return!1;const n=this.workspaceService.getConfiguration("terminal",e).inspect("integrated.inheritEnv");return n?void 0===n.globalValue&&void 0===n.workspaceValue&&void 0===n.workspaceFolderValue&&(this.hasPromptBeenShownInCurrentSession=!0,!0):(c.traceError("WorkspaceConfiguration.inspect returns `undefined` for setting `terminal.integrated.inheritEnv`"),!1)}};r([c.traceDecorators.error("Failed to intialize conda inherit env prompt")],m.prototype,"initializeInBackground",null),r([c.traceDecorators.error("Failed to display conda inherit env prompt")],m.prototype,"promptAndUpdate",null),r([c.traceDecorators.error("Failed to check whether to display prompt for conda inherit env setting")],m.prototype,"shouldShowPrompt",null),m=r([o.injectable(),i(0,o.inject(g.IInterpreterService)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(u.IBrowserService)),i(3,o.inject(a.IApplicationShell)),i(4,o.inject(u.IPersistentStateFactory)),i(5,o.inject(l.IPlatformService)),i(6,o.optional())],m),t.CondaInheritEnvPrompt=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualEnvironmentManager=void 0;const o=n(0),s=n(4),a=n(3),c=n(6),l=n(18),u=n(364),d=n(368),h=n(1),p=n(8),f=n(367),g=n(366),m=n(28),v=n(12);let y=class{constructor(e){this.serviceContainer=e,this.processServiceFactory=e.get(l.IProcessServiceFactory),this.fs=e.get(c.IFileSystem),this.pipEnvService=e.get(v.IInterpreterLocatorService,v.PIPENV_SERVICE),this.workspaceService=e.get(a.IWorkspaceService)}async getEnvironmentName(e,t){const n=g.getNameFinders(await this.getWorkspaceRoot(t),s.dirname,s.basename,(e,t)=>this.pipEnvService.isRelatedPipEnvironment(e,t));return await g.getName(e,n)||""}async getEnvironmentType(e,t){const n=this.serviceContainer.get(h.IPathUtils),r=this.serviceContainer.get(c.IPlatformService).isWindows?d.getAllScripts(s.join):u.getAllScripts(),i=g.getTypeFinders(n.home,r,s.sep,s.join,s.dirname,()=>this.getWorkspaceRoot(t),(e,t)=>this.pipEnvService.isRelatedPipEnvironment(e,t),e=>this.serviceContainer.get(h.ICurrentProcess).env[e],e=>this.fs.fileExists(e),async(e,n)=>(await this.processServiceFactory.create(t)).exec(e,n));return await g.getType(e,i)||m.EnvironmentType.Unknown}async isVenvEnvironment(e){const t=g.getVenvTypeFinder(s.dirname,s.join,e=>this.fs.fileExists(e));return await t(e)===m.EnvironmentType.Venv}async isPyEnvEnvironment(e,t){const n=this.serviceContainer.get(h.IPathUtils),r=f.getPyenvTypeFinder(n.home,s.sep,s.join,e=>this.serviceContainer.get(h.ICurrentProcess).env[e],async(e,n)=>(await this.processServiceFactory.create(t)).exec(e,n));return await r(e)===m.EnvironmentType.Pyenv}async isPipEnvironment(e,t){const n=g.getPipenvTypeFinder(()=>this.getWorkspaceRoot(t),(e,t)=>this.pipEnvService.isRelatedPipEnvironment(e,t));return await n(e)===m.EnvironmentType.Pipenv}async getPyEnvRoot(e){const t=this.serviceContainer.get(h.IPathUtils);return f.getPyenvRootFinder(t.home,s.join,e=>this.serviceContainer.get(h.ICurrentProcess).env[e],async(t,n)=>(await this.processServiceFactory.create(e)).exec(t,n))()}async isVirtualEnvironment(e){const t=this.serviceContainer.get(c.IPlatformService).isWindows?d.getAllScripts(s.join):u.getAllScripts(),n=g.getVirtualenvTypeFinder(t,s.dirname,s.join,e=>this.fs.fileExists(e));return await n(e)===m.EnvironmentType.VirtualEnv}async getWorkspaceRoot(e){const t=this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders[0].uri:void 0,n=e?this.workspaceService.getWorkspaceFolder(e):void 0,r=n?n.uri:t;return r?r.fsPath:void 0}};y=r([o.injectable(),i(0,o.inject(p.IServiceContainer))],y),t.VirtualEnvironmentManager=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualEnvironmentPrompt=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(1),u=n(15),d=n(13),h=n(7),p=n(9),f=n(77),g=n(12);let m=class{constructor(e,t,n,r,i,o,s){this.builder=e,this.persistentStateFactory=t,this.helper=n,this.pythonPathUpdaterService=r,this.locator=i,this.disposableRegistry=o,this.appShell=s}async activate(e){(await this.builder.getWorkspaceVirtualEnvInterpreterWatcher(e)).onDidCreate(()=>{this.handleNewEnvironment(e).ignoreErrors()},this,this.disposableRegistry)}async handleNewEnvironment(e){await u.sleep(1e3);const t=await this.locator.getInterpreters(e),n=this.helper.getBestInterpreter(t);n&&await this.notifyUser(n,e)}async notifyUser(e,t){const n=this.persistentStateFactory.createWorkspacePersistentState("MESSAGE_KEY_FOR_VIRTUAL_ENV",!0);if(!n.value)return;const r=[d.Common.bannerLabelYes(),d.Common.bannerLabelNo(),d.Common.doNotShowAgain()],i=await this.appShell.showInformationMessage(d.Interpreters.environmentPromptMessage(),...r);h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_ACTIVATE_ENVIRONMENT_PROMPT,void 0,{selection:i?["Yes","No","Ignore"][r.indexOf(i)]:void 0}),i&&(i===r[0]?await this.pythonPathUpdaterService.updatePythonPath(e.path,s.ConfigurationTarget.WorkspaceFolder,"ui",t):i===r[2]&&await n.updateValue(!1))}};r([c.traceDecorators.error("Error in event handler for detection of new environment")],m.prototype,"handleNewEnvironment",null),m=r([o.injectable(),i(0,o.inject(g.IInterpreterWatcherBuilder)),i(1,o.inject(l.IPersistentStateFactory)),i(2,o.inject(g.IInterpreterHelper)),i(3,o.inject(f.IPythonPathUpdaterServiceManager)),i(4,o.inject(g.IInterpreterLocatorService)),i(4,o.named(g.WORKSPACE_VIRTUAL_ENV_SERVICE)),i(5,o.inject(l.IDisposableRegistry)),i(6,o.inject(a.IApplicationShell))],m),t.VirtualEnvironmentPrompt=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinterCommands=void 0;const r=n(3),i=n(10),o=n(13),s=n(7),a=n(9),c=n(43);t.LinterCommands=class{constructor(e){this.serviceContainer=e,this.disposables=[],this.linterManager=this.serviceContainer.get(c.ILinterManager),this.appShell=this.serviceContainer.get(r.IApplicationShell),this.documentManager=this.serviceContainer.get(r.IDocumentManager);const t=this.serviceContainer.get(r.ICommandManager);t.registerCommand(i.Commands.Set_Linter,this.setLinterAsync.bind(this)),t.registerCommand(i.Commands.Enable_Linter,this.enableLintingAsync.bind(this)),t.registerCommand(i.Commands.Run_Linter,this.runLinting.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}async setLinterAsync(){const e=this.linterManager.getAllLinterInfos(),t=["Disable Linting",...e.map(e=>e.id).sort()],n=await this.linterManager.getActiveLinters(!0,this.settingsUri);let r;switch(n.length){case 0:r="none";break;case 1:r=n[0].id;break;default:r="multiple selected"}const i={matchOnDetail:!0,matchOnDescription:!0,placeHolder:"current: "+r},c=await this.appShell.showQuickPick(t,i);if(void 0!==c)if("Disable Linting"===c)await this.linterManager.enableLintingAsync(!1),s.sendTelemetryEvent(a.EventName.SELECT_LINTER,void 0,{enabled:!1});else{const t=e.findIndex(e=>e.id===c);if(n.length>1){if("Yes"!==await this.appShell.showWarningMessage(o.Linters.replaceWithSelectedLinter().format(c),"Yes","No"))return}await this.linterManager.setActiveLintersAsync([e[t].product],this.settingsUri),s.sendTelemetryEvent(a.EventName.SELECT_LINTER,void 0,{tool:c,enabled:!0})}}async enableLintingAsync(){const e=["on","off"],t={matchOnDetail:!0,matchOnDescription:!0,placeHolder:"current: "+(await this.linterManager.isLintingEnabled(!0,this.settingsUri)?e[0]:e[1])},n=await this.appShell.showQuickPick(e,t);if(void 0!==n){const t=n===e[0];await this.linterManager.enableLintingAsync(t,this.settingsUri)}}runLinting(){return this.serviceContainer.get(c.ILintingEngine).lintOpenPythonFiles()}get settingsUri(){return this.documentManager.activeTextEditor?this.documentManager.activeTextEditor.document.uri:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(904),o=n(905),s=n(906),a=n(919),c=n(43);t.registerTypes=function(e){e.addSingleton(c.ILintingEngine,a.LintingEngine),e.addSingleton(c.ILinterManager,s.LinterManager),e.add(c.IAvailableLinterActivator,o.AvailableLinterActivator),e.addSingleton(r.IExtensionActivationService,i.LinterProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinterProvider=void 0;const o=n(0),s=n(4),a=n(2),c=n(3),l=n(10);n(11);const u=n(6),d=n(1),h=n(12),p=n(8),f=n(43);let g=class{constructor(e){this.serviceContainer=e,this.disposables=[],this.activatedOnce=!1,this.serviceContainer=e,this.fs=this.serviceContainer.get(u.IFileSystem),this.engine=this.serviceContainer.get(f.ILintingEngine),this.linterManager=this.serviceContainer.get(f.ILinterManager),this.interpreterService=this.serviceContainer.get(h.IInterpreterService),this.documents=this.serviceContainer.get(c.IDocumentManager),this.configuration=this.serviceContainer.get(d.IConfigurationService),this.workspaceService=this.serviceContainer.get(c.IWorkspaceService)}async activate(){if(this.activatedOnce)return;this.activatedOnce=!0,this.disposables.push(this.interpreterService.onDidChangeInterpreter(()=>this.engine.lintOpenPythonFiles())),this.documents.onDidOpenTextDocument(e=>this.onDocumentOpened(e),this.disposables),this.documents.onDidCloseTextDocument(e=>this.onDocumentClosed(e),this.disposables),this.documents.onDidSaveTextDocument(e=>this.onDocumentSaved(e),this.disposables);const e=this.workspaceService.onDidChangeConfiguration(this.lintSettingsChangedHandler.bind(this));if(this.disposables.push(e),!l.isTestExecution()){const e=setTimeout(()=>this.engine.lintOpenPythonFiles().ignoreErrors(),1200);this.disposables.push({dispose:()=>clearTimeout(e)})}}dispose(){this.disposables.forEach(e=>e.dispose())}isDocumentOpen(e){return this.documents.textDocuments.some(t=>this.fs.arePathsSame(t.uri.fsPath,e.fsPath))}lintSettingsChangedHandler(e){a.workspace.textDocuments.forEach(t=>{e.affectsConfiguration("python.linting",t.uri)&&this.engine.lintDocument(t,"auto").ignoreErrors()})}onDocumentOpened(e){this.engine.lintDocument(e,"auto").ignoreErrors()}onDocumentSaved(e){const t=this.configuration.getSettings(e.uri);"python"===e.languageId&&t.linting.enabled&&t.linting.lintOnSave?this.engine.lintDocument(e,"save").ignoreErrors():this.linterManager.getActiveLinters(!1,e.uri).then(t=>{const n=s.basename(e.uri.fsPath).toLowerCase();t.filter(e=>e.configFileNames.indexOf(n)>=0).length>0&&setTimeout(()=>this.engine.lintOpenPythonFiles(),1e3)}).ignoreErrors()}onDocumentClosed(e){e&&e.fileName&&e.uri&&(this.isDocumentOpen(e.uri)||this.engine.clearDiagnostics(e))}};g=r([o.injectable(),i(0,o.inject(p.IServiceContainer))],g),t.LinterProvider=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AvailableLinterActivator=void 0;const o=n(0),s=n(4),a=n(16),c=n(3);n(11);const l=n(6),u=n(1),d=n(13),h=n(7),p=n(9);let f=class{constructor(e,t,n,r,i){this.appShell=e,this.fs=t,this.workspaceService=n,this.configService=r,this.persistentStateFactory=i}async promptIfLinterAvailable(e,t){return!!this.isFeatureEnabled&&(!!this.isLinterUsingDefaultConfiguration(e,t)&&(!!await this.isLinterAvailable(e,t)&&this.promptToConfigureAvailableLinter(e)))}async promptToConfigureAvailableLinter(e){const t=this.persistentStateFactory.createWorkspacePersistentState("MESSAGE_KEY_FOR_CONFIGURE_AVAILABLE_LINTER_PROMPT",!0);if(!t.value)return!1;const n=[d.Linters.enableLinter().format(e.id),d.Common.notNow(),d.Common.doNotShowAgain()],r=await this.appShell.showInformationMessage(d.Linters.enablePylint().format(e.id),...n);return h.sendTelemetryEvent(p.EventName.CONFIGURE_AVAILABLE_LINTER_PROMPT,void 0,{tool:e.id,action:r?["enable","ignore","disablePrompt"][n.indexOf(r)]:void 0}),r===n[0]?(await e.enableAsync(!0),!0):(r===n[2]&&await t.updateValue(!1),!1)}async isLinterAvailable(e,t){if(!this.workspaceService.hasWorkspaceFolders)return!1;const n=this.workspaceService.getWorkspaceFolder(t)||this.workspaceService.workspaceFolders[0];let r=!1;for(const t of e.configFileNames){const e=s.join(n.uri.fsPath,t);r=r||await this.fs.fileExists(e)}return r}isLinterUsingDefaultConfiguration(e,t){const n=this.workspaceService.getConfiguration("python.linting",t).inspect(e.enabledSettingName);return void 0===n.globalValue&&void 0===n.workspaceValue&&void 0===n.workspaceFolderValue}get isFeatureEnabled(){return this.configService.getSettings().languageServer!==a.LanguageServerType.Jedi}};f=r([o.injectable(),i(0,o.inject(c.IApplicationShell)),i(1,o.inject(l.IFileSystem)),i(2,o.inject(c.IWorkspaceService)),i(3,o.inject(u.IConfigurationService)),i(4,o.inject(u.IPersistentStateFactory))],f),t.AvailableLinterActivator=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinterManager=void 0;const o=n(0),s=n(3),a=n(5),c=n(1),l=n(8),u=n(907),d=n(911),h=n(912),p=n(913),f=n(914),g=n(915),m=n(916),v=n(917),y=n(918),b=n(43);class S{constructor(e){this.configService=e}get info(){return new h.LinterInfo(c.Product.pylint,b.LinterId.PyLint,this.configService)}async lint(e,t){return[]}}let E=class{constructor(e,t){this.serviceContainer=e,this.workspaceService=t,this.checkedForInstalledLinters=new Set,this.configService=e.get(c.IConfigurationService),this.linters=[new h.LinterInfo(c.Product.bandit,b.LinterId.Bandit,this.configService),new h.LinterInfo(c.Product.flake8,b.LinterId.Flake8,this.configService),new h.PylintLinterInfo(this.configService,this.workspaceService,[".pylintrc","pylintrc"]),new h.LinterInfo(c.Product.mypy,b.LinterId.MyPy,this.configService),new h.LinterInfo(c.Product.pycodestyle,b.LinterId.PyCodeStyle,this.configService),new h.LinterInfo(c.Product.prospector,b.LinterId.Prospector,this.configService),new h.LinterInfo(c.Product.pydocstyle,b.LinterId.PyDocStyle,this.configService),new h.LinterInfo(c.Product.pylama,b.LinterId.PyLama,this.configService)]}getAllLinterInfos(){return this.linters}getLinterInfo(e){const t=this.linters.findIndex((t,n,r)=>t.product===e);if(t>=0)return this.linters[t];throw new Error(`Invalid linter '${c.Product[e]}'`)}async isLintingEnabled(e,t){const n=this.configService.getSettings(t),r=await this.getActiveLinters(e,t);return n.linting.enabled&&r.length>0}async enableLintingAsync(e,t){await this.configService.updateSetting("linting.enabled",e,t)}async getActiveLinters(e,t){return e||await this.enableUnconfiguredLinters(t),this.linters.filter(e=>e.isEnabled(t))}async setActiveLintersAsync(e,t){if(e.filter(e=>-1!==this.linters.findIndex(t=>t.product===e)).length>0){const n=await this.getActiveLinters(!0,t);for(const e of n)await e.enableAsync(!1,t);if(e.length>0){const n=this.linters.filter(t=>e.findIndex(e=>t.product===e)>=0);for(const e of n)await e.enableAsync(!0,t);await this.enableLintingAsync(!0,t)}}}async createLinter(e,t,n,r){if(!await this.isLintingEnabled(!0,r))return new S(this.configService);const i="Linter manager: Unknown linter";switch(e){case c.Product.bandit:return new u.Bandit(t,n);case c.Product.flake8:return new d.Flake8(t,n);case c.Product.pylint:return new y.Pylint(t,n);case c.Product.mypy:return new p.MyPy(t,n);case c.Product.prospector:return new f.Prospector(t,n);case c.Product.pylama:return new v.PyLama(t,n);case c.Product.pydocstyle:return new m.PyDocStyle(t,n);case c.Product.pycodestyle:return new g.Pycodestyle(t,n);default:a.traceError(i)}throw new Error(i)}async enableUnconfiguredLinters(e){const t=this.configService.getSettings(e);if(!t.linting.pylintEnabled||!t.linting.enabled)return;const n=`${this.workspaceService.getWorkspaceFolderIdentifier(e)}${t.pythonPath}`;if(this.checkedForInstalledLinters.has(n))return;this.checkedForInstalledLinters.add(n);const r=this.linters.find(e=>"pylint"===e.id),i=this.serviceContainer.get(b.IAvailableLinterActivator);await i.promptIfLinterAvailable(r,e)}};E=r([o.injectable(),i(0,o.inject(l.IServiceContainer)),i(1,o.inject(s.IWorkspaceService))],E),t.LinterManager=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bandit=void 0,n(11);const r=n(1),i=n(79),o=n(43),s={LOW:o.LintMessageSeverity.Information,MEDIUM:o.LintMessageSeverity.Warning,HIGH:o.LintMessageSeverity.Error};class a extends i.BaseLinter{constructor(e,t){super(r.Product.bandit,e,t)}async runLinter(e,t){const n=await this.run(["-f","custom","--msg-template","{line},0,{severity},{test_id}:{msg}","-n","-1",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=s[e.type]}),n}}t.Bandit=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorHandler=void 0;const r=n(909),i=n(910);t.ErrorHandler=class{constructor(e,t,n){const o=new i.StandardErrorHandler(e,t,n);this.handler=new r.NotInstalledErrorHandler(e,t,n),this.handler.setNextHandler(o)}handleError(e,t,n){return this.handler.handleError(e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotInstalledErrorHandler=void 0;const r=n(5),i=n(18),o=n(43),s=n(370);class a extends s.BaseErrorHandler{constructor(e,t,n){super(e,t,n)}async handleError(e,t,n){const s=await this.serviceContainer.get(i.IPythonExecutionFactory).create({resource:t});if(await s.isModuleInstalled(n.moduleName))return!!this.nextHandler&&this.nextHandler.handleError(e,t,n);this.installer.promptToInstall(this.product,t).catch(e=>r.traceError("NotInstalledErrorHandler.promptToInstall",e));const a=`Linter '${this.serviceContainer.get(o.ILinterManager).getLinterInfo(n.product).id}' is not installed. Please install it or select another linter".`;return this.outputChannel.appendLine(`\n${a}\n${e}`),r.traceWarning(a,e),!0}}t.NotInstalledErrorHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StandardErrorHandler=void 0;const r=n(3),i=n(5),o=n(43),s=n(370);class a extends s.BaseErrorHandler{constructor(e,t,n){super(e,t,n)}async handleError(e,t,n){if("string"==typeof e&&e.indexOf("OSError: [Errno 2] No such file or directory: '/")>0)return this.nextHandler?this.nextHandler.handleError(e,t,n):Promise.resolve(!1);const r=this.serviceContainer.get(o.ILinterManager).getLinterInfo(n.product);return i.traceError("There was an error in running the linter "+r.id,e),this.outputChannel.appendLine(`Linting with ${r.id} failed.`),this.outputChannel.appendLine(e.toString()),this.displayLinterError(r.id).ignoreErrors(),!0}async displayLinterError(e){const t=`There was an error in running the linter '${e}'`,n=this.serviceContainer.get(r.IApplicationShell);await n.showErrorMessage(t,"View Errors"),this.outputChannel.show()}}t.StandardErrorHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flake8=void 0,n(11);const r=n(1),i=n(79);class o extends i.BaseLinter{constructor(e,t){super(r.Product.flake8,e,t,1)}async runLinter(e,t){const n=await this.run(["--format=%(row)d,%(col)d,%(code).1s,%(code)s:%(text)s",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.flake8CategorySeverity),0===e.line&&(e.line=1)}),n}}t.Flake8=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PylintLinterInfo=t.LinterInfo=void 0;const r=n(4),i=n(16),o=n(1),s=n(43);class a{constructor(e,t,n,r=[]){this.configService=n,this._product=e,this._id=t,this._configFileNames=r}get id(){return this._id}get product(){return this._product}get pathSettingName(){return this.id+"Path"}get argsSettingName(){return this.id+"Args"}get enabledSettingName(){return this.id+"Enabled"}get configFileNames(){return this._configFileNames}async enableAsync(e,t){return this.configService.updateSetting("linting."+this.enabledSettingName,e,t)}isEnabled(e){return this.configService.getSettings(e).linting[this.enabledSettingName]}pathName(e){return this.configService.getSettings(e).linting[this.pathSettingName]}linterArgs(e){const t=this.configService.getSettings(e).linting[this.argsSettingName];return Array.isArray(t)?t:[]}getExecutionInfo(e,t){const n=this.pathName(t),i=this.linterArgs(t).concat(e);let o;return r.basename(n)===n&&(o=n),{execPath:n,moduleName:o,args:i,product:this.product}}}t.LinterInfo=a;t.PylintLinterInfo=class extends a{constructor(e,t,n=[]){super(o.Product.pylint,s.LinterId.PyLint,e,n),this.workspaceService=t}isEnabled(e){const t=super.isEnabled(e);if(this.configService.getSettings(e).languageServer===i.LanguageServerType.Jedi)return t;const n=this.workspaceService.getConfiguration("python",e).inspect("linting."+this.enabledSettingName);return!(!n||void 0===n.globalValue&&void 0===n.workspaceFolderValue&&void 0===n.workspaceValue)&&t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MyPy=t.REGEX=void 0,n(11);const r=n(1),i=n(79);t.REGEX="(?<file>[^:]+):(?<line>\\d+)(:(?<column>\\d+))?: (?<type>\\w+): (?<message>.*)\\r?(\\n|$)";class o extends i.BaseLinter{constructor(e,t){super(r.Product.mypy,e,t)}async runLinter(e,n){const r=await this.run([e.uri.fsPath],e,n,t.REGEX);return r.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.mypyCategorySeverity),e.code=e.type}),r}}t.MyPy=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Prospector=void 0;const r=n(4);n(11);const i=n(5),o=n(1),s=n(79);class a extends s.BaseLinter{constructor(e,t){super(o.Product.prospector,e,t)}async runLinter(e,t){const n=this.getWorkspaceRootPath(e),i=r.relative(n,e.uri.fsPath);return this.run(["--absolute-paths","--output-format=json",i],e,t)}async parseMessages(e,t,n,r){let o;try{o=JSON.parse(e)}catch(t){return this.outputChannel.appendLine(`${"#".repeat(10)}Linting Output - ${this.info.id}${"#".repeat(10)}`),this.outputChannel.append(e),i.traceError("Failed to parse Prospector output",t),[]}return o.messages.filter((e,t)=>t<=this.pythonSettings.linting.maxNumberOfProblems).map(e=>{const t=null===e.location.line||isNaN(e.location.line)?1:e.location.line;return{code:e.code,message:e.message,column:e.location.character,line:t,type:e.code,provider:`${this.info.id} - ${e.source}`}})}}t.Prospector=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pycodestyle=void 0,n(11);const r=n(1),i=n(79);class o extends i.BaseLinter{constructor(e,t){super(r.Product.pycodestyle,e,t,1)}async runLinter(e,t){const n=await this.run(["--format=%(row)d,%(col)d,%(code).1s,%(code)s:%(text)s",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.pycodestyleCategorySeverity)}),n}}t.Pycodestyle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PyDocStyle=void 0;const r=n(4);n(11);const i=n(5),o=n(1),s=n(86),a=n(79),c=n(43);class l extends a.BaseLinter{constructor(e,t){super(o.Product.pydocstyle,e,t)}async runLinter(e,t){const n=await this.run([e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=c.LintMessageSeverity.Warning}),n}async parseMessages(e,t,n,o){let a=e.split(/\r?\n/g);const c=r.basename(t.uri.fsPath),l=2*this.pythonSettings.linting.maxNumberOfProblems,u=a.filter(e=>e.length>0);a=[];for(let e=0;e<u.length/2;e+=1)a.push(u[2*e]+u[2*e+1]);return a.filter((e,t)=>t<l&&e.indexOf(":")>=0).map(e=>s.IS_WINDOWS?e.substring(e.indexOf(c+":")+c.length+1).trim():e.substring(e.indexOf(":")+1).trim()).map(e=>{try{if(0===e.trim().length)return;const n=parseInt(e.substring(0,e.indexOf(" ")),10),r=e.substring(e.indexOf(":")+1).trim(),i=r.substring(0,r.indexOf(":")).trim(),o=r.substring(r.indexOf(":")+1).trim(),s=t.lineAt(n-1).text,a=s.trim();return{code:i,message:o,column:s.indexOf(a),line:n,type:"",provider:this.info.id}}catch(t){return void i.traceError(`Failed to parse pydocstyle line '${e}'`,t)}}).filter(e=>void 0!==e).map(e=>e)}}t.PyDocStyle=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PyLama=void 0,n(11);const r=n(1),i=n(79),o=n(43);class s extends i.BaseLinter{constructor(e,t){super(r.Product.pylama,e,t,1)}async runLinter(e,t){const n=await this.run(["--format=parsable",e.uri.fsPath],e,t,"(?<file>.py):(?<line>\\d+):(?<column>\\d+): \\[(?<type>\\w+)\\] (?<code>\\w\\d+):? (?<message>.*)\\r?(\\n|$)");return n.forEach(e=>{e.severity=o.LintMessageSeverity.Warning}),n}}t.PyLama=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pylint=void 0;const r=n(20),i=n(4);n(11);const o=n(6),s=n(1),a=n(79);class c extends a.BaseLinter{constructor(e,t){super(s.Product.pylint,e,t),this.fileSystem=t.get(o.IFileSystem),this.platformService=t.get(o.IPlatformService)}async runLinter(e,t){let n=[];const r=e.uri,o=this.getWorkspaceRootPath(e),s=this.configService.getSettings(r);!s.linting.pylintUseMinimalCheckers||0!==this.info.linterArgs(r).length||await c.hasConfigurationFileInWorkspace(this.fileSystem,i.dirname(r.fsPath),o)||await c.hasConfigurationFile(this.fileSystem,this.getWorkspaceRootPath(e),this.platformService)||(n=["--disable=all","--enable=F,unreachable,duplicate-key,unnecessary-semicolon,global-variable-not-assigned,unused-variable,unused-wildcard-import,binary-op-exception,bad-format-string,anomalous-backslash-in-string,bad-open-mode,E0001,E0011,E0012,E0100,E0101,E0102,E0103,E0104,E0105,E0107,E0108,E0110,E0111,E0112,E0113,E0114,E0115,E0116,E0117,E0118,E0202,E0203,E0211,E0213,E0236,E0237,E0238,E0239,E0240,E0241,E0301,E0302,E0303,E0401,E0402,E0601,E0602,E0603,E0604,E0611,E0632,E0633,E0701,E0702,E0703,E0704,E0710,E0711,E0712,E1003,E1101,E1102,E1111,E1120,E1121,E1123,E1124,E1125,E1126,E1127,E1128,E1129,E1130,E1131,E1132,E1133,E1134,E1135,E1136,E1137,E1138,E1139,E1200,E1201,E1205,E1206,E1300,E1301,E1302,E1303,E1304,E1305,E1306,E1310,E1700,E1701"]);const a=["--msg-template='{line},{column},{category},{symbol}:{msg}'","--reports=n","--output-format=text",r.fsPath],l=await this.run(n.concat(a),e,t,"(?<line>\\d+),(?<column>-?\\d+),(?<type>\\w+),(?<code>[\\w-]+):(?<message>.*)\\r?(\\n|$)");return l.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,s.linting.pylintCategorySeverity)}),l}static async hasConfigurationFile(e,t,n){if(process.env.PYLINTRC)return!0;if(await e.fileExists(i.join(t,"pylintrc"))||await e.fileExists(i.join(t,".pylintrc")))return!0;let o=t,s=i.dirname(t);do{if(!await e.fileExists(i.join(o,"__init__.py")))break;if(await e.fileExists(i.join(o,"pylintrc"))||await e.fileExists(i.join(o,".pylintrc")))return!0;o=s,s=i.dirname(s)}while(!e.arePathsSame(o,s));const a=r.homedir();return!!await e.fileExists(i.join(a,".pylintrc"))||(!!await e.fileExists(i.join(a,".config","pylintrc"))||!(n.isWindows||!await e.fileExists(i.join("/etc","pylintrc"))))}static async hasConfigurationFileInWorkspace(e,t,n){let r=t,o=i.dirname(r);do{if(await e.fileExists(i.join(r,"pylintrc"))||await e.fileExists(i.join(r,".pylintrc")))return!0;r=o,o=i.dirname(o)}while(!e.arePathsSame(r,n)&&!e.arePathsSame(r,o));return!1}}t.Pylint=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LintingEngine=void 0;const o=n(0),s=n(136),a=n(4),c=n(2),l=n(3),u=n(10),d=n(6),h=n(1),p=n(14),f=n(30),g=n(8),m=n(7),v=n(9),y=n(43),b="python",S=new Map;S.set(y.LintMessageSeverity.Error,c.DiagnosticSeverity.Error),S.set(y.LintMessageSeverity.Hint,c.DiagnosticSeverity.Hint),S.set(y.LintMessageSeverity.Information,c.DiagnosticSeverity.Information),S.set(y.LintMessageSeverity.Warning,c.DiagnosticSeverity.Warning);let E=class{constructor(e){this.serviceContainer=e,this.pendingLintings=new Map,this.documents=e.get(l.IDocumentManager),this.workspace=e.get(l.IWorkspaceService),this.configurationService=e.get(h.IConfigurationService),this.outputChannel=e.get(h.IOutputChannel,u.STANDARD_OUTPUT_CHANNEL),this.linterManager=e.get(y.ILinterManager),this.fileSystem=e.get(d.IFileSystem),this.diagnosticCollection=c.languages.createDiagnosticCollection("python")}get diagnostics(){return this.diagnosticCollection}clearDiagnostics(e){this.diagnosticCollection.has(e.uri)&&this.diagnosticCollection.delete(e.uri)}async lintOpenPythonFiles(){this.diagnosticCollection.clear();const e=this.documents.textDocuments.map(async e=>this.lintDocument(e,"auto"));return await Promise.all(e),this.diagnosticCollection}async lintDocument(e,t){if(p.isNotebookCell(e))return;if(this.diagnosticCollection.set(e.uri,[]),!await this.shouldLintDocument(e))return;this.pendingLintings.has(e.uri.fsPath)&&(this.pendingLintings.get(e.uri.fsPath).cancel(),this.pendingLintings.delete(e.uri.fsPath));const n=new c.CancellationTokenSource;n.token.onCancellationRequested(()=>{this.pendingLintings.has(e.uri.fsPath)&&this.pendingLintings.delete(e.uri.fsPath)}),this.pendingLintings.set(e.uri.fsPath,n);const r=(await this.linterManager.getActiveLinters(!1,e.uri)).map(async r=>{const i=new f.StopWatch,o=(await this.linterManager.createLinter(r.product,this.outputChannel,this.serviceContainer,e.uri)).lint(e,n.token);return this.sendLinterRunTelemetry(r,e.uri,o,i,t),o});let i=[];const o=this.configurationService.getSettings(e.uri);for(const t of r){const r=await t;if(n.token.isCancellationRequested)break;if(this.isDocumentOpen(e.uri)){for(const t of r)i.push(this.createDiagnostics(t,e));i=i.filter((e,t)=>t<=o.linting.maxNumberOfProblems)}}this.diagnosticCollection.set(e.uri,i)}sendLinterRunTelemetry(e,t,n,r,i){const o=e.pathName(t),s={tool:e.id,hasCustomArgs:e.linterArgs(t).length>0,trigger:i,executableSpecified:o.length>0};m.sendTelemetryWhenDone(v.EventName.LINTING,n,r,s)}isDocumentOpen(e){return this.documents.textDocuments.some(t=>t.uri.fsPath===e.fsPath)}createDiagnostics(e,t){const n=new c.Position(e.line-1,e.column),r=new c.Range(n,n),i=S.get(e.severity),o=new c.Diagnostic(r,e.message,i);return o.code=e.code,o.source=e.provider,o}async shouldLintDocument(e){if(!await this.linterManager.isLintingEnabled(!1,e.uri))return this.diagnosticCollection.set(e.uri,[]),!1;if(e.languageId!==b)return!1;const t=this.workspace.getWorkspaceFolder(e.uri),n=t&&"string"==typeof t.uri.fsPath?t.uri.fsPath:void 0,r="string"==typeof n?a.relative(n,e.fileName):e.fileName;return!this.configurationService.getSettings(e.uri).linting.ignorePatterns.map(e=>new s.Minimatch(e,{dot:!0})).some(t=>t.match(e.fileName)||t.match(r))&&(!("file"!==e.uri.scheme||!e.uri.fsPath)&&this.fileSystem.fileExists(e.uri.fsPath))}};E=r([o.injectable(),i(0,o.inject(g.IServiceContainer))],E),t.LintingEngine=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonCodeActionProvider=void 0;const r=n(2),i=n(14);t.PythonCodeActionProvider=class{provideCodeActions(e,t,n,o){if(i.isNotebookCell(e))return[];const s=new r.CodeAction("Sort imports",r.CodeActionKind.SourceOrganizeImports);return s.command={title:"Sort imports",command:"python.sortImports"},[s]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonFormattingEditProvider=void 0;const r=n(3),i=n(1),o=n(12),s=n(922),a=n(923),c=n(924),l=n(925);t.PythonFormattingEditProvider=class{constructor(e,t){this.formatters=new Map,this.disposables=[],this.documentVersionBeforeFormatting=-1,this.formatterMadeChanges=!1,this.saving=!1;const n=new l.YapfFormatter(t),u=new s.AutoPep8Formatter(t),d=new a.BlackFormatter(t),h=new c.DummyFormatter(t);this.formatters.set(n.Id,n),this.formatters.set(d.Id,d),this.formatters.set(u.Id,u),this.formatters.set(h.Id,h),this.commands=t.get(r.ICommandManager),this.workspace=t.get(r.IWorkspaceService),this.documentManager=t.get(r.IDocumentManager),this.config=t.get(i.IConfigurationService);const p=t.get(o.IInterpreterService);this.disposables.push(this.documentManager.onDidSaveTextDocument(async e=>this.onSaveDocument(e))),this.disposables.push(p.onDidChangeInterpreter(async()=>{if(this.documentManager.activeTextEditor)return this.onSaveDocument(this.documentManager.activeTextEditor.document)}))}dispose(){this.disposables.forEach(e=>e.dispose())}provideDocumentFormattingEdits(e,t,n){return this.provideDocumentRangeFormattingEdits(e,void 0,t,n)}async provideDocumentRangeFormattingEdits(e,t,n,r){if(this.saving)return[];!0===this.workspace.getConfiguration("editor",e.uri).get("formatOnSave")&&(this.documentVersionBeforeFormatting=e.version);const i=this.config.getSettings(e.uri),o=this.formatters.get(i.formatting.provider),s=await o.formatDocument(e,n,r,t);return this.formatterMadeChanges=s.length>0,s}async onSaveDocument(e){setTimeout(()=>{try{this.formatterMadeChanges&&!e.isDirty&&e.version===this.documentVersionBeforeFormatting&&this.commands.executeCommand("editor.action.formatDocument").then(async()=>{this.saving=!0,await e.save(),this.saving=!1})}finally{this.documentVersionBeforeFormatting=-1,this.saving=!1,this.formatterMadeChanges=!1}},50)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPep8Formatter=void 0;const r=n(222),i=n(1),o=n(30),s=n(7),a=n(9),c=n(151);class l extends c.BaseFormatter{constructor(e){super("autopep8",r.Product.autopep8,e)}formatDocument(e,t,n,r){const c=new o.StopWatch,l=this.serviceContainer.get(i.IConfigurationService).getSettings(e.uri),u=Array.isArray(l.formatting.autopep8Args)&&l.formatting.autopep8Args.length>0,d=!!r&&!r.isEmpty,h=["--diff"];d&&h.push("--line-range",(r.start.line+1).toString(),(r.end.line+1).toString());const p=super.provideDocumentFormattingEdits(e,t,n,h);return s.sendTelemetryWhenDone(a.EventName.FORMAT,p,c,{tool:"autopep8",hasCustomArgs:u,formatSelection:d}),p}}t.AutoPep8Formatter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlackFormatter=void 0;const r=n(3),i=n(222),o=n(1),s=n(14),a=n(30),c=n(7),l=n(9),u=n(151);class d extends u.BaseFormatter{constructor(e){super("black",i.Product.black,e)}async formatDocument(e,t,n,i){const u=new a.StopWatch,d=this.serviceContainer.get(o.IConfigurationService).getSettings(e.uri),h=Array.isArray(d.formatting.blackArgs)&&d.formatting.blackArgs.length>0,p=!!i&&!i.isEmpty;if(p){return this.serviceContainer.get(r.IApplicationShell).showErrorMessage('Black does not support the "Format Selection" command').then(s.noop,s.noop),[]}const f=super.provideDocumentFormattingEdits(e,t,n,["--diff","--quiet"]);return c.sendTelemetryWhenDone(l.EventName.FORMAT,f,u,{tool:"black",hasCustomArgs:h,formatSelection:p}),f}}t.BlackFormatter=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DummyFormatter=void 0;const r=n(1),i=n(151);class o extends i.BaseFormatter{constructor(e){super("none",r.Product.yapf,e)}formatDocument(e,t,n,r){return Promise.resolve([])}}t.DummyFormatter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YapfFormatter=void 0;const r=n(1),i=n(30),o=n(7),s=n(9),a=n(151);class c extends a.BaseFormatter{constructor(e){super("yapf",r.Product.yapf,e)}formatDocument(e,t,n,a){const c=new i.StopWatch,l=this.serviceContainer.get(r.IConfigurationService).getSettings(e.uri),u=Array.isArray(l.formatting.yapfArgs)&&l.formatting.yapfArgs.length>0,d=!!a&&!a.isEmpty,h=["--diff"];d&&h.push("--lines",`${a.start.line+1}-${a.end.line+1}`);const p=this.getWorkspaceUri(e).fsPath,f=this.getDocumentPath(e,p),g=super.provideDocumentFormattingEdits(e,t,n,h,f);return o.sendTelemetryWhenDone(s.EventName.FORMAT,g,c,{tool:"yapf",hasCustomArgs:u,formatSelection:d}),g}}t.YapfFormatter=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const i=n(3),o=n(10),s=n(7),a=n(9),c=n(152);class l{constructor(e){this.serviceContainer=e,this.disposables=[],this.activeResourceService=this.serviceContainer.get(i.IActiveResourceService),this.registerCommand()}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommand(){const e=this.serviceContainer.get(i.ICommandManager).registerCommand(o.Commands.Start_REPL,this.commandHandler,this);this.disposables.push(e)}async commandHandler(){const e=this.activeResourceService.getActiveResource(),t=this.serviceContainer.get(c.ICodeExecutionService,"repl");await t.initializeRepl(e)}}r([s.captureTelemetry(a.EventName.REPL)],l.prototype,"commandHandler",null),t.ReplProvider=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(928),o=n(930),s=n(371);t.registerTypes=function(e){e.addSingleton(s.ISortImportsEditingProvider,o.SortImportsEditingProvider),e.addSingleton(r.IExtensionSingleActivationService,i.CodeActionProviderService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeActionProviderService=void 0;const o=n(0),s=n(1),a=n(929);let c=class{constructor(e){this.disposableRegistry=e}async activate(){const e=n(2);this.disposableRegistry.push(e.languages.registerCodeActionsProvider({scheme:"file",language:"jsonc",pattern:"**/launch.json"},new a.LaunchJsonCodeActionProvider,{providedCodeActionKinds:[e.CodeActionKind.QuickFix]}))}};c=r([o.injectable(),i(0,o.inject(s.IDisposableRegistry))],c),t.CodeActionProviderService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchJsonCodeActionProvider=void 0;const r=n(2);t.LaunchJsonCodeActionProvider=class{provideCodeActions(e,t,n){return n.diagnostics.filter(e=>'Incorrect type. Expected "string".'===e.message).map(t=>this.createFix(e,t))}createFix(e,t){const n=`"${e.getText(t.range)}"`,i=new r.CodeAction("Convert to "+n,r.CodeActionKind.QuickFix);return i.edit=new r.WorkspaceEdit,i.edit.replace(e.uri,t.range,n),i}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SortImportsEditingProvider=void 0;const o=n(0),s=n(20),a=n(4),c=n(2),l=n(3),u=n(10),d=n(5),h=n(41),p=n(18),f=n(1),g=n(15),m=n(13),v=n(14),y=n(8),b=n(7),S=n(9);let E=class{constructor(e){this.serviceContainer=e,this.isortPromises=new Map,this.shell=e.get(l.IApplicationShell),this.documentManager=e.get(l.IDocumentManager),this.configurationService=e.get(f.IConfigurationService),this.pythonExecutionFactory=e.get(p.IPythonExecutionFactory),this.processServiceFactory=e.get(p.IProcessServiceFactory),this.editorUtils=e.get(f.IEditorUtils),this.output=e.get(f.IOutputChannel,u.STANDARD_OUTPUT_CHANNEL),this.persistentStateFactory=e.get(f.IPersistentStateFactory)}async provideDocumentSortImportsEdits(e){if(this.isortPromises.has(e.fsPath)){const t=this.isortPromises.get(e.fsPath);t.deferred.completed||t.tokenSource.cancel()}const t=new c.CancellationTokenSource,n=this._provideDocumentSortImportsEdits(e,t.token),r=g.createDeferredFromPromise(n);return this.isortPromises.set(e.fsPath,{deferred:r,tokenSource:t}),n.then(e=>t.token.isCancellationRequested?void 0:e)}async _provideDocumentSortImportsEdits(e,t){const n=await this.documentManager.openTextDocument(e);if(!n)return;if(n.lineCount<=1)return;const r=await this.getExecIsort(n,e,t);if(t&&t.isCancellationRequested)return;const i=await r(n.getText());return i?this.editorUtils.getWorkspaceEditsFromPatch(n.getText(),i,n.uri):void 0}registerCommands(){const e=this.serviceContainer.get(l.ICommandManager).registerCommand(u.Commands.Sort_Imports,this.sortImports,this);this.serviceContainer.get(f.IDisposableRegistry).push(e)}async sortImports(e){if(!e){const t=this.documentManager.activeTextEditor;if(!t||t.document.languageId!==u.PYTHON_LANGUAGE)return void this.shell.showErrorMessage("Please open a Python file to sort the imports.").then(v.noop,v.noop);e=t.document.uri}const t=await this.documentManager.openTextDocument(e);if(t.lineCount<=1)return;const n=t.lineAt(t.lineCount-1);if(n.text.trim().length>0){const t=new c.WorkspaceEdit;t.insert(e,n.range.end,s.EOL),await this.documentManager.applyEdit(t)}try{const t=await this.provideDocumentSortImportsEdits(e);if(!t||0===t.entries().length)return;await this.documentManager.applyEdit(t)}catch(t){const n="string"==typeof t?t:t.message?t.message:t;this.serviceContainer.get(f.IOutputChannel,u.STANDARD_OUTPUT_CHANNEL).appendLine(t),d.traceError(`Failed to format imports for '${e.fsPath}'.`,t),this.shell.showErrorMessage(n).then(v.noop,v.noop)}}async _showWarningAndOptionallyShowOutput(){const e=this.persistentStateFactory.createGlobalPersistentState("ISORT5_UPGRADE_WARNING_KEY",!1);if(e.value)return;const t=await this.shell.showWarningMessage(m.Diagnostics.checkIsort5UpgradeGuide(),m.Common.openOutputPanel(),m.Common.doNotShowAgain());t===m.Common.openOutputPanel()?this.output.show(!0):t===m.Common.doNotShowAgain()&&await e.updateValue(!0)}async getExecIsort(e,t,n){const r=this.configurationService.getSettings(t),i=r.sortImports.path,o="string"==typeof i&&i.length>0?i:void 0,s=r.sortImports.args,c={token:n,cwd:a.dirname(t.fsPath)};if(o){const t=await this.processServiceFactory.create(e.uri);return async e=>{const n=function(e,t){const n=[e,"--diff"];t&&n.push(...t);return n}("-",s),r=t.execObservable(o,n,c);return this.communicateWithIsortProcess(r,e)}}{const t=await this.pythonExecutionFactory.create({resource:e.uri});return async e=>{const[n,r]=h.sortImports("-",s),i=t.execObservable(n,c);return r(await this.communicateWithIsortProcess(i,e))}}}async communicateWithIsortProcess(e,t){var n,r;let i="",o=!1;const s=g.createDeferred();return e.out.subscribe({next:e=>{"stdout"===e.source?i+=e.out:(o=o||e.out.includes("W050"),d.traceError(e.out),e.out.includes("W050")||s.reject(e.out))},complete:()=>{s.resolve(i)}}),null===(n=e.proc)||void 0===n||n.stdin.write(t),null===(r=e.proc)||void 0===r||r.stdin.end(),await s.promise,o&&this._showWarningAndOptionallyShowOutput().ignoreErrors(),i}};r([b.captureTelemetry(S.EventName.FORMAT_SORT_IMPORTS)],E.prototype,"provideDocumentSortImportsEdits",null),E=r([o.injectable(),i(0,o.inject(y.IServiceContainer))],E),t.SortImportsEditingProvider=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractMethod=t.extractVariable=t.activateSimplePythonRefactorProvider=void 0;const r=n(2),i=n(10),o=n(143),s=n(5),a=n(18),c=n(1),l=n(30),u=n(344),d=n(7),h=n(9);let p;function f(e,t,n,i){let o=r.workspace.getWorkspaceFolder(e.document.uri);!o&&Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0&&(o=r.workspace.workspaceFolders[0]);const s=o?o.uri.fsPath:__dirname;return m(e).then(()=>{const o="newvariable"+(new Date).getMilliseconds().toString(),c=new u.RefactorProxy(s,async()=>i.get(a.IPythonExecutionFactory).create({resource:r.Uri.file(s)})).extractVariable(e.document,o,e.document.uri.fsPath,t,e.options).then(e=>e.results[0].diff);return v(e,o,c,n)})}function g(e,t,n,i){let o=r.workspace.getWorkspaceFolder(e.document.uri);!o&&Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0&&(o=r.workspace.workspaceFolders[0]);const s=o?o.uri.fsPath:__dirname;return m(e).then(()=>{const o="newmethod"+(new Date).getMilliseconds().toString(),c=new u.RefactorProxy(s,async()=>i.get(a.IPythonExecutionFactory).create({resource:r.Uri.file(s)})).extractMethod(e.document,o,e.document.uri.fsPath,t,e.options).then(e=>e.results[0].diff);return v(e,o,c,n)})}function m(e){return e.document.isDirty?new Promise((t,n)=>{r.window.showInformationMessage("Please save changes before refactoring","Save").then(r=>{if("Save"!==r)return n();e.document.save().then(t,n)})}):Promise.resolve()}function v(e,t,n,i){let a=-1;return n.then(t=>0===t.length?[]:o.getTextEditsFromPatch(e.document.getText(),t)).then(t=>e.edit(e=>{t.forEach(t=>{(-1===a||a>t.range.start.line)&&(a=t.range.start.line),e.replace(t.range,t.newText)})})).then(n=>{if(n&&a>=0){let n;for(let i=a;i<e.document.lineCount;i+=1){const o=e.document.lineAt(i),s=o.text.indexOf(t);if(s>=0){n=new r.Position(o.range.start.line,s);break}}return n&&(e.selections=[new r.Selection(n,new r.Position(n.line,n.character+t.length))],e.revealRange(new r.Range(e.selection.start,e.selection.end),r.TextEditorRevealType.Default)),n}return null}).then(t=>{if(t)return e.document.save().then(()=>r.commands.executeCommand("editor.action.rename"))}).catch(t=>{if("Not installed"===t)return p.promptToInstall(c.Product.rope,e.document.uri).catch(e=>s.traceError("Python Extension: simpleRefactorProvider.promptToInstall",e)),Promise.reject("");let n=""+t;return"string"==typeof t&&(n=t),"object"==typeof t&&t.message&&(n=t.message),i.appendLine(`${"#".repeat(10)}Refactor Output${"#".repeat(10)}`),i.appendLine("Error in refactoring:\n"+n),r.window.showErrorMessage(`Cannot perform refactoring using selected element(s). (${n})`),Promise.reject(t)})}t.activateSimplePythonRefactorProvider=function(e,t,n){p=n.get(c.IInstaller);let o=r.commands.registerCommand(i.Commands.Refactor_Extract_Variable,()=>{const e=new l.StopWatch,i=f(r.window.activeTextEditor,r.window.activeTextEditor.selection,t,n).catch(()=>{});d.sendTelemetryWhenDone(h.EventName.REFACTOR_EXTRACT_VAR,i,e)});e.subscriptions.push(o),o=r.commands.registerCommand(i.Commands.Refactor_Extract_Method,()=>{const e=new l.StopWatch,i=g(r.window.activeTextEditor,r.window.activeTextEditor.selection,t,n).catch(()=>{});d.sendTelemetryWhenDone(h.EventName.REFACTOR_EXTRACT_FUNCTION,i,e)}),e.subscriptions.push(o)},t.extractVariable=f,t.extractMethod=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalProvider=void 0;const i=n(3),o=n(10),s=n(25),a=n(1),c=n(23),l=n(7),u=n(9);class d{constructor(e){this.serviceContainer=e,this.disposables=[],this.registerCommands(),this.activeResourceService=this.serviceContainer.get(i.IActiveResourceService)}async initialize(e){const t=this.serviceContainer.get(a.IConfigurationService).getSettings(this.activeResourceService.getActiveResource());if(e&&t.terminal.activateEnvInCurrentTerminal){const t="hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser;if(!t){const t=this.serviceContainer.get(s.ITerminalActivator);await t.activateEnvironmentInTerminal(e,{preserveFocus:!0})}l.sendTelemetryEvent(u.EventName.ACTIVATE_ENV_IN_CURRENT_TERMINAL,void 0,{isTerminalVisible:!t})}}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommands(){const e=this.serviceContainer.get(i.ICommandManager).registerCommand(o.Commands.Create_Terminal,this.onCreateTerminal,this);this.disposables.push(e)}async onCreateTerminal(){const e=this.serviceContainer.get(s.ITerminalServiceFactory),t=this.activeResourceService.getActiveResource();await e.createTerminalService(t,"Python").show(!1)}}r([c.swallowExceptions("Failed to initialize terminal provider")],d.prototype,"initialize",null),r([l.captureTelemetry(u.EventName.TERMINAL_CREATE,{triggeredBy:"commandpalette"})],d.prototype,"onCreateTerminal",null),t.TerminalProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setExtensionInstallTelemetryProperties=void 0;const r=n(4),i=n(7),o=n(61);t.setExtensionInstallTelemetryProperties=async function(e){const t=r.join(r.dirname(o.EXTENSION_ROOT_DIR),"PythonCodingPack");await e.fileExists(t)?i.setSharedProperty("installSource","pythonCodingPack"):i.setSharedProperty("installSource","marketPlace")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(935),o=n(936),s=n(937),a=n(939),c=n(940),l=n(224),u=n(152);t.registerTypes=function(e){e.addSingleton(u.ICodeExecutionHelper,a.CodeExecutionHelper),e.addSingleton(u.ICodeExecutionManager,o.CodeExecutionManager),e.addSingleton(u.ICodeExecutionService,s.DjangoShellCodeExecutionProvider,"djangoShell"),e.addSingleton(u.ICodeExecutionService,l.TerminalCodeExecutionProvider,"standard"),e.addSingleton(u.ICodeExecutionService,c.ReplProvider,"repl"),e.addSingleton(u.ITerminalAutoActivation,i.TerminalAutoActivation),e.addSingleton(r.IExtensionSingleActivationService,i.ExtensionActivationForTerminalActivation)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAutoActivation=t.ExtensionActivationForTerminalActivation=void 0;const o=n(0),s=n(3),a=n(10),c=n(25),l=n(1),u=n(14),d=n(7),h=n(9);let p=class{constructor(e,t,n){this.commands=e,this.extensions=t,n.push(this.extensions.onDidChange(this.activate.bind(this)))}async activate(){const e=this.isCodeRunnerInstalled();this.commands.executeCommand("setContext","python.showPlayIcon",!e).then(u.noop,u.noop),d.sendTelemetryEvent(h.EventName.PLAY_BUTTON_ICON_DISABLED,void 0,{disabled:e})}isCodeRunnerInstalled(){return void 0!==this.extensions.getExtension(a.CODE_RUNNER_EXTENSION_ID)}};p=r([o.injectable(),i(0,o.inject(s.ICommandManager)),i(1,o.inject(l.IExtensions)),i(2,o.inject(l.IDisposableRegistry))],p),t.ExtensionActivationForTerminalActivation=p;let f=class{constructor(e,t,n,r){this.terminalManager=e,this.activator=n,this.activeResourceService=r,t.push(this)}dispose(){this.handler&&(this.handler.dispose(),this.handler=void 0)}register(){this.handler||(this.handler=this.terminalManager.onDidOpenTerminal(this.activateTerminal,this))}async activateTerminal(e){"hideFromUser"in e.creationOptions&&e.creationOptions.hideFromUser||await this.activator.activateEnvironmentInTerminal(e,{resource:this.activeResourceService.getActiveResource()})}};f=r([o.injectable(),i(0,o.inject(s.ITerminalManager)),i(1,o.inject(l.IDisposableRegistry)),i(2,o.inject(c.ITerminalActivator)),i(3,o.inject(s.IActiveResourceService))],f),t.TerminalAutoActivation=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionManager=void 0;const o=n(0),s=n(2),a=n(3),c=n(10);n(11);const l=n(5),u=n(6),d=n(1),h=n(14),p=n(8),f=n(7),g=n(9),m=n(152);let v=class{constructor(e,t,n,r,i){this.commandManager=e,this.documentManager=t,this.disposableRegistry=n,this.fileSystem=r,this.serviceContainer=i,this.eventEmitter=new s.EventEmitter}get onExecutedCode(){return this.eventEmitter.event}registerCommands(){[c.Commands.Exec_In_Terminal,c.Commands.Exec_In_Terminal_Icon].forEach(e=>{this.disposableRegistry.push(this.commandManager.registerCommand(e,async t=>{const n=e===c.Commands.Exec_In_Terminal?"command":"icon";await this.executeFileInTerminal(t,n).catch(e=>l.traceError("Failed to execute file in terminal",e))}))}),this.disposableRegistry.push(this.commandManager.registerCommand(c.Commands.Exec_Selection_In_Terminal,this.executeSelectionInTerminal.bind(this))),this.disposableRegistry.push(this.commandManager.registerCommand(c.Commands.Exec_Selection_In_Django_Shell,this.executeSelectionInDjangoShell.bind(this)))}async executeFileInTerminal(e,t){f.sendTelemetryEvent(g.EventName.EXECUTION_CODE,void 0,{scope:"file",trigger:t});const n=this.serviceContainer.get(m.ICodeExecutionHelper),r=(e=e instanceof s.Uri?e:void 0)||await n.getFileToExecute();if(!r)return;await n.saveFileIfDirty(r);try{const e=await this.fileSystem.readFile(r.fsPath);this.eventEmitter.fire(e)}catch(e){h.noop()}const i=this.serviceContainer.get(m.ICodeExecutionService,"standard");await i.executeFile(r)}async executeSelectionInTerminal(){const e=this.serviceContainer.get(m.ICodeExecutionService,"standard");await this.executeSelection(e)}async executeSelectionInDjangoShell(){const e=this.serviceContainer.get(m.ICodeExecutionService,"djangoShell");await this.executeSelection(e)}async executeSelection(e){const t=this.documentManager.activeTextEditor;if(!t)return;const n=this.serviceContainer.get(m.ICodeExecutionHelper),r=await n.getSelectedTextToExecute(t),i=await n.normalizeLines(r);if(i&&0!==i.trim().length){try{this.eventEmitter.fire(i)}catch(e){h.noop()}await e.execute(i,t.document.uri)}}};r([f.captureTelemetry(g.EventName.EXECUTION_CODE,{scope:"selection"},!1)],v.prototype,"executeSelectionInTerminal",null),r([f.captureTelemetry(g.EventName.EXECUTION_DJANGO,{scope:"selection"},!1)],v.prototype,"executeSelectionInDjangoShell",null),v=r([o.injectable(),i(0,o.inject(a.ICommandManager)),i(1,o.inject(a.IDocumentManager)),i(2,o.inject(d.IDisposableRegistry)),i(3,o.inject(u.IFileSystem)),i(4,o.inject(p.IServiceContainer))],v),t.CodeExecutionManager=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoShellCodeExecutionProvider=void 0;const o=n(0),s=n(4),a=n(3);n(11);const c=n(6),l=n(25),u=n(1),d=n(88),h=n(938),p=n(224);let f=class extends p.TerminalCodeExecutionProvider{constructor(e,t,n,r,i,o,s,a){super(e,t,n,a,i),this.terminalTitle="Django Shell",a.push(new h.DjangoContextInitializer(r,n,s,o))}async getExecutableInfo(e,t=[]){const n=await super.getExecutableInfo(e,t),r=e?this.workspace.getWorkspaceFolder(e):void 0,i=Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders[0].uri.fsPath:"",o=r?r.uri.fsPath:i,a=0===o.length?"manage.py":s.join(o,"manage.py");return d.copyPythonExecInfo(n,[a.fileToCommandArgument(),"shell"])}async getExecuteFileArgs(e,t=[]){const n=await super.getExecutableInfo(e);return d.copyPythonExecInfo(n,t)}};f=r([o.injectable(),i(0,o.inject(l.ITerminalServiceFactory)),i(1,o.inject(u.IConfigurationService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(a.IDocumentManager)),i(4,o.inject(c.IPlatformService)),i(5,o.inject(a.ICommandManager)),i(6,o.inject(c.IFileSystem)),i(7,o.inject(u.IDisposableRegistry))],f),t.DjangoShellCodeExecutionProvider=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DjangoContextInitializer=void 0;const i=n(0),o=n(4),s=n(223),a=n(5);let c=class{constructor(e,t,n,r){this.documentManager=e,this.workpaceService=t,this.fileSystem=n,this.monitoringActiveTextEditor=!1,this.workspaceContextKeyValues=new Map,this.lastCheckedWorkspace="",this.disposables=[],this.isDjangoProject=new s.ContextKey("python.isDjangoProject",r),this.ensureContextStateIsSet().catch(e=>a.traceError("Python Extension: ensureState",e)),this.disposables.push(this.workpaceService.onDidChangeWorkspaceFolders(()=>this.updateContextKeyBasedOnActiveWorkspace()))}dispose(){this.disposables.forEach(e=>e.dispose())}updateContextKeyBasedOnActiveWorkspace(){this.monitoringActiveTextEditor||(this.monitoringActiveTextEditor=!0,this.disposables.push(this.documentManager.onDidChangeActiveTextEditor(()=>this.ensureContextStateIsSet())))}getActiveWorkspace(){if(!Array.isArray(this.workpaceService.workspaceFolders)||0===this.workpaceService.workspaceFolders.length)return;if(1===this.workpaceService.workspaceFolders.length)return this.workpaceService.workspaceFolders[0].uri.fsPath;const e=this.documentManager.activeTextEditor;if(!e)return;const t=this.workpaceService.getWorkspaceFolder(e.document.uri);return t?t.uri.fsPath:void 0}async ensureContextStateIsSet(){const e=this.getActiveWorkspace();if(!e)return this.isDjangoProject.set(!1);if(this.lastCheckedWorkspace!==e)if(this.workspaceContextKeyValues.has(e))await this.isDjangoProject.set(this.workspaceContextKeyValues.get(e));else{const t=await this.fileSystem.fileExists(o.join(e,"manage.py"));await this.isDjangoProject.set(t),this.workspaceContextKeyValues.set(e,t),this.lastCheckedWorkspace=e}}};c=r([i.injectable()],c),t.DjangoContextInitializer=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeExecutionHelper=void 0,n(11);const o=n(0),s=n(2),a=n(3),c=n(10),l=n(24),u=n(5),d=n(41),h=n(18),p=n(1),f=n(15),g=n(12),m=n(8);let v=class{constructor(e){this.documentManager=e.get(a.IDocumentManager),this.applicationShell=e.get(a.IApplicationShell),this.processServiceFactory=e.get(h.IProcessServiceFactory),this.interpreterService=e.get(g.IInterpreterService),this.experimentService=e.get(p.IExperimentService)}async normalizeLines(e,t){var n,r;try{if(0===e.trim().length)return"";e=e.replace(new RegExp("\\r","g"),"");const i=await this.interpreterService.getActiveInterpreter(t),o=await this.processServiceFactory.create(t),s=await this.experimentService.inExperiment(l.SendSelectionToREPL.experiment),[a,c]=s?d.normalizeSelection():d.normalizeForInterpreter(),u=o.execObservable((null==i?void 0:i.path)||"python",a,{throwOnStdErr:!0}),h=f.createDeferred();let p="";u.out.subscribe({next:e=>{"stdout"===e.source&&(p+=e.out)},complete:()=>{h.resolve(p)}});const g=JSON.stringify({code:e});null===(n=u.proc)||void 0===n||n.stdin.write(g),null===(r=u.proc)||void 0===r||r.stdin.end();const m=await h.promise;return c(JSON.parse(m).normalized)}catch(t){return u.traceError(t,"Python: Failed to normalize code for execution in terminal"),e}}async getFileToExecute(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run");else{if(e.document.languageId===c.PYTHON_LANGUAGE)return e.document.isDirty&&await e.document.save(),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file")}else this.applicationShell.showErrorMessage("No open file to run in terminal")}async getSelectedTextToExecute(e){if(!e)return;const t=e.selection;let n;return n=t.isEmpty?e.document.lineAt(t.start.line).text:t.isSingleLine?this.getSingleLineSelectionText(e):this.getMultiLineSelectionText(e),n}async saveFileIfDirty(e){const t=this.documentManager.textDocuments.filter(t=>t.uri.path===e.path);1===t.length&&t[0].isDirty&&await t[0].save()}getSingleLineSelectionText(e){const t=e.selection,n=new s.Range(t.start,t.end),r=e.document.getText(n),i=e.document.lineAt(t.start.line).text;return r.trim()===i.trim()?i:r}getMultiLineSelectionText(e){const t=e.selection,n=new s.Range(t.start,t.end),r=e.document.getText(n),i=new s.Range(new s.Position(t.start.line,0),new s.Position(t.end.line,e.document.lineAt(t.end.line).text.length)),o=e.document.getText(i);if(r.trim()===o.trim())return o;const a=e.document.lineAt(t.start.line).text,c=new s.Range(t.start,new s.Position(t.start.line,a.length)),l=e.document.getText(c);return l.trimLeft()===a.trimLeft()?a+r.substr(l.length):r}};v=r([o.injectable(),i(0,o.inject(m.IServiceContainer))],v),t.CodeExecutionHelper=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReplProvider=void 0;const o=n(0),s=n(3),a=n(6),c=n(25),l=n(1),u=n(224);let d=class extends u.TerminalCodeExecutionProvider{constructor(e,t,n,r,i){super(e,t,n,r,i),this.terminalTitle="REPL"}};d=r([o.injectable(),i(0,o.inject(c.ITerminalServiceFactory)),i(1,o.inject(l.IConfigurationService)),i(2,o.inject(s.IWorkspaceService)),i(3,o.inject(l.IDisposableRegistry)),i(4,o.inject(a.IPlatformService))],d),t.ReplProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(8),o=n(942),s=n(26),a=n(943),c=n(944),l=n(945),u=n(372),d=n(946),h=n(947),p=n(948),f=n(949),g=n(950),m=n(951),v=n(952),y=n(373),b=n(954),S=n(955),E=n(53),w=n(956),_=n(957),P=n(17),C=n(958),T=n(959),I=n(961),O=n(962),R=n(966),D=n(967),x=n(968),k=n(969),A=n(970),N=n(972),j=n(973),F=n(976),M=n(89),L=n(983),U=n(985),W=n(986),B=n(987),V=n(988),H=n(989),q=n(990),G=n(991),$=n(992),K=n(993),z=n(19),Y=n(994),J=n(995),X=n(996),Q=n(997),Z=n(998),ee=n(999),te=n(1e3);t.registerTypes=function(e){F.registerTypes(e),e.addSingleton(P.ITestDebugLauncher,a.DebugLauncher),e.addSingleton(P.ITestCollectionStorageService,f.TestCollectionStorageService),e.addSingleton(P.IWorkspaceTestManagerService,S.WorkspaceTestManagerService),e.add(P.ITestsHelper,E.TestsHelper),e.add(y.ITestDiscoveredTestParser,h.TestDiscoveredTestParser),e.add(P.ITestDiscoveryService,p.TestsDiscoveryService,"common"),e.add(P.IUnitTestSocketServer,te.UnitTestSocketServer),e.addSingleton(P.ITestContextService,d.TestContextService),e.addSingleton(P.ITestsStatusUpdaterService,v.TestsStatusUpdaterService),e.add(P.ITestResultsService,m.TestResultsService),e.add(P.ITestVisitor,w.TestFlatteningVisitor,"TestFlatteningVisitor"),e.add(P.ITestVisitor,_.TestResultResetVisitor,"TestResultResetVisitor"),e.add(P.ITestsParser,ee.TestsParser,s.UNITTEST_PROVIDER),e.add(P.ITestsParser,V.TestsParser,s.NOSETEST_PROVIDER),e.add(P.ITestDiscoveryService,Z.TestDiscoveryService,s.UNITTEST_PROVIDER),e.add(P.ITestDiscoveryService,$.TestDiscoveryService,s.PYTEST_PROVIDER),e.add(P.ITestDiscoveryService,B.TestDiscoveryService,s.NOSETEST_PROVIDER),e.add(z.IArgumentsHelper,o.ArgumentsHelper),e.add(P.ITestRunner,l.TestRunner),e.add(P.IXUnitParser,T.XUnitParser),e.add(z.IUnitTestHelper,Y.UnitTestHelper),e.add(z.IArgumentsService,G.ArgumentsService,s.PYTEST_PROVIDER),e.add(z.IArgumentsService,W.ArgumentsService,s.NOSETEST_PROVIDER),e.add(z.IArgumentsService,Q.ArgumentsService,s.UNITTEST_PROVIDER),e.add(z.ITestManagerRunner,q.TestManagerRunner,s.PYTEST_PROVIDER),e.add(z.ITestManagerRunner,U.TestManagerRunner,s.NOSETEST_PROVIDER),e.add(z.ITestManagerRunner,X.TestManagerRunner,s.UNITTEST_PROVIDER),e.addSingleton(z.ITestConfigurationService,I.UnitTestConfigurationService),e.addSingleton(z.ITestManagementService,j.UnitTestManagementService),e.addSingleton(z.ITestResultDisplay,R.TestResultDisplay),e.addSingleton(z.ITestDisplay,D.TestDisplay),e.addSingleton(z.ITestConfigSettingsService,u.TestConfigSettingsService),e.addSingleton(z.ITestConfigurationManagerFactory,O.TestConfigurationManagerFactory),e.addSingleton(z.ITestDiagnosticService,b.UnitTestDiagnosticService),e.addSingleton(P.ITestMessageService,K.TestMessageService,s.PYTEST_PROVIDER),e.addSingleton(z.ITestTreeViewProvider,A.TestTreeViewProvider),e.addSingleton(z.ITestDataItemResource,A.TestTreeViewProvider),e.addSingleton(M.ITestExplorerCommandHandler,x.TestExplorerCommandHandler),e.addSingleton(r.IExtensionSingleActivationService,N.TreeViewService),e.addSingleton(r.IExtensionSingleActivationService,k.FailedTestHandler),e.addSingleton(r.IExtensionSingleActivationService,c.EnablementTracker),e.addSingleton(r.IExtensionActivationService,C.UpdateTestSettingService),e.addFactory(P.ITestManagerFactory,e=>(t,n,r)=>{const o=e.container.get(i.IServiceContainer);switch(t){case s.NOSETEST_PROVIDER:return new L.TestManager(n,r,o);case s.PYTEST_PROVIDER:return new H.TestManager(n,r,o);case s.UNITTEST_PROVIDER:return new J.TestManager(n,r,o);default:throw new Error(`Unrecognized test provider '${t}'`)}}),e.addFactory(P.ITestManagerServiceFactory,e=>t=>{const n=e.container.get(i.IServiceContainer),r=e.container.get(P.ITestsHelper);return new g.TestManagerService(t,r,n)})}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentsHelper=void 0;const i=n(0),o=n(5);let s=class{getOptionValues(e,t){const n=[];let r=!1;for(const i of e)r?(n.push(i),r=!1):i.startsWith(t+"=")?n.push(i.substring((t+"=").length)):i===t&&(r=!0);switch(n.length){case 0:return;case 1:return n[0];default:return n}}getPositionalArguments(e,t=[],n=[]){const r=[];return e.forEach((e,i)=>{if(-1===n.indexOf(e))if(-1!==t.indexOf(e))r.push(i),r.push(i+1);else{if(-1!==t.findIndex(t=>e.startsWith(t+"=")))return void r.push(i);if(e.startsWith("-"))return o.traceWarning(`Unknown command line option passed into args parser for tests '${e}'. Please report on https://github.com/Microsoft/vscode-python/issues/new`),void r.push(i);e.indexOf("=")>0&&(o.traceWarning(`Unknown command line option passed into args parser for tests '${e}'. Please report on https://github.com/Microsoft/vscode-python/issues/new`),r.push(i))}else r.push(i)}),e.filter((e,t)=>-1===r.indexOf(t))}filterArguments(e,t=[],n=[]){let r=-1;return e.filter((e,i)=>r!==i&&(!(n.indexOf(e)>=0||n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0)&&(t.indexOf(e)>=0?(r=i+1,!1):!(t.filter(t=>e.startsWith(t+"=")).length>0)&&(-1===e.indexOf("=")&&n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0?(r=i+1,!1):!(e.indexOf("=")>=0&&n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0)))))}};s=r([i.injectable()],s),t.ArgumentsHelper=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugLauncher=void 0;const o=n(0),s=n(91),a=n(4),c=n(2),l=n(3),u=n(10),d=n(5),h=n(6),p=n(41),f=n(1),g=n(14),m=n(52),v=n(219),y=n(8);let b=class{constructor(e,t){this.serviceContainer=e,this.launchResolver=t,this.configService=this.serviceContainer.get(f.IConfigurationService),this.workspaceService=this.serviceContainer.get(l.IWorkspaceService),this.fs=this.serviceContainer.get(h.IFileSystem)}async launchDebugger(e){if(e.token&&e.token.isCancellationRequested)return;const t=this.resolveWorkspaceFolder(e.cwd),n=await this.getLaunchArgs(e,t,this.configService.getSettings(t.uri));return this.serviceContainer.get(l.IDebugService).startDebugging(t,n).then(g.noop,e=>d.traceError("Failed to start debugging tests",e))}async readAllDebugConfigs(e){const t=a.join(e.uri.fsPath,".vscode","launch.json");if(!await this.fs.fileExists(t))return[];try{const e=await this.fs.readFile(t),n=s.parse(e,[],{allowTrailingComma:!0,disallowComments:!1});if(!n.version||!n.configurations||!Array.isArray(n.configurations))throw Error("malformed launch.json");return n.configurations}catch(e){d.traceError("could not get debug config",e);const t=this.serviceContainer.get(l.IApplicationShell);return await t.showErrorMessage("Could not load unit test config from launch.json"),[]}}resolveWorkspaceFolder(e){if(!this.workspaceService.hasWorkspaceFolders)throw new Error("Please open a workspace");const t=e?c.Uri.file(e):void 0;let n=this.workspaceService.getWorkspaceFolder(t);return n||(n=this.workspaceService.workspaceFolders[0]),n}async getLaunchArgs(e,t,n){let r=await this.readDebugConfig(t);return r||(r={name:"Debug Unit Test",type:"python",request:"test",subProcess:!0}),r.rules||(r.rules=[]),r.rules.push({path:a.join(u.EXTENSION_ROOT_DIR,"pythonFiles"),include:!1}),this.applyDefaults(r,t,n),this.convertConfigToArgs(r,t,e)}async readDebugConfig(e){const t=await this.readAllDebugConfigs(e);for(const e of t)if(e.name&&e.type===m.DebuggerTypeName&&"test"===e.request)return e}applyDefaults(e,t,n){e.console||(e.console="internalConsole"),e.cwd||(e.cwd=t.uri.fsPath),e.env||(e.env={}),e.envFile||(e.envFile=n.envFile),void 0===e.stopOnEntry&&(e.stopOnEntry=!1),e.showReturnValue=!1!==e.showReturnValue,void 0===e.redirectOutput&&(e.redirectOutput=!0),void 0===e.debugStdLib&&(e.debugStdLib=!1),void 0===e.subProcess&&(e.subProcess=!0)}async convertConfigToArgs(e,t,n){const r=e,i=this.fixArgs(n.args,n.testProvider),o=this.getTestLauncherScript(n.testProvider)(i);r.program=o[0],r.args=o.slice(1);let s=await this.launchResolver.resolveDebugConfiguration(t,r,n.token);if(!s)throw Error(`Invalid debug config "${e.name}"`);if(s=await this.launchResolver.resolveDebugConfigurationWithSubstitutedVariables(t,s,n.token),!s)throw Error(`Invalid debug config "${e.name}"`);return s.request="launch",s}fixArgs(e,t){return"unittest"===t?e.filter(e=>"--debug"!==e):e}getTestLauncherScript(e){switch(e){case"unittest":return p.visualstudio_py_testlauncher;case"pytest":case"nosetest":return p.testlauncher;default:throw new Error(`Unknown test provider '${e}'`)}}};b=r([o.injectable(),i(0,o.inject(y.IServiceContainer)),i(1,o.inject(v.IDebugConfigurationResolver)),i(1,o.named("launch"))],b),t.DebugLauncher=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnablementTracker=void 0;const o=n(0),s=n(3),a=n(1),c=n(7),l=n(9),u=n(19),d=n(17);let h=class{constructor(e,t,n,r){this.workspaceService=e,this.disposables=t,this.testConfig=n,this.testsHelper=r}async activate(){this.disposables.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration,this))}onDidChangeConfiguration(e){const t=[void 0];Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.forEach(e=>t.push(e.uri));const n=["nosetest","pytest","unittest"];t.forEach(t=>{const r={};n.forEach(n=>{const i=this.testsHelper.parseProduct(n),o=this.testConfig.getTestEnablingSetting(i),s="python."+o;e.affectsConfiguration(s)&&this.workspaceService.getConfiguration("python",t).get(o,!1)&&(r[n]=!0)}),(r.nosetest||r.pytest||r.unittest)&&this.sendTelemetry(r)})}sendTelemetry(e){c.sendTelemetryEvent(l.EventName.UNITTEST_ENABLED,void 0,e)}};h=r([o.injectable(),i(0,o.inject(s.IWorkspaceService)),i(1,o.inject(a.IDisposableRegistry)),i(2,o.inject(u.ITestConfigSettingsService)),i(3,o.inject(d.ITestsHelper))],h),t.EnablementTracker=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.run=t.TestRunner=void 0;const o=n(0),s=n(4),a=n(206),c=n(207),l=n(18),u=n(1),d=n(8),h=n(26),p=n(17);let f=class{constructor(e){this.serviceContainer=e}run(e,t){return g(this.serviceContainer,e,t)}};async function g(e,t,n){const r=function(e,t){let n;switch(e){case h.NOSETEST_PROVIDER:n=t.testing.nosetestPath;break;case h.PYTEST_PROVIDER:n=t.testing.pytestPath;break;default:return}return s.basename(n)===n?void 0:n}(t,e.get(u.IConfigurationService).getSettings(n.workspaceFolder)),i=function(e){switch(e){case h.NOSETEST_PROVIDER:return"nose";case h.PYTEST_PROVIDER:return"pytest";case h.UNITTEST_PROVIDER:return"unittest";default:throw new Error(`Test provider '${e}' not supported`)}}(t),o=n;let d,f;o.mergeStdOutErr="boolean"!=typeof o.mergeStdOutErr||o.mergeStdOutErr;const g=e.get(p.ITestsHelper),m={execPath:r,args:n.args,moduleName:r&&r.length>0?void 0:i,product:g.parseProduct(t)};if(t===h.UNITTEST_PROVIDER)f=e.get(l.IPythonExecutionFactory).createActivatedEnvironment({resource:n.workspaceFolder}).then(e=>e.execObservable(n.args,{...o}));else if("string"==typeof m.moduleName&&m.moduleName.length>0)d=e.get(l.IPythonExecutionFactory).createActivatedEnvironment({resource:n.workspaceFolder}),f=d.then(e=>e.execModuleObservable(m.moduleName,m.args,n));else{f=e.get(l.IPythonToolExecutionService).execObservable(m,o,n.workspaceFolder)}return f.then(e=>new Promise((t,r)=>{let o="",s="";e.out.subscribe(e=>{o+=e.out,"stderr"===e.source&&(s+=e.out),n.outChannel&&n.outChannel.append(e.out)},r,async()=>{if(i&&d&&a.ErrorUtils.outputHasModuleNotInstalledError(i,s)){const e=await d;if(!await e.isModuleInstalled(i))return r(new c.ModuleNotInstalledError(i))}t(o)})}))}f=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],f),t.TestRunner=f,t.run=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestContextService=void 0;const o=n(0),s=n(3),a=n(223),c=n(23),l=n(19),u=n(17);let d=class{constructor(e,t,n){this.storage=e,this.testManager=t,this.disposables=[],this.hasFailedTests=new a.ContextKey("hasFailedTests",n),this.runningTests=new a.ContextKey("runningTests",n),this.discoveringTests=new a.ContextKey("discoveringTests",n),this.busyTests=new a.ContextKey("busyTests",n)}dispose(){this.disposables.forEach(e=>e.dispose())}register(){this.testManager.onDidStatusChange(this.onStatusChange,this,this.disposables)}async onStatusChange(e){const t=this.storage.getTests(e.workspace),n=[];t&&t.summary&&n.push(this.hasFailedTests.set(t.summary.failures>0)),n.push(this.runningTests.set(e.status===u.TestStatus.Running),this.discoveringTests.set(e.status===u.TestStatus.Discovering),this.busyTests.set(e.status===u.TestStatus.Running||e.status===u.TestStatus.Discovering)),await Promise.all(n)}};r([c.swallowExceptions("Handle status change of tests")],d.prototype,"onStatusChange",null),d=r([o.injectable(),i(0,o.inject(u.ITestCollectionStorageService)),i(1,o.inject(l.ITestManagementService)),i(2,o.inject(s.ICommandManager))],d),t.TestContextService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDiscoveredTestParser=void 0;const o=n(0),s=n(4),a=n(3),c=n(5),l=n(19),u=n(53);let d=class{constructor(e){this.workspaceService=e}parse(e,t){const n={rootTestFolders:[],summary:{errors:0,failures:0,passed:0,skipped:0},testFiles:[],testFolders:[],testFunctions:[],testSuites:[]};if(!this.workspaceService.getWorkspaceFolder(e))return c.traceError("Resource does not belong to any workspace folder"),n;for(const r of t){const t={name:r.root,folders:[],time:0,testFiles:[],resource:e,nameToRun:r.rootid};n.rootTestFolders.push(t),n.testFolders.push(t),this.buildChildren(t,t,r,n)}return n}buildChildren(e,t,n,r){switch(u.getTestDataItemType(t)){case l.TestDataItemType.folder:this.processFolder(e,t,n,r);break;case l.TestDataItemType.file:this.processFile(e,t,n,r);break;case l.TestDataItemType.suite:this.processSuite(e,t,n,r)}}processFolder(e,t,n,r){n.parents.filter(e=>"folder"===e.kind&&e.parentid===t.nameToRun).map(t=>{return n=e,{name:(r=t).name,nameToRun:r.id,resource:n.resource,time:0,folders:[],testFiles:[]};var n,r}).forEach(i=>{t.folders.push(i),r.testFolders.push(i),this.buildChildren(e,i,n,r)});n.parents.filter(e=>"file"===e.kind&&e.parentid===t.nameToRun).map(t=>{return n=e,r=t,{fullPath:s.isAbsolute(r.relpath)?r.relpath:s.resolve(n.name,r.relpath),functions:[],name:r.name,nameToRun:r.id,resource:n.resource,suites:[],time:0,xmlName:v(r.id)};var n,r}).forEach(i=>{t.testFiles.push(i),r.testFiles.push(i),this.buildChildren(e,i,n,r)})}processFile(e,t,n,r){n.parents.filter(e=>"suite"===e.kind&&e.parentid===t.nameToRun).map(n=>h(t,e.resource,n)).forEach(i=>{t.suites.push(i),r.testSuites.push(p(r,i)),this.buildChildren(e,i,n,r)});n.tests.filter(e=>e.parentid===t.nameToRun).map(t=>m(e,t)).forEach(e=>{t.functions.push(e),r.testFunctions.push(f(r,e))});n.parents.filter(e=>"function"===e.kind&&e.parentid===t.nameToRun).map(t=>g(e,t)).forEach(i=>this.processParameterizedFunction(e,t,i,n,r))}processSuite(e,t,n,r){n.parents.filter(e=>"suite"===e.kind&&e.parentid===t.nameToRun).map(n=>h(t,e.resource,n)).forEach(i=>{t.suites.push(i),r.testSuites.push(p(r,i)),this.buildChildren(e,i,n,r)});n.tests.filter(e=>e.parentid===t.nameToRun).map(t=>m(e,t)).forEach(e=>{t.functions.push(e),r.testFunctions.push(f(r,e))});n.parents.filter(e=>"function"===e.kind&&e.parentid===t.nameToRun).map(t=>g(e,t)).forEach(i=>this.processParameterizedFunction(e,t,i,n,r))}processParameterizedFunction(e,t,n,r,i){if(!n.asSuite)return;r.tests.filter(e=>e.parentid===n.nameToRun).map(t=>m(e,t)).forEach(e=>{e.subtestParent=n,n.asSuite.functions.push(e),t.functions.push(e),i.testFunctions.push(function(e,t,n){const r=u.getTestDataItemType(n),i=r&&r===l.TestDataItemType.suite?u.getParentFile(e,t):n,o=r&&r===l.TestDataItemType.suite?n:void 0;return{parentTestFile:i,parentTestSuite:o,xmlClassName:o?o.xmlName:i.xmlName,testFunction:t}}(i,e,t))})}};function h(e,t,n){const r={functions:[],name:n.name,nameToRun:n.id,resource:t,suites:[],time:0,xmlName:"",isInstance:!1,isUnitTest:!1};return r.xmlName=`${e.xmlName}.${n.name}`,r}function p(e,t){const n=u.getParentFile(e,t);return{parentTestFile:n,testSuite:t,xmlClassName:n.xmlName}}function f(e,t){const n=u.getParentFile(e,t),r=n?u.getTestDataItemType(n):void 0,i=r&&r===l.TestDataItemType.suite?u.getParentFile(e,t):n,o=u.getParentSuite(e,t);return{parentTestFile:i,parentTestSuite:o,xmlClassName:o?o.xmlName:i.xmlName,testFunction:t}}function g(e,t){return{asSuite:{functions:[],isInstance:!1,isUnitTest:!1,name:t.name,nameToRun:t.id,resource:e.resource,time:0,suites:[],xmlName:""},name:t.name,nameToRun:t.id,time:0}}function m(e,t){return{name:t.name,nameToRun:t.id,resource:e.resource,time:0,file:t.source.substr(0,t.source.lastIndexOf(":"))}}function v(e){let t=s.join(s.dirname(e),s.basename(e,s.extname(e)));for(t=t.replace(/\\/g,".").replace(/\//g,".");t.startsWith(".")||t.startsWith("/")||t.startsWith("\\");)t=t.substring(1);return t}d=r([o.injectable(),i(0,o.inject(a.IWorkspaceService))],d),t.TestDiscoveredTestParser=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestsDiscoveryService=void 0;const o=n(0),s=n(5),a=n(41),c=n(18),l=n(1),u=n(7),d=n(9),h=n(26),p=n(373);let f=class{constructor(e,t,n){this.execFactory=e,this.parser=t,this.outChannel=n}async discoverTests(e){try{const t=await this.exec(e);return this.parser.parse(e.workspaceFolder,t)}catch(e){throw e.stdout&&s.traceError("Failed to parse discovered Test",new Error(e.stdout)),s.traceError("Failed to parse discovered Test",e),e}}async exec(e){const[t,n]=a.testing_tools.run_adapter(e.args),r={allowEnvironmentFetchExceptions:!1,resource:e.workspaceFolder},i=await this.execFactory.createActivatedEnvironment(r),o={token:e.token,cwd:e.cwd,throwOnStdErr:!0};this.outChannel.appendLine("python "+t.join(" "));const s=await i.exec(t,o);try{return n(s.stdout)}catch(e){throw e.stdout=s.stdout,e}}};r([u.captureTelemetry(d.EventName.UNITTEST_DISCOVER_WITH_PYCODE,void 0,!0)],f.prototype,"discoverTests",null),f=r([o.injectable(),i(0,o.inject(c.IPythonExecutionFactory)),i(1,o.inject(p.ITestDiscoveredTestParser)),i(2,o.inject(l.IOutputChannel)),i(2,o.named(h.TEST_OUTPUT_CHANNEL))],f),t.TestsDiscoveryService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestCollectionStorageService=void 0;const o=n(0),s=n(2),a=n(3),c=n(1);let l=class{constructor(e,t){this.workspaceService=t,this._onDidChange=new s.EventEmitter,this.testsIndexedByWorkspaceUri=new Map,e.push(this)}get onDidChange(){return this._onDidChange.event}getTests(e){const t=this.workspaceService.getWorkspaceFolderIdentifier(e);return this.testsIndexedByWorkspaceUri.has(t)?this.testsIndexedByWorkspaceUri.get(t):void 0}storeTests(e,t){const n=this.workspaceService.getWorkspaceFolderIdentifier(e);this.testsIndexedByWorkspaceUri.set(n,t),this._onDidChange.fire({uri:e})}findFlattendTestFunction(e,t){const n=this.getTests(e);if(n)return n.testFunctions.find(e=>e.testFunction===t)}findFlattendTestSuite(e,t){const n=this.getTests(e);if(n)return n.testSuites.find(e=>e.testSuite===t)}dispose(){this.testsIndexedByWorkspaceUri.clear()}update(e,t){this._onDidChange.fire({uri:e,data:t})}};l=r([o.injectable(),i(0,o.inject(c.IDisposableRegistry)),i(1,o.inject(a.IWorkspaceService))],l),t.TestCollectionStorageService=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestManagerService=void 0;const r=n(1),i=n(17);t.TestManagerService=class{constructor(e,t,n){this.wkspace=e,this.testsHelper=t,this.serviceContainer=n,this.cachedTestManagers=new Map;const i=n.get(r.IDisposableRegistry);this.configurationService=n.get(r.IConfigurationService),i.push(this)}dispose(){this.cachedTestManagers.forEach(e=>{e.dispose()})}getTestManager(){const e=this.getPreferredTestManager();if("number"!=typeof e)return;if(!this.cachedTestManagers.has(e)){const t=this.getTestWorkingDirectory(),n=this.testsHelper.parseProviderName(e),r=this.serviceContainer.get(i.ITestManagerFactory);this.cachedTestManagers.set(e,r(n,this.wkspace,t))}const t=this.cachedTestManagers.get(e);return t.enabled?t:void 0}getTestWorkingDirectory(){const e=this.configurationService.getSettings(this.wkspace);return e.testing.cwd&&e.testing.cwd.length>0?e.testing.cwd:this.wkspace.fsPath}getPreferredTestManager(){const e=this.configurationService.getSettings(this.wkspace);return e.testing.nosetestsEnabled?r.Product.nosetest:e.testing.pytestEnabled?r.Product.pytest:e.testing.unittestEnabled?r.Product.unittest:void 0}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestResultsService=void 0;const o=n(0),s=n(19),a=n(53),c=n(17);let l=class{constructor(e){this.resultResetVisitor=e}resetResults(e){e.testFolders.forEach(e=>this.resultResetVisitor.visitTestFolder(e)),e.testFunctions.forEach(e=>this.resultResetVisitor.visitTestFunction(e.testFunction)),e.testSuites.forEach(e=>this.resultResetVisitor.visitTestSuite(e.testSuite)),e.testFiles.forEach(e=>this.resultResetVisitor.visitTestFile(e))}updateResults(e){const t=[],n=[];for(e.rootTestFolders.forEach(e=>t.push(e));t.length>0;){const e=t.shift();if(!e)continue;n.push(e);a.getChildren(e).forEach(e=>t.push(e))}for(;n.length>0;){const e=n.pop();this.updateTestItem(e)}}updateTestItem(e){if(a.getTestDataItemType(e)===s.TestDataItemType.function)return;let t=!0,n=!0;e.functionsPassed=e.functionsFailed=e.functionsDidNotRun=0;a.getChildren(e).forEach(r=>{a.getTestDataItemType(r)===s.TestDataItemType.function?"boolean"==typeof r.passed?(n=!1,r.passed?e.functionsPassed+=1:(e.functionsFailed+=1,t=!1)):e.functionsDidNotRun+=1:("boolean"==typeof r.passed&&(n=!1,r.passed||(t=!1)),e.functionsFailed+=r.functionsFailed,e.functionsPassed+=r.functionsPassed,e.functionsDidNotRun+=r.functionsDidNotRun)}),n?(e.passed=void 0,e.status=c.TestStatus.Unknown):(e.passed=t,e.status=e.passed?c.TestStatus.Pass:c.TestStatus.Fail)}};l=r([o.injectable(),i(0,o.inject(c.ITestVisitor)),i(0,o.named("TestResultResetVisitor"))],l),t.TestResultsService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestsStatusUpdaterService=void 0;const o=n(0),s=n(953),a=n(17);let c=class{constructor(e){this.storage=e}updateStatusAsDiscovering(e,t){if(!t)return;const n=t=>{t.status=a.TestStatus.Discovering,this.storage.update(e,t)};t.rootTestFolders.forEach(e=>s.visitRecursive(t,e,n))}updateStatusAsUnknown(e,t){if(!t)return;const n=t=>{t.status=a.TestStatus.Unknown,this.storage.update(e,t)};t.rootTestFolders.forEach(e=>s.visitRecursive(t,e,n))}updateStatusAsRunning(e,t){if(!t)return;const n=t=>{t.status=a.TestStatus.Running,this.storage.update(e,t)};t.rootTestFolders.forEach(e=>s.visitRecursive(t,e,n))}updateStatusAsRunningFailedTests(e,t){if(!t)return;const n=e=>e.status===a.TestStatus.Fail||e.status===a.TestStatus.Error,r=t=>{t.status&&n(t)&&(t.status=a.TestStatus.Running,this.storage.update(e,t))};[...t.testFunctions.map(e=>e.testFunction).filter(n),...t.testSuites.map(e=>e.testSuite).filter(n)].forEach(e=>s.visitRecursive(t,e,r))}updateStatusAsRunningSpecificTests(e,t,n){if(!n)return;const r=[...t.testFile||[],...t.testSuite||[],...t.testFunction||[]],i=t=>{t.status=a.TestStatus.Running,this.storage.update(e,t)};r.forEach(e=>s.visitRecursive(n,e,i))}updateStatusOfRunningTestsAsIdle(e,t){if(!t)return;const n=t=>{t.status===a.TestStatus.Running&&(t.status=a.TestStatus.Idle,this.storage.update(e,t))};t.rootTestFolders.forEach(e=>s.visitRecursive(t,e,n))}triggerUpdatesToTests(e,t){if(!t)return;const n=t=>this.storage.update(e,t);t.rootTestFolders.forEach(e=>s.visitRecursive(t,e,n))}};c=r([o.injectable(),i(0,o.inject(a.ITestCollectionStorageService))],c),t.TestsStatusUpdaterService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visitParentsRecursive=t.visitRecursive=void 0;const r=n(53);t.visitRecursive=function e(t,n,i){const o="function"==typeof n?void 0:n,s=o?i:n;let a=[];o?(s(o),a=r.getChildren(o)):a=t.rootTestFolders,a.forEach(n=>e(t,n,s))},t.visitParentsRecursive=function e(t,n,i){i(n);const o=r.getParent(t,n);o&&(i(o),e(t,o,i))}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestDiagnosticService=void 0;const i=n(0),o=n(2),s=n(13),a=n(19),c=n(17);let l=class{constructor(){this.MessageTypes=new Map,this.MessageSeverities=new Map,this.MessagePrefixes=new Map,this.MessageTypes.set(c.TestStatus.Error,a.DiagnosticMessageType.Error),this.MessageTypes.set(c.TestStatus.Fail,a.DiagnosticMessageType.Fail),this.MessageTypes.set(c.TestStatus.Skipped,a.DiagnosticMessageType.Skipped),this.MessageTypes.set(c.TestStatus.Pass,a.DiagnosticMessageType.Pass),this.MessageSeverities.set(a.PythonTestMessageSeverity.Error,o.DiagnosticSeverity.Error),this.MessageSeverities.set(a.PythonTestMessageSeverity.Failure,o.DiagnosticSeverity.Error),this.MessageSeverities.set(a.PythonTestMessageSeverity.Skip,o.DiagnosticSeverity.Information),this.MessageSeverities.set(a.PythonTestMessageSeverity.Pass,void 0),this.MessagePrefixes.set(a.DiagnosticMessageType.Error,s.Testing.testErrorDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Fail,s.Testing.testFailDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Skipped,s.Testing.testSkippedDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Pass,"")}getMessagePrefix(e){const t=this.MessageTypes.get(e);return void 0!==t?this.MessagePrefixes.get(t):void 0}getSeverity(e){return this.MessageSeverities.get(e)}};l=r([i.injectable()],l),t.UnitTestDiagnosticService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceTestManagerService=void 0;const o=n(0),s=n(2),a=n(1),c=n(26),l=n(17);let u=class{constructor(e,t,n){this.outChannel=e,this.testManagerServiceFactory=t,this.workspaceTestManagers=new Map,n.push(this)}dispose(){this.workspaceTestManagers.forEach(e=>e.dispose())}getTestManager(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getTestManager()}getTestWorkingDirectory(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getTestWorkingDirectory()}getPreferredTestManager(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getPreferredTestManager()}getWorkspace(e){if(!Array.isArray(s.workspace.workspaceFolders)||0===s.workspace.workspaceFolders.length){const e="Please open a workspace";throw this.outChannel.appendLine(e),new Error(e)}if(!e||1===s.workspace.workspaceFolders.length)return s.workspace.workspaceFolders[0].uri;const t=s.workspace.getWorkspaceFolder(e);if(t)return t.uri;const n=`Resource '${e.fsPath}' does not belong to any workspace`;throw this.outChannel.appendLine(n),new Error(n)}ensureTestManagerService(e){this.workspaceTestManagers.has(e.fsPath)||this.workspaceTestManagers.set(e.fsPath,this.testManagerServiceFactory(e))}};u=r([o.injectable(),i(0,o.inject(a.IOutputChannel)),i(0,o.named(c.TEST_OUTPUT_CHANNEL)),i(1,o.inject(l.ITestManagerServiceFactory)),i(2,o.inject(a.IDisposableRegistry))],u),t.WorkspaceTestManagerService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TestFlatteningVisitor=void 0;const i=n(0),o=n(53);let s=class{constructor(){this._flattedTestFunctions=new Map,this._flattenedTestSuites=new Map}get flattenedTestFunctions(){return[...this._flattedTestFunctions.values()]}get flattenedTestSuites(){return[...this._flattenedTestSuites.values()]}visitTestFunction(e){}visitTestSuite(e){}visitTestFile(e){const t=o.convertFileToPackage(e.name);e.functions.forEach(n=>this.addTestFunction(n,e,t)),e.suites.forEach(t=>this.visitTestSuiteOfAFile(t,e))}visitTestFolder(e){}visitTestSuiteOfAFile(e,t){e.functions.forEach(n=>this.visitTestFunctionOfASuite(n,e,t)),e.suites.forEach(e=>this.visitTestSuiteOfAFile(e,t)),this.addTestSuite(e,t)}visitTestFunctionOfASuite(e,t,n){const r=`Function:${e.name},Suite:${t.name},SuiteXmlName:${t.xmlName},ParentFile:${n.fullPath}`;if(this._flattenedTestSuites.has(r))return;const i={testFunction:e,xmlClassName:t.xmlName,parentTestFile:n,parentTestSuite:t};this._flattedTestFunctions.set(r,i)}addTestSuite(e,t){const n=`Suite:${e.name},SuiteXmlName:${e.xmlName},ParentFile:${t.fullPath}`;if(this._flattenedTestSuites.has(n))return;const r={parentTestFile:t,testSuite:e,xmlClassName:e.xmlName};this._flattenedTestSuites.set(n,r)}addTestFunction(e,t,n){const r=`Function:${e.name},ParentFile:${t.fullPath}`;if(this._flattedTestFunctions.has(r))return;const i={testFunction:e,xmlClassName:n,parentTestFile:t};this._flattedTestFunctions.set(r,i)}};s=r([i.injectable()],s),t.TestFlatteningVisitor=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TestResultResetVisitor=void 0;const i=n(0),o=n(17);let s=class{visitTestFunction(e){e.passed=void 0,e.time=0,e.message="",e.traceback="",e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestSuite(e){e.passed=void 0,e.time=0,e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestFile(e){e.passed=void 0,e.time=0,e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestFolder(e){e.functionsDidNotRun=0,e.functionsFailed=0,e.functionsPassed=0,e.passed=void 0,e.time=0,e.status=o.TestStatus.Unknown}};s=r([i.injectable()],s),t.TestResultResetVisitor=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateTestSettingService=void 0;const o=n(0),s=n(91),a=n(4),c=n(16),l=n(3);n(11);const u=n(5),d=n(6),h=n(23);let p=class{constructor(e,t,n){this.fs=e,this.application=t,this.workspace=n}async activate(e){this.updateTestSettings(e).ignoreErrors()}async updateTestSettings(e){const t=await this.getFilesToBeFixed(e);await Promise.all(t.map(e=>this.fixSettingInFile(e)))}getSettingsFiles(e){const t=[];this.application.userSettingsFile&&t.push(this.application.userSettingsFile);const n=this.workspace.getWorkspaceFolder(e);return n&&t.push(a.join(n.uri.fsPath,".vscode","settings.json")),t}async getFilesToBeFixed(e){const t=this.getSettingsFiles(e);return(await Promise.all(t.map(async e=>({file:e,needsFixing:await this.doesFileNeedToBeFixed(e)})))).filter(e=>e.needsFixing).map(e=>e.file)}async fixSettingInFile(e,t=!0){let n=await this.fs.readFile(e);const r=new RegExp('"python\\.unitTest',"g");n=n.replace(r,'"python.testing');const i=new RegExp('\\.pyTestEnabled"',"g"),o=new RegExp('\\.pyTestArgs"',"g"),s=new RegExp('\\.pyTestPath"',"g");n=n.replace(i,'.pytestEnabled"'),n=n.replace(o,'.pytestArgs"'),n=n.replace(s,'.pytestPath"');const a=new RegExp("\\.(?<!auto)pep8Args","g"),c=new RegExp("\\.pep8CategorySeverity\\.","g"),l=new RegExp("\\.pep8Enabled","g"),u=new RegExp("\\.(?<!auto)pep8Path","g");return n=n.replace(a,".pycodestyleArgs"),n=n.replace(c,".pycodestyleCategorySeverity."),n=n.replace(l,".pycodestyleEnabled"),n=n.replace(u,".pycodestylePath"),t&&(n=this.fixLanguageServerSettings(n)),await this.fs.writeFile(e,n),n}async doesFileNeedToBeFixed(e){try{const t=await this.fs.readFile(e);return t.indexOf("python.jediEnabled")>0||t.indexOf("python.unitTest.")>0||t.indexOf(".pyTest")>0||t.indexOf(".pep8")>0}catch(e){return u.traceError("Failed to check if file needs to be fixed",e),!1}}fixLanguageServerSettings(e){const t=["python.jediEnabled"],n=["python.languageServer"];try{const r=s.parseTree(e),i=s.findNodeAtLocation(r,t),o=s.findNodeAtLocation(r,n);if(!i)return e;const a=s.getNodeValue(i),l={formattingOptions:{tabSize:4,insertSpaces:!0}};if(a)return s.applyEdits(e,s.modify(e,n,c.LanguageServerType.Jedi,l));if(!o)return s.applyEdits(e,s.modify(e,n,c.LanguageServerType.Microsoft,l))}catch(e){}return e}};r([u.traceDecorators.error("Failed to update test settings")],p.prototype,"updateTestSettings",null),r([h.swallowExceptions("Failed to update settings.json")],p.prototype,"fixSettingInFile",null),p=r([o.injectable(),i(0,o.inject(d.IFileSystem)),i(1,o.inject(l.IApplicationEnvironment)),i(2,o.inject(l.IWorkspaceService))],p),t.UpdateTestSettingService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.XUnitParser=void 0;const o=n(0),s=n(6),a=n(17);function c(e,t=0){const n=parseInt(e,10);return isNaN(n)?t:n}let l=class{constructor(e){this.fs=e}async updateResultsFromXmlLogFile(e,t){const r=await this.fs.readFile(t),i=function(e){const t=e;if(!t.testsuites)return e.testsuite;const n=t.testsuites.testsuite;if(!Array.isArray(n))throw Error("bad JUnit XML data");if(0===n.length)return;if(n.length>1)throw Error("got multiple XML results");return n[0]}(await async function(e){const t=await Promise.resolve().then(()=>n(960));return new Promise((n,r)=>{t.parseString(e,(e,t)=>e?r(e):n(t))})}(r));i&&function(e,t){if(function(e,t){e.errors=c(t.$.errors),e.failures=c(t.$.failures),e.skipped=c(t.$.skips?t.$.skips:t.$.skip);const n=c(t.$.tests);e.passed=n-e.failures-e.skipped-e.errors}(e.summary,t),!Array.isArray(t.testcase))return;t.testcase.forEach(t=>{const n=function(e,t,n){const r=t.replace(/\(\)/g,"").replace(/\.\./g,".").replace(/\.\./g,".").replace(/\.+$/,""),i=e.find(e=>e.xmlClassName===r&&e.testFunction.name===n);if(!i)return;return i.testFunction}(e.testFunctions,t.$.classname,t.$.name);if(n)i=t,(r=n).file=i.$.file,r.line=c(i.$.line,null),r.time=parseFloat(i.$.time),u(n,t);else{const n=t.$.file&&e.testFiles.find(e=>e.nameToRun===t.$.file);n&&t.error&&u(n,t)}var r,i})}(e,i)}};function u(e,t){t.error?(e.status=a.TestStatus.Error,e.passed=!1,e.message=t.error[0].$.message,e.traceback=t.error[0]._):t.failure?(e.status=a.TestStatus.Fail,e.passed=!1,e.message=t.failure[0].$.message,e.traceback=t.failure[0]._):t.skipped?(e.status=a.TestStatus.Skipped,e.passed=void 0,e.message=t.skipped[0].$.message,e.traceback=""):(e.status=a.TestStatus.Pass,e.passed=!0)}l=r([o.injectable(),i(0,o.inject(s.IFileSystem))],l),t.XUnitParser=l},function(e,t){e.exports=require("./node_modules/xml2js")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestConfigurationService=void 0;const o=n(0),s=n(3),a=n(5),c=n(1),l=n(8),u=n(7),d=n(9),h=n(372),p=n(17),f=n(19);let g=class{constructor(e){this.serviceContainer=e,this.configurationService=e.get(c.IConfigurationService),this.appShell=e.get(s.IApplicationShell),this.workspaceService=e.get(s.IWorkspaceService)}async displayTestFrameworkError(e){const t=this.configurationService.getSettings(e);let n=t.testing.pytestEnabled?1:0;if(n+=t.testing.nosetestsEnabled?1:0,n+=t.testing.unittestEnabled?1:0,n>1)return this._promptToEnableAndConfigureTestFramework(e,"Enable only one of the test frameworks (unittest, pytest or nosetest).",!0);{const t="Enable and configure a Test Framework";return await this.appShell.showInformationMessage("No test framework configured (unittest, pytest or nosetest)",t)===t?this._promptToEnableAndConfigureTestFramework(e):Promise.reject(null)}}async selectTestRunner(e){const t=[{label:"unittest",product:c.Product.unittest,description:"Standard Python test framework",detail:"https://docs.python.org/3/library/unittest.html"},{label:"pytest",product:c.Product.pytest,description:"pytest framework",detail:"http://docs.pytest.org/"},{label:"nose",product:c.Product.nosetest,description:"nose framework",detail:"https://nose.readthedocs.io/"}],n={ignoreFocusOut:!0,matchOnDescription:!0,matchOnDetail:!0,placeHolder:e},r=await this.appShell.showQuickPick(t,n);return r?r.product:void 0}async enableTest(e,t){const n=this.serviceContainer.get(f.ITestConfigurationManagerFactory).create(e,t);return this._enableTest(e,n)}async promptToEnableAndConfigureTestFramework(e){await this._promptToEnableAndConfigureTestFramework(e,void 0,!1,"commandpalette")}_enableTest(e,t){const n=this.workspaceService.getConfiguration("python",e);return n.get("testing.promptToConfigure")?t.enable():n.update("testing.promptToConfigure",void 0).then(()=>t.enable(),e=>t.enable().then(()=>Promise.reject(e)))}async _promptToEnableAndConfigureTestFramework(e,t="Select a test framework/tool to enable",n=!1,r="ui"){const i={trigger:r,failed:!1};try{const r=await this.selectTestRunner(t);if("number"!=typeof r)return Promise.reject(null);const o=this.serviceContainer.get(p.ITestsHelper);i.tool=o.parseProviderName(r);const s=new h.BufferedTestConfigSettingsService,c=this.serviceContainer.get(f.ITestConfigurationManagerFactory).create(e,r,s);n?await c.enable():await c.configure(e).then(()=>this._enableTest(e,c)).catch(t=>this._enableTest(e,c).then(()=>Promise.reject(t)));const l=this.serviceContainer.get(f.ITestConfigSettingsService);try{await s.apply(l)}catch(e){a.traceError("Python Extension: applying unit test config updates",e),i.failed=!0}}finally{u.sendTelemetryEvent(d.EventName.UNITTEST_CONFIGURING,void 0,i)}}};g=r([o.injectable(),i(0,o.inject(l.IServiceContainer))],g),t.UnitTestConfigurationService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestConfigurationManagerFactory=void 0;const o=n(0),s=n(1),a=n(8),c=n(963),l=n(964),u=n(965);let d=class{constructor(e){this.serviceContainer=e}create(e,t,n){switch(t){case s.Product.unittest:return new u.ConfigurationManager(e,this.serviceContainer,n);case s.Product.pytest:return new l.ConfigurationManager(e,this.serviceContainer,n);case s.Product.nosetest:return new c.ConfigurationManager(e,this.serviceContainer,n);default:throw new Error("Invalid test configuration")}}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.TestConfigurationManagerFactory=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationManager=void 0;const r=n(4),i=n(6),o=n(1),s=n(225);class a extends s.TestConfigurationManager{constructor(e,t,n){super(e,o.Product.nosetest,t,n)}async requiresUserToConfigure(e){const t=this.serviceContainer.get(i.IFileSystem);for(const n of[".noserc","nose.cfg"])if(await t.fileExists(r.join(e.fsPath,n)))return!0;return!1}async configure(e){const t=[];if(await this.requiresUserToConfigure(e))return;const n=await this.getTestDirs(e.fsPath),r=await this.selectTestDir(e.fsPath,n);"string"==typeof r&&"Use existing config file"!==r&&t.push(r);await this.installer.isInstalled(o.Product.nosetest)||await this.installer.install(o.Product.nosetest),await this.testConfigSettingsService.updateTestArgs(e.fsPath,o.Product.nosetest,t)}}t.ConfigurationManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationManager=void 0;const r=n(4),i=n(6),o=n(1),s=n(225);class a extends s.TestConfigurationManager{constructor(e,t,n){super(e,o.Product.pytest,t,n)}async requiresUserToConfigure(e){const t=await this.getConfigFiles(e.fsPath);return!(t.length>0&&1!==t.length&&"setup.cfg"!==t[0])}async configure(e){const t=[],n=[],r=await this.getConfigFiles(e.fsPath);if(r.length>0&&1!==r.length&&"setup.cfg"!==r[0])return;1===r.length&&"setup.cfg"===r[0]&&n.push({label:"Use existing config file",description:"setup.cfg"});const i=await this.getTestDirs(e.fsPath),s=await this.selectTestDir(e.fsPath,i,n);"string"==typeof s&&"Use existing config file"!==s&&t.push(s);await this.installer.isInstalled(o.Product.pytest)||await this.installer.install(o.Product.pytest),await this.testConfigSettingsService.updateTestArgs(e.fsPath,o.Product.pytest,t)}async getConfigFiles(e){const t=this.serviceContainer.get(i.IFileSystem),n=["pytest.ini","tox.ini","setup.cfg"].map(async n=>await t.fileExists(r.join(e,n))?n:"");return(await Promise.all(n)).filter(e=>e.length>0)}}t.ConfigurationManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationManager=void 0;const r=n(1),i=n(225);class o extends i.TestConfigurationManager{constructor(e,t,n){super(e,r.Product.unittest,t,n)}async requiresUserToConfigure(e){return!0}async configure(e){const t=["-v"],n=await this.getTestDirs(e.fsPath),i=await this.selectTestDir(e.fsPath,n);t.push("-s"),"string"==typeof i&&"."!==i?t.push("./"+i):t.push(".");const o=await this.selectTestFilePattern();t.push("-p"),"string"==typeof o?t.push(o):t.push("test*.py"),await this.testConfigSettingsService.updateTestArgs(e.fsPath,r.Product.unittest,t)}}t.ConfigurationManager=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestResultDisplay=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(144),u=n(5),d=n(1),h=n(13),p=n(14),f=n(8),g=n(7),m=n(9),v=n(26),y=n(17);let b=class{constructor(e){this.serviceContainer=e,this.discoverCounter=0,this.ticker=["|","/","-","|","/","-","\\"],this.progressTimeout=null,this._enabled=!1,this.didChange=new s.EventEmitter,this.appShell=e.get(a.IApplicationShell),this.statusBar=this.appShell.createStatusBarItem(s.StatusBarAlignment.Left),this.testsHelper=e.get(y.ITestsHelper),this.cmdManager=e.get(a.ICommandManager)}get onDidChange(){return this.didChange.event}dispose(){this.clearProgressTicker(),this.statusBar.dispose()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,e?this.statusBar.show():this.statusBar.hide()}displayProgressStatus(e,t=!1){this.displayProgress("Running Tests","Running Tests (Click to Stop)",c.Commands.Tests_Ask_To_Stop_Test),e.then(e=>this.updateTestRunWithSuccess(e,t)).catch(this.updateTestRunWithFailure.bind(this)).catch(p.noop)}displayDiscoverStatus(e,t=!1){return this.displayProgress("Discovering Tests","Discovering tests (click to stop)",c.Commands.Tests_Ask_To_Stop_Discovery),e.then(e=>(this.updateWithDiscoverSuccess(e,t),e)).catch(e=>(this.updateWithDiscoverFailure(e),Promise.reject(e)))}updateTestRunWithSuccess(e,t=!1){this.clearProgressTicker();const n=[],r=[];return e.summary.passed>0&&(n.push(`${c.Octicons.Test_Pass} ${e.summary.passed}`),r.push(e.summary.passed+" Passed")),e.summary.skipped>0&&(n.push(`${c.Octicons.Test_Skip} ${e.summary.skipped}`),r.push(e.summary.skipped+" Skipped")),e.summary.failures>0&&(n.push(`${c.Octicons.Test_Fail} ${e.summary.failures}`),r.push(e.summary.failures+" Failed")),e.summary.errors>0&&(n.push(`${c.Octicons.Test_Error} ${e.summary.errors}`),r.push(`${e.summary.errors} Error${e.summary.errors>1?"s":""}`)),this.statusBar.tooltip=0===r.length?"No Tests Ran":r.join(", ")+" (Tests)",this.statusBar.text=0===n.length?"No Tests Ran":n.join(" "),this.statusBar.command=c.Commands.Tests_View_UI,this.didChange.fire(),0!==n.length||t||this.appShell.showWarningMessage("No tests ran, please check the configuration settings for the tests."),e}updateTestRunWithFailure(e){return this.clearProgressTicker(),this.statusBar.command=c.Commands.Tests_View_UI,e===v.CANCELLATION_REASON?(this.statusBar.text="$(zap) Run Tests",this.statusBar.tooltip="Run Tests"):(this.statusBar.text="$(alert) Tests Failed",this.statusBar.tooltip="Running Tests Failed",this.testsHelper.displayTestErrorMessage("There was an error in running the tests.")),Promise.reject(e)}displayProgress(e,t,n){this.progressPrefix=this.statusBar.text="$(stop) "+e,this.statusBar.command=n,this.statusBar.tooltip=t,this.statusBar.show(),this.clearProgressTicker(),this.progressTimeout=setInterval(()=>this.updateProgressTicker(),1e3)}updateProgressTicker(){const e=`${this.progressPrefix} ${this.ticker[this.discoverCounter%7]}`;this.discoverCounter+=1,this.statusBar.text=e}clearProgressTicker(){this.progressTimeout&&clearInterval(this.progressTimeout),this.progressTimeout=null,this.discoverCounter=0}async disableTests(){const e=this.serviceContainer.get(d.IConfigurationService),t=["testing.promptToConfigure","testing.pytestEnabled","testing.unittestEnabled","testing.nosetestsEnabled"];for(const n of t)await e.updateSetting(n,!1).catch(p.noop);this.cmdManager.executeCommand("setContext","testsDiscovered",!1)}updateWithDiscoverSuccess(e,t=!1){this.clearProgressTicker();const n=e&&e.testFunctions.length>0;this.statusBar.text="$(zap) Run Tests",this.statusBar.tooltip="Run Tests",this.statusBar.command=c.Commands.Tests_View_UI,this.statusBar.show(),this.didChange&&this.didChange.fire(),n||t||this.appShell.showInformationMessage("No tests discovered, please check the configuration settings for the tests.",h.Testing.disableTests(),h.Testing.configureTests()).then(e=>{e===h.Testing.disableTests()?this.disableTests().catch(e=>u.traceError("Python Extension: disableTests",e)):e===h.Testing.configureTests()&&this.cmdManager.executeCommand(c.Commands.Tests_Configure,void 0,void 0,void 0).then(p.noop)})}updateWithDiscoverFailure(e){this.clearProgressTicker(),this.statusBar.text="$(zap) Discover Tests",this.statusBar.tooltip="Discover Tests",this.statusBar.command=c.Commands.Tests_Discover,this.statusBar.show(),e!==v.CANCELLATION_REASON&&(this.statusBar.text="$(alert) Test discovery failed",this.statusBar.tooltip="Discovering Tests failed (view 'Python Test Log' output panel for details)",l.isNotInstalledError(e)||this.appShell.showErrorMessage("Test discovery error, please check the configuration settings for the tests."))}};r([g.captureTelemetry(m.EventName.UNITTEST_DISABLE)],b.prototype,"disableTests",null),b=r([o.injectable(),i(0,o.inject(f.IServiceContainer))],b),t.TestResultDisplay=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.onItemSelected=t.Type=t.TestDisplay=void 0;const o=n(0),s=n(4),a=n(3),c=n(10),l=n(6),u=n(8),d=n(17);let h=class{constructor(e,t){this.serviceRegistry=e,this.commandManager=t,this.testCollectionStorage=e.get(d.ITestCollectionStorageService),this.appShell=e.get(a.IApplicationShell)}displayStopTestUI(e,t){this.appShell.showQuickPick([t]).then(n=>{n===t&&this.commandManager.executeCommand(c.Commands.Tests_Stop,void 0,e)})}displayTestUI(e,t){const n=this.testCollectionStorage.getTests(t);this.appShell.showQuickPick(function(e){const t=[];t.push({description:"",label:"Run All Tests",type:p.RunAll}),t.push({description:"",label:"Discover Tests",type:p.ReDiscover}),t.push({description:"",label:"Run Test Method ...",type:p.SelectAndRunMethod}),t.push({description:"",label:"Configure Tests",type:p.Configure});const n=function(e){if(!e||!e.summary)return"";const t=[];e.summary.passed>0&&t.push(`${c.Octicons.Test_Pass} ${e.summary.passed} Passed`);e.summary.failures>0&&t.push(`${c.Octicons.Test_Fail} ${e.summary.failures} Failed`);if(e.summary.errors>0){const n=1===e.summary.errors?"":"s";t.push(`${c.Octicons.Test_Error} ${e.summary.errors} Error${n}`)}e.summary.skipped>0&&t.push(`${c.Octicons.Test_Skip} ${e.summary.skipped} Skipped`);return t.join(", ").trim()}(e);t.push({description:"",label:"View Test Output",type:p.ViewTestOutput,detail:n}),e&&e.summary.failures>0&&t.push({description:"",label:"Run Failed Tests",type:p.RunFailed,detail:`${c.Octicons.Test_Fail} ${e.summary.failures} Failed`});return t}(n),{matchOnDescription:!0,matchOnDetail:!0}).then(n=>n?v(this.commandManager,e,t,n,!1):Promise.resolve())}selectTestFunction(e,t){return new Promise((n,r)=>{this.appShell.showQuickPick(m(e,t.testFunctions),{matchOnDescription:!0,matchOnDetail:!0}).then(e=>e&&e.fn?n(e.fn):r(),r)})}selectTestFile(e,t){return new Promise((n,r)=>{this.appShell.showQuickPick(function(e,t){const n=t.map(t=>({description:"",detail:s.relative(e,t.fullPath),type:p.RunFile,label:s.basename(t.fullPath),testFile:t}));return n.sort((e,t)=>e.detail||t.detail?!e.detail||e.detail<t.detail?-1:!t.detail||e.detail>t.detail?1:0:0),n}(e,t.testFiles),{matchOnDescription:!0,matchOnDetail:!0}).then(e=>e&&e.testFile?n(e.testFile):r(),r)})}displayFunctionTestPickerUI(e,t,n,r,i,o){const s=this.testCollectionStorage.getTests(t);if(!s)return;const a=r.fsPath,c=this.serviceRegistry.get(l.IFileSystem),u=s.testFiles.find(e=>e.name===a||c.arePathsSame(e.fullPath,a));if(!u)return;const d=s.testFunctions.filter(e=>e.parentTestFile.name===u.name&&i.some(t=>t.nameToRun===e.testFunction.nameToRun)),h=function(e,t=!1){const n=[];return e.forEach(e=>{n.push(e.testFunction)}),[{description:"",label:t?"Debug All":"Run All",type:p.RunParametrized,fns:n}]}(d,o),f=m(n,d,void 0,void 0,o);this.appShell.showQuickPick(h.concat(...f),{matchOnDescription:!0,matchOnDetail:!0}).then(n=>n?v(this.commandManager,e,t,n,o):Promise.resolve())}};var p;h=r([o.injectable(),i(0,o.inject(u.IServiceContainer)),i(1,o.inject(a.ICommandManager))],h),t.TestDisplay=h,function(e){e[e.RunAll=0]="RunAll",e[e.ReDiscover=1]="ReDiscover",e[e.RunFailed=2]="RunFailed",e[e.RunFolder=3]="RunFolder",e[e.RunFile=4]="RunFile",e[e.RunClass=5]="RunClass",e[e.RunMethod=6]="RunMethod",e[e.ViewTestOutput=7]="ViewTestOutput",e[e.Null=8]="Null",e[e.SelectAndRunMethod=9]="SelectAndRunMethod",e[e.DebugMethod=10]="DebugMethod",e[e.Configure=11]="Configure",e[e.RunParametrized=12]="RunParametrized"}(p=t.Type||(t.Type={}));const f=new Map;f.set(d.TestStatus.Pass,c.Octicons.Test_Pass),f.set(d.TestStatus.Fail,c.Octicons.Test_Fail),f.set(d.TestStatus.Error,c.Octicons.Test_Error),f.set(d.TestStatus.Skipped,c.Octicons.Test_Skip);const g={[d.TestStatus.Error]:"1",[d.TestStatus.Fail]:"2",[d.TestStatus.Skipped]:"3",[d.TestStatus.Pass]:"4",[d.TestStatus.Discovering]:void 0,[d.TestStatus.Idle]:void 0,[d.TestStatus.Running]:void 0,[d.TestStatus.Unknown]:void 0};function m(e,t,n=!1,r=!1,i=!1){const o=[];return t.forEach(t=>{let n="";r&&t.testFunction.status&&f.has(t.testFunction.status)&&(n=f.get(t.testFunction.status)+" "),o.push({description:"",detail:s.relative(e,t.parentTestFile.fullPath),label:n+t.testFunction.name,type:!0===i?p.DebugMethod:p.RunMethod,fn:t})}),o.sort((e,t)=>{let r="5-",i="5-";return n&&e.fn&&e.fn.testFunction.status&&t.fn&&t.fn.testFunction.status&&(r=g[e.fn.testFunction.status]?g[e.fn.testFunction.status]:r,i=g[t.fn.testFunction.status]?g[t.fn.testFunction.status]:i),`${r}${e.detail}${e.label}`<`${i}${t.detail}${t.label}`?-1:`${r}${e.detail}${e.label}`>`${i}${t.detail}${t.label}`?1:0}),o}function v(e,t,n,r,i){if(r&&"number"==typeof r.type)switch(r.type){case p.Null:return;case p.RunAll:return e.executeCommand(c.Commands.Tests_Run,void 0,t,n,void 0);case p.RunParametrized:return e.executeCommand(c.Commands.Tests_Run_Parametrized,void 0,t,n,r.fns,i);case p.ReDiscover:return e.executeCommand(c.Commands.Tests_Discover,void 0,t,n);case p.ViewTestOutput:return e.executeCommand(c.Commands.Tests_ViewOutput,void 0,t);case p.RunFailed:return e.executeCommand(c.Commands.Tests_Run_Failed,void 0,t,n);case p.SelectAndRunMethod:{const r=i?c.Commands.Tests_Select_And_Debug_Method:c.Commands.Tests_Select_And_Run_Method;return e.executeCommand(r,void 0,t,n)}case p.RunMethod:{const i={testFunction:[r.fn.testFunction]};return e.executeCommand(c.Commands.Tests_Run,void 0,t,n,i)}case p.DebugMethod:{const i={testFunction:[r.fn.testFunction]};return e.executeCommand(c.Commands.Tests_Debug,void 0,t,n,i)}case p.Configure:return e.executeCommand(c.Commands.Tests_Configure,void 0,t,n);default:return}}t.onItemSelected=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestExplorerCommandHandler=void 0;const o=n(0),s=n(3),a=n(10),c=n(5),l=n(23),u=n(26),d=n(53),h=n(19),p={[h.TestDataItemType.file]:a.Commands.navigateToTestFile,[h.TestDataItemType.function]:a.Commands.navigateToTestFunction,[h.TestDataItemType.suite]:a.Commands.navigateToTestSuite};let f=class{constructor(e,t){this.cmdManager=e,this.testResource=t,this.disposables=[]}register(){this.disposables.push(this.cmdManager.registerCommand(a.Commands.runTestNode,this.onRunTestNode,this)),this.disposables.push(this.cmdManager.registerCommand(a.Commands.debugTestNode,this.onDebugTestNode,this)),this.disposables.push(this.cmdManager.registerCommand(a.Commands.openTestNodeInEditor,this.onOpenTestNodeInEditor,this))}dispose(){this.disposables.forEach(e=>e.dispose())}async onRunTestNode(e){await this.runDebugTestNode(e,"run")}async onDebugTestNode(e){await this.runDebugTestNode(e,"debug")}async onOpenTestNodeInEditor(e){const t=d.getTestDataItemType(e);if(t===h.TestDataItemType.folder)throw new Error("Unknown Test Type");const n=p[t],r=this.testResource.getResource(e);if(!n)throw new Error("Unknown Test Type");this.cmdManager.executeCommand(n,r,e,!0)}async runDebugTestNode(e,t){let n;switch(d.getTestDataItemType(e)){case h.TestDataItemType.file:n={testFile:[e]};break;case h.TestDataItemType.folder:n={testFolder:[e]};break;case h.TestDataItemType.suite:n={testSuite:[e]};break;case h.TestDataItemType.function:n={testFunction:[e]};break;default:throw new Error("Unknown Test Type")}const r=this.testResource.getResource(e),i="run"===t?a.Commands.Tests_Run:a.Commands.Tests_Debug;this.cmdManager.executeCommand(i,void 0,u.CommandSource.testExplorer,r,n)}};r([l.swallowExceptions("Run test node"),c.traceDecorators.error("Run test node failed")],f.prototype,"onRunTestNode",null),r([l.swallowExceptions("Debug test node"),c.traceDecorators.error("Debug test node failed")],f.prototype,"onDebugTestNode",null),r([l.swallowExceptions("Open test node in Editor"),c.traceDecorators.error("Open test node in editor failed")],f.prototype,"onOpenTestNodeInEditor",null),f=r([o.injectable(),i(0,o.inject(s.ICommandManager)),i(1,o.inject(h.ITestDataItemResource))],f),t.TestExplorerCommandHandler=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FailedTestHandler=void 0;const o=n(0),s=n(3),a=n(10);n(11);const c=n(1),l=n(23),u=n(53),d=n(17),h=n(19);let p=class{constructor(e,t,n){this.commandManager=t,this.storage=n,this.disposables=[],this.failedItems=[],e.push(this)}dispose(){this.disposables.forEach(e=>e.dispose())}async activate(){this.storage.onDidChange(this.onDidChangeTestData,this,this.disposables)}onDidChangeTestData(e){!e.data||e.data.status!==d.TestStatus.Error&&e.data.status!==d.TestStatus.Fail||u.getTestDataItemType(e.data)!==h.TestDataItemType.function||(this.failedItems.push(e.data),this.revealFailedNodes().ignoreErrors())}async revealFailedNodes(){for(;this.failedItems.length>0;){const e=this.failedItems.pop();await this.commandManager.executeCommand(a.Commands.Test_Reveal_Test_Item,e)}}};r([l.debounceAsync(500)],p.prototype,"revealFailedNodes",null),p=r([o.injectable(),i(0,o.inject(c.IDisposableRegistry)),i(1,o.inject(s.ICommandManager)),i(2,o.inject(d.ITestCollectionStorageService))],p),t.FailedTestHandler=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestTreeViewProvider=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(1),u=n(7),d=n(9),h=n(26),p=n(53),f=n(17),g=n(19),m=n(971);let v=class{constructor(e,t,n,r,i){this.testStore=e,this.testService=t,this.workspace=n,this.commandManager=r,this.discovered=new Set,this._onDidChangeTreeData=new s.EventEmitter,this.disposables=[],this.onDidChangeTreeData=this._onDidChangeTreeData.event,i.push(this),this.testsAreBeingDiscovered=new Map,this.disposables.push(this.testService.onDidStatusChange(this.onTestStatusChanged,this)),this.testStore.onDidChange(e=>this._onDidChangeTreeData.fire(e.data),this,this.disposables),this.workspace.onDidChangeWorkspaceFolders(()=>this._onDidChangeTreeData.fire(void 0),this,this.disposables),Array.isArray(n.workspaceFolders)&&n.workspaceFolders.length>0&&this.refresh(n.workspaceFolders[0].uri)}getResource(e){return e.resource}dispose(){this.disposables.forEach(e=>e.dispose()),this._onDidChangeTreeData.dispose()}async getTreeItem(e){const t=await this.shouldElementBeExpandedByDefault(e)?s.TreeItemCollapsibleState.Expanded:void 0;return new m.TestTreeItem(e.resource,e,t)}async getChildren(e){if(e){if(e instanceof g.TestWorkspaceFolder){let t=this.testStore.getTests(e.workspaceFolder.uri);return t||this.discovered.has(e.workspaceFolder.uri.fsPath)||(this.discovered.add(e.workspaceFolder.uri.fsPath),await this.commandManager.executeCommand(c.Commands.Tests_Discover,e,h.CommandSource.testExplorer,void 0),t=this.testStore.getTests(e.workspaceFolder.uri)),this.getRootNodes(t)}return p.getChildren(e)}if(!Array.isArray(this.workspace.workspaceFolders)||0===this.workspace.workspaceFolders.length)return[];if(u.sendTelemetryEvent(d.EventName.UNITTEST_EXPLORER_WORK_SPACE_COUNT,void 0,{count:this.workspace.workspaceFolders.length}),1===this.workspace.workspaceFolders.length){const e=this.testStore.getTests(this.workspace.workspaceFolders[0].uri);return this.getRootNodes(e)}return this.workspace.workspaceFolders.map(e=>new g.TestWorkspaceFolder(e))}async getParent(e){if(e instanceof g.TestWorkspaceFolder)return;const t=this.testStore.getTests(e.resource);return t?p.getParent(t,e):void 0}getRootNodes(e){return e&&e.rootTestFolders&&1===e.rootTestFolders.length?[...e.rootTestFolders[0].testFiles,...e.rootTestFolders[0].folders]:e?e.rootTestFolders:[]}refresh(e){const t=this.workspace.getWorkspaceFolder(e);if(!t)return;const n=this.testStore.getTests(e);n&&n.testFolders&&this._onDidChangeTreeData.fire(new g.TestWorkspaceFolder(t))}onTestStatusChanged(e){e.status!==f.TestStatus.Discovering?this.testsAreBeingDiscovered.get(e.workspace.fsPath)&&(this.testsAreBeingDiscovered.set(e.workspace.fsPath,!1),this.refresh(e.workspace)):this.testsAreBeingDiscovered.set(e.workspace.fsPath,!0)}async shouldElementBeExpandedByDefault(e){const t=await this.getParent(e);return!t||p.getTestDataItemType(t)===g.TestDataItemType.workspaceFolder}};v=r([o.injectable(),i(0,o.inject(f.ITestCollectionStorageService)),i(1,o.inject(g.ITestManagementService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(a.ICommandManager)),i(4,o.inject(l.IDisposableRegistry))],v),t.TestTreeViewProvider=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTreeItem=void 0;const r=n(2),i=n(10),o=n(357),s=n(14),a=n(26),c=n(53),l=n(17),u=n(19);class d extends r.TreeItem{constructor(e,t,n=function(e){return c.getTestDataItemType(e)===u.TestDataItemType.function?r.TreeItemCollapsibleState.None:r.TreeItemCollapsibleState.Collapsed}(t)){super(t.name,n),this.resource=e,this.data=t,this.testType=c.getTestDataItemType(this.data),this.setCommand()}get contextValue(){return this.testType}get iconPath(){if(this.testType===u.TestDataItemType.workspaceFolder)return r.ThemeIcon.Folder;if(!this.data)return"";switch(this.data.status){case l.TestStatus.Error:case l.TestStatus.Fail:return o.getIcon(a.Icons.failed);case l.TestStatus.Pass:return o.getIcon(a.Icons.passed);case l.TestStatus.Discovering:case l.TestStatus.Running:return o.getIcon(a.Icons.discovering);case l.TestStatus.Idle:case l.TestStatus.Unknown:default:return o.getIcon(a.Icons.unknown)}}get tooltip(){if(!this.data||this.testType===u.TestDataItemType.workspaceFolder)return"";const e=this.data;if(!e.status||e.status===l.TestStatus.Idle||e.status===l.TestStatus.Unknown||e.status===l.TestStatus.Skipped)return"";if(this.testType!==u.TestDataItemType.function)return void 0===e.functionsPassed?"":e.functionsDidNotRun?`${e.functionsFailed} failed, ${e.functionsDidNotRun} not run and ${e.functionsPassed} passed`:`${e.functionsFailed} failed, ${e.functionsPassed} passed`;switch(this.data.status){case l.TestStatus.Error:case l.TestStatus.Fail:return`Failed in ${+e.time.toFixed(3)} seconds`;case l.TestStatus.Pass:return`Passed in ${+e.time.toFixed(3)} seconds`;case l.TestStatus.Discovering:case l.TestStatus.Running:return"Loading...";default:return""}}get testStatus(){return this.data.status?this.data.status:l.TestStatus.Unknown}setCommand(){switch(this.testType){case u.TestDataItemType.file:this.command={command:i.Commands.navigateToTestFile,title:"Open",arguments:[this.resource,this.data]};break;case u.TestDataItemType.function:this.command={command:i.Commands.navigateToTestFunction,title:"Open",arguments:[this.resource,this.data,!1]};break;case u.TestDataItemType.suite:if(c.isSubtestsParent(this.data)){this.command={command:i.Commands.navigateToTestFunction,title:"Open",arguments:[this.resource,this.data,!1]};break}this.command={command:i.Commands.navigateToTestSuite,title:"Open",arguments:[this.resource,this.data,!1]};break;default:s.noop()}}}t.TestTreeItem=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeViewService=void 0;const o=n(0),s=n(3),a=n(10),c=n(1),l=n(19);let u=class{constructor(e,t,n,r){this.treeViewProvider=e,this.appShell=n,this.commandManager=r,this.disposables=[],t.push(this)}get treeView(){return this._treeView}dispose(){this.disposables.forEach(e=>e.dispose())}async activate(){this._treeView=this.appShell.createTreeView("python_tests",{showCollapseAll:!0,treeDataProvider:this.treeViewProvider}),this.disposables.push(this._treeView),this.disposables.push(this.commandManager.registerCommand(a.Commands.Test_Reveal_Test_Item,this.onRevealTestItem,this))}async onRevealTestItem(e){await this.treeView.reveal(e,{select:!1})}};u=r([o.injectable(),i(0,o.inject(l.ITestTreeViewProvider)),i(1,o.inject(c.IDisposableRegistry)),i(2,o.inject(s.IApplicationShell)),i(3,o.inject(s.ICommandManager))],u),t.TreeViewService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestManagementService=void 0;const o=n(0),s=n(2),a=n(3),c=n(10),l=n(24);n(11);const u=n(5),d=n(1),h=n(14),p=n(12),f=n(8),g=n(9),m=n(7),v=n(974),y=n(26),b=n(53),S=n(17),E=n(19);let w=class{constructor(e){this.serviceContainer=e,this.activatedOnce=!1,this.testManagers=new Set,this._onDidStatusChange=new s.EventEmitter,this.disposableRegistry=e.get(d.IDisposableRegistry),this.outputChannel=e.get(d.IOutputChannel,y.TEST_OUTPUT_CHANNEL),this.workspaceService=e.get(a.IWorkspaceService),this.documentManager=e.get(a.IDocumentManager),this.disposableRegistry.push(this)}dispose(){this.workspaceTestManagerService&&this.workspaceTestManagerService.dispose(),this.configChangedTimer&&(clearTimeout(this.configChangedTimer),this.configChangedTimer=void 0),this.autoDiscoverTimer&&(clearTimeout(this.autoDiscoverTimer),this.autoDiscoverTimer=void 0)}get onDidStatusChange(){return this._onDidStatusChange.event}async activate(e){this.activatedOnce||(this.activatedOnce=!0,this.workspaceTestManagerService=this.serviceContainer.get(S.IWorkspaceTestManagerService),this.registerHandlers(),this.registerCommands(),this.checkExperiments(),this.autoDiscoverTests(void 0).catch(e=>u.traceError("Failed to auto discover tests upon activation",e)),await this.registerSymbolProvider(e))}checkExperiments(){const e=this.serviceContainer.get(d.IExperimentsManager);if(e.inExperiment(l.AlwaysDisplayTestExplorerGroups.experiment)){this.serviceContainer.get(a.ICommandManager).executeCommand("setContext","testsDiscovered",!0).then(h.noop,h.noop)}else e.sendTelemetryIfInExperiment(l.AlwaysDisplayTestExplorerGroups.control)}async getTestManager(e,t){let n;if(t){const e=this.workspaceService.getWorkspaceFolder(t);n=e?e.uri:void 0}else{const e=this.serviceContainer.get(a.IApplicationShell);n=await b.selectTestWorkspace(e)}if(!n)return;const r=this.workspaceTestManagerService.getTestManager(n);if(r){if(!this.testManagers.has(r)){this.testManagers.add(r);const e=r.onDidStatusChange(e=>this._onDidStatusChange.fire(e));this.disposableRegistry.push(e)}return r}if(e){const e=this.serviceContainer.get(E.ITestConfigurationService);await e.displayTestFrameworkError(n)}}async configurationChangeHandler(e){if(!this.workspaceService.hasWorkspaceFolders||this.workspaceService.workspaceFolders.length>1)return;if(!Array.isArray(this.workspaceService.workspaceFolders))return;const t=this.workspaceService.workspaceFolders.find(t=>e.affectsConfiguration("python.testing",t.uri));if(!t)return;const n=t.uri,r=this.serviceContainer.get(d.IConfigurationService).getSettings(n);if(!r.testing.nosetestsEnabled&&!r.testing.pytestEnabled&&!r.testing.unittestEnabled)return this.testResultDisplay&&(this.testResultDisplay.enabled=!1),void(this.workspaceTestManagerService&&this.workspaceTestManagerService.dispose());this.testResultDisplay&&(this.testResultDisplay.enabled=!0),this.autoDiscoverTests(n).catch(e=>u.traceError("Failed to auto discover tests upon activation",e))}async discoverTestsForDocument(e){const t=await this.getTestManager(!1,e.uri);if(!t)return;const n=await t.discoverTests(y.CommandSource.auto,!1,!0);n&&Array.isArray(n.testFiles)&&0!==n.testFiles.length&&-1!==n.testFiles.findIndex(t=>t.fullPath===e.uri.fsPath)&&(this.autoDiscoverTimer&&clearTimeout(this.autoDiscoverTimer),this.autoDiscoverTimer=setTimeout(()=>this.discoverTests(y.CommandSource.auto,e.uri,!0,!1,!0),1e3))}async autoDiscoverTests(e){if(!this.workspaceService.hasWorkspaceFolders)return;e||(e=this.workspaceService.workspaceFolders[0].uri);const t=this.serviceContainer.get(d.IConfigurationService).getSettings(e);(t.testing.nosetestsEnabled||t.testing.pytestEnabled||t.testing.unittestEnabled)&&this.discoverTests(y.CommandSource.auto,e,!0).ignoreErrors()}async discoverTests(e,t,n,r,i,o){const s=await this.getTestManager(!0,t);if(!s)return;if(s.status===S.TestStatus.Discovering||s.status===S.TestStatus.Running)return;this.testResultDisplay||(this.testResultDisplay=this.serviceContainer.get(E.ITestResultDisplay));const a=s.discoverTests(e,n,i,r,o);this.testResultDisplay.displayDiscoverStatus(a,i).catch(e=>u.traceError("Python Extension: displayDiscoverStatus",e)),await a}async stopTests(e){m.sendTelemetryEvent(g.EventName.UNITTEST_STOP);const t=await this.getTestManager(!0,e);t&&t.stop()}async displayStopUI(e){const t=await this.getTestManager(!0);if(!t)return;this.serviceContainer.get(E.ITestDisplay).displayStopTestUI(t.workspaceFolder,e)}async displayUI(e){const t=await this.getTestManager(!0);if(!t)return;this.serviceContainer.get(E.ITestDisplay).displayTestUI(e,t.workspaceFolder)}async displayPickerUI(e,t,n,r){const i=await this.getTestManager(!0,t);if(!i)return;this.serviceContainer.get(E.ITestDisplay).displayFunctionTestPickerUI(e,i.workspaceFolder,i.workingDirectory,t,n,r)}async runParametrizedTests(e,t,n,r){await this.getTestManager(!0,t)&&await this.runTestsImpl(e,t,{testFunction:n},void 0,r)}viewOutput(e){m.sendTelemetryEvent(g.EventName.UNITTEST_VIEW_OUTPUT),this.outputChannel.show()}async selectAndRunTestMethod(e,t,n){const r=await this.getTestManager(!0,t);if(!r)return;try{await r.discoverTests(e,!0,!0,!0)}catch(e){return}const i=this.serviceContainer.get(S.ITestCollectionStorageService).getTests(r.workspaceFolder),o=this.serviceContainer.get(E.ITestDisplay),s=await o.selectTestFunction(r.workspaceFolder.fsPath,i);s&&await this.runTestsImpl(e,r.workspaceFolder,{testFunction:[s.testFunction]},!1,n)}async selectAndRunTestFile(e){const t=await this.getTestManager(!0);if(!t)return;try{await t.discoverTests(e,!0,!0,!0)}catch(e){return}const n=this.serviceContainer.get(S.ITestCollectionStorageService).getTests(t.workspaceFolder),r=this.serviceContainer.get(E.ITestDisplay),i=await r.selectTestFile(t.workspaceFolder.fsPath,n);i&&await this.runTestsImpl(e,t.workspaceFolder,{testFile:[i]})}async runCurrentTestFile(e){if(!this.documentManager.activeTextEditor)return;const t=await this.getTestManager(!0,this.documentManager.activeTextEditor.document.uri);if(!t)return;try{await t.discoverTests(e,!0,!0,!0)}catch(e){return}const n=this.serviceContainer.get(S.ITestCollectionStorageService).getTests(t.workspaceFolder).testFiles.filter(e=>e.fullPath===this.documentManager.activeTextEditor.document.uri.fsPath);n.length<1||await this.runTestsImpl(e,t.workspaceFolder,{testFile:[n[0]]})}async runTestsImpl(e,t,n,r,i=!1){const o=await this.getTestManager(!0,t);if(!o)return;this.testResultDisplay||(this.testResultDisplay=this.serviceContainer.get(E.ITestResultDisplay));const s=o.runTest(e,n,r,i).catch(e=>(e!==y.CANCELLATION_REASON&&this.outputChannel.appendLine("Error: "+e),Promise.reject(e)));this.testResultDisplay.displayProgressStatus(s,i),await s}async registerSymbolProvider(e){const t=this.serviceContainer.get(S.ITestCollectionStorageService),n=new s.EventEmitter;this.disposableRegistry.push(n);const r=this._onDidStatusChange.event(e=>{e.status!==S.TestStatus.Discovering&&e.status!==S.TestStatus.Running&&n.fire()});this.disposableRegistry.push(r),this.disposableRegistry.push(v.activateCodeLenses(n,e,t,this.serviceContainer))}async configureTests(e){let t;if(e){const n=this.workspaceService.getWorkspaceFolder(e);t=n?n.uri:void 0}else{const e=this.serviceContainer.get(a.IApplicationShell);t=await b.selectTestWorkspace(e)}if(!t)return;const n=this.serviceContainer.get(E.ITestConfigurationService);await n.promptToEnableAndConfigureTestFramework(t)}registerCommands(){const e=this.serviceContainer.get(d.IDisposableRegistry),t=this.serviceContainer.get(a.ICommandManager),n=[t.registerCommand(c.Commands.Tests_Discover,(e,t=y.CommandSource.commandPalette,n)=>(e&&e instanceof E.TestWorkspaceFolder&&(n=e.resource,t=y.CommandSource.testExplorer),this.discoverTests(t,n,!0,!0,!1,!0).ignoreErrors())),t.registerCommand(c.Commands.Tests_Configure,(e,t=y.CommandSource.commandPalette,n)=>{this.configureTests(n).ignoreErrors()}),t.registerCommand(c.Commands.Tests_Run_Failed,(e,t=y.CommandSource.commandPalette,n)=>this.runTestsImpl(t,n,void 0,!0)),t.registerCommand(c.Commands.Tests_Run,(e,t=y.CommandSource.commandPalette,n,r)=>(e&&e instanceof E.TestWorkspaceFolder&&(n=e.resource,t=y.CommandSource.testExplorer),this.runTestsImpl(t,n,r))),t.registerCommand(c.Commands.Tests_Debug,(e,t=y.CommandSource.commandPalette,n,r)=>(e&&e instanceof E.TestWorkspaceFolder&&(n=e.resource,t=y.CommandSource.testExplorer),this.runTestsImpl(t,n,r,!1,!0))),t.registerCommand(c.Commands.Tests_View_UI,()=>this.displayUI(y.CommandSource.commandPalette)),t.registerCommand(c.Commands.Tests_Picker_UI,(e,t=y.CommandSource.commandPalette,n,r)=>this.displayPickerUI(t,n,r)),t.registerCommand(c.Commands.Tests_Picker_UI_Debug,(e,t=y.CommandSource.commandPalette,n,r)=>this.displayPickerUI(t,n,r,!0)),t.registerCommand(c.Commands.Tests_Run_Parametrized,(e,t=y.CommandSource.commandPalette,n,r,i)=>this.runParametrizedTests(t,n,r,i)),t.registerCommand(c.Commands.Tests_Stop,(e,t)=>this.stopTests(t)),t.registerCommand(c.Commands.Tests_ViewOutput,(e,t=y.CommandSource.commandPalette)=>this.viewOutput(t)),t.registerCommand(c.Commands.Tests_Ask_To_Stop_Discovery,()=>this.displayStopUI("Stop discovering tests")),t.registerCommand(c.Commands.Tests_Ask_To_Stop_Test,()=>this.displayStopUI("Stop running tests")),t.registerCommand(c.Commands.Tests_Select_And_Run_Method,(e,t=y.CommandSource.commandPalette,n)=>this.selectAndRunTestMethod(t,n)),t.registerCommand(c.Commands.Tests_Select_And_Debug_Method,(e,t=y.CommandSource.commandPalette,n)=>this.selectAndRunTestMethod(t,n,!0)),t.registerCommand(c.Commands.Tests_Select_And_Run_File,(e,t=y.CommandSource.commandPalette)=>this.selectAndRunTestFile(t)),t.registerCommand(c.Commands.Tests_Run_Current_File,(e,t=y.CommandSource.commandPalette)=>this.runCurrentTestFile(t)),t.registerCommand(c.Commands.Tests_Discovering,h.noop)];e.push(...n)}onDocumentSaved(e){this.serviceContainer.get(d.IConfigurationService).getSettings(e.uri).testing.autoTestDiscoverOnSaveEnabled&&this.discoverTestsForDocument(e).ignoreErrors()}registerHandlers(){const e=this.serviceContainer.get(a.IDocumentManager),t=this.serviceContainer.get(p.IInterpreterService);this.disposableRegistry.push(e.onDidSaveTextDocument(this.onDocumentSaved.bind(this))),this.disposableRegistry.push(this.workspaceService.onDidChangeConfiguration(e=>{this.configChangedTimer&&clearTimeout(this.configChangedTimer),this.configChangedTimer=setTimeout(()=>this.configurationChangeHandler(e),1e3)})),this.disposableRegistry.push(t.onDidChangeInterpreter(()=>this.autoDiscoverTests(void 0).catch(e=>u.traceError("Failed to auto discover tests upon changing interpreter",e))))}};r([m.captureTelemetry(g.EventName.UNITTEST_CONFIGURE,void 0,!1)],w.prototype,"configureTests",null),w=r([o.injectable(),i(0,o.inject(f.IServiceContainer))],w),t.UnitTestManagementService=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activateCodeLenses=void 0;const r=n(2),i=n(10),o=n(975);t.activateCodeLenses=function(e,t,n,s){const a=[],c=new o.TestFileCodeLensProvider(e,t,n,s);return a.push(r.languages.registerCodeLensProvider(i.PYTHON,c)),{dispose:()=>{a.forEach(e=>e.dispose())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestFileCodeLensProvider=void 0;const r=n(2),i=n(3),o=n(6),s=n(10),a=n(26),c=n(17);function l(e){switch(e){case c.TestStatus.Pass:return s.Octicons.Test_Pass+" ";case c.TestStatus.Error:return s.Octicons.Test_Error+" ";case c.TestStatus.Fail:return s.Octicons.Test_Fail+" ";case c.TestStatus.Skipped:return s.Octicons.Test_Skip+" ";default:return""}}function u(e){const t=[];let n=e.filter(e=>e.status===c.TestStatus.Pass).length;return n>0&&t.push(`${s.Octicons.Test_Pass} ${n}`),n=e.filter(e=>e.status===c.TestStatus.Skipped).length,n>0&&t.push(`${s.Octicons.Test_Skip} ${n}`),n=e.filter(e=>e.status===c.TestStatus.Fail).length,n>0&&t.push(`${s.Octicons.Test_Fail} ${n}`),n=e.filter(e=>e.status===c.TestStatus.Error).length,n>0&&t.push(`${s.Octicons.Test_Error} ${n}`),t.join(" ")}t.TestFileCodeLensProvider=class{constructor(e,t,n,r){this._onDidChange=e,this.symbolProvider=t,this.testCollectionStorage=n,this.workspaceService=r.get(i.IWorkspaceService),this.fileSystem=r.get(o.IFileSystem)}get onDidChangeCodeLenses(){return this._onDidChange.event}async provideCodeLenses(e,t){const n=this.workspaceService.getWorkspaceFolder(e.uri);if(!n)return[];const i=this.testCollectionStorage.getTests(n.uri);if(!i||0===i.testFiles.length||0===i.testFunctions.length)return[];const o=new r.CancellationTokenSource;return t.onCancellationRequested(()=>{o.cancel()}),setTimeout(()=>{o.token.isCancellationRequested||o.cancel()},s.Delays.MaxUnitTestCodeLensDelay),this.getCodeLenses(e,o.token,this.symbolProvider)}resolveCodeLens(e,t){return e.command={command:"python.runtests",title:"Test"},Promise.resolve(e)}getTestFileWhichNeedsCodeLens(e){const t=this.workspaceService.getWorkspaceFolder(e.uri);if(!t)return;const n=this.testCollectionStorage.getTests(t.uri);return n?n.testFiles.find(t=>this.fileSystem.arePathsSame(t.fullPath,e.uri.fsPath)):void 0}async getCodeLenses(e,t,n){const i=this.getTestFileWhichNeedsCodeLens(e);if(!i)return[];const o=function(e){const t={functions:[...e.functions],suites:[]};return e.suites.forEach(e=>{t.suites.push(e);const n=function e(t){const n={functions:[],suites:[]};return t.functions.forEach(e=>{n.functions.push(e)}),t.suites.forEach(t=>{n.suites.push(t);const r=e(t);n.functions.push(...r.functions),n.suites.push(...r.suites)}),n}(e);t.functions.push(...n.functions),t.suites.push(...n.suites)}),t}(i);try{const i=await n.provideDocumentSymbols(e,t);return i?i.filter(e=>e.kind===r.SymbolKind.Function||e.kind===r.SymbolKind.Method||e.kind===r.SymbolKind.Class).map(t=>{const n=new r.Range(t.location.range.start,new r.Position(t.location.range.end.line,t.location.range.end.character+1));return this.getCodeLens(e.uri,o,n,t.name,t.kind,t.containerName)}).reduce((e,t)=>e.concat(t),[]).filter(e=>null!==e):[]}catch(e){return t.isCancellationRequested?[]:Promise.reject(e)}}getCodeLens(e,t,n,i,o,c){switch(o){case r.SymbolKind.Function:case r.SymbolKind.Method:return function(e,t,n,i,o){let c;0===o.length?c=t.functions.find(e=>e.name===n):t.suites.filter(e=>e.name===o).forEach(e=>{const t=e.functions.find(e=>e.name===n);t&&(c=t)});if(c)return[new r.CodeLens(i,{title:l(c.status)+s.Text.CodeLensRunUnitTest,command:s.Commands.Tests_Run,arguments:[void 0,a.CommandSource.codelens,e,{testFunction:[c]}]}),new r.CodeLens(i,{title:l(c.status)+s.Text.CodeLensDebugUnitTest,command:s.Commands.Tests_Debug,arguments:[void 0,a.CommandSource.codelens,e,{testFunction:[c]}]})];const d=t.functions.filter(e=>e.name.startsWith(n+"[")&&e.name.endsWith("]"));if(0===d.length)return[];return[new r.CodeLens(i,{title:`${u(d)} ${s.Text.CodeLensRunUnitTest} (Multiple)`,command:s.Commands.Tests_Picker_UI,arguments:[void 0,a.CommandSource.codelens,e,d]}),new r.CodeLens(i,{title:`${u(d)} ${s.Text.CodeLensDebugUnitTest} (Multiple)`,command:s.Commands.Tests_Picker_UI_Debug,arguments:[void 0,a.CommandSource.codelens,e,d]})]}(e,t,i,n,c);case r.SymbolKind.Class:{const o=t.suites.find(e=>e.name===i);return o?[new r.CodeLens(n,{title:l(o.status)+s.Text.CodeLensRunUnitTest,command:s.Commands.Tests_Run,arguments:[void 0,a.CommandSource.codelens,e,{testSuite:[o]}]}),new r.CodeLens(n,{title:l(o.status)+s.Text.CodeLensDebugUnitTest,command:s.Commands.Tests_Debug,arguments:[void 0,a.CommandSource.codelens,e,{testSuite:[o]}]})]:[]}default:return[]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(1),i=n(977),o=n(978),s=n(979),a=n(980),c=n(981),l=n(982),u=n(89);t.registerTypes=function(e){e.addSingleton(u.ITestNavigatorHelper,a.TestNavigatorHelper),e.addSingleton(u.ITestCodeNavigatorCommandHandler,i.TestCodeNavigatorCommandHandler),e.addSingleton(u.ITestCodeNavigator,o.TestFileCodeNavigator,u.NavigableItemType.testFile),e.addSingleton(u.ITestCodeNavigator,s.TestFunctionCodeNavigator,u.NavigableItemType.testFunction),e.addSingleton(u.ITestCodeNavigator,c.TestSuiteCodeNavigator,u.NavigableItemType.testSuite),e.addSingleton(r.IDocumentSymbolProvider,l.TestFileSymbolProvider,"test")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestCodeNavigatorCommandHandler=void 0;const o=n(0),s=n(3),a=n(10),c=n(1),l=n(89);let u=class{constructor(e,t,n,r,i){this.commandManager=e,this.testFileNavigator=t,this.testFunctionNavigator=n,this.testSuiteNavigator=r,this.disposables=[],i.push(this)}dispose(){this.disposables.forEach(e=>e.dispose())}register(){if(this.disposables.length>0)return;let e=this.commandManager.registerCommand(a.Commands.navigateToTestFile,this.testFileNavigator.navigateTo,this.testFileNavigator);this.disposables.push(e),e=this.commandManager.registerCommand(a.Commands.navigateToTestFunction,this.testFunctionNavigator.navigateTo,this.testFunctionNavigator),this.disposables.push(e),e=this.commandManager.registerCommand(a.Commands.navigateToTestSuite,this.testSuiteNavigator.navigateTo,this.testSuiteNavigator),this.disposables.push(e)}};u=r([o.injectable(),i(0,o.inject(s.ICommandManager)),i(1,o.inject(l.ITestCodeNavigator)),i(1,o.named(l.NavigableItemType.testFile)),i(2,o.inject(l.ITestCodeNavigator)),i(2,o.named(l.NavigableItemType.testFunction)),i(3,o.inject(l.ITestCodeNavigator)),i(3,o.named(l.NavigableItemType.testSuite)),i(4,o.inject(c.IDisposableRegistry))],u),t.TestCodeNavigatorCommandHandler=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestFileCodeNavigator=void 0;const o=n(0),s=n(2),a=n(23),c=n(7),l=n(9),u=n(89);let d=class{constructor(e){this.helper=e}async navigateTo(e,t,n){await this.helper.openFile(s.Uri.file(t.fullPath))}};r([a.swallowExceptions("Navigate to test file"),c.captureTelemetry(l.EventName.UNITTEST_NAVIGATE,{byFile:!0})],d.prototype,"navigateTo",null),d=r([o.injectable(),i(0,o.inject(u.ITestNavigatorHelper))],d),t.TestFileCodeNavigator=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestFunctionCodeNavigator=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(23),u=n(7),d=n(9),h=n(17),p=n(89);let f=class{constructor(e,t,n){this.helper=e,this.docManager=t,this.storage=n}async navigateTo(e,t,n=!0){u.sendTelemetryEvent(d.EventName.UNITTEST_NAVIGATE,void 0,{focus_code:n,byFunction:!0}),this.cancellationToken&&this.cancellationToken.cancel();const r=this.storage.findFlattendTestFunction(e,t);if(!r)throw new Error("Flattend test function not found");this.cancellationToken=new s.CancellationTokenSource;const[i,o]=await this.helper.openFile(s.Uri.file(r.parentTestFile.fullPath));let a;if(r.testFunction.line)a=new s.Range(r.testFunction.line,0,r.testFunction.line,0);else{const e=e=>e.name===r.testFunction.name&&(e.kind===s.SymbolKind.Method||e.kind===s.SymbolKind.Function),t=await this.helper.findSymbol(i,e,this.cancellationToken.token);a=t?t.location.range:void 0}a?n?(a=new s.Range(a.start.line,a.start.character,a.start.line,a.start.character),await this.docManager.showTextDocument(i,{preserveFocus:!1,selection:a})):o.revealRange(a,s.TextEditorRevealType.Default):c.traceError("Unable to navigate to test function",new Error("Test Function not found"))}};r([l.swallowExceptions("Navigate to test function"),u.captureTelemetry(d.EventName.UNITTEST_NAVIGATE,{byFunction:!0},!0)],f.prototype,"navigateTo",null),f=r([o.injectable(),i(0,o.inject(p.ITestNavigatorHelper)),i(1,o.inject(a.IDocumentManager)),i(2,o.inject(h.ITestCollectionStorageService))],f),t.TestFunctionCodeNavigator=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestNavigatorHelper=void 0;const o=n(0),s=n(3),a=n(5),c=n(1);let l=class{constructor(e,t){this.documentManager=e,this.symbolProvider=t}async openFile(e){if(!e)throw new Error("Unable to navigate to an undefined test file");const t=await this.documentManager.openTextDocument(e);return[t,await this.documentManager.showTextDocument(t)]}async findSymbol(e,t,n){const r=await this.symbolProvider.provideDocumentSymbols(e,n);if(Array.isArray(r)&&0!==r.length)return r.find(t);a.traceError("Symbol information not found",new Error("Symbol information not found"))}};l=r([o.injectable(),i(0,o.inject(s.IDocumentManager)),i(1,o.inject(c.IDocumentSymbolProvider)),i(1,o.named("test"))],l),t.TestNavigatorHelper=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestSuiteCodeNavigator=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(23),u=n(7),d=n(9),h=n(17),p=n(89);let f=class{constructor(e,t,n){this.helper=e,this.docManager=t,this.storage=n}async navigateTo(e,t,n=!0){u.sendTelemetryEvent(d.EventName.UNITTEST_NAVIGATE,void 0,{focus_code:n,bySuite:!0}),this.cancellationToken&&this.cancellationToken.cancel();const r=this.storage.findFlattendTestSuite(e,t);if(!r)throw new Error("Flattened test suite not found");this.cancellationToken=new s.CancellationTokenSource;const[i,o]=await this.helper.openFile(s.Uri.file(r.parentTestFile.fullPath));let a;if(r.testSuite.line)a=new s.Range(r.testSuite.line,0,r.testSuite.line,0);else{const e=e=>e.name===r.testSuite.name&&e.kind===s.SymbolKind.Class,t=await this.helper.findSymbol(i,e,this.cancellationToken.token);a=t?t.location.range:void 0}a?n?(a=new s.Range(a.start.line,a.start.character,a.start.line,a.start.character),await this.docManager.showTextDocument(i,{preserveFocus:!1,selection:a})):o.revealRange(a,s.TextEditorRevealType.Default):c.traceError("Unable to navigate to test suite",new Error("Test Suite not found"))}};r([l.swallowExceptions("Navigate to test suite"),u.captureTelemetry(d.EventName.UNITTEST_NAVIGATE,{bySuite:!0},!0)],f.prototype,"navigateTo",null),f=r([o.injectable(),i(0,o.inject(p.ITestNavigatorHelper)),i(1,o.inject(a.IDocumentManager)),i(2,o.inject(h.ITestCollectionStorageService))],f),t.TestSuiteCodeNavigator=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestFileSymbolProvider=void 0;const o=n(0),s=n(2),a=n(5),c=n(41),l=n(18);let u=class{constructor(e){this.pythonServiceFactory=e}async provideDocumentSymbols(e,t){const n=await this.getSymbols(e,t);return n?[...n.classes.map(t=>this.parseRawSymbol(e.uri,t,s.SymbolKind.Class)),...n.methods.map(t=>this.parseRawSymbol(e.uri,t,s.SymbolKind.Method)),...n.functions.map(t=>this.parseRawSymbol(e.uri,t,s.SymbolKind.Function))]:[]}parseRawSymbol(e,t,n){const r=new s.Range(t.range.start.line,t.range.start.character,t.range.end.line,t.range.end.character);return{containerName:t.namespace,kind:n,name:t.name,location:new s.Location(e,r)}}async getSymbols(e,t){try{if(e.isUntitled)return;const[n,r]=c.symbolProvider(e.uri.fsPath,e.isDirty?e.getText():void 0),i=await this.pythonServiceFactory.create({resource:e.uri});return r((await i.exec(n,{throwOnStdErr:!0,token:t})).stdout)}catch(e){return void a.traceError("Python: Failed to get symbols",e)}}};u=r([o.injectable(),i(0,o.inject(l.IPythonExecutionFactory))],u),t.TestFileSymbolProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestManager=void 0;const o=n(0),s=n(2),a=n(1),c=n(8),l=n(26),u=n(226),d=n(17),h=n(19);let p=class extends u.BaseTestManager{constructor(e,t,n){super(l.NOSETEST_PROVIDER,a.Product.nosetest,e,t,n),this.argsService=this.serviceContainer.get(h.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(d.ITestsHelper),this.runner=this.serviceContainer.get(h.ITestManagerRunner,this.testProvider)}get enabled(){return this.settings.testing.nosetestsEnabled}getDiscoveryOptions(e){const t=this.settings.testing.nosetestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}runTestImpl(e,t,n,r){let i;const o=this.helper.shouldRunAllTests(t);i=r?this.argsService.filterArguments(this.settings.testing.nosetestArgs,o?h.TestFilter.debugAll:h.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.testing.nosetestArgs,o?h.TestFilter.runAll:h.TestFilter.runSpecific),!0===n&&-1===i.indexOf("--failed")&&i.splice(0,0,"--failed"),n||-1!==i.indexOf("--with-id")||i.splice(0,0,"--with-id");const a={workspaceFolder:s.Uri.file(this.rootDirectory),cwd:this.rootDirectory,tests:e,args:i,testsToRun:t,token:this.testRunnerCancellationToken,outChannel:this.outputChannel,debug:r};return this.runner.runTest(this.testResultsService,a,this)}};p=r([o.injectable(),i(2,o.inject(c.IServiceContainer))],p),t.TestManager=p},function(e,t,n){"use strict";function r(e){return i(e).filter(e=>"string"==typeof e)}function i(e){return Object.keys(e).map(t=>e[t])}Object.defineProperty(t,"__esModule",{value:!0}),t.getValues=t.getNames=t.getNamesAndValues=void 0,t.getNamesAndValues=function(e){return r(e).map(t=>({name:t,value:e[t]}))},t.getNames=r,t.getValues=function(e){return i(e).filter(e=>"number"==typeof e)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestManagerRunner=void 0;const o=n(0),s=n(6),a=n(14),c=n(8),l=n(26),u=n(17),d=n(19);let h=class{constructor(e){this.serviceContainer=e,this.argsService=e.get(d.IArgumentsService,l.NOSETEST_PROVIDER),this.argsHelper=e.get(d.IArgumentsHelper),this.testRunner=e.get(u.ITestRunner),this.xUnitParser=this.serviceContainer.get(u.IXUnitParser),this.fs=this.serviceContainer.get(s.IFileSystem)}async runTest(e,t,n){let r=[];t.testsToRun&&t.testsToRun.testFolder&&(r=r.concat(t.testsToRun.testFolder.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFile&&(r=r.concat(t.testsToRun.testFile.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testSuite&&(r=r.concat(t.testsToRun.testSuite.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFunction&&(r=r.concat(t.testsToRun.testFunction.map(e=>e.nameToRun)));let i=a.noop;const o=t.args;-1===o.indexOf("--with-xunit")&&o.splice(0,0,"--with-xunit");try{const n=await this.getUnitXmlFile(o),s=n.filePath;i=n.dispose;const a=this.argsService.filterArguments(o,["--xunit-file"]);if(a.splice(0,0,"--xunit-file="+s),a.push(...r),!0===t.debug){const e=this.serviceContainer.get(u.ITestDebugLauncher),n=[t.cwd,"nose"].concat(a),r={cwd:t.cwd,args:n,token:t.token,outChannel:t.outChannel,testProvider:l.NOSETEST_PROVIDER};await e.launchDebugger(r)}else{const e={args:a.concat(r),cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};await this.testRunner.run(l.NOSETEST_PROVIDER,e)}return t.debug?t.tests:await this.updateResultsFromLogFiles(t.tests,s,e)}catch(e){return Promise.reject(e)}finally{i()}}async updateResultsFromLogFiles(e,t,n){return await this.xUnitParser.updateResultsFromXmlLogFile(e,t),n.updateResults(e),e}async getUnitXmlFile(e){const t=this.argsHelper.getOptionValues(e,"--xunit-file");return"string"==typeof t?{filePath:t,dispose:a.noop}:this.fs.createTemporaryFile(".xml")}};h=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],h),t.TestManagerRunner=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentsService=void 0;const o=n(0),s=n(8),a=n(19),c=["--attr","--config","--cover-html-dir","--cover-min-percentage","--cover-package","--cover-xml-file","--debug","--debug-log","--doctest-extension","--doctest-fixtures","--doctest-options","--doctest-result-variable","--eval-attr","--exclude","--id-file","--ignore-files","--include","--log-config","--logging-config","--logging-datefmt","--logging-filter","--logging-format","--logging-level","--match","--process-timeout","--processes","--py3where","--testmatch","--tests","--verbosity","--where","--xunit-file","--xunit-testsuite-name","-A","-a","-c","-e","-i","-I","-l","-m","-w","--profile-restrict","--profile-sort","--profile-stats-file"],l=["-h","--help","-V","--version","-p","--plugins","-v","--verbose","--quiet","-x","--stop","-P","--no-path-adjustment","--exe","--noexe","--traverse-namespace","--first-package-wins","--first-pkg-wins","--1st-pkg-wins","--no-byte-compile","-s","--nocapture","--nologcapture","--logging-clear-handlers","--with-coverage","--cover-erase","--cover-tests","--cover-inclusive","--cover-html","--cover-branches","--cover-xml","--pdb","--pdb-failures","--pdb-errors","--no-deprecated","--with-doctest","--doctest-tests","--with-isolation","-d","--detailed-errors","--failure-detail","--no-skip","--with-id","--failed","--process-restartworker","--with-xunit","--all-modules","--collect-only","--with-profile"];let u=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:l}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;if(Array.isArray(t))t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),l.indexOf(e)>=0&&n.push(e)});else switch(t){case a.TestFilter.removeTests:i=!0;break;case a.TestFilter.discovery:n.push("-v","--verbose","-q","--quiet","-x","--stop","--with-coverage",...l.filter(e=>e.startsWith("--cover")),...l.filter(e=>e.startsWith("--logging")),...l.filter(e=>e.startsWith("--pdb")),...l.filter(e=>e.indexOf("xunit")>=0)),r.push("--verbosity","-l","--debug","--cover-package",...l.filter(e=>e.startsWith("--cover")),...c.filter(e=>e.startsWith("--logging")),...l.filter(e=>e.indexOf("xunit")>=0));break;case a.TestFilter.debugAll:case a.TestFilter.runAll:break;case a.TestFilter.debugSpecific:case a.TestFilter.runSpecific:i=!0;break;default:throw new Error(`Unsupported Filter '${t}'`)}let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,l);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){return this.helper.getPositionalArguments(e,c,l)}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.ArgumentsService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDiscoveryService=void 0;const o=n(0),s=n(2),a=n(8),c=n(26),l=n(17),u=n(19);let d=class{constructor(e,t){this.serviceContainer=e,this.testParser=t,this.argsService=this.serviceContainer.get(u.IArgumentsService,c.NOSETEST_PROVIDER),this.runner=this.serviceContainer.get(l.ITestRunner)}async discoverTests(e){const t=this.argsService.filterArguments(e.args,u.TestFilter.discovery),n=e.token?e.token:(new s.CancellationTokenSource).token,r={args:["--collect-only","-vvv"].concat(t),cwd:e.cwd,workspaceFolder:e.workspaceFolder,token:n,outChannel:e.outChannel},i=await this.runner.run(c.NOSETEST_PROVIDER,r);return e.token&&e.token.isCancellationRequested?Promise.reject("cancelled"):this.testParser.parse(i,e)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(l.ITestsParser)),i(1,o.named(c.NOSETEST_PROVIDER))],d),t.TestDiscoveryService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestsParser=void 0;const o=n(0),s=n(20),a=n(4),c=n(2),l=n(53),u=n(17);let d=class{constructor(e){this.testsHelper=e}parse(e,t){let n=this.getTestFiles(e,t);return n=n.filter(e=>e.suites.length>0||e.functions.length>0),this.testsHelper.flattenTestFiles(n,t.cwd)}getTestFiles(e,t){let n=[""];const r=[];return e.split(/\r?\n/g).forEach((i,o,a)=>{if((i.startsWith("nose.selector: DEBUG: wantFile ")&&i.endsWith(".py? True")||o===a.length-1)&&(this.parseNoseTestModuleCollectionResult(t.cwd,n,r),n=[""]),0===o)return e.startsWith(s.EOL)||a.length>1?void this.appendLine(i,n):void(n[n.length-1]+=i);o!==a.length-1?this.appendLine(i,n):n[n.length-1]+=i}),r}appendLine(e,t){const n=t.length-1;t[n]+=e,t[n].endsWith("? True")?t.push(""):t[n]=""}parseNoseTestModuleCollectionResult(e,t,n){let r,i="",o="";const s=c.Uri.file(e);t.forEach(t=>{if(t.startsWith("nose.selector: DEBUG: wantFile ")&&t.endsWith(".py? True")){o=t.substring("nose.selector: DEBUG: wantFile ".length),o=o.substring(0,o.lastIndexOf("? True")),o=o.substring(e.length+1),".pyc"!==a.extname(o)&&".pyo"!==a.extname(o)||(o=o.substring(0,o.length-1)),i=l.convertFileToPackage(o);const c=a.isAbsolute(o)?o:a.resolve(e,o);return r={resource:s,functions:[],suites:[],name:o,nameToRun:o,xmlName:i,time:0,functionsFailed:0,functionsPassed:0,fullPath:c},void n.push(r)}if(t.startsWith("nose.selector: DEBUG: wantClass <class '")){const e=l.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantClass <class '","'>? True"),n=a.extname(e).substring(1),i={resource:s,name:n,nameToRun:`${o}:${n}`,functions:[],suites:[],xmlName:e,time:0,isUnitTest:!1,isInstance:!1,functionsFailed:0,functionsPassed:0};r.suites.push(i)}else if(t.startsWith("nose.selector: DEBUG: wantClass ")){const e=l.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantClass ","? True"),n={resource:s,name:a.extname(e).substring(1),nameToRun:`${o}:.${e}`,functions:[],suites:[],xmlName:e,time:0,isUnitTest:!1,isInstance:!1,functionsFailed:0,functionsPassed:0};r.suites.push(n)}else if(t.startsWith("nose.selector: DEBUG: wantMethod <unbound method ")){const e=l.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantMethod <unbound method ",">? True"),n=a.extname(e).substring(1),i=a.basename(e,a.extname(e)),c={resource:s,name:n,nameToRun:`${o}:${i}.${n}`,time:0,functionsFailed:0,functionsPassed:0},u=r.suites.find(e=>e.name===i);u&&u.functions.push(c)}else if(t.startsWith("nose.selector: DEBUG: wantFunction <function ")){const e=l.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantFunction <function "," at "),n={resource:s,name:e,nameToRun:`${o}:${e}`,time:0,functionsFailed:0,functionsPassed:0};r.functions.push(n)}else;})}};d=r([o.injectable(),i(0,o.inject(u.ITestsHelper))],d),t.TestsParser=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestManager=void 0;const r=n(1),i=n(26),o=n(226),s=n(17),a=n(19);class c extends o.BaseTestManager{constructor(e,t,n){super(i.PYTEST_PROVIDER,r.Product.pytest,e,t,n),this.argsService=this.serviceContainer.get(a.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(s.ITestsHelper),this.runner=this.serviceContainer.get(a.ITestManagerRunner,this.testProvider),this.testMessageService=this.serviceContainer.get(s.ITestMessageService,this.testProvider)}get enabled(){return this.settings.testing.pytestEnabled}getDiscoveryOptions(e){const t=this.settings.testing.pytestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}async runTestImpl(e,t,n,r){let i;const o=this.helper.shouldRunAllTests(t);i=r?this.argsService.filterArguments(this.settings.testing.pytestArgs,o?a.TestFilter.debugAll:a.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.testing.pytestArgs,o?a.TestFilter.runAll:a.TestFilter.runSpecific),!0===n&&-1===i.indexOf("--lf")&&-1===i.indexOf("--last-failed")&&i.splice(0,0,"--last-failed");const s={workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,tests:e,args:i,testsToRun:t,debug:r,token:this.testRunnerCancellationToken,outChannel:this.outputChannel},c=await this.runner.runTest(this.testResultsService,s,this),l=await this.testMessageService.getFilteredTestMessages(this.rootDirectory,c);return await this.updateDiagnostics(e,l),c}}t.TestManager=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestManagerRunner=void 0;const o=n(0),s=n(6),a=n(14),c=n(8),l=n(26),u=n(17),d=n(19);let h=class{constructor(e){this.serviceContainer=e,this.argsService=e.get(d.IArgumentsService,l.PYTEST_PROVIDER),this.argsHelper=e.get(d.IArgumentsHelper),this.testRunner=e.get(u.ITestRunner),this.xUnitParser=this.serviceContainer.get(u.IXUnitParser),this.fs=this.serviceContainer.get(s.IFileSystem)}async runTest(e,t,n){let r=[];t.testsToRun&&t.testsToRun.testFolder&&(r=r.concat(t.testsToRun.testFolder.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFile&&(r=r.concat(t.testsToRun.testFile.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testSuite&&(r=r.concat(t.testsToRun.testSuite.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFunction&&(r=r.concat(t.testsToRun.testFunction.map(e=>e.nameToRun)));let i=a.noop;const o=t.args;try{const n=await this.getJUnitXmlFile(o),s=n.filePath;i=n.dispose;const a=this.argsService.filterArguments(o,["--junit-xml","--junitxml"]);if(a.splice(0,0,"--junit-xml="+s),a.splice(0,0,"--rootdir",t.workspaceFolder.fsPath),a.splice(0,0,"--override-ini","junit_family=xunit1"),a.push(...r),t.debug){const e=this.serviceContainer.get(u.ITestDebugLauncher),n=[t.cwd,"pytest"].concat(a),r={cwd:t.cwd,args:n,token:t.token,outChannel:t.outChannel,testProvider:l.PYTEST_PROVIDER};await e.launchDebugger(r)}else{const e={args:a,cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};await this.testRunner.run(l.PYTEST_PROVIDER,e)}return t.debug?t.tests:await this.updateResultsFromLogFiles(t.tests,s,e)}catch(e){return Promise.reject(e)}finally{i()}}async updateResultsFromLogFiles(e,t,n){return await this.xUnitParser.updateResultsFromXmlLogFile(e,t),n.updateResults(e),e}async getJUnitXmlFile(e){const t=this.argsHelper.getOptionValues(e,"--junit-xml");return"string"==typeof t?{filePath:t,dispose:a.noop}:this.fs.createTemporaryFile(".xml")}};h=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],h),t.TestManagerRunner=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentsService=void 0;const o=n(0),s=n(8),a=n(19),c=["-c","-k","-m","-o","-p","-r","-W","-n","--assert","--basetemp","--cache-show","--capture","--color","--confcutdir","--cov","--cov-config","--cov-fail-under","--cov-report","--deselect","--dist","--doctest-glob","--doctest-report","--durations","--ignore","--ignore-glob","--import-mode","--junit-prefix","--junit-xml","--last-failed-no-failures","--lfnf","--log-auto-indent","--log-cli-date-format","--log-cli-format","--log-cli-level","--log-date-format","--log-file","--log-file-date-format","--log-file-format","--log-file-level","--log-format","--log-level","--maxfail","--override-ini","--pastebin","--pdbcls","--pythonwarnings","--result-log","--rootdir","--show-capture","--tb","--verbosity","--max-slave-restart","--numprocesses","--rsyncdir","--rsyncignore","--tx"],l=["--cache-clear","--collect-in-virtualenv","--collect-only","--co","--continue-on-collection-errors","--cov-append","--cov-branch","--debug","--disable-pytest-warnings","--disable-warnings","--doctest-continue-on-failure","--doctest-ignore-import-errors","--doctest-modules","--exitfirst","--failed-first","--ff","--fixtures","--fixtures-per-test","--force-sugar","--full-trace","--funcargs","--help","--keep-duplicates","--last-failed","--lf","--markers","--new-first","--nf","--no-cov","--no-cov-on-fail","--no-print-logs","--noconftest","--old-summary","--pdb","--pyargs","-PyTest, Unittest-pyargs","--quiet","--runxfail","--setup-only","--setup-plan","--setup-show","--showlocals","--stepwise","--sw","--stepwise-skip","--strict","--strict-markers","--trace-config","--verbose","--version","-V","-h","-l","-q","-s","-v","-x","--boxed","--forked","--looponfail","--trace","--tx","-d"];let u=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:l}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;if(Array.isArray(t))t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),l.indexOf(e)>=0&&n.push(e)});else switch(t){case a.TestFilter.removeTests:n.push("--lf","--last-failed","--ff","--failed-first","--nf","--new-first"),r.push("-k","-m","--lfnf","--last-failed-no-failures"),i=!0;break;case a.TestFilter.discovery:n.push("-x","--exitfirst","--fixtures","--funcargs","--fixtures-per-test","--pdb","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--cache-show","-v","--verbose","-q","-quiet","-l","--showlocals","--no-print-logs","--debug","--setup-only","--setup-show","--setup-plan","--trace"),r.push("-m","--maxfail","--pdbcls","--capture","--lfnf","--last-failed-no-failures","--verbosity","-r","--tb","--rootdir","--show-capture","--durations","--junit-xml","--junit-prefix","--result-log","-W","--pythonwarnings","--log-*"),i=!0;break;case a.TestFilter.debugAll:case a.TestFilter.runAll:n.push("--collect-only","--trace");break;case a.TestFilter.debugSpecific:case a.TestFilter.runSpecific:n.push("--collect-only","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--trace"),r.push("-k","-m","--lfnf","--last-failed-no-failures"),i=!0;break;default:throw new Error(`Unsupported Filter '${t}'`)}let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,l);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){const t=this.helper.getOptionValues(e,"--rootdir");if("string"==typeof t)return[t];if(Array.isArray(t)&&t.length>0)return t;return this.helper.getPositionalArguments(e,c,l).filter(e=>!e.toUpperCase().endsWith(".PY"))}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.ArgumentsService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDiscoveryService=void 0;const o=n(0),s=n(2),a=n(8),c=n(26),l=n(17),u=n(19);let d=class{constructor(e){this.serviceContainer=e,this.argsService=this.serviceContainer.get(u.IArgumentsService,c.PYTEST_PROVIDER),this.helper=this.serviceContainer.get(l.ITestsHelper)}async discoverTests(e){const t=this.buildTestCollectionArgs(e),n=this.argsService.getTestFolders(e.args);if(0===n.length){const n={...e,args:t};return this.discoverTestsInTestDirectory(n)}const r=await Promise.all(n.map(n=>{const r={...e,args:[...t,n]};return this.discoverTestsInTestDirectory(r)}));return this.helper.mergeTests(r)}buildTestCollectionArgs(e){const t=this.argsService.filterArguments(e.args,u.TestFilter.discovery);return e.ignoreCache&&-1===t.indexOf("--cache-clear")&&t.splice(0,0,"--cache-clear"),-1===t.indexOf("-s")&&t.splice(0,0,"-s"),t.splice(0,0,"--rootdir",e.workspaceFolder.fsPath),t}async discoverTestsInTestDirectory(e){const t=e.token?e.token:(new s.CancellationTokenSource).token,n={...e};n.args=["discover","pytest","--",...e.args],n.token=t;const r=this.serviceContainer.get(l.ITestDiscoveryService,"common");return n.token&&n.token.isCancellationRequested?Promise.reject("cancelled"):r.discoverTests(n)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.TestDiscoveryService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestMessageService=void 0;const o=n(0),s=n(4),a=n(2);n(11);const c=n(211),l=n(6),u=n(1),d=n(8),h=n(17),p=n(19);let f=class{constructor(e){this.serviceContainer=e}async getFilteredTestMessages(e,t){const n=t.testFunctions.reduce((e,t)=>(void 0===t.testFunction.passed&&t.testFunction.status!==h.TestStatus.Skipped||e.push(t),e),[]),r=[];for(const t of n){const n=t.testFunction.nameToRun,i=c.ProductNames.get(u.Product.pytest),o=t.testFunction.status;if(o===h.TestStatus.Pass){const e={code:n,severity:p.PythonTestMessageSeverity.Pass,provider:i,testTime:t.testFunction.time,status:o,testFilePath:t.parentTestFile.fullPath};r.push(e)}else{const s=await this.getLocationStack(e,t),a=t.testFunction.message,c=t.parentTestFile.fullPath;let l=p.PythonTestMessageSeverity.Error;t.testFunction.status===h.TestStatus.Skipped&&(l=p.PythonTestMessageSeverity.Skip);const u={code:n,message:a,severity:l,provider:i,traceback:t.testFunction.traceback,testTime:t.testFunction.time,testFilePath:c,status:o,locationStack:s};r.push(u)}}return r}async getLocationStack(e,t){const n=[];if(t.testFunction.traceback){const r=t.testFunction.traceback.match(/^((\.\.[\\\/])*.+\.py)\:(\d+)\:.*$/gim)||[];for(const t of r){const r=t.split(":");let i=r[0];i=s.isAbsolute(i)?i:s.resolve(e,i);const o=a.Uri.file(i),c=await a.workspace.openTextDocument(o),l=parseInt(r[1],10),u=c.lineAt(l-1),d=new a.Location(o,new a.Range(new a.Position(l-1,u.firstNonWhitespaceCharacterIndex),new a.Position(l-1,u.text.length))),h={location:d,lineText:c.getText(d.range)};n.push(h)}}let r=t.testFunction.file;r=s.isAbsolute(r)?r:s.resolve(e,r);const i=a.Uri.file(r),o=await a.workspace.openTextDocument(i);let c=null,u=t.testFunction.line,d="",h="";let p="";for(;null===c;){const e=o.lineAt(u);d=e.text,h=d.trimLeft(),h.toLowerCase().startsWith("def ")?(c=e,p="def "):h.toLowerCase().startsWith("async def ")?(c=e,p="async def "):u+=1}const f=h.slice(p.length).match(/[^ \(:]+/),g=f?f[0]:"",m=d.length-h.length+p.length,v=m+g.length,y=new a.Position(c.lineNumber,m),b=new a.Position(c.lineNumber,v),S=new a.Range(y,b),E={location:new a.Location(i,S),lineText:o.getText(S)};if(n.unshift(E),void 0!==t.parentTestSuite){this.serviceContainer.get(l.IFileSystem).arePathsSame(a.Uri.file(t.parentTestFile.fullPath).fsPath,n[0].location.uri.fsPath)||n.unshift(await this.getParentSuiteLocation(t))}return n}async getParentSuiteLocation(e){const t=e.testFunction.nameToRun.replace("::()","").split("::"),n=t.slice(1,t.length-1),r=a.Uri.file(e.parentTestFile.fullPath),i=await a.workspace.openTextDocument(r),o=i.getText().splitLines({trim:!1,removeEmptyEntries:!1}),s=o.slice().reverse();let c,l=0,u=o.length;const d=[];for(;n.length>0;){let e,t=0;const o=n.shift();let h;for(let n=l;n<u;n+=1){const r=s[n];if(0===r.trim().length)continue;const i=r.trimLeft();if(!i.toLowerCase().startsWith("class "))continue;const a=i.slice("class ".length).match(/[^ \(:]+/),u=a?a[0]:void 0;if(void 0===c){if(i.length===r.length){if(u===o){h=n,t=0;break}l=n+1}}else{if(t=r.length-i.length,t<=c){l=n+1;continue}(void 0===e||t<e)&&(u===o?(h=n,e=t):l=n+1)}}if(void 0===h)break;u=h,c=t;const p=s.length-1-h,f=t+"class ".length,g=new a.Position(p,f),m=new a.Position(p,f+o.length),v=new a.Range(g,m),y=new a.Location(r,v);d.push({location:y,lineText:i.getText(v)})}return d[d.length-1]}};f=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],f),t.TestMessageService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestHelper=void 0;const o=n(0),s=n(8),a=n(19);let c=class{constructor(e){this.argsHelper=e.get(a.IArgumentsHelper)}getStartDirectory(e){const t=this.argsHelper.getOptionValues(e,"-s");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e,"--start-directory");return"string"==typeof n?n:"."}getIdsOfTestsToRun(e,t){const n=[];return t&&t.testFolder&&t.testFolder.forEach(t=>{e.testFiles.forEach(e=>{e.fullPath.startsWith(t.name)&&n.push(e.nameToRun)})}),t&&t.testFile&&n.push(...t.testFile.map(e=>e.nameToRun)),t&&t.testSuite&&n.push(...t.testSuite.map(e=>e.nameToRun)),t&&t.testFunction&&n.push(...t.testFunction.map(e=>e.nameToRun)),n}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.UnitTestHelper=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestManager=void 0;const r=n(1),i=n(14),o=n(26),s=n(226),a=n(17),c=n(19);class l extends s.BaseTestManager{constructor(e,t,n){super(o.UNITTEST_PROVIDER,r.Product.unittest,e,t,n),this.argsService=this.serviceContainer.get(c.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(a.ITestsHelper),this.runner=this.serviceContainer.get(c.ITestManagerRunner,this.testProvider)}get enabled(){return this.settings.testing.unittestEnabled}configure(){i.noop()}getDiscoveryOptions(e){const t=this.settings.testing.unittestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}async runTest(e,t,n,r){return!0===n&&this.tests&&((t={testFile:[],testFolder:[],testSuite:[],testFunction:[]}).testFunction=this.tests.testFunctions.filter(e=>e.testFunction.status===a.TestStatus.Error||e.testFunction.status===a.TestStatus.Fail).map(e=>e.testFunction)),super.runTest(e,t,n,r)}async runTestImpl(e,t,n,r){let i;const o=this.helper.shouldRunAllTests(t);i=r?this.argsService.filterArguments(this.settings.testing.unittestArgs,o?c.TestFilter.debugAll:c.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.testing.unittestArgs,o?c.TestFilter.runAll:c.TestFilter.runSpecific);const s={workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,tests:e,args:i,testsToRun:t,debug:r,token:this.testRunnerCancellationToken,outChannel:this.outputChannel};return this.runner.runTest(this.testResultsService,s,this)}}t.TestManager=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestManagerRunner=void 0;const o=n(0),s=n(5),a=n(41),c=n(1),l=n(15),u=n(14),d=n(8),h=n(26),p=n(17),f=n(19),g=new Map;g.set("passed",{status:p.TestStatus.Pass,summaryProperty:"passed"}),g.set("failed",{status:p.TestStatus.Fail,summaryProperty:"failures"}),g.set("error",{status:p.TestStatus.Error,summaryProperty:"errors"}),g.set("skipped",{status:p.TestStatus.Skipped,summaryProperty:"skipped"});let m=class{constructor(e){this.serviceContainer=e,this.argsHelper=e.get(f.IArgumentsHelper),this.testRunner=e.get(p.ITestRunner),this.server=this.serviceContainer.get(p.IUnitTestSocketServer),this.helper=this.serviceContainer.get(f.IUnitTestHelper),this.serviceContainer.get(c.IDisposableRegistry).push(this.server)}async runTest(e,t,n){if(this.busy&&!this.busy.completed)return this.busy.promise;this.busy=l.createDeferred(),t.tests.summary.errors=0,t.tests.summary.failures=0,t.tests.summary.passed=0,t.tests.summary.skipped=0;let r=!1;this.server.on("error",(e,...t)=>s.traceError(`${e} ${t.join(" ")}`)),this.server.on("log",u.noop),this.server.on("connect",u.noop),this.server.on("start",u.noop),this.server.on("result",e=>{const i=t.tests.testFunctions.find(t=>t.testFunction.nameToRun===e.test),o=g.get(e.outcome);if(i){switch(i.testFunction.status=o.status,i.testFunction.status){case p.TestStatus.Error:case p.TestStatus.Fail:i.testFunction.passed=!1;break;case p.TestStatus.Pass:i.testFunction.passed=!0;break;default:i.testFunction.passed=void 0}i.testFunction.message=e.message,i.testFunction.traceback=e.traceback,t.tests.summary[o.summaryProperty]+=1,!r||"failures"!==o.summaryProperty&&"errors"!==o.summaryProperty||n.stop()}else o&&(t.tests.summary[o.summaryProperty]+=1)});const i=await this.server.start(),o=this.helper.getIdsOfTestsToRun(t.tests,t.testsToRun);for(let e=0;e<o.length;e+=1)o[e]="-t"+o[e].trim();const c=async(e="",n="")=>{let o=this.buildTestArgs(t.args);if(r=o.indexOf("--uf")>=0,o=o.filter(e=>"--uf"!==e),o.push("--result-port="+i),n.length>0&&o.push("-t"+n),e.length>0&&o.push("--testFile="+e),!0===t.debug){const e=this.serviceContainer.get(p.ITestDebugLauncher);o.push("--debug");const n={cwd:t.cwd,args:o,token:t.token,outChannel:t.outChannel,testProvider:h.UNITTEST_PROVIDER};return e.launchDebugger(n)}{const e={args:a.visualstudio_py_testlauncher(o),cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};await this.testRunner.run(h.UNITTEST_PROVIDER,e)}};if(0===o.length)await this.removeListenersAfter(c());else if(t.testsToRun){if(Array.isArray(t.testsToRun.testFile))for(const e of t.testsToRun.testFile)await c(e.fullPath,e.nameToRun);if(Array.isArray(t.testsToRun.testSuite))for(const e of t.testsToRun.testSuite){const n=t.tests.testSuites.find(t=>t.testSuite===e);if(n){const t=n.parentTestFile.fullPath;await c(t,e.nameToRun)}}if(Array.isArray(t.testsToRun.testFunction))for(const e of t.testsToRun.testFunction){const n=t.tests.testFunctions.find(t=>t.testFunction===e);if(n){const t=n.parentTestFile.fullPath;await c(t,e.nameToRun)}}await this.removeListenersAfter(Promise.resolve())}return e.updateResults(t.tests),this.busy.resolve(t.tests),t.tests}async removeListenersAfter(e){return e.then(()=>this.server.removeAllListeners()).catch(e=>{throw this.server.removeAllListeners(),e})}buildTestArgs(e){const t=this.helper.getStartDirectory(e);let n="test*.py";const r=this.argsHelper.getOptionValues(e,"-p"),i=this.argsHelper.getOptionValues(e,"--pattern");"string"==typeof r?n=r:"string"==typeof i&&(n=i);const o=e.some(e=>"-f"===e.trim()||"--failfast"===e.trim()),s=["--us="+t,"--up="+n,"--uvInt="+(e.some(e=>0===e.trim().indexOf("-v"))?2:1)];return o&&s.push("--uf"),s}};m=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],m),t.TestManagerRunner=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArgumentsService=void 0;const o=n(0),s=n(8),a=n(19),c=["-k","-p","-s","-t","--pattern","--start-directory","--top-level-directory"],l=["-b","-c","-f","-h","-q","-v","--buffer","--catch","--failfast","--help","--locals","--quiet","--verbose"];let u=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:l}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;Array.isArray(t)?t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),l.indexOf(e)>=0&&n.push(e)}):i=!0;let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,l);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){const t=this.helper.getOptionValues(e,"-s");if("string"==typeof t)return[t];const n=this.helper.getOptionValues(e,"--start-directory");return"string"==typeof n?[n]:["."]}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.ArgumentsService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDiscoveryService=void 0;const o=n(0),s=n(59),a=n(8),c=n(26),l=n(17),u=n(19);let d=class{constructor(e,t){this.testParser=t,this.argsHelper=e.get(u.IArgumentsHelper),this.runner=e.get(l.ITestRunner)}async discoverTests(e){const t=this.getDiscoveryScript(e),n=this.translateOptions(e),r={args:s.execCode(t,!1),cwd:e.cwd,workspaceFolder:e.workspaceFolder,token:e.token,outChannel:e.outChannel},i=await this.runner.run(c.UNITTEST_PROVIDER,r);return e.token&&e.token.isCancellationRequested?Promise.reject("cancelled"):this.testParser.parse(i,n)}getDiscoveryScript(e){const t=this.translateOptions(e);return`\nimport unittest\nloader = unittest.TestLoader()\nsuites = loader.discover("${t.startDirectory}", pattern="${t.pattern}")\nprint("start") #Don't remove this line\nfor suite in suites._tests:\n    for cls in suite._tests:\n        try:\n            for m in cls._tests:\n                print(m.id())\n        except:\n            pass`}translateOptions(e){return{...e,startDirectory:this.getStartDirectory(e),pattern:this.getTestPattern(e)}}getStartDirectory(e){const t=this.argsHelper.getOptionValues(e.args,"-s");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e.args,"--start-directory");return"string"==typeof n?n:"."}getTestPattern(e){const t=this.argsHelper.getOptionValues(e.args,"-p");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e.args,"--pattern");return"string"==typeof n?n:"test*.py"}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(l.ITestsParser)),i(1,o.named(c.UNITTEST_PROVIDER))],d),t.TestDiscoveryService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TestsParser=void 0;const o=n(0),s=n(4),a=n(2),c=n(17);let l=class{constructor(e){this.testsHelper=e}parse(e,t){const n=this.getTestIds(e);let r=t.cwd;return t.startDirectory.length>1&&(r=s.isAbsolute(t.startDirectory)?t.startDirectory:s.resolve(t.cwd,t.startDirectory)),this.parseTestIds(t.cwd,r,n)}getTestIds(e){let t=!1;return e.split(/\r?\n/g).map(e=>t?e.trim():("start"===e&&(t=!0),"")).filter(e=>e.length>0)}parseTestIds(e,t,n){const r=[];return n.forEach(e=>this.addTestId(t,e,r)),this.testsHelper.flattenTestFiles(r,e)}addTestId(e,t,n){const r=t.split(".");if(r.length<=2)return null;const i=r.slice(0,r.length-2),o=s.join(e,...i)+".py",l=r.pop(),u=r.join("."),d=r.pop(),h=r.join("."),p=a.Uri.file(e);let f=n.find(e=>e.fullPath===o);f||(f={resource:p,name:s.basename(o),fullPath:o,functions:[],suites:[],nameToRun:h,xmlName:"",status:c.TestStatus.Idle,time:0},n.push(f));let g=f.suites.find(e=>e.nameToRun===u);g||(g={resource:p,name:d,functions:[],suites:[],isUnitTest:!0,isInstance:!1,nameToRun:u,xmlName:"",status:c.TestStatus.Idle,time:0},f.suites.push(g));const m={resource:p,name:l,nameToRun:t,status:c.TestStatus.Idle,time:0};g.functions.push(m)}};l=r([o.injectable(),i(0,o.inject(c.ITestsHelper))],l),t.TestsParser=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.UnitTestSocketServer=void 0;const i=n(72),o=n(0),s=n(187),a=n(15);let c=class extends i.EventEmitter{constructor(){super(),this.sockets=[],this.ipcBuffer=""}get clientsConnected(){return this.sockets.length>0}dispose(){this.stop()}stop(){this.server&&(this.server.close(),this.server=void 0)}start(e={port:0,host:"localhost"}){return this.ipcBuffer="",this.startedDef=a.createDeferred(),this.server=s.createServer(this.connectionListener.bind(this)),this.server.maxConnections=100,this.server.on("error",e=>{this.startedDef&&(this.startedDef.reject(e),this.startedDef=void 0),this.emit("error",e)}),this.log("starting server as","TCP"),e.port="number"==typeof e.port?e.port:0,e.host="string"==typeof e.host&&e.host.trim().length>0?e.host.trim():"localhost",this.server.listen(e,e=>{this.startedDef.resolve(this.server.address().port),this.startedDef=void 0,this.emit("start",e)}),this.startedDef.promise}connectionListener(e){this.sockets.push(e),e.setEncoding("utf8"),this.log("## socket connection to server detected ##"),e.on("close",()=>{this.ipcBuffer="",this.onCloseSocket()}),e.on("error",e=>{this.log("server socket error",e),this.emit("error",e)}),e.on("data",t=>{const n=e;let r=this.ipcBuffer+=t;for(;;){const e=r.indexOf("{");if(-1===e)return;const t=parseInt(r.slice(r.indexOf(":")+1,r.indexOf("{")).trim(),10);if(r.length<e+t)return;let i;try{i=JSON.parse(r.substring(e,t+e))}catch(e){return void this.emit("error",e)}r=this.ipcBuffer=r.substring(e+t),this.emit(i.event,i.body,n)}}),this.emit("connect",e)}log(e,...t){this.emit("log",e,...t)}onCloseSocket(){for(let e=0,t=this.sockets.length;e<t;e+=1){const t=this.sockets[e];let n=!1;if(!t||!t.readable)return t.id&&(n=t.id),this.log("socket disconnected",n.toString()),t&&t.destroy&&t.destroy(),this.sockets.splice(e,1),void this.emit("socket.disconnected",t,n)}}};c=r([o.injectable()],c),t.UnitTestSocketServer=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeComponents=t.initializeCommon=t.initializeGlobals=void 0;const r=n(0),i=n(1002),o=n(1),s=n(1107),a=n(1108),c=n(8),l=n(1109);t.initializeGlobals=function(e){const t=new r.Container,n=new a.ServiceManager(t),i=new s.ServiceContainer(t);return n.addSingletonInstance(c.IServiceContainer,i),n.addSingletonInstance(c.IServiceManager,n),n.addSingletonInstance(o.IDisposableRegistry,e.subscriptions),n.addSingletonInstance(o.IMemento,e.globalState,o.GLOBAL_MEMENTO),n.addSingletonInstance(o.IMemento,e.workspaceState,o.WORKSPACE_MEMENTO),n.addSingletonInstance(o.IExtensionContext,e),[n,i]},t.initializeCommon=function(e,t,n){i.registerTypes(t)},t.initializeComponents=function(e,t,n){l.activate(t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(16),i=n(1),o=n(1003),s=n(1004),a=n(1012),c=n(1013),l=n(1014),u=n(1016),d=n(1017),h=n(1018),p=n(1019),f=n(1020),g=n(350),m=n(1021),v=n(1022),y=n(1023),b=n(1024),S=n(1025),E=n(1026),w=n(3),_=n(377),P=n(1027),C=n(1028),T=n(1029),I=n(143),O=n(1031),R=n(1032),D=n(1033),x=n(1071),k=n(1072),A=n(1073),N=n(1074),j=n(1075),F=n(230),M=n(222),L=n(1076),U=n(389),W=n(1077),B=n(1079),V=n(1080),H=n(138),q=n(1081),G=n(86),$=n(1082),K=n(1083),z=n(1084),Y=n(18),J=n(1085),X=n(1086),Q=n(1090),Z=n(148),ee=n(1091),te=n(1093),ne=n(364),re=n(368),ie=n(1094),oe=n(1095),se=n(1096),ae=n(1097),ce=n(1100),le=n(1102),ue=n(1103),de=n(1104),he=n(1105),pe=n(25),fe=n(1),ge=n(218),me=n(1106);t.registerTypes=function(e){e.addSingletonInstance(fe.IsWindows,G.IS_WINDOWS),e.addSingleton(w.IActiveResourceService,c.ActiveResourceService),e.addSingleton(i.IInterpreterPathService,L.InterpreterPathService),e.addSingleton(fe.IExtensions,y.Extensions),e.addSingleton(fe.IRandom,me.Random),e.addSingleton(fe.IPersistentStateFactory,q.PersistentStateFactory),e.addSingleton(pe.ITerminalServiceFactory,ae.TerminalServiceFactory),e.addSingleton(fe.IPathUtils,$.PathUtils),e.addSingleton(w.IApplicationShell,u.ApplicationShell),e.addSingleton(w.IVSCodeNotebook,S.VSCodeNotebook),e.addSingleton(w.IClipboard,d.ClipboardService),e.addSingleton(fe.ICurrentProcess,K.CurrentProcess),e.addSingleton(fe.IInstaller,M.ProductInstaller),e.addSingleton(w.IJupyterExtensionDependencyManager,o.JupyterExtensionDependencyManager),e.addSingleton(w.ICommandManager,h.CommandManager),e.addSingleton(fe.IConfigurationService,C.ConfigurationService),e.addSingleton(w.IWorkspaceService,_.WorkspaceService),e.addSingleton(Y.IProcessLogger,z.ProcessLogger),e.addSingleton(w.IDocumentManager,v.DocumentManager),e.addSingleton(w.ITerminalManager,E.TerminalManager),e.addSingleton(w.IDebugService,g.DebugService),e.addSingleton(w.IApplicationEnvironment,l.ApplicationEnvironment),e.addSingleton(w.ILanguageService,b.LanguageService),e.addSingleton(fe.IBrowserService,U.BrowserService),e.addSingleton(i.IHttpClient,B.HttpClient),e.addSingleton(i.IFileDownloader,W.FileDownloader),e.addSingleton(fe.IEditorUtils,I.EditorUtils),e.addSingleton(H.INugetService,V.NugetService),e.addSingleton(pe.ITerminalActivator,ee.TerminalActivator),e.addSingleton(pe.ITerminalActivationHandler,te.PowershellTerminalActivationFailedHandler),e.addSingleton(fe.ICryptoUtils,T.CryptoUtils),e.addSingleton(fe.IExperimentsManager,R.ExperimentsManager),e.addSingleton(i.IExperimentService,D.ExperimentService),e.addSingleton(pe.ITerminalHelper,ce.TerminalHelper),e.addSingleton(pe.ITerminalActivationCommandProvider,ne.Bash,pe.TerminalActivationProviders.bashCShellFish),e.addSingleton(pe.ITerminalActivationCommandProvider,re.CommandPromptAndPowerShell,pe.TerminalActivationProviders.commandPromptAndPowerShell),e.addSingleton(pe.ITerminalActivationCommandProvider,se.PyEnvActivationCommandProvider,pe.TerminalActivationProviders.pyenv),e.addSingleton(pe.ITerminalActivationCommandProvider,ie.CondaActivationCommandProvider,pe.TerminalActivationProviders.conda),e.addSingleton(pe.ITerminalActivationCommandProvider,oe.PipEnvActivationCommandProvider,pe.TerminalActivationProviders.pipenv),e.addSingleton(fe.IFeatureDeprecationManager,x.FeatureDeprecationManager),e.addSingleton(fe.IAsyncDisposableRegistry,P.AsyncDisposableRegistry),e.addSingleton(ge.IMultiStepInputFactory,ge.MultiStepInputFactory),e.addSingleton(a.IImportTracker,s.ImportTracker),e.addBinding(a.IImportTracker,r.IExtensionSingleActivationService),e.addSingleton(pe.IShellDetector,ue.TerminalNameShellDetector),e.addSingleton(pe.IShellDetector,le.SettingsShellDetector),e.addSingleton(pe.IShellDetector,de.UserEnvironmentShellDetector),e.addSingleton(pe.IShellDetector,he.VSCEnvironmentShellDetector),e.addSingleton(F.IInsiderExtensionPrompt,N.InsidersExtensionPrompt),e.addSingleton(r.IExtensionSingleActivationService,j.InsidersExtensionService),e.addSingleton(r.IExtensionSingleActivationService,p.ReloadVSCodeCommandHandler),e.addSingleton(r.IExtensionSingleActivationService,O.DebuggerDataViewerExperimentEnabler),e.addSingleton(F.IExtensionChannelService,A.ExtensionChannelService),e.addSingleton(F.IExtensionChannelRule,k.ExtensionInsidersOffChannelRule,F.ExtensionChannel.off),e.addSingleton(F.IExtensionChannelRule,k.ExtensionInsidersDailyChannelRule,F.ExtensionChannel.daily),e.addSingleton(F.IExtensionChannelRule,k.ExtensionInsidersWeeklyChannelRule,F.ExtensionChannel.weekly),e.addSingleton(r.IExtensionSingleActivationService,m.DebugSessionTelemetry),e.addSingleton(w.ICustomEditorService,f.CustomEditorService),e.addSingleton(Z.IStartPage,X.StartPage,void 0,[r.IExtensionSingleActivationService]),e.addSingleton(Z.ICodeCssGenerator,J.CodeCssGenerator),e.addSingleton(Z.IThemeFinder,Q.ThemeFinder)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JupyterExtensionDependencyManager=void 0;const o=n(0),s=n(3),a=n(10),c=n(1),l=n(13);let u=class{constructor(e,t,n){this.extensions=e,this.appShell=t,this.appEnv=n}get isJupyterExtensionInstalled(){return void 0!==this.extensions.getExtension(a.JUPYTER_EXTENSION_ID)}async installJupyterExtension(){const e=l.Common.bannerLabelYes(),t=l.Common.bannerLabelNo();await this.appShell.showErrorMessage(l.Jupyter.jupyterExtensionRequired(),e,t)===e&&this.appShell.openUrl(`${this.appEnv.uriScheme}:extension/${a.JUPYTER_EXTENSION_ID}`)}};u=r([o.injectable(),i(0,o.inject(c.IExtensions)),i(1,o.inject(s.IApplicationShell)),i(2,o.inject(s.IApplicationEnvironment))],u),t.JupyterExtensionDependencyManager=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportTracker=void 0;const o=n(0),s=n(4),a=n(7),c=n(3),l=n(10);n(11);const u=n(14),d=n(9),h=/^\s*(from (?<fromImport>\w+)(?:\.\w+)* import \w+(?:, \w+)*(?: as \w+)?|import (?<importImport>\w+(?:, \w+)*)(?: as \w+)?)$/,p=l.isTestExecution();let f=class{constructor(e){this.documentManager=e,this.pendingChecks=new Map,this.sentMatches=new Set,this.hashFn=n(1005).sha256,this.documentManager.onDidOpenTextDocument(e=>this.onOpenedOrSavedDocument(e)),this.documentManager.onDidSaveTextDocument(e=>this.onOpenedOrSavedDocument(e))}dispose(){this.pendingChecks.clear()}async activate(){this.documentManager.textDocuments.forEach(e=>this.onOpenedOrSavedDocument(e))}getDocumentLines(e){return Array(Math.min(e.lineCount,1e3)).fill("").map((t,n)=>{const r=e.lineAt(n);if(r&&!r.isEmptyOrWhitespace)return r.text}).filter(e=>e)}onOpenedOrSavedDocument(e){".py"===s.extname(e.fileName)&&this.scheduleDocument(e)}scheduleDocument(e){this.scheduleCheck(e.fileName,this.checkDocument.bind(this,e))}scheduleCheck(e,t){const n=this.pendingChecks.get(e);n&&(clearTimeout(n),this.pendingChecks.delete(e)),p?t():this.pendingChecks.set(e,setTimeout(t,5e3))}checkDocument(e){this.pendingChecks.delete(e.fileName);const t=this.getDocumentLines(e);this.lookForImports(t)}sendTelemetry(e){if(this.sentMatches.has(e))return;this.sentMatches.add(e);const t=this.hashFn().update(e).digest("hex");a.sendTelemetryEvent(d.EventName.HASHED_PACKAGE_NAME,void 0,{hashedName:t})}lookForImports(e){try{for(const t of e){const e=t?h.exec(t):null;if(null!==e&&void 0!==e.groups)if(void 0!==e.groups.fromImport)this.sendTelemetry(e.groups.fromImport);else if(void 0!==e.groups.importImport){e.groups.importImport.split(",").map(e=>e.trim()).forEach(e=>this.sendTelemetry(e))}}}catch(e){u.noop()}}};r([a.captureTelemetry(d.EventName.HASHED_PACKAGE_PERF)],f.prototype,"checkDocument",null),f=r([o.injectable(),i(0,o.inject(c.IDocumentManager))],f),t.ImportTracker=f},function(e,t,n){var r=t;r.utils=n(64),r.common=n(118),r.sha=n(1006),r.ripemd=n(1010),r.hmac=n(1011),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t,n){"use strict";t.sha1=n(1007),t.sha224=n(1008),t.sha256=n(375),t.sha384=n(1009),t.sha512=n(376)},function(e,t,n){"use strict";var r=n(64),i=n(118),o=n(374),s=r.rotl32,a=r.sum32,c=r.sum32_5,l=o.ft_1,u=i.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(h,u),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=s(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4];for(r=0;r<n.length;r++){var f=~~(r/20),g=c(s(i,5),l(f,o,u,h),p,n[r],d[f]);p=h,h=u,u=s(o,30),o=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],h),this.h[4]=a(this.h[4],p)},h.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,n){"use strict";var r=n(64),i=n(375);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var r=n(64),i=n(376);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var r=n(64),i=n(118),o=r.rotl32,s=r.sum32,a=r.sum32_3,c=r.sum32_4,l=i.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],l=this.h[3],u=this.h[4],y=n,b=r,S=i,E=l,w=u,_=0;_<80;_++){var P=s(o(c(n,d(_,r,i,l),e[f[_]+t],h(_)),m[_]),u);n=u,u=l,l=o(i,10),i=r,r=P,P=s(o(c(y,d(79-_,b,S,E),e[g[_]+t],p(_)),v[_]),w),y=w,w=E,E=o(S,10),S=b,b=P}P=a(this.h[1],i,E),this.h[1]=a(this.h[2],l,w),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],n,b),this.h[4]=a(this.h[0],r,S),this.h[0]=P},u.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var r=n(64),i=n(117);function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IImportTracker=void 0,t.IImportTracker=Symbol("IImportTracker")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveResourceService=void 0;const o=n(0),s=n(3);let a=class{constructor(e,t){this.documentManager=e,this.workspaceService=t}getActiveResource(){const e=this.documentManager.activeTextEditor;return e&&!e.document.isUntitled?e.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0}};a=r([o.injectable(),i(0,o.inject(s.IDocumentManager)),i(1,o.inject(s.IWorkspaceService))],a),t.ActiveResourceService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const o=n(0),s=n(4),a=n(38),c=n(2),l=n(6),u=n(1),d=n(27);let h=class{constructor(e,t,n){this.platform=e,this.pathUtils=t,this.process=n}get userSettingsFile(){const e="insiders"===this.channel?"Code - Insiders":"Code";switch(this.platform.osType){case d.OSType.OSX:return s.join(this.pathUtils.home,"Library","Application Support",e,"User","settings.json");case d.OSType.Linux:return s.join(this.pathUtils.home,".config",e,"User","settings.json");case d.OSType.Windows:return this.process.env.APPDATA?s.join(this.process.env.APPDATA,e,"User","settings.json"):void 0;default:return}}get appName(){return c.env.appName}get vscodeVersion(){return c.version}get appRoot(){return c.env.appRoot}get language(){return c.env.language}get sessionId(){return c.env.sessionId}get machineId(){return c.env.machineId}get extensionName(){return this.packageJson.displayName}get shell(){return c.env.shell}get packageJson(){return n(1015)}get channel(){return this.appName.indexOf("Insider")>0?"insiders":"stable"}get extensionChannel(){const e=a.parse(this.packageJson.version);return!e||e.prerelease.length>0?"insiders":"stable"}get uriScheme(){return c.env.uriScheme}};h=r([o.injectable(),i(0,o.inject(l.IPlatformService)),i(1,o.inject(u.IPathUtils)),i(2,o.inject(u.ICurrentProcess))],h),t.ApplicationEnvironment=h},function(e){e.exports=JSON.parse('{"name":"python","displayName":"Python","description":"Linting, Debugging (multi-threaded, remote), Intellisense, Jupyter Notebooks, code formatting, refactoring, unit tests, snippets, and more.","version":"2020.11.371526539","featureFlags":{"usingNewInterpreterStorage":true},"languageServerVersion":"0.5.30","publisher":"ms-python","enableProposedApi":true,"author":{"name":"Microsoft Corporation"},"license":"MIT","homepage":"https://github.com/Microsoft/vscode-python","repository":{"type":"git","url":"https://github.com/Microsoft/vscode-python"},"bugs":{"url":"https://github.com/Microsoft/vscode-python/issues"},"qna":"https://stackoverflow.com/questions/tagged/visual-studio-code+python","icon":"icon.png","galleryBanner":{"color":"#1e415e","theme":"dark"},"engines":{"vscode":"^1.49.0"},"keywords":["python","django","unittest","multi-root ready"],"categories":["Programming Languages","Debuggers","Linters","Snippets","Formatters","Other","Extension Packs","Data Science","Machine Learning","Notebooks"],"activationEvents":["onLanguage:python","onDebugResolve:python","onCommand:python.execInTerminal","onCommand:python.sortImports","onCommand:python.runtests","onCommand:python.debugtests","onCommand:python.setInterpreter","onCommand:python.setShebangInterpreter","onCommand:python.viewTestUI","onCommand:python.viewLanguageServerOutput","onCommand:python.viewTestOutput","onCommand:python.viewOutput","onCommand:python.selectAndRunTestMethod","onCommand:python.selectAndDebugTestMethod","onCommand:python.selectAndRunTestFile","onCommand:python.runCurrentTestFile","onCommand:python.runFailedTests","onCommand:python.execSelectionInTerminal","onCommand:python.execSelectionInDjangoShell","onCommand:python.buildWorkspaceSymbols","onCommand:python.startREPL","onCommand:python.goToPythonObject","onCommand:python.setLinter","onCommand:python.enableLinting","onCommand:python.createTerminal","onCommand:python.discoverTests","onCommand:python.configureTests","onCommand:python.switchOffInsidersChannel","onCommand:python.switchToDailyChannel","onCommand:python.switchToWeeklyChannel","onCommand:python.clearWorkspaceInterpreter","onCommand:python.resetInterpreterSecurityStorage","onCommand:python.startPage.open","onCommand:python.enableSourceMapSupport","workspaceContains:mspythonconfig.json","workspaceContains:pyproject.toml"],"main":"./out/client/extension","contributes":{"snippets":[{"language":"python","path":"./snippets/python.json"}],"keybindings":[{"command":"python.execSelectionInTerminal","key":"shift+enter","when":"editorTextFocus && editorLangId == python && !findInputFocussed && !replaceInputFocussed && !jupyter.ownsSelection"}],"commands":[{"command":"python.enableSourceMapSupport","title":"%python.command.python.enableSourceMapSupport.title%","category":"Python"},{"command":"python.sortImports","title":"%python.command.python.sortImports.title%","category":"Python Refactor"},{"command":"python.startREPL","title":"%python.command.python.startREPL.title%","category":"Python"},{"command":"python.createTerminal","title":"%python.command.python.createTerminal.title%","category":"Python"},{"command":"python.buildWorkspaceSymbols","title":"%python.command.python.buildWorkspaceSymbols.title%","category":"Python"},{"command":"python.openTestNodeInEditor","title":"Open","icon":{"light":"resources/light/open-file.svg","dark":"resources/dark/open-file.svg"}},{"command":"python.runTestNode","title":"Run","icon":{"light":"resources/light/start.svg","dark":"resources/dark/start.svg"}},{"command":"python.debugTestNode","title":"Debug","icon":{"light":"resources/light/debug.svg","dark":"resources/dark/debug.svg"}},{"command":"python.runtests","title":"%python.command.python.runtests.title%","category":"Python","icon":{"light":"resources/light/run-tests.svg","dark":"resources/dark/run-tests.svg"}},{"command":"python.debugtests","title":"%python.command.python.debugtests.title%","category":"Python","icon":{"light":"resources/light/debug.svg","dark":"resources/dark/debug.svg"}},{"command":"python.execInTerminal","title":"%python.command.python.execInTerminal.title%","category":"Python"},{"command":"python.execInTerminal-icon","title":"%python.command.python.execInTerminal.title%","category":"Python","icon":{"light":"resources/light/run-file.svg","dark":"resources/dark/run-file.svg"}},{"command":"python.setInterpreter","title":"%python.command.python.setInterpreter.title%","category":"Python"},{"command":"python.switchOffInsidersChannel","title":"%python.command.python.switchOffInsidersChannel.title%","category":"Python"},{"command":"python.switchToDailyChannel","title":"%python.command.python.switchToDailyChannel.title%","category":"Python"},{"command":"python.switchToWeeklyChannel","title":"%python.command.python.switchToWeeklyChannel.title%","category":"Python"},{"command":"python.clearWorkspaceInterpreter","title":"%python.command.python.clearWorkspaceInterpreter.title%","category":"Python"},{"command":"python.resetInterpreterSecurityStorage","title":"%python.command.python.resetInterpreterSecurityStorage.title%","category":"Python"},{"command":"python.refactorExtractVariable","title":"%python.command.python.refactorExtractVariable.title%","category":"Python Refactor"},{"command":"python.refactorExtractMethod","title":"%python.command.python.refactorExtractMethod.title%","category":"Python Refactor"},{"command":"python.viewTestOutput","title":"%python.command.python.viewTestOutput.title%","category":"Python","icon":{"light":"resources/light/repl.svg","dark":"resources/dark/repl.svg"}},{"command":"python.viewLanguageServerOutput","title":"%python.command.python.viewLanguageServerOutput.title%","category":"Python","enablement":"python.hasLanguageServerOutputChannel"},{"command":"python.viewOutput","title":"%python.command.python.viewOutput.title%","category":"Python","icon":{"light":"resources/light/repl.svg","dark":"resources/dark/repl.svg"}},{"command":"python.selectAndRunTestMethod","title":"%python.command.python.selectAndRunTestMethod.title%","category":"Python"},{"command":"python.selectAndDebugTestMethod","title":"%python.command.python.selectAndDebugTestMethod.title%","category":"Python"},{"command":"python.selectAndRunTestFile","title":"%python.command.python.selectAndRunTestFile.title%","category":"Python"},{"command":"python.runCurrentTestFile","title":"%python.command.python.runCurrentTestFile.title%","category":"Python"},{"command":"python.runFailedTests","title":"%python.command.python.runFailedTests.title%","category":"Python","icon":{"light":"resources/light/run-failed-tests.svg","dark":"resources/dark/run-failed-tests.svg"}},{"command":"python.discoverTests","title":"%python.command.python.discoverTests.title%","category":"Python","icon":{"light":"resources/light/refresh.svg","dark":"resources/dark/refresh.svg"}},{"command":"python.discoveringTests","title":"%python.command.python.discoveringTests.title%","category":"Python","icon":{"light":"resources/light/discovering-tests.svg","dark":"resources/dark/discovering-tests.svg"}},{"command":"python.stopTests","title":"%python.command.python.stopTests.title%","category":"Python","icon":{"light":"resources/light/stop.svg","dark":"resources/dark/stop.svg"}},{"command":"python.configureTests","title":"%python.command.python.configureTests.title%","category":"Python"},{"command":"python.execSelectionInTerminal","title":"%python.command.python.execSelectionInTerminal.title%","category":"Python"},{"command":"python.execSelectionInDjangoShell","title":"%python.command.python.execSelectionInDjangoShell.title%","category":"Python"},{"command":"python.goToPythonObject","title":"%python.command.python.goToPythonObject.title%","category":"Python"},{"command":"python.setLinter","title":"%python.command.python.setLinter.title%","category":"Python"},{"command":"python.enableLinting","title":"%python.command.python.enableLinting.title%","category":"Python"},{"command":"python.runLinting","title":"%python.command.python.runLinting.title%","category":"Python"},{"command":"python.startPage.open","title":"%python.command.python.startPage.open.title%","category":"Python"},{"command":"python.analysis.clearCache","title":"%python.command.python.analysis.clearCache.title%","category":"Python"},{"command":"python.analysis.restartLanguageServer","title":"%python.command.python.analysis.restartLanguageServer.title%","category":"Python"}],"menus":{"editor/context":[{"command":"python.refactorExtractVariable","title":"Refactor: Extract Variable","group":"Refactor","when":"editorHasSelection && editorLangId == python && !notebookEditorFocused"},{"command":"python.refactorExtractMethod","title":"Refactor: Extract Method","group":"Refactor","when":"editorHasSelection && editorLangId == python && !notebookEditorFocused"},{"command":"python.sortImports","title":"Refactor: Sort Imports","group":"Refactor","when":"editorLangId == python && !notebookEditorFocused"},{"command":"python.execSelectionInTerminal","group":"Python","when":"editorFocus && editorLangId == python"},{"command":"python.execSelectionInDjangoShell","group":"Python","when":"editorHasSelection && editorLangId == python && python.isDjangoProject"},{"when":"resourceLangId == python","command":"python.execInTerminal","group":"Python"},{"when":"resourceLangId == python","command":"python.runCurrentTestFile","group":"Python"}],"editor/title":[{"command":"python.execInTerminal-icon","title":"%python.command.python.execInTerminal.title%","group":"navigation","when":"resourceLangId == python && python.showPlayIcon"}],"explorer/context":[{"when":"resourceLangId == python && !busyTests && !notebookEditorFocused","command":"python.runtests","group":"Python"},{"when":"resourceLangId == python && !busyTests && !notebookEditorFocused","command":"python.debugtests","group":"Python"},{"when":"resourceLangId == python","command":"python.execInTerminal","group":"Python"}],"commandPalette":[{"command":"python.switchOffInsidersChannel","title":"%python.command.python.switchOffInsidersChannel.title%","category":"Python","when":"config.python.insidersChannel != \'default\'"},{"command":"python.switchToDailyChannel","title":"%python.command.python.switchToDailyChannel.title%","category":"Python","when":"config.python.insidersChannel != \'daily\'"},{"command":"python.switchToWeeklyChannel","title":"%python.command.python.switchToWeeklyChannel.title%","category":"Python","when":"config.python.insidersChannel != \'weekly\'"},{"command":"python.clearWorkspaceInterpreter","title":"%python.command.python.clearWorkspaceInterpreter.title%","category":"Python"},{"command":"python.resetInterpreterSecurityStorage","title":"%python.command.python.resetInterpreterSecurityStorage.title%","category":"Python"},{"command":"python.viewOutput","title":"%python.command.python.viewOutput.title%","category":"Python"},{"command":"python.runTestNode","title":"Run","category":"Python","when":"config.noExists"},{"command":"python.discoveringTests","category":"Python","when":"config.noExists"},{"command":"python.stopTests","category":"Python","when":"config.noExists"},{"command":"python.debugTestNode","title":"Debug","category":"Python","when":"config.noExists"},{"command":"python.openTestNodeInEditor","title":"Open","category":"Python","when":"config.noExists"},{"command":"python.startPage.open","title":"%python.command.python.startPage.open.title%","category":"Python"}],"view/title":[{"command":"python.debugtests","when":"view == python_tests && !busyTests","group":"navigation@3"},{"command":"python.runtests","when":"view == python_tests && !busyTests","group":"navigation@1"},{"command":"python.stopTests","when":"view == python_tests && busyTests","group":"navigation@1"},{"command":"python.discoverTests","when":"view == python_tests && !busyTests","group":"navigation@4"},{"command":"python.discoveringTests","when":"view == python_tests && discoveringTests","group":"navigation@4"},{"command":"python.runFailedTests","when":"view == python_tests && hasFailedTests && !busyTests","group":"navigation@2"},{"command":"python.viewTestOutput","when":"view == python_tests","group":"navigation@5"}],"view/item/context":[{"command":"python.runtests","when":"view == python_tests && viewItem == testWorkspaceFolder && !busyTests","group":"inline@0"},{"command":"python.debugtests","when":"view == python_tests && viewItem == testWorkspaceFolder && !busyTests","group":"inline@1"},{"command":"python.discoverTests","when":"view == python_tests && viewItem == testWorkspaceFolder && !busyTests","group":"inline@2"},{"command":"python.openTestNodeInEditor","when":"view == python_tests && viewItem == function","group":"inline@2"},{"command":"python.debugTestNode","when":"view == python_tests && viewItem == function && !busyTests","group":"inline@1"},{"command":"python.runTestNode","when":"view == python_tests && viewItem == function && !busyTests","group":"inline@0"},{"command":"python.openTestNodeInEditor","when":"view == python_tests && viewItem == file","group":"inline@2"},{"command":"python.debugTestNode","when":"view == python_tests && viewItem == file && !busyTests","group":"inline@1"},{"command":"python.runTestNode","when":"view == python_tests && viewItem == file && !busyTests","group":"inline@0"},{"command":"python.openTestNodeInEditor","when":"view == python_tests && viewItem == suite","group":"inline@2"},{"command":"python.debugTestNode","when":"view == python_tests && viewItem == suite && !busyTests","group":"inline@1"},{"command":"python.runTestNode","when":"view == python_tests && viewItem == suite && !busyTests","group":"inline@0"}]},"breakpoints":[{"language":"python"},{"language":"html"},{"language":"jinja"}],"debuggers":[{"type":"python","label":"Python","languages":["python"],"variables":{"pickProcess":"python.pickLocalProcess"},"configurationSnippets":[],"configurationAttributes":{"launch":{"properties":{"module":{"type":"string","description":"Name of the module to be debugged.","default":""},"program":{"type":"string","description":"Absolute path to the program.","default":"${file}"},"python":{"type":"string","description":"Absolute path to the Python interpreter executable; overrides workspace configuration if set.","default":"${command:python.interpreterPath}"},"pythonArgs":{"type":"array","description":"Command-line arguments passed to the Python interpreter. To pass arguments to the debug target, use \\"args\\".","default":[],"items":{"type":"string"}},"args":{"type":"array","description":"Command line arguments passed to the program","default":[],"items":{"type":"string"}},"stopOnEntry":{"type":"boolean","description":"Automatically stop after launch.","default":false},"showReturnValue":{"type":"boolean","description":"Show return value of functions when stepping.","default":true},"console":{"enum":["internalConsole","integratedTerminal","externalTerminal"],"description":"Where to launch the debug target: internal console, integrated terminal, or external terminal.","default":"integratedTerminal"},"cwd":{"type":"string","description":"Absolute path to the working directory of the program being debugged. Default is the root directory of the file (leave empty).","default":"${workspaceFolder}"},"env":{"type":"object","description":"Environment variables defined as a key value pair. Property ends up being the Environment Variable and the value of the property ends up being the value of the Env Variable.","default":{},"additionalProperties":{"type":"string"}},"envFile":{"type":"string","description":"Absolute path to a file containing environment variable definitions.","default":"${workspaceFolder}/.env"},"port":{"type":"number","description":"Debug port (default is 0, resulting in the use of a dynamic port).","default":0},"host":{"type":"string","description":"IP address of the of the local debug server (default is localhost).","default":"localhost"},"pathMappings":{"type":"array","label":"Path mappings.","items":{"type":"object","label":"Path mapping","required":["localRoot","remoteRoot"],"properties":{"localRoot":{"type":"string","label":"Local source root.","default":"${workspaceFolder}"},"remoteRoot":{"type":"string","label":"Remote source root.","default":""}}},"default":[]},"logToFile":{"type":"boolean","description":"Enable logging of debugger events to a log file.","default":false},"redirectOutput":{"type":"boolean","description":"Redirect output.","default":true},"justMyCode":{"type":"boolean","description":"Debug only user-written code.","default":true},"gevent":{"type":"boolean","description":"Enable debugging of gevent monkey-patched code.","default":false},"django":{"type":"boolean","description":"Django debugging.","default":false},"jinja":{"enum":[true,false,null],"description":"Jinja template debugging (e.g. Flask).","default":null},"sudo":{"type":"boolean","description":"Running debug program under elevated permissions (on Unix).","default":false},"pyramid":{"type":"boolean","description":"Whether debugging Pyramid applications","default":false},"subProcess":{"type":"boolean","description":"Whether to enable Sub Process debugging","default":false}}},"test":{"properties":{"pythonPath":{"type":"string","description":"Path (fully qualified) to python executable. Defaults to the value in settings","default":"${command:python.interpreterPath}"},"stopOnEntry":{"type":"boolean","description":"Automatically stop after launch.","default":false},"showReturnValue":{"type":"boolean","description":"Show return value of functions when stepping.","default":true},"console":{"enum":["internalConsole","integratedTerminal","externalTerminal"],"description":"Where to launch the debug target: internal console, integrated terminal, or external terminal.","default":"internalConsole"},"cwd":{"type":"string","description":"Absolute path to the working directory of the program being debugged. Default is the root directory of the file (leave empty).","default":"${workspaceFolder}"},"env":{"type":"object","description":"Environment variables defined as a key value pair. Property ends up being the Environment Variable and the value of the property ends up being the value of the Env Variable.","default":{},"additionalProperties":{"type":"string"}},"envFile":{"type":"string","description":"Absolute path to a file containing environment variable definitions.","default":"${workspaceFolder}/.env"},"redirectOutput":{"type":"boolean","description":"Redirect output.","default":true},"justMyCode":{"type":"boolean","description":"Debug only user-written code.","default":true}}},"attach":{"properties":{"connect":{"type":"object","label":"Attach by connecting to debugpy over a socket.","properties":{"port":{"type":"number","description":"Port to connect to."},"host":{"type":"string","description":"Hostname or IP address to connect to.","default":"127.0.0.1"}},"required":["port"]},"listen":{"type":"object","label":"Attach by listening for incoming socket connection from debugpy","properties":{"port":{"type":"number","description":"Port to listen on."},"host":{"type":"string","description":"Hostname or IP address of the interface to listen on.","default":"127.0.0.1"}},"required":["port"]},"port":{"type":"number","description":"Port to connect to."},"host":{"type":"string","description":"Hostname or IP address to connect to.","default":"127.0.0.1"},"pathMappings":{"type":"array","label":"Path mappings.","items":{"type":"object","label":"Path mapping","required":["localRoot","remoteRoot"],"properties":{"localRoot":{"type":"string","label":"Local source root.","default":"${workspaceFolder}"},"remoteRoot":{"type":"string","label":"Remote source root.","default":""}}},"default":[]},"logToFile":{"type":"boolean","description":"Enable logging of debugger events to a log file.","default":false},"redirectOutput":{"type":"boolean","description":"Redirect output.","default":true},"justMyCode":{"type":"boolean","description":"Debug only user-written code.","default":true},"django":{"type":"boolean","description":"Django debugging.","default":false},"jinja":{"enum":[true,false,null],"description":"Jinja template debugging (e.g. Flask).","default":null},"subProcess":{"type":"boolean","description":"Whether to enable Sub Process debugging","default":false},"showReturnValue":{"type":"boolean","description":"Show return value of functions when stepping.","default":true},"processId":{"anyOf":[{"enum":["${command:pickProcess}"],"description":"Use process picker to select a process to attach, or Process ID as integer.","default":"${command:pickProcess}"},{"type":"integer","description":"ID of the local process to attach to."}]}}}}}],"configuration":{"type":"object","title":"Python","properties":{"python.diagnostics.sourceMapsEnabled":{"type":"boolean","default":false,"description":"Enable source map support for meaningful stack traces in error logs.","scope":"application"},"python.autoComplete.addBrackets":{"type":"boolean","default":false,"description":"Automatically add brackets for functions.","scope":"resource"},"python.autoComplete.extraPaths":{"type":"array","default":[],"description":"List of paths to libraries and the like that need to be imported by auto complete engine. E.g. when using Google App SDK, the paths are not in system path, hence need to be added into this list.","scope":"resource"},"python.autoComplete.showAdvancedMembers":{"type":"boolean","default":true,"description":"Controls appearance of methods with double underscores in the completion list.","scope":"resource"},"python.autoComplete.typeshedPaths":{"type":"array","items":{"type":"string"},"default":[],"description":"Specifies paths to local typeshed repository clone(s) for the Python language server.","scope":"resource"},"python.autoUpdateLanguageServer":{"type":"boolean","default":true,"description":"Automatically update the language server.","scope":"application"},"python.logging.level":{"type":"string","default":"error","enum":["off","error","warn","info","debug"],"description":"The logging level the extension logs at, defaults to \'error\'","scope":"machine"},"python.experiments.enabled":{"type":"boolean","default":true,"description":"Enables/disables A/B tests.","scope":"machine"},"python.defaultInterpreterPath":{"type":"string","default":"python","description":"Path to Python, you can use a custom version of Python by modifying this setting to include the full path.","scope":"machine"},"python.experiments.optInto":{"type":"array","default":[],"items":{"enum":["AlwaysDisplayTestExplorer - experiment","ShowExtensionSurveyPrompt - enabled","Reload - experiment","AA_testing - experiment","LocalZMQKernel - experiment","NativeNotebook - experiment","CustomEditorSupport - experiment","UseTerminalToGetActivatedEnvVars - experiment","CollectLSRequestTiming - experiment","CollectNodeLSRequestTiming - experiment","DeprecatePythonPath - experiment","RunByLine - experiment","tryPylance","jediLSP","debuggerDataViewer","pythonSendEntireLineToREPL","All"]},"description":"List of experiment to opt into. If empty, user is assigned the default experiment groups. See https://github.com/microsoft/vscode-python/wiki/Experiments for more details.","scope":"machine"},"python.experiments.optOutFrom":{"type":"array","default":[],"items":{"enum":["AlwaysDisplayTestExplorer - experiment","ShowExtensionSurveyPrompt - enabled","Reload - experiment","AA_testing - experiment","LocalZMQKernel - experiment","NativeNotebook - experiment","CustomEditorSupport - experiment","UseTerminalToGetActivatedEnvVars - experiment","CollectLSRequestTiming - experiment","CollectNodeLSRequestTiming - experiment","DeprecatePythonPath - experiment","RunByLine - experiment","tryPylance","jediLSP","debuggerDataViewer","pythonSendEntireLineToREPL","All"]},"description":"List of experiment to opt out of. If empty, user is assigned the default experiment groups. See https://github.com/microsoft/vscode-python/wiki/Experiments for more details.","scope":"machine"},"python.disableInstallationCheck":{"type":"boolean","default":false,"description":"Whether to check if Python is installed (also warn when using the macOS-installed Python).","scope":"resource"},"python.envFile":{"type":"string","description":"Absolute path to a file containing environment variable definitions.","default":"${workspaceFolder}/.env","scope":"resource"},"python.formatting.autopep8Args":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.formatting.autopep8Path":{"type":"string","default":"autopep8","description":"Path to autopep8, you can use a custom version of autopep8 by modifying this setting to include the full path.","scope":"resource"},"python.formatting.provider":{"type":"string","default":"autopep8","description":"Provider for formatting. Possible options include \'autopep8\', \'black\', and \'yapf\'.","enum":["autopep8","black","yapf","none"],"scope":"resource"},"python.formatting.blackArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.formatting.blackPath":{"type":"string","default":"black","description":"Path to Black, you can use a custom version of Black by modifying this setting to include the full path.","scope":"resource"},"python.formatting.yapfArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.formatting.yapfPath":{"type":"string","default":"yapf","description":"Path to yapf, you can use a custom version of yapf by modifying this setting to include the full path.","scope":"resource"},"python.globalModuleInstallation":{"type":"boolean","default":false,"description":"Whether to install Python modules globally when not using an environment.","scope":"resource"},"python.jediMemoryLimit":{"type":"number","default":0,"description":"Memory limit for the Jedi completion engine in megabytes. Zero (default) means 1024 MB. -1 means unlimited (disable memory limit check)","scope":"resource"},"python.jediPath":{"type":"string","default":"","description":"Path to directory containing the Jedi library (this path will contain the \'Jedi\' sub directory). Note: since Jedi depends on Parso, if using this setting you will need to ensure a suitable version of Parso is available.","scope":"resource"},"python.languageServer":{"type":"string","enum":["Jedi","Pylance","Microsoft","None"],"default":"Jedi","description":"Defines type of the language server.","scope":"window"},"python.analysis.diagnosticPublishDelay":{"type":"integer","default":1000,"description":"Delay before diagnostic messages are transferred to the problems list (in milliseconds).","scope":"resource"},"python.analysis.errors":{"type":"array","default":[],"items":{"type":"string"},"description":"List of diagnostics messages to be shown as errors.","scope":"resource"},"python.analysis.warnings":{"type":"array","default":[],"items":{"type":"string"},"description":"List of diagnostics messages to be shown as warnings.","scope":"resource"},"python.analysis.information":{"type":"array","default":[],"items":{"type":"string"},"description":"List of diagnostics messages to be shown as information.","scope":"resource"},"python.analysis.disabled":{"type":"array","default":[],"items":{"type":"string"},"description":"List of suppressed diagnostic messages.","scope":"resource"},"python.analysis.typeshedPaths":{"type":"array","default":[],"items":{"type":"string"},"description":"Paths to Typeshed stub folders. Default is Typeshed installed with the language server. Change requires restart.","scope":"resource"},"python.analysis.cacheFolderPath":{"type":"string","description":"Path to a writable folder where analyzer can cache its data. Change requires restart.","scope":"resource"},"python.analysis.memory.keepLibraryAst":{"type":"boolean","default":false,"description":"Allows code analysis to keep parser trees in memory. Increases memory consumption but may improve performance with large library analysis.","scope":"resource"},"python.analysis.logLevel":{"type":"string","enum":["Error","Warning","Information","Trace"],"default":"Error","description":"Defines type of log messages language server writes into the output window.","scope":"resource"},"python.analysis.symbolsHierarchyDepthLimit":{"type":"integer","default":10,"description":"Limits depth of the symbol tree in the document outline.","scope":"resource"},"python.linting.enabled":{"type":"boolean","default":true,"description":"Whether to lint Python files.","scope":"resource"},"python.linting.flake8Args":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.flake8CategorySeverity.E":{"type":"string","default":"Error","description":"Severity of Flake8 message type \'E\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.flake8CategorySeverity.F":{"type":"string","default":"Error","description":"Severity of Flake8 message type \'F\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.flake8CategorySeverity.W":{"type":"string","default":"Warning","description":"Severity of Flake8 message type \'W\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.flake8Enabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using flake8","scope":"resource"},"python.linting.flake8Path":{"type":"string","default":"flake8","description":"Path to flake8, you can use a custom version of flake8 by modifying this setting to include the full path.","scope":"resource"},"python.linting.ignorePatterns":{"type":"array","description":"Patterns used to exclude files or folders from being linted.","default":[".vscode/*.py","**/site-packages/**/*.py"],"items":{"type":"string"},"scope":"resource"},"python.linting.lintOnSave":{"type":"boolean","default":true,"description":"Whether to lint Python files when saved.","scope":"resource"},"python.linting.maxNumberOfProblems":{"type":"number","default":100,"description":"Controls the maximum number of problems produced by the server.","scope":"resource"},"python.linting.banditArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.banditEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using bandit.","scope":"resource"},"python.linting.banditPath":{"type":"string","default":"bandit","description":"Path to bandit, you can use a custom version of bandit by modifying this setting to include the full path.","scope":"resource"},"python.linting.mypyArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":["--ignore-missing-imports","--follow-imports=silent","--show-column-numbers"],"items":{"type":"string"},"scope":"resource"},"python.linting.mypyCategorySeverity.error":{"type":"string","default":"Error","description":"Severity of Mypy message type \'Error\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.mypyCategorySeverity.note":{"type":"string","default":"Information","description":"Severity of Mypy message type \'Note\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.mypyEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using mypy.","scope":"resource"},"python.linting.mypyPath":{"type":"string","default":"mypy","description":"Path to mypy, you can use a custom version of mypy by modifying this setting to include the full path.","scope":"resource"},"python.linting.pycodestyleArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.pycodestyleCategorySeverity.E":{"type":"string","default":"Error","description":"Severity of pycodestyle message type \'E\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pycodestyleCategorySeverity.W":{"type":"string","default":"Warning","description":"Severity of pycodestyle message type \'W\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pycodestyleEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using pycodestyle","scope":"resource"},"python.linting.pycodestylePath":{"type":"string","default":"pycodestyle","description":"Path to pycodestyle, you can use a custom version of pycodestyle by modifying this setting to include the full path.","scope":"resource"},"python.linting.prospectorArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.prospectorEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using prospector.","scope":"resource"},"python.linting.prospectorPath":{"type":"string","default":"prospector","description":"Path to Prospector, you can use a custom version of prospector by modifying this setting to include the full path.","scope":"resource"},"python.linting.pydocstyleArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.pydocstyleEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using pydocstyle","scope":"resource"},"python.linting.pydocstylePath":{"type":"string","default":"pydocstyle","description":"Path to pydocstyle, you can use a custom version of pydocstyle by modifying this setting to include the full path.","scope":"resource"},"python.linting.pylamaArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.pylamaEnabled":{"type":"boolean","default":false,"description":"Whether to lint Python files using pylama.","scope":"resource"},"python.linting.pylamaPath":{"type":"string","default":"pylama","description":"Path to pylama, you can use a custom version of pylama by modifying this setting to include the full path.","scope":"resource"},"python.linting.pylintArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.linting.pylintCategorySeverity.convention":{"type":"string","default":"Information","description":"Severity of Pylint message type \'Convention/C\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pylintCategorySeverity.error":{"type":"string","default":"Error","description":"Severity of Pylint message type \'Error/E\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pylintCategorySeverity.fatal":{"type":"string","default":"Error","description":"Severity of Pylint message type \'Fatal/F\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pylintCategorySeverity.refactor":{"type":"string","default":"Hint","description":"Severity of Pylint message type \'Refactor/R\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pylintCategorySeverity.warning":{"type":"string","default":"Warning","description":"Severity of Pylint message type \'Warning/W\'.","enum":["Hint","Error","Information","Warning"],"scope":"resource"},"python.linting.pylintEnabled":{"type":"boolean","default":true,"description":"Whether to lint Python files using pylint.","scope":"resource"},"python.linting.pylintPath":{"type":"string","default":"pylint","description":"Path to Pylint, you can use a custom version of pylint by modifying this setting to include the full path.","scope":"resource"},"python.linting.pylintUseMinimalCheckers":{"type":"boolean","default":true,"description":"Whether to run Pylint with minimal set of rules.","scope":"resource"},"python.pythonPath":{"type":"string","default":"python","description":"Path to Python, you can use a custom version of Python by modifying this setting to include the full path.","scope":"resource"},"python.condaPath":{"type":"string","default":"","description":"Path to the conda executable to use for activation (version 4.4+).","scope":"resource"},"python.pipenvPath":{"type":"string","default":"pipenv","description":"Path to the pipenv executable to use for activation.","scope":"resource"},"python.poetryPath":{"type":"string","default":"poetry","description":"Path to the poetry executable.","scope":"resource"},"python.sortImports.args":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.sortImports.path":{"type":"string","description":"Path to isort script, default using inner version","default":"","scope":"resource"},"python.terminal.activateEnvironment":{"type":"boolean","default":true,"description":"Activate Python Environment in Terminal created using the Extension.","scope":"resource"},"python.terminal.executeInFileDir":{"type":"boolean","default":false,"description":"When executing a file in the terminal, whether to use execute in the file\'s directory, instead of the current open folder.","scope":"resource"},"python.terminal.launchArgs":{"type":"array","default":[],"description":"Python launch arguments to use when executing a file in the terminal.","scope":"resource"},"python.terminal.activateEnvInCurrentTerminal":{"type":"boolean","default":false,"description":"Activate Python Environment in the current Terminal on load of the Extension.","scope":"resource"},"python.testing.cwd":{"type":"string","default":null,"description":"Optional working directory for tests.","scope":"resource"},"python.testing.debugPort":{"type":"number","default":3000,"description":"Port number used for debugging of tests.","scope":"resource"},"python.testing.nosetestArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.testing.nosetestsEnabled":{"type":"boolean","default":false,"description":"Enable testing using nosetests.","scope":"resource"},"python.testing.nosetestPath":{"type":"string","default":"nosetests","description":"Path to nosetests, you can use a custom version of nosetests by modifying this setting to include the full path.","scope":"resource"},"python.testing.promptToConfigure":{"type":"boolean","default":true,"description":"Prompt to configure a test framework if potential tests directories are discovered.","scope":"resource"},"python.testing.pytestArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":[],"items":{"type":"string"},"scope":"resource"},"python.testing.pytestEnabled":{"type":"boolean","default":false,"description":"Enable testing using pytest.","scope":"resource"},"python.testing.pytestPath":{"type":"string","default":"pytest","description":"Path to pytest (pytest), you can use a custom version of pytest by modifying this setting to include the full path.","scope":"resource"},"python.testing.unittestArgs":{"type":"array","description":"Arguments passed in. Each argument is a separate item in the array.","default":["-v","-s",".","-p","*test*.py"],"items":{"type":"string"},"scope":"resource"},"python.testing.unittestEnabled":{"type":"boolean","default":false,"description":"Enable testing using unittest.","scope":"resource"},"python.testing.autoTestDiscoverOnSaveEnabled":{"type":"boolean","default":true,"description":"Enable auto run test discovery when saving a test file.","scope":"resource"},"python.venvFolders":{"type":"array","default":[],"description":"Folders in your home directory to look into for virtual environments (supports pyenv, direnv and virtualenvwrapper by default).","scope":"resource","items":{"type":"string"}},"python.venvPath":{"type":"string","default":"","description":"Path to folder with a list of Virtual Environments (e.g. ~/.pyenv, ~/Envs, ~/.virtualenvs).","scope":"resource"},"python.workspaceSymbols.ctagsPath":{"type":"string","default":"ctags","description":"Fully qualified path to the ctags executable (else leave as ctags, assuming it is in current path).","scope":"resource"},"python.workspaceSymbols.enabled":{"type":"boolean","default":false,"description":"Set to \'true\' to enable ctags to provide Workspace Symbols.","scope":"resource"},"python.workspaceSymbols.exclusionPatterns":{"type":"array","default":["**/site-packages/**"],"items":{"type":"string"},"description":"Pattern used to exclude files and folders from ctags See http://ctags.sourceforge.net/ctags.html.","scope":"resource"},"python.workspaceSymbols.rebuildOnFileSave":{"type":"boolean","default":true,"description":"Whether to re-build the tags file on when changes made to python files are saved.","scope":"resource"},"python.workspaceSymbols.rebuildOnStart":{"type":"boolean","default":true,"description":"Whether to re-build the tags file on start (defaults to true).","scope":"resource"},"python.workspaceSymbols.tagFilePath":{"type":"string","default":"${workspaceFolder}/.vscode/tags","description":"Fully qualified path to tag file (exuberant ctag file), used to provide workspace symbols.","scope":"resource"},"python.insidersChannel":{"type":"string","default":"off","description":"Set to \\"weekly\\" or \\"daily\\" to automatically download and install the latest Insiders builds of the python extension, which include upcoming features and bug fixes.","enum":["off","weekly","daily"],"scope":"application"},"python.showStartPage":{"type":"boolean","default":true,"description":"Show the Python Start Page when a new update is released.","scope":"application"}}},"languages":[{"id":"pip-requirements","aliases":["pip requirements","requirements.txt"],"filenames":["requirements.txt","constraints.txt","requirements.in"],"filenamePatterns":["*-requirements.txt","requirements-*.txt","constraints-*.txt","*-constraints.txt","*-requirements.in","requirements-*.in"],"configuration":"./languages/pip-requirements.json"},{"id":"yaml","filenames":[".condarc"]},{"id":"toml","filenames":["poetry.lock","Pipfile"]},{"id":"json","filenames":["Pipfile.lock"]},{"id":"ini","filenames":[".flake8"]},{"id":"jinja","extensions":[".jinja2",".j2"],"aliases":["Jinja"]}],"grammars":[{"language":"pip-requirements","scopeName":"source.pip-requirements","path":"./syntaxes/pip-requirements.tmLanguage.json"}],"jsonValidation":[{"fileMatch":".condarc","url":"./schemas/condarc.json"},{"fileMatch":"environment.yml","url":"./schemas/conda-environment.json"},{"fileMatch":"meta.yaml","url":"./schemas/conda-meta.json"}],"yamlValidation":[{"fileMatch":".condarc","url":"./schemas/condarc.json"},{"fileMatch":"environment.yml","url":"./schemas/conda-environment.json"},{"fileMatch":"meta.yaml","url":"./schemas/conda-meta.json"}],"views":{"test":[{"id":"python_tests","name":"Python","when":"testsDiscovered"}]}},"scripts":{"package":"gulp clean && gulp prePublishBundle && vsce package -o ms-python-insiders.vsix","prePublish":"gulp clean && gulp prePublishNonBundle","compile":"tsc -watch -p ./","compiled":"deemon npm run compile","kill-compiled":"deemon --kill npm run compile","compile-webviews-watch":"cross-env NODE_OPTIONS=--max_old_space_size=9096 webpack --config ./build/webpack/webpack.startPage-ui-viewers.config.js --watch","compile-webviews-watchd":"deemon npm run compile-webviews-watch","kill-compile-webviews-watchd":"deemon --kill npm run compile-webviews-watch","checkDependencies":"gulp checkDependencies","test":"node ./out/test/standardTest.js && node ./out/test/multiRootTest.js","test:unittests":"mocha --config ./build/.mocha.unittests.js.json","test:unittests:cover":"nyc --no-clean --nycrc-path build/.nycrc mocha --config ./build/.mocha.unittests.ts.json","test:functional":"mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:perf":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.perf.json","test:functional:memleak":"node --inspect-brk ./node_modules/mocha/bin/_mocha --require source-map-support/register --config ./build/.mocha.functional.json","test:functional:cover":"npm run test:functional","test:cover:report":"nyc --nycrc-path build/.nycrc  report --reporter=text --reporter=html --reporter=text-summary --reporter=cobertura","testDebugger":"node ./out/test/testBootstrap.js ./out/test/debuggerTest.js","testSingleWorkspace":"node ./out/test/testBootstrap.js ./out/test/standardTest.js","preTestJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js","testJediLSP":"node ./out/test/languageServers/jedi/lspSetup.js && cross-env CODE_TESTS_WORKSPACE=src/test VSC_PYTHON_CI_TEST_GREP=\'Language Server:\' node ./out/test/testBootstrap.js ./out/test/standardTest.js && node ./out/test/languageServers/jedi/lspTeardown.js","testMultiWorkspace":"node ./out/test/testBootstrap.js ./out/test/multiRootTest.js","testPerformance":"node ./out/test/testBootstrap.js ./out/test/performanceTest.js","testSmoke":"cross-env INSTALL_JUPYTER_EXTENSION=true \\"node ./out/test/smokeTest.js\\"","testInsiders":"cross-env VSC_PYTHON_CI_TEST_VSC_CHANNEL=insiders INSTALL_PYLANCE_EXTENSION=true TEST_FILES_SUFFIX=insiders.test CODE_TESTS_WORKSPACE=src/testMultiRootWkspc/smokeTests \\"node ./out/test/standardTest.js\\"","lint-staged":"node gulpfile.js","lint":"tslint src/**/*.ts -t verbose","prettier-fix":"prettier \'src/**/*.ts*\' --write && prettier \'build/**/*.js\' --write","clean":"gulp clean","addExtensionDependencies":"gulp addExtensionDependencies","updateBuildNumber":"gulp updateBuildNumber","verifyBundle":"gulp verifyBundle","webpack":"webpack"},"dependencies":{"arch":"^2.1.0","azure-storage":"^2.10.3","chokidar":"^3.4.3","diff-match-patch":"^1.0.0","fs-extra":"^4.0.3","fuzzy":"^0.1.3","get-port":"^3.2.0","glob":"^7.1.2","hash.js":"^1.1.7","iconv-lite":"^0.4.21","inversify":"^4.11.1","jsonc-parser":"^2.0.3","line-by-line":"^0.1.6","lodash":"^4.17.19","log4js":"^6.1.2","md5":"^2.2.1","minimatch":"^3.0.4","named-js-regexp":"^1.3.3","node-fetch":"^2.6.1","node-stream-zip":"^1.6.0","pidusage":"^1.2.0","portfinder":"^1.0.25","reflect-metadata":"^0.1.12","request":"^2.87.0","request-progress":"^3.0.0","rxjs":"^6.5.4","rxjs-compat":"^6.5.4","semver":"^5.5.0","stack-trace":"0.0.10","string-argv":"^0.3.1","strip-ansi":"^5.2.0","sudo-prompt":"^8.2.0","tmp":"^0.0.29","tree-kill":"^1.2.2","typescript-char":"^0.0.0","uint64be":"^1.0.1","unicode":"^10.0.0","untildify":"^3.0.2","vscode-debugadapter":"^1.28.0","vscode-debugprotocol":"^1.28.0","vscode-extension-telemetry":"0.1.4","vscode-jsonrpc":"6.0.0-next.5","vscode-languageclient":"7.0.0-next.9","vscode-languageserver":"7.0.0-next.7","vscode-languageserver-protocol":"3.16.0-next.7","vscode-tas-client":"^0.1.4","winreg":"^1.2.4","winston":"^3.2.1","xml2js":"^0.4.19"},"devDependencies":{"@enonic/fnv-plus":"^1.3.0","@istanbuljs/nyc-config-typescript":"^0.1.3","@sinonjs/fake-timers":"^6.0.1","@types/ansi-regex":"^4.0.0","@types/chai":"^4.1.2","@types/chai-arrays":"^1.0.2","@types/chai-as-promised":"^7.1.0","@types/copy-webpack-plugin":"^4.4.2","@types/cors":"^2.8.6","@types/debug":"^4.1.5","@types/dedent":"^0.7.0","@types/del":"^3.0.0","@types/diff-match-patch":"^1.0.32","@types/download":"^6.2.2","@types/enzyme":"^3.1.14","@types/enzyme-adapter-react-16":"^1.0.3","@types/event-stream":"^3.3.33","@types/fs-extra":"^5.0.1","@types/get-port":"^3.2.0","@types/glob":"^5.0.35","@types/html-webpack-plugin":"^3.2.0","@types/iconv-lite":"^0.0.1","@types/jsdom":"^11.12.0","@types/lodash":"^4.14.104","@types/md5":"^2.1.32","@types/memoize-one":"^4.1.1","@types/mocha":"^5.2.7","@types/nock":"^10.0.3","@types/node":"^10.14.18","@types/promisify-node":"^0.4.0","@types/react":"^16.4.14","@types/react-dom":"^16.0.8","@types/react-json-tree":"^0.6.8","@types/request":"^2.47.0","@types/semver":"^5.5.0","@types/shortid":"^0.0.29","@types/sinon":"^7.5.1","@types/sinonjs__fake-timers":"^6.0.1","@types/socket.io":"^2.1.4","@types/stack-trace":"0.0.29","@types/temp":"^0.8.32","@types/tmp":"0.0.33","@types/untildify":"^3.0.0","@types/uuid":"^3.4.3","@types/vscode":"^1.47.0","@types/webpack-bundle-analyzer":"^2.13.0","@types/winreg":"^1.2.30","@types/xml2js":"^0.4.2","@typescript-eslint/eslint-plugin":"^3.7.0","@typescript-eslint/parser":"^3.7.0","acorn":"^6.4.1","ansi-to-html":"^0.6.7","babel-loader":"^8.0.3","babel-plugin-inline-json-import":"^0.3.1","babel-plugin-transform-runtime":"^6.23.0","babel-polyfill":"^6.26.0","cache-loader":"^4.1.0","canvas":"^2.6.0","chai":"^4.1.2","chai-arrays":"^2.0.0","chai-as-promised":"^7.1.1","chai-http":"^4.3.0","codecov":"^3.7.1","colors":"^1.2.1","copy-webpack-plugin":"^5.1.1","cors":"^2.8.5","cross-env":"^6.0.3","cross-spawn":"^6.0.5","css-loader":"^1.0.1","dedent":"^0.7.0","deemon":"^1.4.0","del":"^3.0.0","download":"^7.0.0","enzyme":"^3.7.0","enzyme-adapter-react-16":"^1.6.0","eslint":"^7.2.0","eslint-config-airbnb":"^18.2.0","eslint-config-prettier":"^6.9.0","eslint-plugin-import":"^2.22.0","eslint-plugin-jsx-a11y":"^6.3.1","eslint-plugin-prettier":"^3.1.2","eslint-plugin-react":"^7.20.3","eslint-plugin-react-hooks":"^4.0.0","event-stream":"3.3.4","expose-loader":"^0.7.5","express":"^4.17.1","extract-zip":"^1.6.7","fast-xml-parser":"^3.16.0","file-loader":"^5.1.0","filemanager-webpack-plugin-fixed":"^2.0.9","flat":"^4.0.0","fork-ts-checker-webpack-plugin":"^4.1.6","gulp":"^4.0.0","gulp-azure-storage":"^0.11.1","gulp-chmod":"^2.0.0","gulp-filter":"^5.1.0","gulp-gunzip":"^1.1.0","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.4","gulp-typescript":"^4.0.1","gulp-untar":"0.0.8","gulp-vinyl-zip":"^2.1.2","html-webpack-plugin":"^3.2.0","husky":"^1.1.2","immutable":"^4.0.0-rc.12","jsdom":"^15.0.0","json-loader":"^0.5.7","less":"^3.9.0","less-loader":"^5.0.0","less-plugin-inline-urls":"^1.2.0","loader-utils":"^1.1.0","lolex":"^5.1.2","memoize-one":"^5.1.1","mocha":"^8.1.1","mocha-junit-reporter":"^1.17.0","mocha-multi-reporters":"^1.1.7","monaco-editor":"0.18.1","monaco-editor-textmate":"^2.2.1","monaco-editor-webpack-plugin":"^1.7.0","monaco-textmate":"^3.0.1","nocache":"^2.1.0","nock":"^10.0.6","node-has-native-dependencies":"^1.0.2","node-html-parser":"^1.1.13","nyc":"^15.0.0","postcss":"^7.0.27","postcss-cssnext":"^3.1.0","postcss-import":"^12.0.1","postcss-loader":"^3.0.0","prettier":"^2.0.2","range-inclusive":"^1.0.2","raw-loader":"^0.5.1","react":"^16.5.2","react-dev-utils":"^5.0.2","react-dom":"^16.5.2","react-svgmt":"^1.1.8","relative":"^3.0.2","remove-files-webpack-plugin":"^1.4.0","requirejs":"^2.3.6","rewiremock":"^3.13.0","rimraf":"^3.0.2","serialize-javascript":"^3.1.0","shortid":"^2.2.8","sinon":"^8.0.1","socket.io":"^2.3.0","source-map-support":"^0.5.12","style-loader":"^0.23.1","styled-jsx":"^3.1.0","svg-inline-loader":"^0.8.0","svg-inline-react":"^3.1.0","terser-webpack-plugin":"^3.1.0","thread-loader":"^2.1.3","transform-loader":"^0.2.4","ts-loader":"^5.3.0","ts-mock-imports":"^1.3.0","ts-mockito":"^2.5.0","ts-node":"^8.3.0","tsconfig-paths-webpack-plugin":"^3.2.0","tslint":"^5.20.1","tslint-config-prettier":"^1.18.0","tslint-eslint-rules":"^5.1.0","tslint-microsoft-contrib":"^5.0.3","tslint-plugin-prettier":"^2.1.0","typed-react-markdown":"^0.1.0","typemoq":"^2.1.0","typescript":"^4.0.2","typescript-formatter":"^7.1.0","unicode-properties":"^1.3.1","url-loader":"^1.1.2","uuid":"^3.3.2","vinyl-fs":"^3.0.3","vsce":"^1.59.0","vscode-debugadapter-testsupport":"^1.27.0","vscode-test":"^1.2.3","webpack":"^4.33.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.1.2","webpack-fix-default-import-plugin":"^1.0.3","webpack-merge":"^4.1.4","webpack-node-externals":"^1.7.2","webpack-require-from":"^1.8.0","why-is-node-running":"^2.0.3","wtfnode":"^0.8.0","yargs":"^15.3.1"},"__metadata":{"id":"f1f59ae4-9318-4f3c-a9b5-81b2eaa5f8a5","publisherDisplayName":"Microsoft","publisherId":"998b010b-e2af-44a5-a6cd-0b5fd3b9b6f8"},"extensionDependencies":["ms-toolsai.jupyter"]}')},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(0),o=n(2);let s=class{get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}openUrl(e){o.env.openExternal(o.Uri.parse(e))}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then(e=>(r.dispose(),e))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e)}};s=r([i.injectable()],s),t.ApplicationShell=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(0),o=n(2);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};s=r([i.injectable()],s),t.ClipboardService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const o=n(0),s=n(2),a=n(3);let c=class{constructor(e){this.jupyterExtensionDependencyManager=e}registerCommand(e,t,n){return s.commands.registerCommand(e,t,n)}registerTextEditorCommand(e,t,n){return s.commands.registerTextEditorCommand(e,t,n)}executeCommand(e,...t){return e.includes("jupyter")&&!this.jupyterExtensionDependencyManager.isJupyterExtensionInstalled?this.jupyterExtensionDependencyManager.installJupyterExtension():s.commands.executeCommand(e,...t)}getCommands(e){return s.commands.getCommands(e)}};c=r([o.injectable(),i(0,o.inject(a.IJupyterExtensionDependencyManager))],c),t.CommandManager=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadVSCodeCommandHandler=void 0;const o=n(0),s=n(13),a=n(14),c=n(3);let l=class{constructor(e,t){this.commandManager=e,this.appShell=t}async activate(){this.commandManager.registerCommand("python.reloadVSCode",this.onReloadVSCode,this)}async onReloadVSCode(e){await this.appShell.showInformationMessage(e,s.Common.reload())===s.Common.reload()&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(a.noop,a.noop)}};l=r([o.injectable(),i(0,o.inject(c.ICommandManager)),i(1,o.inject(c.IApplicationShell))],l),t.ReloadVSCodeCommandHandler=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEditorService=void 0;const o=n(0),s=n(2),a=n(10),c=n(5),l=n(1),u=n(14),d=n(3),h="ms-python.python.notebook.ipynb";let p=class{constructor(e,t,n,r){this.commandManager=e,this.useCustomEditorApi=t,this.workspace=n,this.extensionContext=r,this.enableCustomEditors().catch(e=>c.traceError("Error setting up custom editors: ",e))}registerCustomEditorProvider(e,t,n){return this.useCustomEditorApi?s.window.registerCustomEditorProvider(e,t,n):{dispose:u.noop}}async openEditor(e,t){this.useCustomEditorApi&&await this.commandManager.executeCommand("vscode.openWith",e,t)}async enableCustomEditors(){const e=this.workspace.getConfiguration("workbench",void 0),t=e.get("editorAssociations");if(!this.useCustomEditorApi||Array.isArray(t)&&0!==t.length&&t.find(e=>e.viewType===h)||(t.push({viewType:h,filenamePattern:"*.ipynb"}),await Promise.all([this.extensionContext.globalState.update("EditorAssociationUpdatedToUseCustomEditor",!0),e.update("editorAssociations",t,s.ConfigurationTarget.Global)])),!this.useCustomEditorApi&&this.extensionContext.globalState.get("EditorAssociationUpdatedToUseCustomEditor",!1)&&Array.isArray(t)&&t.find(e=>e.viewType===h)){const n=t.filter(e=>e.viewType!==h);await Promise.all([this.extensionContext.globalState.update("EditorAssociationUpdatedToUseCustomEditor",!1),e.update("editorAssociations",n,s.ConfigurationTarget.Global)])}}};p=r([o.injectable(),i(0,o.inject(d.ICommandManager)),i(1,o.inject(a.UseCustomEditorApi)),i(2,o.inject(d.IWorkspaceService)),i(3,o.inject(l.IExtensionContext))],p),t.CustomEditorService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionTelemetry=void 0;const o=n(0),s=n(7),a=n(9),c=n(1),l=n(30),u=n(3);class d{constructor(e){this.timer=new l.StopWatch,this.trigger="launch",this.trigger=e.configuration.type;const t=e.configuration;this.console=t.console}onWillStartSession(){this.sendTelemetry(a.EventName.DEBUG_SESSION_START)}onDidSendMessage(e){if("response"===e.type){"configurationDone"===e.command&&this.sendTelemetry(a.EventName.DEBUG_SESSION_USER_CODE_RUNNING)}}onWillStopSession(){this.sendTelemetry(a.EventName.DEBUG_SESSION_STOP)}onError(e){this.sendTelemetry(a.EventName.DEBUG_SESSION_ERROR)}sendTelemetry(e){e===a.EventName.DEBUG_SESSION_START&&this.timer.reset();const t={trigger:this.trigger,console:this.console};s.sendTelemetryEvent(e,this.timer.elapsedTime,t)}}let h=class{constructor(e,t){e.push(t.registerDebugAdapterTrackerFactory("python",this))}async activate(){}createDebugAdapterTracker(e){return new d(e)}};h=r([o.injectable(),i(0,o.inject(c.IDisposableRegistry)),i(1,o.inject(u.IDebugService))],h),t.DebugSessionTelemetry=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(0),o=n(2);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};s=r([i.injectable()],s),t.DocumentManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const i=n(0),o=n(2);let s=class{get all(){return o.extensions.all}get onDidChange(){return o.extensions.onDidChange}getExtension(e){return o.extensions.getExtension(e)}};s=r([i.injectable()],s),t.Extensions=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageService=void 0;const i=n(0),o=n(2);let s=class{registerCompletionItemProvider(e,t,...n){return o.languages.registerCompletionItemProvider(e,t,...n)}};s=r([i.injectable()],s),t.LanguageService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeNotebook=void 0;const o=n(0),s=n(2),a=n(10),c=n(1),l=n(3);let u=class{constructor(e,t,n){this.useProposedApi=e,this.disposables=t,this.env=n,this._onDidChangeNotebookDocument=new s.EventEmitter,this.handledCellChanges=new WeakSet,this.useProposedApi&&"insiders"===this.env.channel&&(this.addEventHandlers(),this.canUseNotebookApi=!0)}get onDidChangeActiveNotebookKernel(){return this.canUseNotebookApi?this.notebook.onDidChangeActiveNotebookKernel:(new s.EventEmitter).event}get onDidChangeActiveNotebookEditor(){return this.canUseNotebookApi?this.notebook.onDidChangeActiveNotebookEditor:(new s.EventEmitter).event}get onDidOpenNotebookDocument(){return this.canUseNotebookApi?this.notebook.onDidOpenNotebookDocument:(new s.EventEmitter).event}get onDidCloseNotebookDocument(){return this.canUseNotebookApi?this.notebook.onDidCloseNotebookDocument:(new s.EventEmitter).event}get onDidSaveNotebookDocument(){return this.canUseNotebookApi?this.notebook.onDidSaveNotebookDocument:(new s.EventEmitter).event}get notebookDocuments(){return this.canUseNotebookApi?this.notebook.notebookDocuments:[]}get notebookEditors(){return this.canUseNotebookApi?this.notebook.visibleNotebookEditors:[]}get onDidChangeNotebookDocument(){return this.canUseNotebookApi?this._onDidChangeNotebookDocument.event:(new s.EventEmitter).event}get activeNotebookEditor(){if(this.useProposedApi)return this.notebook.activeNotebookEditor}get notebook(){return this._notebook||(this._notebook=n(2).notebook),this._notebook}createConcatTextDocument(e,t){if(this.useProposedApi)return this.notebook.createConcatTextDocument(e,t);throw new Error("createConcatDocument not supported")}registerNotebookContentProvider(e,t,n){return this.notebook.registerNotebookContentProvider(e,t,n)}registerNotebookKernelProvider(e,t){return this.notebook.registerNotebookKernelProvider(e,t)}addEventHandlers(){this.addedEventHandlers||(this.addedEventHandlers=!0,this.disposables.push(this.notebook.onDidChangeCellLanguage(e=>this._onDidChangeNotebookDocument.fire({...e,type:"changeCellLanguage"})),this.notebook.onDidChangeCellMetadata(e=>this._onDidChangeNotebookDocument.fire({...e,type:"changeCellMetadata"})),this.notebook.onDidChangeNotebookDocumentMetadata(e=>this._onDidChangeNotebookDocument.fire({...e,type:"changeNotebookMetadata"})),this.notebook.onDidChangeCellOutputs(e=>this._onDidChangeNotebookDocument.fire({...e,type:"changeCellOutputs"})),this.notebook.onDidChangeNotebookCells(e=>{this.handledCellChanges.has(e)||(this.handledCellChanges.add(e),this._onDidChangeNotebookDocument.fire({...e,type:"changeCells"}))})))}};u=r([o.injectable(),i(0,o.inject(a.UseProposedApi)),i(1,o.inject(c.IDisposableRegistry)),i(2,o.inject(l.IApplicationEnvironment))],u),t.VSCodeNotebook=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(0),o=n(2);let s=class{get onDidCloseTerminal(){return o.window.onDidCloseTerminal}get onDidOpenTerminal(){return o.window.onDidOpenTerminal}createTerminal(e){return o.window.createTerminal(e)}};s=r([i.injectable()],s),t.TerminalManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncDisposableRegistry=void 0;const i=n(0);let o=class{constructor(){this._list=[]}async dispose(){const e=this._list.map(e=>e.dispose());await Promise.all(e),this._list=[]}push(e){e&&this._list.push(e)}get list(){return this._list}};o=r([i.injectable()],o),t.AsyncDisposableRegistry=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(0),s=n(2),a=n(40),c=n(8),l=n(3),u=n(227),d=n(10),h=n(24),p=n(1);let f=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(l.IWorkspaceService)}getSettings(e){const t=this.serviceContainer.get(a.IInterpreterAutoSeletionProxyService),n=this.serviceContainer.get(p.IInterpreterPathService),r=this.serviceContainer.get(p.IExperimentsManager),i=this.serviceContainer.get(a.IInterpreterSecurityService);return u.PythonSettings.getInstance(e,t,this.workspaceService,r,n,i)}async updateSectionSetting(e,t,n,r,i){const o=this.serviceContainer.get(p.IExperimentsManager),a=this.serviceContainer.get(p.IInterpreterPathService),c=o.inExperiment(h.DeprecatePythonPath.experiment);o.sendTelemetryIfInExperiment(h.DeprecatePythonPath.control);let l={uri:r,target:i||s.ConfigurationTarget.WorkspaceFolder};"python"===e&&i!==s.ConfigurationTarget.Global&&(l=u.PythonSettings.getSettingsUriAndTarget(r,this.workspaceService)),i=i||l.target;const d=this.workspaceService.getConfiguration(e,l.uri),f=c&&"python"===e&&"pythonPath"===t?a.inspect(l.uri):d.inspect(t);void 0!==f&&(i===s.ConfigurationTarget.Global&&f.globalValue===n||i===s.ConfigurationTarget.Workspace&&f.workspaceValue===n||i===s.ConfigurationTarget.WorkspaceFolder&&f.workspaceFolderValue===n)||("python"===e&&"pythonPath"===t?c&&await a.update(l.uri,i,n):(await d.update(t,n,i),await this.verifySetting(d,i,t,n)))}async updateSetting(e,t,n,r){return this.updateSectionSetting("python",e,t,n,r)}isTestExecution(){return"1"===process.env.VSC_PYTHON_CI_TEST}async verifySetting(e,t,n,r){if(this.isTestExecution()&&!d.isUnitTestExecution()){let i=0;do{const o=e.inspect(n);if(!o&&void 0===r)break;if(o&&void 0!==r){if((t===s.ConfigurationTarget.Global?o.globalValue:t===s.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue)===r)break}await new Promise(e=>setTimeout(e,250)),i+=1}while(i<20)}}};f=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],f),t.ConfigurationService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CryptoUtils=void 0;const i=n(73),o=n(0),s=n(5);let a=class{createHash(e,t,r="FNV"){let o;if("FNV"===r){o=n(1030).fast1a32hex(e)}else o="SHA256"===r?i.createHash("sha256").update(e).digest("hex"):i.createHash("sha512").update(e).digest("hex");if("number"===t){const t=parseInt(o,16);return isNaN(t)&&s.traceError(`Number hash for data '${e}' is NaN`),t}return o}};a=r([o.injectable()],a),t.CryptoUtils=a},function(e,t,n){var r=function(){var e,t,n,r,i,o,s,a,c=[],l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],u="1a",d=!1,h=52,p={32:{offset:0},64:{offset:[0,0,0,0]},128:{offset:[0,0,0,0,0,0,0,0]},256:{offset:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},512:{offset:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},1024:{offset:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}};for(e=0;e<256;e++)c[e]=(e>>4&15).toString(16)+(15&e).toString(16);function f(e,t){var n,r,i,o=[0],s="";for(r=0;r<e.length;r+=2){for(n=parseInt(e.substr(r,2),16),i=0;i<o.length;i++)n+=o[i]<<8,o[i]=n%t,n=n/t|0;for(;n>0;)o.push(n%t),n=n/t|0}for(r=o.length-1;r>=0;--r)s+="0123456789abcdefghijklmnopqrstuvwxyz"[o[r]];return s}function g(e,t){return{bits:t,value:e,dec:function(){return f(e,10)},hex:function(){return e},str:function(){return f(e,36)}}}function m(e,t){return{bits:t,value:e,dec:function(){return e.toString()},hex:function(){return c[e>>>24]+c[e>>>16&255]+c[e>>>8&255]+c[255&e]},str:function(){return e.toString(36)}}}function v(e,t){return{bits:t,value:e,dec:function(){return e.toString()},hex:function(){return("0000000000000000"+e.toString(16)).substr(-13)},str:function(){return e.toString(36)}}}function y(e,c){var l="object"==typeof e?JSON.stringify(e):e;switch(c||h){case 32:return t(l);case 64:return r(l);case 128:return i(l);case 256:return o(l);case 512:return s(l);case 1024:return a(l);default:return n(l)}}function b(e){if("1a"===e)u=e,t=d?P:w,n=d?O:T,r=d?k:D,i=d?F:N,o=d?W:L,s=d?q:V,a=d?z:$;else{if("1"!==e)throw new Error("Supported FNV versions: 1, 1a");u=e,t=d?C:_,n=d?R:I,r=d?A:x,i=d?M:j,o=d?B:U,s=d?G:H,a=d?Y:K}}function S(e){e?(d=!0,t="1a"==u?P:C,n="1a"==u?O:R,r="1a"==u?k:A,i="1a"==u?F:M,o="1a"==u?W:B,s="1a"==u?q:G,a="1a"==u?z:Y):(d=!1,t="1a"==u?w:_,n="1a"==u?T:I,r="1a"==u?D:x,i="1a"==u?N:j,o="1a"==u?L:U,s="1a"==u?V:H,a="1a"==u?$:K)}function E(e){var t,n,r=u;for(var i in"chongo <Landon Curt Noll> /\\../\\"===(e=e||0===e?e:"chongo <Landon Curt Noll> /\\../\\")&&b("1"),p){for(p[i].offset=[],n=0;n<i/16;n++)p[i].offset[n]=0;for(t=y(e,parseInt(i,10)).hex(),n=0;n<i/16;n++)p[i].offset[n]=parseInt(t.substr(4*n,4),16)}b(r)}function w(e){var t,n=e.length-3,r=p[32].offset,i=0,o=0|r[1],s=0,a=0|r[0];for(t=0;t<n;)s=403*a,s+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=e.charCodeAt(t++))<<8)+((i=403*o)>>>16)&65535,o=65535&i;for(;t<n+3;)s=403*a,a=(s+=(o^=e.charCodeAt(t++))<<8)+((i=403*o)>>>16)&65535,o=65535&i;return m((a<<16>>>0)+o,32)}function _(e){var t,n=e.length-3,r=p[32].offset,i=0,o=0|r[1],s=0,a=0|r[0];for(t=0;t<n;)s=403*a,s+=o<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=e.charCodeAt(t++))<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=e.charCodeAt(t++);for(;t<n+3;)s=403*a,a=(s+=o<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=e.charCodeAt(t++);return m((a<<16>>>0)+o,32)}function P(e){var t,n,r=e.length,i=p[32].offset,o=0,s=0|i[1],a=0,c=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=403*c,c=(a+=(s^=t>>6|192)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=403*c,a+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),a+=(s^=t>>12&63|128)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),c=(a+=(s^=t>>6&63|128)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128):(a=403*c,a+=(s^=t>>12|224)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),c=(a+=(s^=t>>6&63|128)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128),a=403*c,c=(a+=s<<8)+((o=403*s)>>>16)&65535,s=65535&o;return m((c<<16>>>0)+s,32)}function C(e){var t,n,r=e.length,i=p[32].offset,o=0,s=0|i[1],a=0,c=0|i[0];for(n=0;n<r;n++)a=403*c,c=(a+=s<<8)+((o=403*s)>>>16)&65535,s=65535&o,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=403*c,c=(a+=(s^=t>>6|192)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=403*c,a+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),a+=(s^=t>>12&63|128)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),c=(a+=(s^=t>>6&63|128)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128):(a=403*c,a+=(s^=t>>12|224)<<8,s=65535&(o=403*s),a=403*(c=a+(o>>>16)&65535),c=(a+=(s^=t>>6&63|128)<<8)+((o=403*s)>>>16)&65535,s=65535&o,s^=63&t|128);return m((c<<16>>>0)+s,32)}function T(e){var t,n=e.length-3,r=p[64].offset,i=0,o=0|r[3],s=0,a=0|r[2],c=0,l=0|r[1],u=0,d=0|r[0];for(t=0;t<n;)s=435*a,c=435*l,u=435*d,c+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c;for(;t<n+3;)s=435*a,c=435*l,u=435*d,c+=(o^=e.charCodeAt(t++))<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c;return v(281474976710656*(15&d)+4294967296*l+65536*a+(o^d>>4),52)}function I(e){var t,n=e.length-3,r=p[64].offset,i=0,o=0|r[3],s=0,a=0|r[2],c=0,l=0|r[1],u=0,d=0|r[0];for(t=0;t<n;)s=435*a,c=435*l,u=435*d,c+=o<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=e.charCodeAt(t++))<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c,o^=e.charCodeAt(t++);for(;t<n+3;)s=435*a,c=435*l,u=435*d,c+=o<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c,o^=e.charCodeAt(t++);return v(281474976710656*(15&d)+4294967296*l+65536*a+(o^d>>4),52)}function O(e){var t,n,r=e.length,i=p[64].offset,o=0,s=0|i[3],a=0,c=0|i[2],l=0,u=0|i[1],d=0,h=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=435*c,l=435*u,d=435*h,l+=(s^=t>>6|192)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=435*c,l=435*u,d=435*h,l+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>12&63|128)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>6&63|128)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128):(a=435*c,l=435*u,d=435*h,l+=(s^=t>>12|224)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>6&63|128)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128),a=435*c,l=435*u,d=435*h,l+=s<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l;return v(281474976710656*(15&h)+4294967296*u+65536*c+(s^h>>4),52)}function R(e){var t,n,r=e.length,i=p[64].offset,o=0,s=0|i[3],a=0,c=0|i[2],l=0,u=0|i[1],d=0,h=0|i[0];for(n=0;n<r;n++)a=435*c,l=435*u,d=435*h,l+=s<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=435*c,l=435*u,d=435*h,l+=(s^=t>>6|192)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=435*c,l=435*u,d=435*h,l+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>12&63|128)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>6&63|128)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128):(a=435*c,l=435*u,d=435*h,l+=(s^=t>>12|224)<<8,s=65535&(o=435*s),h=(d+=c<<8)+((l+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(c=65535&a),l=435*(u=65535&l),d=435*h,l+=(s^=t>>6&63|128)<<8,d+=c<<8,s=65535&(o=435*s),c=65535&(a+=o>>>16),h=d+((l+=a>>>16)>>>16)&65535,u=65535&l,s^=63&t|128);return v(281474976710656*(15&h)+4294967296*u+65536*c+(s^h>>4),52)}function D(e){var t,n=e.length-3,r=p[64].offset,i=0,o=0|r[3],s=0,a=0|r[2],l=0,u=0|r[1],d=0,h=0|r[0];for(t=0;t<n;)s=435*a,l=435*u,d=435*h,l+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l;for(;t<n+3;)s=435*a,l=435*u,d=435*h,l+=(o^=e.charCodeAt(t++))<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l;return g(c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],64)}function x(e){var t,n=e.length-3,r=p[64].offset,i=0,o=0|r[3],s=0,a=0|r[2],l=0,u=0|r[1],d=0,h=0|r[0];for(t=0;t<n;)s=435*a,l=435*u,d=435*h,l+=o<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=e.charCodeAt(t++))<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l,o^=e.charCodeAt(t++);for(;t<n+3;)s=435*a,l=435*u,d=435*h,l+=o<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l,o^=e.charCodeAt(t++);return g(c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],64)}function k(e){var t,n,r=e.length,i=p[64].offset,o=0,s=0|i[3],a=0,l=0|i[2],u=0,d=0|i[1],h=0,f=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=435*l,u=435*d,h=435*f,u+=(s^=t>>6|192)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=435*l,u=435*d,h=435*f,u+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>12&63|128)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>6&63|128)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128):(a=435*l,u=435*d,h=435*f,u+=(s^=t>>12|224)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>6&63|128)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128),a=435*l,u=435*d,h=435*f,u+=s<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u;return g(c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],64)}function A(e){var t,n,r=e.length,i=p[64].offset,o=0,s=0|i[3],a=0,l=0|i[2],u=0,d=0|i[1],h=0,f=0|i[0];for(n=0;n<r;n++)a=435*l,u=435*d,h=435*f,u+=s<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=435*l,u=435*d,h=435*f,u+=(s^=t>>6|192)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=435*l,u=435*d,h=435*f,u+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>12&63|128)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>6&63|128)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128):(a=435*l,u=435*d,h=435*f,u+=(s^=t>>12|224)<<8,s=65535&(o=435*s),f=(h+=l<<8)+((u+=(a+=o>>>16)>>>16)>>>16)&65535,a=435*(l=65535&a),u=435*(d=65535&u),h=435*f,u+=(s^=t>>6&63|128)<<8,h+=l<<8,s=65535&(o=435*s),l=65535&(a+=o>>>16),f=h+((u+=a>>>16)>>>16)&65535,d=65535&u,s^=63&t|128);return g(c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],64)}function N(e){var t,n=e.length-3,r=p[128].offset,i=0,o=0|r[7],s=0,a=0|r[6],l=0,u=0|r[5],d=0,h=0|r[4],f=0,m=0|r[3],v=0,y=0|r[2],b=0,S=0|r[1],E=0,w=0|r[0];for(t=0;t<n;)s=315*a,l=315*u,d=315*h,f=315*m,v=315*y,b=315*S,E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,E+=u<<8,o=65535&(i=315*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),w=E+((b+=v>>>16)>>>16)&65535,S=65535&b;for(;t<n+3;)s=315*a,l=315*u,d=315*h,f=315*m,v=315*y,b=315*S,E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,E+=u<<8,o=65535&(i=315*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),w=E+((b+=v>>>16)>>>16)&65535,S=65535&b;return g(c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],128)}function j(e){var t,n=e.length-3,r=p[128].offset,i=0,o=0|r[7],s=0,a=0|r[6],l=0,u=0|r[5],d=0,h=0|r[4],f=0,m=0|r[3],v=0,y=0|r[2],b=0,S=0|r[1],E=0,w=0|r[0];for(t=0;t<n;)s=315*a,l=315*u,d=315*h,f=315*m,v=315*y,b=315*S,E=315*w,v+=o<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,o=65535&(i=315*o),w=(E+=u<<8)+((b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=315*(a=65535&s),l=315*(u=65535&l),d=315*(h=65535&d),f=315*(m=65535&f),v=315*(y=65535&v),b=315*(S=65535&b),E=315*w,v+=(o^=e.charCodeAt(t++))<<8,b+=a<<8,E+=u<<8,o=65535&(i=315*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),w=E+((b+=v>>>16)>>>16)&65535,S=65535&b,o^=e.charCodeAt(t++);for(;t<n+3;)s=315*a,l=315*u,d=315*h,f=315*m,v=315*y,b=315*S,E=315*w,v+=o<<8,b+=a<<8,E+=u<<8,o=65535&(i=315*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),w=E+((b+=v>>>16)>>>16)&65535,S=65535&b,o^=e.charCodeAt(t++);return g(c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],128)}function F(e){var t,n,r=e.length,i=p[128].offset,o=0,s=0|i[7],a=0,l=0|i[6],u=0,d=0|i[5],h=0,f=0|i[4],m=0,v=0|i[3],y=0,b=0|i[2],S=0,E=0|i[1],w=0,_=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=t>>6|192)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>12&63|128)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>6&63|128)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128):(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=t>>12|224)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>6&63|128)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128),a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=s<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S;return g(c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],128)}function M(e){var t,n,r=e.length,i=p[128].offset,o=0,s=0|i[7],a=0,l=0|i[6],u=0,d=0|i[5],h=0,f=0|i[4],m=0,v=0|i[3],y=0,b=0|i[2],S=0,E=0|i[1],w=0,_=0|i[0];for(n=0;n<r;n++)a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=s<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=t>>6|192)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>12&63|128)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>6&63|128)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128):(a=315*l,u=315*d,h=315*f,m=315*v,y=315*b,S=315*E,w=315*_,y+=(s^=t>>12|224)<<8,S+=l<<8,s=65535&(o=315*s),_=(w+=d<<8)+((S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=315*(l=65535&a),u=315*(d=65535&u),h=315*(f=65535&h),m=315*(v=65535&m),y=315*(b=65535&y),S=315*(E=65535&S),w=315*_,y+=(s^=t>>6&63|128)<<8,S+=l<<8,w+=d<<8,s=65535&(o=315*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),_=w+((S+=y>>>16)>>>16)&65535,E=65535&S,s^=63&t|128);return g(c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],128)}function L(e){var t,n=e.length-3,r=p[256].offset,i=0,o=0|r[15],s=0,a=0|r[14],l=0,u=0|r[13],d=0,h=0|r[12],f=0,m=0|r[11],v=0,y=0|r[10],b=0,S=0|r[9],E=0,w=0|r[8],_=0,P=0|r[7],C=0,T=0|r[6],I=0,O=0|r[5],R=0,D=0|r[4],x=0,k=0|r[3],A=0,N=0|r[2],j=0,F=0|r[1],M=0,L=0|r[0];for(t=0;t<n;)s=355*a,l=355*u,d=355*h,f=355*m,v=355*y,b=355*S,E=355*w,_=355*P,C=355*T,I=355*O,R=355*D,x=355*k,A=355*N,j=355*F,M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,M+=y<<8,o=65535&(i=355*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),L=M+((j+=A>>>16)>>>16)&65535,F=65535&j;for(;t<n+3;)s=355*a,l=355*u,d=355*h,f=355*m,v=355*y,b=355*S,E=355*w,_=355*P,C=355*T,I=355*O,R=355*D,x=355*k,A=355*N,j=355*F,M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,M+=y<<8,o=65535&(i=355*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),L=M+((j+=A>>>16)>>>16)&65535,F=65535&j;return g(c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],256)}function U(e){var t,n=e.length-3,r=p[256].offset,i=0,o=0|r[15],s=0,a=0|r[14],l=0,u=0|r[13],d=0,h=0|r[12],f=0,m=0|r[11],v=0,y=0|r[10],b=0,S=0|r[9],E=0,w=0|r[8],_=0,P=0|r[7],C=0,T=0|r[6],I=0,O=0|r[5],R=0,D=0|r[4],x=0,k=0|r[3],A=0,N=0|r[2],j=0,F=0|r[1],M=0,L=0|r[0];for(t=0;t<n;)s=355*a,l=355*u,d=355*h,f=355*m,v=355*y,b=355*S,E=355*w,_=355*P,C=355*T,I=355*O,R=355*D,x=355*k,A=355*N,j=355*F,M=355*L,I+=o<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,o=65535&(i=355*o),L=(M+=y<<8)+((j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=355*(a=65535&s),l=355*(u=65535&l),d=355*(h=65535&d),f=355*(m=65535&f),v=355*(y=65535&v),b=355*(S=65535&b),E=355*(w=65535&E),_=355*(P=65535&_),C=355*(T=65535&C),I=355*(O=65535&I),R=355*(D=65535&R),x=355*(k=65535&x),A=355*(N=65535&A),j=355*(F=65535&j),M=355*L,I+=(o^=e.charCodeAt(t++))<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,M+=y<<8,o=65535&(i=355*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),L=M+((j+=A>>>16)>>>16)&65535,F=65535&j,o^=e.charCodeAt(t++);for(;t<n+3;)s=355*a,l=355*u,d=355*h,f=355*m,v=355*y,b=355*S,E=355*w,_=355*P,C=355*T,I=355*O,R=355*D,x=355*k,A=355*N,j=355*F,M=355*L,I+=o<<8,R+=a<<8,x+=u<<8,A+=h<<8,j+=m<<8,M+=y<<8,o=65535&(i=355*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),L=M+((j+=A>>>16)>>>16)&65535,F=65535&j,o^=e.charCodeAt(t++);return g(c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],256)}function W(e){var t,n,r=e.length,i=p[256].offset,o=0,s=0|i[15],a=0,l=0|i[14],u=0,d=0|i[13],h=0,f=0|i[12],m=0,v=0|i[11],y=0,b=0|i[10],S=0,E=0|i[9],w=0,_=0|i[8],P=0,C=0|i[7],T=0,I=0|i[6],O=0,R=0|i[5],D=0,x=0|i[4],k=0,A=0|i[3],N=0,j=0|i[2],F=0,M=0|i[1],L=0,U=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=t>>6|192)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>12&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>6&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128):(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=t>>12|224)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>6&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128),a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=s<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F;return g(c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],256)}function B(e){var t,n,r=e.length,i=p[256].offset,o=0,s=0|i[15],a=0,l=0|i[14],u=0,d=0|i[13],h=0,f=0|i[12],m=0,v=0|i[11],y=0,b=0|i[10],S=0,E=0|i[9],w=0,_=0|i[8],P=0,C=0|i[7],T=0,I=0|i[6],O=0,R=0|i[5],D=0,x=0|i[4],k=0,A=0|i[3],N=0,j=0|i[2],F=0,M=0|i[1],L=0,U=0|i[0];for(n=0;n<r;n++)a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=s<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=t>>6|192)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>12&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>6&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128):(a=355*l,u=355*d,h=355*f,m=355*v,y=355*b,S=355*E,w=355*_,P=355*C,T=355*I,O=355*R,D=355*x,k=355*A,N=355*j,F=355*M,L=355*U,O+=(s^=t>>12|224)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,s=65535&(o=355*s),U=(L+=b<<8)+((F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=355*(l=65535&a),u=355*(d=65535&u),h=355*(f=65535&h),m=355*(v=65535&m),y=355*(b=65535&y),S=355*(E=65535&S),w=355*(_=65535&w),P=355*(C=65535&P),T=355*(I=65535&T),O=355*(R=65535&O),D=355*(x=65535&D),k=355*(A=65535&k),N=355*(j=65535&N),F=355*(M=65535&F),L=355*U,O+=(s^=t>>6&63|128)<<8,D+=l<<8,k+=d<<8,N+=f<<8,F+=v<<8,L+=b<<8,s=65535&(o=355*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),U=L+((F+=N>>>16)>>>16)&65535,M=65535&F,s^=63&t|128);return g(c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],256)}function V(e){var t,n=e.length-3,r=p[512].offset,i=0,o=0|r[31],s=0,a=0|r[30],l=0,u=0|r[29],d=0,h=0|r[28],f=0,m=0|r[27],v=0,y=0|r[26],b=0,S=0|r[25],E=0,w=0|r[24],_=0,P=0|r[23],C=0,T=0|r[22],I=0,O=0|r[21],R=0,D=0|r[20],x=0,k=0|r[19],A=0,N=0|r[18],j=0,F=0|r[17],M=0,L=0|r[16],U=0,W=0|r[15],B=0,V=0|r[14],H=0,q=0|r[13],G=0,$=0|r[12],K=0,z=0|r[11],Y=0,J=0|r[10],X=0,Q=0|r[9],Z=0,ee=0|r[8],te=0,ne=0|r[7],re=0,ie=0|r[6],oe=0,se=0|r[5],ae=0,ce=0|r[4],le=0,ue=0|r[3],de=0,he=0|r[2],pe=0,fe=0|r[1],ge=0,me=0|r[0];for(t=0;t<n;)s=343*a,l=343*u,d=343*h,f=343*m,v=343*y,b=343*S,E=343*w,_=343*P,C=343*T,I=343*O,R=343*D,x=343*k,A=343*N,j=343*F,M=343*L,U=343*W,B=343*V,H=343*q,G=343*$,K=343*z,Y=343*J,X=343*Q,Z=343*ee,te=343*ne,re=343*ie,oe=343*se,ae=343*ce,le=343*ue,de=343*he,pe=343*fe,ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,ge+=O<<8,o=65535&(i=343*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),me=ge+((pe+=de>>>16)>>>16)&65535,fe=65535&pe;for(;t<n+3;)s=343*a,l=343*u,d=343*h,f=343*m,v=343*y,b=343*S,E=343*w,_=343*P,C=343*T,I=343*O,R=343*D,x=343*k,A=343*N,j=343*F,M=343*L,U=343*W,B=343*V,H=343*q,G=343*$,K=343*z,Y=343*J,X=343*Q,Z=343*ee,te=343*ne,re=343*ie,oe=343*se,ae=343*ce,le=343*ue,de=343*he,pe=343*fe,ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,ge+=O<<8,o=65535&(i=343*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),me=ge+((pe+=de>>>16)>>>16)&65535,fe=65535&pe;return g(c[me>>8]+c[255&me]+c[fe>>8]+c[255&fe]+c[he>>8]+c[255&he]+c[ue>>8]+c[255&ue]+c[ce>>8]+c[255&ce]+c[se>>8]+c[255&se]+c[ie>>8]+c[255&ie]+c[ne>>8]+c[255&ne]+c[ee>>8]+c[255&ee]+c[Q>>8]+c[255&Q]+c[J>>8]+c[255&J]+c[z>>8]+c[255&z]+c[$>>8]+c[255&$]+c[q>>8]+c[255&q]+c[V>>8]+c[255&V]+c[W>>8]+c[255&W]+c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],512)}function H(e){var t,n=e.length-3,r=p[512].offset,i=0,o=0|r[31],s=0,a=0|r[30],l=0,u=0|r[29],d=0,h=0|r[28],f=0,m=0|r[27],v=0,y=0|r[26],b=0,S=0|r[25],E=0,w=0|r[24],_=0,P=0|r[23],C=0,T=0|r[22],I=0,O=0|r[21],R=0,D=0|r[20],x=0,k=0|r[19],A=0,N=0|r[18],j=0,F=0|r[17],M=0,L=0|r[16],U=0,W=0|r[15],B=0,V=0|r[14],H=0,q=0|r[13],G=0,$=0|r[12],K=0,z=0|r[11],Y=0,J=0|r[10],X=0,Q=0|r[9],Z=0,ee=0|r[8],te=0,ne=0|r[7],re=0,ie=0|r[6],oe=0,se=0|r[5],ae=0,ce=0|r[4],le=0,ue=0|r[3],de=0,he=0|r[2],pe=0,fe=0|r[1],ge=0,me=0|r[0];for(t=0;t<n;)s=343*a,l=343*u,d=343*h,f=343*m,v=343*y,b=343*S,E=343*w,_=343*P,C=343*T,I=343*O,R=343*D,x=343*k,A=343*N,j=343*F,M=343*L,U=343*W,B=343*V,H=343*q,G=343*$,K=343*z,Y=343*J,X=343*Q,Z=343*ee,te=343*ne,re=343*ie,oe=343*se,ae=343*ce,le=343*ue,de=343*he,pe=343*fe,ge=343*me,Y+=o<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,o=65535&(i=343*o),me=(ge+=O<<8)+((pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=343*(a=65535&s),l=343*(u=65535&l),d=343*(h=65535&d),f=343*(m=65535&f),v=343*(y=65535&v),b=343*(S=65535&b),E=343*(w=65535&E),_=343*(P=65535&_),C=343*(T=65535&C),I=343*(O=65535&I),R=343*(D=65535&R),x=343*(k=65535&x),A=343*(N=65535&A),j=343*(F=65535&j),M=343*(L=65535&M),U=343*(W=65535&U),B=343*(V=65535&B),H=343*(q=65535&H),G=343*($=65535&G),K=343*(z=65535&K),Y=343*(J=65535&Y),X=343*(Q=65535&X),Z=343*(ee=65535&Z),te=343*(ne=65535&te),re=343*(ie=65535&re),oe=343*(se=65535&oe),ae=343*(ce=65535&ae),le=343*(ue=65535&le),de=343*(he=65535&de),pe=343*(fe=65535&pe),ge=343*me,Y+=(o^=e.charCodeAt(t++))<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,ge+=O<<8,o=65535&(i=343*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),me=ge+((pe+=de>>>16)>>>16)&65535,fe=65535&pe,o^=e.charCodeAt(t++);for(;t<n+3;)s=343*a,l=343*u,d=343*h,f=343*m,v=343*y,b=343*S,E=343*w,_=343*P,C=343*T,I=343*O,R=343*D,x=343*k,A=343*N,j=343*F,M=343*L,U=343*W,B=343*V,H=343*q,G=343*$,K=343*z,Y=343*J,X=343*Q,Z=343*ee,te=343*ne,re=343*ie,oe=343*se,ae=343*ce,le=343*ue,de=343*he,pe=343*fe,ge=343*me,Y+=o<<8,X+=a<<8,Z+=u<<8,te+=h<<8,re+=m<<8,oe+=y<<8,ae+=S<<8,le+=w<<8,de+=P<<8,pe+=T<<8,ge+=O<<8,o=65535&(i=343*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),me=ge+((pe+=de>>>16)>>>16)&65535,fe=65535&pe,o^=e.charCodeAt(t++);return g(c[me>>8]+c[255&me]+c[fe>>8]+c[255&fe]+c[he>>8]+c[255&he]+c[ue>>8]+c[255&ue]+c[ce>>8]+c[255&ce]+c[se>>8]+c[255&se]+c[ie>>8]+c[255&ie]+c[ne>>8]+c[255&ne]+c[ee>>8]+c[255&ee]+c[Q>>8]+c[255&Q]+c[J>>8]+c[255&J]+c[z>>8]+c[255&z]+c[$>>8]+c[255&$]+c[q>>8]+c[255&q]+c[V>>8]+c[255&V]+c[W>>8]+c[255&W]+c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],512)}function q(e){var t,n,r=e.length,i=p[512].offset,o=0,s=0|i[31],a=0,l=0|i[30],u=0,d=0|i[29],h=0,f=0|i[28],m=0,v=0|i[27],y=0,b=0|i[26],S=0,E=0|i[25],w=0,_=0|i[24],P=0,C=0|i[23],T=0,I=0|i[22],O=0,R=0|i[21],D=0,x=0|i[20],k=0,A=0|i[19],N=0,j=0|i[18],F=0,M=0|i[17],L=0,U=0|i[16],W=0,B=0|i[15],V=0,H=0|i[14],q=0,G=0|i[13],$=0,K=0|i[12],z=0,Y=0|i[11],J=0,X=0|i[10],Q=0,Z=0|i[9],ee=0,te=0|i[8],ne=0,re=0|i[7],ie=0,oe=0|i[6],se=0,ae=0|i[5],ce=0,le=0|i[4],ue=0,de=0|i[3],he=0,pe=0|i[2],fe=0,ge=0|i[1],me=0,ve=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=t>>6|192)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>12&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>6&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128):(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=t>>12|224)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>6&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128),a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=s<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe;return g(c[ve>>8]+c[255&ve]+c[ge>>8]+c[255&ge]+c[pe>>8]+c[255&pe]+c[de>>8]+c[255&de]+c[le>>8]+c[255&le]+c[ae>>8]+c[255&ae]+c[oe>>8]+c[255&oe]+c[re>>8]+c[255&re]+c[te>>8]+c[255&te]+c[Z>>8]+c[255&Z]+c[X>>8]+c[255&X]+c[Y>>8]+c[255&Y]+c[K>>8]+c[255&K]+c[G>>8]+c[255&G]+c[H>>8]+c[255&H]+c[B>>8]+c[255&B]+c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],512)}function G(e){var t,n,r=e.length,i=p[512].offset,o=0,s=0|i[31],a=0,l=0|i[30],u=0,d=0|i[29],h=0,f=0|i[28],m=0,v=0|i[27],y=0,b=0|i[26],S=0,E=0|i[25],w=0,_=0|i[24],P=0,C=0|i[23],T=0,I=0|i[22],O=0,R=0|i[21],D=0,x=0|i[20],k=0,A=0|i[19],N=0,j=0|i[18],F=0,M=0|i[17],L=0,U=0|i[16],W=0,B=0|i[15],V=0,H=0|i[14],q=0,G=0|i[13],$=0,K=0|i[12],z=0,Y=0|i[11],J=0,X=0|i[10],Q=0,Z=0|i[9],ee=0,te=0|i[8],ne=0,re=0|i[7],ie=0,oe=0|i[6],se=0,ae=0|i[5],ce=0,le=0|i[4],ue=0,de=0|i[3],he=0,pe=0|i[2],fe=0,ge=0|i[1],me=0,ve=0|i[0];for(n=0;n<r;n++)a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=s<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=t>>6|192)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>12&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>6&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128):(a=343*l,u=343*d,h=343*f,m=343*v,y=343*b,S=343*E,w=343*_,P=343*C,T=343*I,O=343*R,D=343*x,k=343*A,N=343*j,F=343*M,L=343*U,W=343*B,V=343*H,q=343*G,$=343*K,z=343*Y,J=343*X,Q=343*Z,ee=343*te,ne=343*re,ie=343*oe,se=343*ae,ce=343*le,ue=343*de,he=343*pe,fe=343*ge,me=343*ve,J+=(s^=t>>12|224)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,s=65535&(o=343*s),ve=(me+=R<<8)+((fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=343*(l=65535&a),u=343*(d=65535&u),h=343*(f=65535&h),m=343*(v=65535&m),y=343*(b=65535&y),S=343*(E=65535&S),w=343*(_=65535&w),P=343*(C=65535&P),T=343*(I=65535&T),O=343*(R=65535&O),D=343*(x=65535&D),k=343*(A=65535&k),N=343*(j=65535&N),F=343*(M=65535&F),L=343*(U=65535&L),W=343*(B=65535&W),V=343*(H=65535&V),q=343*(G=65535&q),$=343*(K=65535&$),z=343*(Y=65535&z),J=343*(X=65535&J),Q=343*(Z=65535&Q),ee=343*(te=65535&ee),ne=343*(re=65535&ne),ie=343*(oe=65535&ie),se=343*(ae=65535&se),ce=343*(le=65535&ce),ue=343*(de=65535&ue),he=343*(pe=65535&he),fe=343*(ge=65535&fe),me=343*ve,J+=(s^=t>>6&63|128)<<8,Q+=l<<8,ee+=d<<8,ne+=f<<8,ie+=v<<8,se+=b<<8,ce+=E<<8,ue+=_<<8,he+=C<<8,fe+=I<<8,me+=R<<8,s=65535&(o=343*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ve=me+((fe+=he>>>16)>>>16)&65535,ge=65535&fe,s^=63&t|128);return g(c[ve>>8]+c[255&ve]+c[ge>>8]+c[255&ge]+c[pe>>8]+c[255&pe]+c[de>>8]+c[255&de]+c[le>>8]+c[255&le]+c[ae>>8]+c[255&ae]+c[oe>>8]+c[255&oe]+c[re>>8]+c[255&re]+c[te>>8]+c[255&te]+c[Z>>8]+c[255&Z]+c[X>>8]+c[255&X]+c[Y>>8]+c[255&Y]+c[K>>8]+c[255&K]+c[G>>8]+c[255&G]+c[H>>8]+c[255&H]+c[B>>8]+c[255&B]+c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],512)}function $(e){var t,n=e.length-3,r=p[1024].offset,i=0,o=0|r[63],s=0,a=0|r[62],l=0,u=0|r[61],d=0,h=0|r[60],f=0,m=0|r[59],v=0,y=0|r[58],b=0,S=0|r[57],E=0,w=0|r[56],_=0,P=0|r[55],C=0,T=0|r[54],I=0,O=0|r[53],R=0,D=0|r[52],x=0,k=0|r[51],A=0,N=0|r[50],j=0,F=0|r[49],M=0,L=0|r[48],U=0,W=0|r[47],B=0,V=0|r[46],H=0,q=0|r[45],G=0,$=0|r[44],K=0,z=0|r[43],Y=0,J=0|r[42],X=0,Q=0|r[41],Z=0,ee=0|r[40],te=0,ne=0|r[39],re=0,ie=0|r[38],oe=0,se=0|r[37],ae=0,ce=0|r[36],le=0,ue=0|r[35],de=0,he=0|r[34],pe=0,fe=0|r[33],ge=0,me=0|r[32],ve=0,ye=0|r[31],be=0,Se=0|r[30],Ee=0,we=0|r[29],_e=0,Pe=0|r[28],Ce=0,Te=0|r[27],Ie=0,Oe=0|r[26],Re=0,De=0|r[25],xe=0,ke=0|r[24],Ae=0,Ne=0|r[23],je=0,Fe=0|r[22],Me=0,Le=0|r[21],Ue=0,We=0|r[20],Be=0,Ve=0|r[19],He=0,qe=0|r[18],Ge=0,$e=0|r[17],Ke=0,ze=0|r[16],Ye=0,Je=0|r[15],Xe=0,Qe=0|r[14],Ze=0,et=0|r[13],tt=0,nt=0|r[12],rt=0,it=0|r[11],ot=0,st=0|r[10],at=0,ct=0|r[9],lt=0,ut=0|r[8],dt=0,ht=0|r[7],pt=0,ft=0|r[6],gt=0,mt=0|r[5],vt=0,yt=0|r[4],bt=0,St=0|r[3],Et=0,wt=0|r[2],_t=0,Pt=0|r[1],Ct=0,Tt=0|r[0];for(t=0;t<n;)s=397*a,l=397*u,d=397*h,f=397*m,v=397*y,b=397*S,E=397*w,_=397*P,C=397*T,I=397*O,R=397*D,x=397*k,A=397*N,j=397*F,M=397*L,U=397*W,B=397*V,H=397*q,G=397*$,K=397*z,Y=397*J,X=397*Q,Z=397*ee,te=397*ne,re=397*ie,oe=397*se,ae=397*ce,le=397*ue,de=397*he,pe=397*fe,ge=397*me,ve=397*ye,be=397*Se,Ee=397*we,_e=397*Pe,Ce=397*Te,Ie=397*Oe,Re=397*De,xe=397*ke,Ae=397*Ne,je=397*Fe,Me=397*Le,Ue=397*We,Be=397*Ve,He=397*qe,Ge=397*$e,Ke=397*ze,Ye=397*Je,Xe=397*Qe,Ze=397*et,tt=397*nt,rt=397*it,ot=397*st,at=397*ct,lt=397*ut,dt=397*ht,pt=397*ft,gt=397*mt,vt=397*yt,bt=397*St,Et=397*wt,_t=397*Pt,Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,Ct+=J<<8,o=65535&(i=397*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),fe=65535&(pe+=de>>>16),me=65535&(ge+=pe>>>16),ye=65535&(ve+=ge>>>16),Se=65535&(be+=ve>>>16),we=65535&(Ee+=be>>>16),Pe=65535&(_e+=Ee>>>16),Te=65535&(Ce+=_e>>>16),Oe=65535&(Ie+=Ce>>>16),De=65535&(Re+=Ie>>>16),ke=65535&(xe+=Re>>>16),Ne=65535&(Ae+=xe>>>16),Fe=65535&(je+=Ae>>>16),Le=65535&(Me+=je>>>16),We=65535&(Ue+=Me>>>16),Ve=65535&(Be+=Ue>>>16),qe=65535&(He+=Be>>>16),$e=65535&(Ge+=He>>>16),ze=65535&(Ke+=Ge>>>16),Je=65535&(Ye+=Ke>>>16),Qe=65535&(Xe+=Ye>>>16),et=65535&(Ze+=Xe>>>16),nt=65535&(tt+=Ze>>>16),it=65535&(rt+=tt>>>16),st=65535&(ot+=rt>>>16),ct=65535&(at+=ot>>>16),ut=65535&(lt+=at>>>16),ht=65535&(dt+=lt>>>16),ft=65535&(pt+=dt>>>16),mt=65535&(gt+=pt>>>16),yt=65535&(vt+=gt>>>16),St=65535&(bt+=vt>>>16),wt=65535&(Et+=bt>>>16),Tt=Ct+((_t+=Et>>>16)>>>16)&65535,Pt=65535&_t;for(;t<n+3;)s=397*a,l=397*u,d=397*h,f=397*m,v=397*y,b=397*S,E=397*w,_=397*P,C=397*T,I=397*O,R=397*D,x=397*k,A=397*N,j=397*F,M=397*L,U=397*W,B=397*V,H=397*q,G=397*$,K=397*z,Y=397*J,X=397*Q,Z=397*ee,te=397*ne,re=397*ie,oe=397*se,ae=397*ce,le=397*ue,de=397*he,pe=397*fe,ge=397*me,ve=397*ye,be=397*Se,Ee=397*we,_e=397*Pe,Ce=397*Te,Ie=397*Oe,Re=397*De,xe=397*ke,Ae=397*Ne,je=397*Fe,Me=397*Le,Ue=397*We,Be=397*Ve,He=397*qe,Ge=397*$e,Ke=397*ze,Ye=397*Je,Xe=397*Qe,Ze=397*et,tt=397*nt,rt=397*it,ot=397*st,at=397*ct,lt=397*ut,dt=397*ht,pt=397*ft,gt=397*mt,vt=397*yt,bt=397*St,Et=397*wt,_t=397*Pt,Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,Ct+=J<<8,o=65535&(i=397*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),fe=65535&(pe+=de>>>16),me=65535&(ge+=pe>>>16),ye=65535&(ve+=ge>>>16),Se=65535&(be+=ve>>>16),we=65535&(Ee+=be>>>16),Pe=65535&(_e+=Ee>>>16),Te=65535&(Ce+=_e>>>16),Oe=65535&(Ie+=Ce>>>16),De=65535&(Re+=Ie>>>16),ke=65535&(xe+=Re>>>16),Ne=65535&(Ae+=xe>>>16),Fe=65535&(je+=Ae>>>16),Le=65535&(Me+=je>>>16),We=65535&(Ue+=Me>>>16),Ve=65535&(Be+=Ue>>>16),qe=65535&(He+=Be>>>16),$e=65535&(Ge+=He>>>16),ze=65535&(Ke+=Ge>>>16),Je=65535&(Ye+=Ke>>>16),Qe=65535&(Xe+=Ye>>>16),et=65535&(Ze+=Xe>>>16),nt=65535&(tt+=Ze>>>16),it=65535&(rt+=tt>>>16),st=65535&(ot+=rt>>>16),ct=65535&(at+=ot>>>16),ut=65535&(lt+=at>>>16),ht=65535&(dt+=lt>>>16),ft=65535&(pt+=dt>>>16),mt=65535&(gt+=pt>>>16),yt=65535&(vt+=gt>>>16),St=65535&(bt+=vt>>>16),wt=65535&(Et+=bt>>>16),Tt=Ct+((_t+=Et>>>16)>>>16)&65535,Pt=65535&_t;return g(c[Tt>>8]+c[255&Tt]+c[Pt>>8]+c[255&Pt]+c[wt>>8]+c[255&wt]+c[St>>8]+c[255&St]+c[yt>>8]+c[255&yt]+c[mt>>8]+c[255&mt]+c[ft>>8]+c[255&ft]+c[ht>>8]+c[255&ht]+c[ut>>8]+c[255&ut]+c[ct>>8]+c[255&ct]+c[st>>8]+c[255&st]+c[it>>8]+c[255&it]+c[nt>>8]+c[255&nt]+c[et>>8]+c[255&et]+c[Qe>>8]+c[255&Qe]+c[Je>>8]+c[255&Je]+c[ze>>8]+c[255&ze]+c[$e>>8]+c[255&$e]+c[qe>>8]+c[255&qe]+c[Ve>>8]+c[255&Ve]+c[We>>8]+c[255&We]+c[Le>>8]+c[255&Le]+c[Fe>>8]+c[255&Fe]+c[Ne>>8]+c[255&Ne]+c[ke>>8]+c[255&ke]+c[De>>8]+c[255&De]+c[Oe>>8]+c[255&Oe]+c[Te>>8]+c[255&Te]+c[Pe>>8]+c[255&Pe]+c[we>>8]+c[255&we]+c[Se>>8]+c[255&Se]+c[ye>>8]+c[255&ye]+c[me>>8]+c[255&me]+c[fe>>8]+c[255&fe]+c[he>>8]+c[255&he]+c[ue>>8]+c[255&ue]+c[ce>>8]+c[255&ce]+c[se>>8]+c[255&se]+c[ie>>8]+c[255&ie]+c[ne>>8]+c[255&ne]+c[ee>>8]+c[255&ee]+c[Q>>8]+c[255&Q]+c[J>>8]+c[255&J]+c[z>>8]+c[255&z]+c[$>>8]+c[255&$]+c[q>>8]+c[255&q]+c[V>>8]+c[255&V]+c[W>>8]+c[255&W]+c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],1024)}function K(e){var t,n=e.length-3,r=p[1024].offset,i=0,o=0|r[63],s=0,a=0|r[62],l=0,u=0|r[61],d=0,h=0|r[60],f=0,m=0|r[59],v=0,y=0|r[58],b=0,S=0|r[57],E=0,w=0|r[56],_=0,P=0|r[55],C=0,T=0|r[54],I=0,O=0|r[53],R=0,D=0|r[52],x=0,k=0|r[51],A=0,N=0|r[50],j=0,F=0|r[49],M=0,L=0|r[48],U=0,W=0|r[47],B=0,V=0|r[46],H=0,q=0|r[45],G=0,$=0|r[44],K=0,z=0|r[43],Y=0,J=0|r[42],X=0,Q=0|r[41],Z=0,ee=0|r[40],te=0,ne=0|r[39],re=0,ie=0|r[38],oe=0,se=0|r[37],ae=0,ce=0|r[36],le=0,ue=0|r[35],de=0,he=0|r[34],pe=0,fe=0|r[33],ge=0,me=0|r[32],ve=0,ye=0|r[31],be=0,Se=0|r[30],Ee=0,we=0|r[29],_e=0,Pe=0|r[28],Ce=0,Te=0|r[27],Ie=0,Oe=0|r[26],Re=0,De=0|r[25],xe=0,ke=0|r[24],Ae=0,Ne=0|r[23],je=0,Fe=0|r[22],Me=0,Le=0|r[21],Ue=0,We=0|r[20],Be=0,Ve=0|r[19],He=0,qe=0|r[18],Ge=0,$e=0|r[17],Ke=0,ze=0|r[16],Ye=0,Je=0|r[15],Xe=0,Qe=0|r[14],Ze=0,et=0|r[13],tt=0,nt=0|r[12],rt=0,it=0|r[11],ot=0,st=0|r[10],at=0,ct=0|r[9],lt=0,ut=0|r[8],dt=0,ht=0|r[7],pt=0,ft=0|r[6],gt=0,mt=0|r[5],vt=0,yt=0|r[4],bt=0,St=0|r[3],Et=0,wt=0|r[2],_t=0,Pt=0|r[1],Ct=0,Tt=0|r[0];for(t=0;t<n;)s=397*a,l=397*u,d=397*h,f=397*m,v=397*y,b=397*S,E=397*w,_=397*P,C=397*T,I=397*O,R=397*D,x=397*k,A=397*N,j=397*F,M=397*L,U=397*W,B=397*V,H=397*q,G=397*$,K=397*z,Y=397*J,X=397*Q,Z=397*ee,te=397*ne,re=397*ie,oe=397*se,ae=397*ce,le=397*ue,de=397*he,pe=397*fe,ge=397*me,ve=397*ye,be=397*Se,Ee=397*we,_e=397*Pe,Ce=397*Te,Ie=397*Oe,Re=397*De,xe=397*ke,Ae=397*Ne,je=397*Fe,Me=397*Le,Ue=397*We,Be=397*Ve,He=397*qe,Ge=397*$e,Ke=397*ze,Ye=397*Je,Xe=397*Qe,Ze=397*et,tt=397*nt,rt=397*it,ot=397*st,at=397*ct,lt=397*ut,dt=397*ht,pt=397*ft,gt=397*mt,vt=397*yt,bt=397*St,Et=397*wt,_t=397*Pt,Ct=397*Tt,Me+=o<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,o=65535&(i=397*o),Tt=(Ct+=J<<8)+((_t+=(Et+=(bt+=(vt+=(gt+=(pt+=(dt+=(lt+=(at+=(ot+=(rt+=(tt+=(Ze+=(Xe+=(Ye+=(Ke+=(Ge+=(He+=(Be+=(Ue+=(Me+=(je+=(Ae+=(xe+=(Re+=(Ie+=(Ce+=(_e+=(Ee+=(be+=(ve+=(ge+=(pe+=(de+=(le+=(ae+=(oe+=(re+=(te+=(Z+=(X+=(Y+=(K+=(G+=(H+=(B+=(U+=(M+=(j+=(A+=(x+=(R+=(I+=(C+=(_+=(E+=(b+=(v+=(f+=(d+=(l+=(s+=i>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,s=397*(a=65535&s),l=397*(u=65535&l),d=397*(h=65535&d),f=397*(m=65535&f),v=397*(y=65535&v),b=397*(S=65535&b),E=397*(w=65535&E),_=397*(P=65535&_),C=397*(T=65535&C),I=397*(O=65535&I),R=397*(D=65535&R),x=397*(k=65535&x),A=397*(N=65535&A),j=397*(F=65535&j),M=397*(L=65535&M),U=397*(W=65535&U),B=397*(V=65535&B),H=397*(q=65535&H),G=397*($=65535&G),K=397*(z=65535&K),Y=397*(J=65535&Y),X=397*(Q=65535&X),Z=397*(ee=65535&Z),te=397*(ne=65535&te),re=397*(ie=65535&re),oe=397*(se=65535&oe),ae=397*(ce=65535&ae),le=397*(ue=65535&le),de=397*(he=65535&de),pe=397*(fe=65535&pe),ge=397*(me=65535&ge),ve=397*(ye=65535&ve),be=397*(Se=65535&be),Ee=397*(we=65535&Ee),_e=397*(Pe=65535&_e),Ce=397*(Te=65535&Ce),Ie=397*(Oe=65535&Ie),Re=397*(De=65535&Re),xe=397*(ke=65535&xe),Ae=397*(Ne=65535&Ae),je=397*(Fe=65535&je),Me=397*(Le=65535&Me),Ue=397*(We=65535&Ue),Be=397*(Ve=65535&Be),He=397*(qe=65535&He),Ge=397*($e=65535&Ge),Ke=397*(ze=65535&Ke),Ye=397*(Je=65535&Ye),Xe=397*(Qe=65535&Xe),Ze=397*(et=65535&Ze),tt=397*(nt=65535&tt),rt=397*(it=65535&rt),ot=397*(st=65535&ot),at=397*(ct=65535&at),lt=397*(ut=65535&lt),dt=397*(ht=65535&dt),pt=397*(ft=65535&pt),gt=397*(mt=65535&gt),vt=397*(yt=65535&vt),bt=397*(St=65535&bt),Et=397*(wt=65535&Et),_t=397*(Pt=65535&_t),Ct=397*Tt,Me+=(o^=e.charCodeAt(t++))<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,Ct+=J<<8,o=65535&(i=397*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),fe=65535&(pe+=de>>>16),me=65535&(ge+=pe>>>16),ye=65535&(ve+=ge>>>16),Se=65535&(be+=ve>>>16),we=65535&(Ee+=be>>>16),Pe=65535&(_e+=Ee>>>16),Te=65535&(Ce+=_e>>>16),Oe=65535&(Ie+=Ce>>>16),De=65535&(Re+=Ie>>>16),ke=65535&(xe+=Re>>>16),Ne=65535&(Ae+=xe>>>16),Fe=65535&(je+=Ae>>>16),Le=65535&(Me+=je>>>16),We=65535&(Ue+=Me>>>16),Ve=65535&(Be+=Ue>>>16),qe=65535&(He+=Be>>>16),$e=65535&(Ge+=He>>>16),ze=65535&(Ke+=Ge>>>16),Je=65535&(Ye+=Ke>>>16),Qe=65535&(Xe+=Ye>>>16),et=65535&(Ze+=Xe>>>16),nt=65535&(tt+=Ze>>>16),it=65535&(rt+=tt>>>16),st=65535&(ot+=rt>>>16),ct=65535&(at+=ot>>>16),ut=65535&(lt+=at>>>16),ht=65535&(dt+=lt>>>16),ft=65535&(pt+=dt>>>16),mt=65535&(gt+=pt>>>16),yt=65535&(vt+=gt>>>16),St=65535&(bt+=vt>>>16),wt=65535&(Et+=bt>>>16),Tt=Ct+((_t+=Et>>>16)>>>16)&65535,Pt=65535&_t,o^=e.charCodeAt(t++);for(;t<n+3;)s=397*a,l=397*u,d=397*h,f=397*m,v=397*y,b=397*S,E=397*w,_=397*P,C=397*T,I=397*O,R=397*D,x=397*k,A=397*N,j=397*F,M=397*L,U=397*W,B=397*V,H=397*q,G=397*$,K=397*z,Y=397*J,X=397*Q,Z=397*ee,te=397*ne,re=397*ie,oe=397*se,ae=397*ce,le=397*ue,de=397*he,pe=397*fe,ge=397*me,ve=397*ye,be=397*Se,Ee=397*we,_e=397*Pe,Ce=397*Te,Ie=397*Oe,Re=397*De,xe=397*ke,Ae=397*Ne,je=397*Fe,Me=397*Le,Ue=397*We,Be=397*Ve,He=397*qe,Ge=397*$e,Ke=397*ze,Ye=397*Je,Xe=397*Qe,Ze=397*et,tt=397*nt,rt=397*it,ot=397*st,at=397*ct,lt=397*ut,dt=397*ht,pt=397*ft,gt=397*mt,vt=397*yt,bt=397*St,Et=397*wt,_t=397*Pt,Ct=397*Tt,Me+=o<<8,Ue+=a<<8,Be+=u<<8,He+=h<<8,Ge+=m<<8,Ke+=y<<8,Ye+=S<<8,Xe+=w<<8,Ze+=P<<8,tt+=T<<8,rt+=O<<8,ot+=D<<8,at+=k<<8,lt+=N<<8,dt+=F<<8,pt+=L<<8,gt+=W<<8,vt+=V<<8,bt+=q<<8,Et+=$<<8,_t+=z<<8,Ct+=J<<8,o=65535&(i=397*o),a=65535&(s+=i>>>16),u=65535&(l+=s>>>16),h=65535&(d+=l>>>16),m=65535&(f+=d>>>16),y=65535&(v+=f>>>16),S=65535&(b+=v>>>16),w=65535&(E+=b>>>16),P=65535&(_+=E>>>16),T=65535&(C+=_>>>16),O=65535&(I+=C>>>16),D=65535&(R+=I>>>16),k=65535&(x+=R>>>16),N=65535&(A+=x>>>16),F=65535&(j+=A>>>16),L=65535&(M+=j>>>16),W=65535&(U+=M>>>16),V=65535&(B+=U>>>16),q=65535&(H+=B>>>16),$=65535&(G+=H>>>16),z=65535&(K+=G>>>16),J=65535&(Y+=K>>>16),Q=65535&(X+=Y>>>16),ee=65535&(Z+=X>>>16),ne=65535&(te+=Z>>>16),ie=65535&(re+=te>>>16),se=65535&(oe+=re>>>16),ce=65535&(ae+=oe>>>16),ue=65535&(le+=ae>>>16),he=65535&(de+=le>>>16),fe=65535&(pe+=de>>>16),me=65535&(ge+=pe>>>16),ye=65535&(ve+=ge>>>16),Se=65535&(be+=ve>>>16),we=65535&(Ee+=be>>>16),Pe=65535&(_e+=Ee>>>16),Te=65535&(Ce+=_e>>>16),Oe=65535&(Ie+=Ce>>>16),De=65535&(Re+=Ie>>>16),ke=65535&(xe+=Re>>>16),Ne=65535&(Ae+=xe>>>16),Fe=65535&(je+=Ae>>>16),Le=65535&(Me+=je>>>16),We=65535&(Ue+=Me>>>16),Ve=65535&(Be+=Ue>>>16),qe=65535&(He+=Be>>>16),$e=65535&(Ge+=He>>>16),ze=65535&(Ke+=Ge>>>16),Je=65535&(Ye+=Ke>>>16),Qe=65535&(Xe+=Ye>>>16),et=65535&(Ze+=Xe>>>16),nt=65535&(tt+=Ze>>>16),it=65535&(rt+=tt>>>16),st=65535&(ot+=rt>>>16),ct=65535&(at+=ot>>>16),ut=65535&(lt+=at>>>16),ht=65535&(dt+=lt>>>16),ft=65535&(pt+=dt>>>16),mt=65535&(gt+=pt>>>16),yt=65535&(vt+=gt>>>16),St=65535&(bt+=vt>>>16),wt=65535&(Et+=bt>>>16),Tt=Ct+((_t+=Et>>>16)>>>16)&65535,Pt=65535&_t,o^=e.charCodeAt(t++);return g(c[Tt>>8]+c[255&Tt]+c[Pt>>8]+c[255&Pt]+c[wt>>8]+c[255&wt]+c[St>>8]+c[255&St]+c[yt>>8]+c[255&yt]+c[mt>>8]+c[255&mt]+c[ft>>8]+c[255&ft]+c[ht>>8]+c[255&ht]+c[ut>>8]+c[255&ut]+c[ct>>8]+c[255&ct]+c[st>>8]+c[255&st]+c[it>>8]+c[255&it]+c[nt>>8]+c[255&nt]+c[et>>8]+c[255&et]+c[Qe>>8]+c[255&Qe]+c[Je>>8]+c[255&Je]+c[ze>>8]+c[255&ze]+c[$e>>8]+c[255&$e]+c[qe>>8]+c[255&qe]+c[Ve>>8]+c[255&Ve]+c[We>>8]+c[255&We]+c[Le>>8]+c[255&Le]+c[Fe>>8]+c[255&Fe]+c[Ne>>8]+c[255&Ne]+c[ke>>8]+c[255&ke]+c[De>>8]+c[255&De]+c[Oe>>8]+c[255&Oe]+c[Te>>8]+c[255&Te]+c[Pe>>8]+c[255&Pe]+c[we>>8]+c[255&we]+c[Se>>8]+c[255&Se]+c[ye>>8]+c[255&ye]+c[me>>8]+c[255&me]+c[fe>>8]+c[255&fe]+c[he>>8]+c[255&he]+c[ue>>8]+c[255&ue]+c[ce>>8]+c[255&ce]+c[se>>8]+c[255&se]+c[ie>>8]+c[255&ie]+c[ne>>8]+c[255&ne]+c[ee>>8]+c[255&ee]+c[Q>>8]+c[255&Q]+c[J>>8]+c[255&J]+c[z>>8]+c[255&z]+c[$>>8]+c[255&$]+c[q>>8]+c[255&q]+c[V>>8]+c[255&V]+c[W>>8]+c[255&W]+c[L>>8]+c[255&L]+c[F>>8]+c[255&F]+c[N>>8]+c[255&N]+c[k>>8]+c[255&k]+c[D>>8]+c[255&D]+c[O>>8]+c[255&O]+c[T>>8]+c[255&T]+c[P>>8]+c[255&P]+c[w>>8]+c[255&w]+c[S>>8]+c[255&S]+c[y>>8]+c[255&y]+c[m>>8]+c[255&m]+c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o],1024)}function z(e){var t,n,r=e.length,i=p[1024].offset,o=0,s=0|i[63],a=0,l=0|i[62],u=0,d=0|i[61],h=0,f=0|i[60],m=0,v=0|i[59],y=0,b=0|i[58],S=0,E=0|i[57],w=0,_=0|i[56],P=0,C=0|i[55],T=0,I=0|i[54],O=0,R=0|i[53],D=0,x=0|i[52],k=0,A=0|i[51],N=0,j=0|i[50],F=0,M=0|i[49],L=0,U=0|i[48],W=0,B=0|i[47],V=0,H=0|i[46],q=0,G=0|i[45],$=0,K=0|i[44],z=0,Y=0|i[43],J=0,X=0|i[42],Q=0,Z=0|i[41],ee=0,te=0|i[40],ne=0,re=0|i[39],ie=0,oe=0|i[38],se=0,ae=0|i[37],ce=0,le=0|i[36],ue=0,de=0|i[35],he=0,pe=0|i[34],fe=0,ge=0|i[33],me=0,ve=0|i[32],ye=0,be=0|i[31],Se=0,Ee=0|i[30],we=0,_e=0|i[29],Pe=0,Ce=0|i[28],Te=0,Ie=0|i[27],Oe=0,Re=0|i[26],De=0,xe=0|i[25],ke=0,Ae=0|i[24],Ne=0,je=0|i[23],Fe=0,Me=0|i[22],Le=0,Ue=0|i[21],We=0,Be=0|i[20],Ve=0,He=0|i[19],qe=0,Ge=0|i[18],$e=0,Ke=0|i[17],ze=0,Ye=0|i[16],Je=0,Xe=0|i[15],Qe=0,Ze=0|i[14],et=0,tt=0|i[13],nt=0,rt=0|i[12],it=0,ot=0|i[11],st=0,at=0|i[10],ct=0,lt=0|i[9],ut=0,dt=0|i[8],ht=0,pt=0|i[7],ft=0,gt=0|i[6],mt=0,vt=0|i[5],yt=0,bt=0|i[4],St=0,Et=0|i[3],wt=0,_t=0|i[2],Pt=0,Ct=0|i[1],Tt=0,It=0|i[0];for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=t>>6|192)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>12&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>6&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128):(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=t>>12|224)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>6&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128),a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=s<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt;return g(c[It>>8]+c[255&It]+c[Ct>>8]+c[255&Ct]+c[_t>>8]+c[255&_t]+c[Et>>8]+c[255&Et]+c[bt>>8]+c[255&bt]+c[vt>>8]+c[255&vt]+c[gt>>8]+c[255&gt]+c[pt>>8]+c[255&pt]+c[dt>>8]+c[255&dt]+c[lt>>8]+c[255&lt]+c[at>>8]+c[255&at]+c[ot>>8]+c[255&ot]+c[rt>>8]+c[255&rt]+c[tt>>8]+c[255&tt]+c[Ze>>8]+c[255&Ze]+c[Xe>>8]+c[255&Xe]+c[Ye>>8]+c[255&Ye]+c[Ke>>8]+c[255&Ke]+c[Ge>>8]+c[255&Ge]+c[He>>8]+c[255&He]+c[Be>>8]+c[255&Be]+c[Ue>>8]+c[255&Ue]+c[Me>>8]+c[255&Me]+c[je>>8]+c[255&je]+c[Ae>>8]+c[255&Ae]+c[xe>>8]+c[255&xe]+c[Re>>8]+c[255&Re]+c[Ie>>8]+c[255&Ie]+c[Ce>>8]+c[255&Ce]+c[_e>>8]+c[255&_e]+c[Ee>>8]+c[255&Ee]+c[be>>8]+c[255&be]+c[ve>>8]+c[255&ve]+c[ge>>8]+c[255&ge]+c[pe>>8]+c[255&pe]+c[de>>8]+c[255&de]+c[le>>8]+c[255&le]+c[ae>>8]+c[255&ae]+c[oe>>8]+c[255&oe]+c[re>>8]+c[255&re]+c[te>>8]+c[255&te]+c[Z>>8]+c[255&Z]+c[X>>8]+c[255&X]+c[Y>>8]+c[255&Y]+c[K>>8]+c[255&K]+c[G>>8]+c[255&G]+c[H>>8]+c[255&H]+c[B>>8]+c[255&B]+c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],1024)}function Y(e){var t,n,r=e.length,i=p[1024].offset,o=0,s=0|i[63],a=0,l=0|i[62],u=0,d=0|i[61],h=0,f=0|i[60],m=0,v=0|i[59],y=0,b=0|i[58],S=0,E=0|i[57],w=0,_=0|i[56],P=0,C=0|i[55],T=0,I=0|i[54],O=0,R=0|i[53],D=0,x=0|i[52],k=0,A=0|i[51],N=0,j=0|i[50],F=0,M=0|i[49],L=0,U=0|i[48],W=0,B=0|i[47],V=0,H=0|i[46],q=0,G=0|i[45],$=0,K=0|i[44],z=0,Y=0|i[43],J=0,X=0|i[42],Q=0,Z=0|i[41],ee=0,te=0|i[40],ne=0,re=0|i[39],ie=0,oe=0|i[38],se=0,ae=0|i[37],ce=0,le=0|i[36],ue=0,de=0|i[35],he=0,pe=0|i[34],fe=0,ge=0|i[33],me=0,ve=0|i[32],ye=0,be=0|i[31],Se=0,Ee=0|i[30],we=0,_e=0|i[29],Pe=0,Ce=0|i[28],Te=0,Ie=0|i[27],Oe=0,Re=0|i[26],De=0,xe=0|i[25],ke=0,Ae=0|i[24],Ne=0,je=0|i[23],Fe=0,Me=0|i[22],Le=0,Ue=0|i[21],We=0,Be=0|i[20],Ve=0,He=0|i[19],qe=0,Ge=0|i[18],$e=0,Ke=0|i[17],ze=0,Ye=0|i[16],Je=0,Xe=0|i[15],Qe=0,Ze=0|i[14],et=0,tt=0|i[13],nt=0,rt=0|i[12],it=0,ot=0|i[11],st=0,at=0|i[10],ct=0,lt=0|i[9],ut=0,dt=0|i[8],ht=0,pt=0|i[7],ft=0,gt=0|i[6],mt=0,vt=0|i[5],yt=0,bt=0|i[4],St=0,Et=0|i[3],wt=0,_t=0|i[2],Pt=0,Ct=0|i[1],Tt=0,It=0|i[0];for(n=0;n<r;n++)a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=s<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,(t=e.charCodeAt(n))<128?s^=t:t<2048?(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=t>>6|192)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>12&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>6&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128):(a=397*l,u=397*d,h=397*f,m=397*v,y=397*b,S=397*E,w=397*_,P=397*C,T=397*I,O=397*R,D=397*x,k=397*A,N=397*j,F=397*M,L=397*U,W=397*B,V=397*H,q=397*G,$=397*K,z=397*Y,J=397*X,Q=397*Z,ee=397*te,ne=397*re,ie=397*oe,se=397*ae,ce=397*le,ue=397*de,he=397*pe,fe=397*ge,me=397*ve,ye=397*be,Se=397*Ee,we=397*_e,Pe=397*Ce,Te=397*Ie,Oe=397*Re,De=397*xe,ke=397*Ae,Ne=397*je,Fe=397*Me,Le=397*Ue,We=397*Be,Ve=397*He,qe=397*Ge,$e=397*Ke,ze=397*Ye,Je=397*Xe,Qe=397*Ze,et=397*tt,nt=397*rt,it=397*ot,st=397*at,ct=397*lt,ut=397*dt,ht=397*pt,ft=397*gt,mt=397*vt,yt=397*bt,St=397*Et,wt=397*_t,Pt=397*Ct,Tt=397*It,Le+=(s^=t>>12|224)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,s=65535&(o=397*s),It=(Tt+=X<<8)+((Pt+=(wt+=(St+=(yt+=(mt+=(ft+=(ht+=(ut+=(ct+=(st+=(it+=(nt+=(et+=(Qe+=(Je+=(ze+=($e+=(qe+=(Ve+=(We+=(Le+=(Fe+=(Ne+=(ke+=(De+=(Oe+=(Te+=(Pe+=(we+=(Se+=(ye+=(me+=(fe+=(he+=(ue+=(ce+=(se+=(ie+=(ne+=(ee+=(Q+=(J+=(z+=($+=(q+=(V+=(W+=(L+=(F+=(N+=(k+=(D+=(O+=(T+=(P+=(w+=(S+=(y+=(m+=(h+=(u+=(a+=o>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)>>>16)&65535,a=397*(l=65535&a),u=397*(d=65535&u),h=397*(f=65535&h),m=397*(v=65535&m),y=397*(b=65535&y),S=397*(E=65535&S),w=397*(_=65535&w),P=397*(C=65535&P),T=397*(I=65535&T),O=397*(R=65535&O),D=397*(x=65535&D),k=397*(A=65535&k),N=397*(j=65535&N),F=397*(M=65535&F),L=397*(U=65535&L),W=397*(B=65535&W),V=397*(H=65535&V),q=397*(G=65535&q),$=397*(K=65535&$),z=397*(Y=65535&z),J=397*(X=65535&J),Q=397*(Z=65535&Q),ee=397*(te=65535&ee),ne=397*(re=65535&ne),ie=397*(oe=65535&ie),se=397*(ae=65535&se),ce=397*(le=65535&ce),ue=397*(de=65535&ue),he=397*(pe=65535&he),fe=397*(ge=65535&fe),me=397*(ve=65535&me),ye=397*(be=65535&ye),Se=397*(Ee=65535&Se),we=397*(_e=65535&we),Pe=397*(Ce=65535&Pe),Te=397*(Ie=65535&Te),Oe=397*(Re=65535&Oe),De=397*(xe=65535&De),ke=397*(Ae=65535&ke),Ne=397*(je=65535&Ne),Fe=397*(Me=65535&Fe),Le=397*(Ue=65535&Le),We=397*(Be=65535&We),Ve=397*(He=65535&Ve),qe=397*(Ge=65535&qe),$e=397*(Ke=65535&$e),ze=397*(Ye=65535&ze),Je=397*(Xe=65535&Je),Qe=397*(Ze=65535&Qe),et=397*(tt=65535&et),nt=397*(rt=65535&nt),it=397*(ot=65535&it),st=397*(at=65535&st),ct=397*(lt=65535&ct),ut=397*(dt=65535&ut),ht=397*(pt=65535&ht),ft=397*(gt=65535&ft),mt=397*(vt=65535&mt),yt=397*(bt=65535&yt),St=397*(Et=65535&St),wt=397*(_t=65535&wt),Pt=397*(Ct=65535&Pt),Tt=397*It,Le+=(s^=t>>6&63|128)<<8,We+=l<<8,Ve+=d<<8,qe+=f<<8,$e+=v<<8,ze+=b<<8,Je+=E<<8,Qe+=_<<8,et+=C<<8,nt+=I<<8,it+=R<<8,st+=x<<8,ct+=A<<8,ut+=j<<8,ht+=M<<8,ft+=U<<8,mt+=B<<8,yt+=H<<8,St+=G<<8,wt+=K<<8,Pt+=Y<<8,Tt+=X<<8,s=65535&(o=397*s),l=65535&(a+=o>>>16),d=65535&(u+=a>>>16),f=65535&(h+=u>>>16),v=65535&(m+=h>>>16),b=65535&(y+=m>>>16),E=65535&(S+=y>>>16),_=65535&(w+=S>>>16),C=65535&(P+=w>>>16),I=65535&(T+=P>>>16),R=65535&(O+=T>>>16),x=65535&(D+=O>>>16),A=65535&(k+=D>>>16),j=65535&(N+=k>>>16),M=65535&(F+=N>>>16),U=65535&(L+=F>>>16),B=65535&(W+=L>>>16),H=65535&(V+=W>>>16),G=65535&(q+=V>>>16),K=65535&($+=q>>>16),Y=65535&(z+=$>>>16),X=65535&(J+=z>>>16),Z=65535&(Q+=J>>>16),te=65535&(ee+=Q>>>16),re=65535&(ne+=ee>>>16),oe=65535&(ie+=ne>>>16),ae=65535&(se+=ie>>>16),le=65535&(ce+=se>>>16),de=65535&(ue+=ce>>>16),pe=65535&(he+=ue>>>16),ge=65535&(fe+=he>>>16),ve=65535&(me+=fe>>>16),be=65535&(ye+=me>>>16),Ee=65535&(Se+=ye>>>16),_e=65535&(we+=Se>>>16),Ce=65535&(Pe+=we>>>16),Ie=65535&(Te+=Pe>>>16),Re=65535&(Oe+=Te>>>16),xe=65535&(De+=Oe>>>16),Ae=65535&(ke+=De>>>16),je=65535&(Ne+=ke>>>16),Me=65535&(Fe+=Ne>>>16),Ue=65535&(Le+=Fe>>>16),Be=65535&(We+=Le>>>16),He=65535&(Ve+=We>>>16),Ge=65535&(qe+=Ve>>>16),Ke=65535&($e+=qe>>>16),Ye=65535&(ze+=$e>>>16),Xe=65535&(Je+=ze>>>16),Ze=65535&(Qe+=Je>>>16),tt=65535&(et+=Qe>>>16),rt=65535&(nt+=et>>>16),ot=65535&(it+=nt>>>16),at=65535&(st+=it>>>16),lt=65535&(ct+=st>>>16),dt=65535&(ut+=ct>>>16),pt=65535&(ht+=ut>>>16),gt=65535&(ft+=ht>>>16),vt=65535&(mt+=ft>>>16),bt=65535&(yt+=mt>>>16),Et=65535&(St+=yt>>>16),_t=65535&(wt+=St>>>16),It=Tt+((Pt+=wt>>>16)>>>16)&65535,Ct=65535&Pt,s^=63&t|128);return g(c[It>>8]+c[255&It]+c[Ct>>8]+c[255&Ct]+c[_t>>8]+c[255&_t]+c[Et>>8]+c[255&Et]+c[bt>>8]+c[255&bt]+c[vt>>8]+c[255&vt]+c[gt>>8]+c[255&gt]+c[pt>>8]+c[255&pt]+c[dt>>8]+c[255&dt]+c[lt>>8]+c[255&lt]+c[at>>8]+c[255&at]+c[ot>>8]+c[255&ot]+c[rt>>8]+c[255&rt]+c[tt>>8]+c[255&tt]+c[Ze>>8]+c[255&Ze]+c[Xe>>8]+c[255&Xe]+c[Ye>>8]+c[255&Ye]+c[Ke>>8]+c[255&Ke]+c[Ge>>8]+c[255&Ge]+c[He>>8]+c[255&He]+c[Be>>8]+c[255&Be]+c[Ue>>8]+c[255&Ue]+c[Me>>8]+c[255&Me]+c[je>>8]+c[255&je]+c[Ae>>8]+c[255&Ae]+c[xe>>8]+c[255&xe]+c[Re>>8]+c[255&Re]+c[Ie>>8]+c[255&Ie]+c[Ce>>8]+c[255&Ce]+c[_e>>8]+c[255&_e]+c[Ee>>8]+c[255&Ee]+c[be>>8]+c[255&be]+c[ve>>8]+c[255&ve]+c[ge>>8]+c[255&ge]+c[pe>>8]+c[255&pe]+c[de>>8]+c[255&de]+c[le>>8]+c[255&le]+c[ae>>8]+c[255&ae]+c[oe>>8]+c[255&oe]+c[re>>8]+c[255&re]+c[te>>8]+c[255&te]+c[Z>>8]+c[255&Z]+c[X>>8]+c[255&X]+c[Y>>8]+c[255&Y]+c[K>>8]+c[255&K]+c[G>>8]+c[255&G]+c[H>>8]+c[255&H]+c[B>>8]+c[255&B]+c[U>>8]+c[255&U]+c[M>>8]+c[255&M]+c[j>>8]+c[255&j]+c[A>>8]+c[255&A]+c[x>>8]+c[255&x]+c[R>>8]+c[255&R]+c[I>>8]+c[255&I]+c[C>>8]+c[255&C]+c[_>>8]+c[255&_]+c[E>>8]+c[255&E]+c[b>>8]+c[255&b]+c[v>>8]+c[255&v]+c[f>>8]+c[255&f]+c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s],1024)}return t=w,n=T,r=D,i=N,o=L,s=V,a=$,b("1a"),S(!1),E(),{hash:y,setKeyspace:function(e){if(52!==e&&!p[e])throw new Error("Supported FNV keyspacs: 32, 52, 64, 128, 256, 512, and 1024 bit");h=e},version:b,useUTF8:S,seed:E,fast1a32:function(e){var t,n=e.length-3,r=0,i=40389,o=0,s=33052;for(t=0;t<n;)o=403*s,o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),s=(o+=(i^=e.charCodeAt(t++))<<8)+((r=403*i)>>>16)&65535,i=65535&r;for(;t<n+3;)o=403*s,s=(o+=(i^=e.charCodeAt(t++))<<8)+((r=403*i)>>>16)&65535,i=65535&r;return(s<<16>>>0)+i},fast1a32hex:function(e){var t,n=e.length-3,r=0,i=40389,o=0,s=33052;for(t=0;t<n;)o=403*s,o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),o+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=403*i),o=403*(s=o+(r>>>16)&65535),s=(o+=(i^=e.charCodeAt(t++))<<8)+((r=403*i)>>>16)&65535,i=65535&r;for(;t<n+3;)o=403*s,s=(o+=(i^=e.charCodeAt(t++))<<8)+((r=403*i)>>>16)&65535,i=65535&r;return c[s>>>8&255]+c[255&s]+c[i>>>8&255]+c[255&i]},fast1a52:function(e){var t,n=e.length-3,r=0,i=8997,o=0,s=33826,a=0,c=40164,l=0,u=52210;for(t=0;t<n;)o=435*s,a=435*c,l=435*u,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),u=(l+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(c=65535&a),l=435*u,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),u=(l+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(c=65535&a),l=435*u,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),u=(l+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(c=65535&a),l=435*u,a+=(i^=e.charCodeAt(t++))<<8,l+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),u=l+((a+=o>>>16)>>>16)&65535,c=65535&a;for(;t<n+3;)o=435*s,a=435*c,l=435*u,a+=(i^=e.charCodeAt(t++))<<8,l+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),u=l+((a+=o>>>16)>>>16)&65535,c=65535&a;return 281474976710656*(15&u)+4294967296*c+65536*s+(i^u>>4)},fast1a52hex:function(e){var t,n=e.length-3,r=0,i=8997,o=0,s=33826,a=0,u=40164,d=0,h=52210;for(t=0;t<n;)o=435*s,a=435*u,d=435*h,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),h=(d+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(u=65535&a),d=435*h,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),h=(d+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(u=65535&a),d=435*h,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),h=(d+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(u=65535&a),d=435*h,a+=(i^=e.charCodeAt(t++))<<8,d+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),h=d+((a+=o>>>16)>>>16)&65535,u=65535&a;for(;t<n+3;)o=435*s,a=435*u,d=435*h,a+=(i^=e.charCodeAt(t++))<<8,d+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),h=d+((a+=o>>>16)>>>16)&65535,u=65535&a;return l[15&h]+c[u>>8]+c[255&u]+c[s>>8]+c[255&s]+c[i>>8^h>>12]+c[255&(i^h>>4)]},fast1a64:function(e){var t,n=e.length-3,r=0,i=8997,o=0,s=33826,a=0,l=40164,u=0,d=52210;for(t=0;t<n;)o=435*s,a=435*l,u=435*d,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),d=(u+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(l=65535&a),u=435*d,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),d=(u+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(l=65535&a),u=435*d,a+=(i^=e.charCodeAt(t++))<<8,i=65535&(r=435*i),d=(u+=s<<8)+((a+=(o+=r>>>16)>>>16)>>>16)&65535,o=435*(s=65535&o),a=435*(l=65535&a),u=435*d,a+=(i^=e.charCodeAt(t++))<<8,u+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),d=u+((a+=o>>>16)>>>16)&65535,l=65535&a;for(;t<n+3;)o=435*s,a=435*l,u=435*d,a+=(i^=e.charCodeAt(t++))<<8,u+=s<<8,i=65535&(r=435*i),s=65535&(o+=r>>>16),d=u+((a+=o>>>16)>>>16)&65535,l=65535&a;return c[d>>8]+c[255&d]+c[l>>8]+c[255&l]+c[s>>8]+c[255&s]+c[i>>8]+c[255&i]},fast1a32utf:function(e){var t,n,r=e.length,i=0,o=40389,s=0,a=33052;for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?o^=t:t<2048?(s=403*a,a=(s+=(o^=t>>6|192)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(s=403*a,s+=(o^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=t>>12&63|128)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=t>>6&63|128)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128):(s=403*a,s+=(o^=t>>12|224)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=t>>6&63|128)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128),s=403*a,a=(s+=o<<8)+((i=403*o)>>>16)&65535,o=65535&i;return(a<<16>>>0)+o},fast1a32hexutf:function(e){var t,n,r=e.length,i=0,o=40389,s=0,a=33052;for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?o^=t:t<2048?(s=403*a,a=(s+=(o^=t>>6|192)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(s=403*a,s+=(o^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),s+=(o^=t>>12&63|128)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=t>>6&63|128)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128):(s=403*a,s+=(o^=t>>12|224)<<8,o=65535&(i=403*o),s=403*(a=s+(i>>>16)&65535),a=(s+=(o^=t>>6&63|128)<<8)+((i=403*o)>>>16)&65535,o=65535&i,o^=63&t|128),s=403*a,a=(s+=o<<8)+((i=403*o)>>>16)&65535,o=65535&i;return c[a>>>8&255]+c[255&a]+c[o>>>8&255]+c[255&o]},fast1a52utf:function(e){var t,n,r=e.length,i=0,o=8997,s=0,a=33826,c=0,l=40164,u=0,d=52210;for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?o^=t:t<2048?(s=435*a,c=435*l,u=435*d,c+=(o^=t>>6|192)<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c,o^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(s=435*a,c=435*l,u=435*d,c+=(o^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=t>>12&63|128)<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=t>>6&63|128)<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c,o^=63&t|128):(s=435*a,c=435*l,u=435*d,c+=(o^=t>>12|224)<<8,o=65535&(i=435*o),d=(u+=a<<8)+((c+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),c=435*(l=65535&c),u=435*d,c+=(o^=t>>6&63|128)<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c,o^=63&t|128),s=435*a,c=435*l,u=435*d,c+=o<<8,u+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),d=u+((c+=s>>>16)>>>16)&65535,l=65535&c;return 281474976710656*(15&d)+4294967296*l+65536*a+(o^d>>4)},fast1a52hexutf:function(e){var t,n,r=e.length,i=0,o=8997,s=0,a=33826,u=0,d=40164,h=0,p=52210;for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?o^=t:t<2048?(s=435*a,u=435*d,h=435*p,u+=(o^=t>>6|192)<<8,h+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),p=h+((u+=s>>>16)>>>16)&65535,d=65535&u,o^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(s=435*a,u=435*d,h=435*p,u+=(o^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,o=65535&(i=435*o),p=(h+=a<<8)+((u+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),u=435*(d=65535&u),h=435*p,u+=(o^=t>>12&63|128)<<8,o=65535&(i=435*o),p=(h+=a<<8)+((u+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),u=435*(d=65535&u),h=435*p,u+=(o^=t>>6&63|128)<<8,h+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),p=h+((u+=s>>>16)>>>16)&65535,d=65535&u,o^=63&t|128):(s=435*a,u=435*d,h=435*p,u+=(o^=t>>12|224)<<8,o=65535&(i=435*o),p=(h+=a<<8)+((u+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),u=435*(d=65535&u),h=435*p,u+=(o^=t>>6&63|128)<<8,h+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),p=h+((u+=s>>>16)>>>16)&65535,d=65535&u,o^=63&t|128),s=435*a,u=435*d,h=435*p,u+=o<<8,h+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),p=h+((u+=s>>>16)>>>16)&65535,d=65535&u;return l[15&p]+c[d>>8]+c[255&d]+c[a>>8]+c[255&a]+c[o>>8^p>>12]+c[255&(o^p>>4)]},fast1a64utf:function(e){var t,n,r=e.length,i=0,o=8997,s=0,a=33826,l=0,u=40164,d=0,h=52210;for(n=0;n<r;n++)(t=e.charCodeAt(n))<128?o^=t:t<2048?(s=435*a,l=435*u,d=435*h,l+=(o^=t>>6|192)<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l,o^=63&t|128):55296==(64512&t)&&n+1<r&&56320==(64512&e.charCodeAt(n+1))?(s=435*a,l=435*u,d=435*h,l+=(o^=(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++n)))>>18|240)<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=t>>12&63|128)<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=t>>6&63|128)<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l,o^=63&t|128):(s=435*a,l=435*u,d=435*h,l+=(o^=t>>12|224)<<8,o=65535&(i=435*o),h=(d+=a<<8)+((l+=(s+=i>>>16)>>>16)>>>16)&65535,s=435*(a=65535&s),l=435*(u=65535&l),d=435*h,l+=(o^=t>>6&63|128)<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l,o^=63&t|128),s=435*a,l=435*u,d=435*h,l+=o<<8,d+=a<<8,o=65535&(i=435*o),a=65535&(s+=i>>>16),h=d+((l+=s>>>16)>>>16)&65535,u=65535&l;return c[h>>8]+c[255&h]+c[u>>8]+c[255&u]+c[a>>8]+c[255&a]+c[o>>8]+c[255&o]}}}();void 0!==e.exports&&(e.exports=r)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerDataViewerExperimentEnabler=void 0;const o=n(0),s=n(3),a=n(223),c=n(5),l=n(1);let u=class{constructor(e,t){this.commandManager=e,this.experimentService=t}async activate(){this.activateInternal().catch(c.traceError.bind("Failed to activate debuggerDataViewerExperimentEnabler"))}async activateInternal(){const e=new a.ContextKey("python.isDebuggerDataViewerExperimentEnabled",this.commandManager);await e.set(await this.experimentService.inExperiment("debuggerDataViewer"))}};u=r([o.injectable(),i(0,o.inject(s.ICommandManager)),i(1,o.inject(l.IExperimentService))],u),t.DebuggerDataViewerExperimentEnabler=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentsManager=t.oldExperimentSalts=t.EXPERIMENTS_EFFORT_TIMEOUT_MS=t.configUri=t.downloadedExperimentStorageKey=t.experimentStorageKey=t.isDownloadedStorageValidKey=void 0;const o=n(0),s=n(91),a=n(4),c=n(7),l=n(9),u=n(3),d=n(10),h=n(5),p=n(6),f=n(1),g=n(15),m=n(23),v=n(13);t.isDownloadedStorageValidKey="IS_EXPERIMENTS_STORAGE_VALID_KEY",t.experimentStorageKey="EXPERIMENT_STORAGE_KEY",t.downloadedExperimentStorageKey="DOWNLOADED_EXPERIMENTS_STORAGE_KEY";const y=a.join(d.EXTENSION_ROOT_DIR,"experiments.json");t.configUri="https://raw.githubusercontent.com/microsoft/vscode-python/main/experiments.json",t.EXPERIMENTS_EFFORT_TIMEOUT_MS=2e3,t.oldExperimentSalts=["ShowExtensionSurveyPrompt","ShowPlayIcon","AlwaysDisplayTestExplorer","LS"];let b=class{constructor(e,n,r,i,o,s,a,c=t.EXPERIMENTS_EFFORT_TIMEOUT_MS){this.persistentStateFactory=e,this.httpClient=n,this.crypto=r,this.appEnvironment=i,this.output=o,this.fs=s,this.configurationService=a,this.experimentEffortTimeout=c,this.userExperiments=[],this._experimentsOptedInto=[],this._experimentsOptedOutFrom=[],this._enabled=!0,this.activatedOnce=!1,this.isDownloadedStorageValid=this.persistentStateFactory.createGlobalPersistentState(t.isDownloadedStorageValidKey,!1,18e5),this.experimentStorage=this.persistentStateFactory.createGlobalPersistentState(t.experimentStorageKey,void 0),this.downloadedExperimentsStorage=this.persistentStateFactory.createGlobalPersistentState(t.downloadedExperimentStorageKey,void 0)}async activate(){if(!this.activatedOnce)if(this.activatedOnce=!0,this.settings=this.configurationService.getSettings(void 0),this._experimentsOptedInto=this.settings.experiments.optInto,this._experimentsOptedOutFrom=this.settings.experiments.optOutFrom,this._enabled=this.settings.experiments.enabled,this._enabled){await this.updateExperimentStorage(),this.populateUserExperiments();for(const e of this.userExperiments||[])this.output.appendLine(v.Experiments.inGroup().format(e.name));this.initializeInBackground().ignoreErrors()}else c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS_DISABLED)}inExperiment(e){return!!this._enabled&&(this.sendTelemetryIfInExperiment(e),!!this.userExperiments.find(t=>t.name===e))}populateUserExperiments(){if(this.cleanUpExperimentsOptList(),Array.isArray(this.experimentStorage.value)){const e=[];for(const t of this.experimentStorage.value)try{if(this._experimentsOptedOutFrom.includes("All")||this._experimentsOptedOutFrom.includes(t.name)){c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS_OPT_IN_OUT,void 0,{expNameOptedOutOf:t.name});continue}this._experimentsOptedInto.includes("All")||this._experimentsOptedInto.includes(t.name)?(c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS_OPT_IN_OUT,void 0,{expNameOptedInto:t.name}),this.userExperiments.push(t)):e.push(t)}catch(e){h.traceError(`Failed to populate experiment list for experiment '${t.name}'`,e)}e.filter(e=>this.isUserInRange(e.min,e.max,e.salt)).filter(e=>!this.userExperiments.some(t=>t.salt===e.salt)).forEach(e=>this.userExperiments.push(e))}}sendTelemetryIfInExperiment(e){this.userExperiments.find(t=>t.name===e)&&c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS,void 0,{expName:e})}async initializeInBackground(){this.isDownloadedStorageValid.value||await this.downloadAndStoreExperiments()}async downloadAndStoreExperiments(e=this.downloadedExperimentsStorage){const n=await this.httpClient.getJSON(t.configUri,!1);this.areExperimentsValid(n)&&(await e.updateValue(n),await this.isDownloadedStorageValid.updateValue(!0))}isUserInRange(e,n,r){if("string"!=typeof this.appEnvironment.machineId)throw new Error("Machine ID should be a string");let i;return i=t.oldExperimentSalts.find(e=>e===r)?this.crypto.createHash(`${this.appEnvironment.machineId}+${r}`,"number","SHA512"):this.crypto.createHash(`${this.appEnvironment.machineId}+${r}`,"number","FNV"),i%100>=e&&i%100<n}async updateExperimentStorage(){if(!process.env.VSC_PYTHON_LOAD_EXPERIMENTS_FROM_FILE){if(Array.isArray(this.downloadedExperimentsStorage.value))return await this.experimentStorage.updateValue(this.downloadedExperimentsStorage.value),this.downloadedExperimentsStorage.updateValue(void 0);if(Array.isArray(this.experimentStorage.value))return;if(!0===await this.doBestEffortToPopulateExperiments())return}if(await this.fs.fileExists(y)){const e=await this.fs.readFile(y);try{const t=s.parse(e,[],{allowTrailingComma:!0,disallowComments:!1});if(!this.areExperimentsValid(t))throw new Error("Parsed experiments are not valid");await this.experimentStorage.updateValue(t)}catch(e){h.traceError("Failed to parse experiments configuration file to update storage",e)}}}areExperimentsValid(e){if(!Array.isArray(e))return h.traceError("Experiments are not of array type"),!1;for(const t of e)if(void 0===t.name||void 0===t.salt||void 0===t.min||void 0===t.max)return h.traceError("Experiments are missing fields from ABExperiments type"),!1;return!0}async doBestEffortToPopulateExperiments(){try{const e=await Promise.race([this.downloadAndStoreExperiments(this.experimentStorage).then(()=>!0),g.sleep(this.experimentEffortTimeout).then(()=>!1)]);return c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS_DOWNLOAD_SUCCESS_RATE,void 0,{success:e}),e}catch(e){return c.sendTelemetryEvent(l.EventName.PYTHON_EXPERIMENTS_DOWNLOAD_SUCCESS_RATE,void 0,{success:!1,error:"Downloading experiments failed with error"},e),h.traceError("Effort to download experiments within timeout failed with error",e),!1}}_activated(){return this.activatedOnce}cleanUpExperimentsOptList(){for(let e=0;e<this._experimentsOptedInto.length;e+=1)this._experimentsOptedInto[e].endsWith("control")&&(this._experimentsOptedInto[e]="");for(let e=0;e<this._experimentsOptedOutFrom.length;e+=1)this._experimentsOptedOutFrom[e].endsWith("control")&&(this._experimentsOptedOutFrom[e]="");this._experimentsOptedInto=this._experimentsOptedInto.filter(e=>""!==e),this._experimentsOptedOutFrom=this._experimentsOptedOutFrom.filter(e=>""!==e)}};r([m.swallowExceptions("Failed to activate experiments")],b.prototype,"activate",null),r([h.traceDecorators.error("Failed to identify if user is in experiment")],b.prototype,"inExperiment",null),r([h.traceDecorators.error("Failed to populate user experiments")],b.prototype,"populateUserExperiments",null),r([h.traceDecorators.error("Failed to send telemetry when user is in experiment")],b.prototype,"sendTelemetryIfInExperiment",null),r([h.traceDecorators.error("Failed to initialize experiments")],b.prototype,"initializeInBackground",null),r([h.traceDecorators.error("Failed to download and store experiments")],b.prototype,"downloadAndStoreExperiments",null),r([m.swallowExceptions("Failed to update experiment storage")],b.prototype,"updateExperimentStorage",null),b=r([o.injectable(),i(0,o.inject(f.IPersistentStateFactory)),i(1,o.inject(f.IHttpClient)),i(2,o.inject(f.ICryptoUtils)),i(3,o.inject(u.IApplicationEnvironment)),i(4,o.inject(f.IOutputChannel)),i(4,o.named(d.STANDARD_OUTPUT_CHANNEL)),i(5,o.inject(p.IFileSystem)),i(6,o.inject(f.IConfigurationService)),i(7,o.optional())],b),t.ExperimentsManager=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentService=void 0;const o=n(0),s=n(1034),a=n(7),c=n(9),l=n(3),u=n(10),d=n(1),h=n(13),p=n(1070);let f=class{constructor(e,t,n,r){this.configurationService=e,this.appEnvironment=t,this.globalState=n,this.output=r,this._optInto=[],this._optOutFrom=[],this.settings=e.getSettings(void 0);const i=this.settings.experiments.optInto,o=this.settings.experiments.optOutFrom;this._optInto=i.filter(e=>!e.endsWith("control")),this._optOutFrom=o.filter(e=>!e.endsWith("control"));if(!this.settings.experiments.enabled)return;let a;a="insiders"===this.appEnvironment.extensionChannel?s.TargetPopulation.Insiders:s.TargetPopulation.Public;const c=new p.ExperimentationTelemetry;this.experimentationService=s.getExperimentationService(u.PVSC_EXTENSION_ID,this.appEnvironment.packageJson.version,a,c,this.globalState),this.logExperiments()}async inExperiment(e){return!!this.experimentationService&&(this._optOutFrom.includes("All")||this._optOutFrom.includes(e)?(a.sendTelemetryEvent(c.EventName.PYTHON_EXPERIMENTS_OPT_IN_OUT,void 0,{expNameOptedOutOf:e}),!1):this._optInto.includes("All")||this._optInto.includes(e)?(a.sendTelemetryEvent(c.EventName.PYTHON_EXPERIMENTS_OPT_IN_OUT,void 0,{expNameOptedInto:e}),!0):this.experimentationService.isCachedFlightEnabled(e))}async getExperimentValue(e){if(this.experimentationService&&!this._optOutFrom.includes("All")&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariableAsync("vscode",e)}logExperiments(){this.globalState.get("VSCode.ABExp.FeatureData",{features:[]}).features.forEach(e=>{e.toLowerCase().startsWith("python")&&this.output.appendLine(h.Experiments.inGroup().format(e))})}};f=r([o.injectable(),i(0,o.inject(d.IConfigurationService)),i(1,o.inject(l.IApplicationEnvironment)),i(2,o.inject(d.IMemento)),i(2,o.named(d.GLOBAL_MEMENTO)),i(3,o.inject(d.IOutputChannel)),i(3,o.named(u.STANDARD_OUTPUT_CHANNEL))],f),t.ExperimentService=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1035);t.getExperimentationService=r.getExperimentationService,t.getExperimentationServiceAsync=r.getExperimentationServiceAsync;var i=n(378);t.TargetPopulation=i.TargetPopulation},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(378),i=n(1036),o=n(1069);function s(e,t,n,s,a,...c){if(!a)throw new Error("Memento storage was not provided.");const l=[new r.VSCodeFilterProvider(e,t,n),...c],u=new o.MementoKeyValueStorage(a);return new i.ExperimentationService({filterProviders:l,telemetry:s,storageKey:"VSCode.ABExp.FeatureData",keyValueStorage:u,featuresTelemetryPropertyName:"VSCode.ABExp.Features",assignmentContextTelemetryPropertyName:"abexp.assignmentcontext",telemetryEventName:"query-expfeature",endpoint:"https://default.exp-tas.com/vscode/ab",refetchInterval:18e5})}t.getExperimentationService=s,t.getExperimentationServiceAsync=async function(e,t,n,r,i,...o){const a=s(e,t,n,r,i,...o);return await a.initializePromise,a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1037);t.ExperimentationService=r.ExperimentationService},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1038),i=n(1041),o=n(1065);class s extends o.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],null!=e.refetchInterval?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new r.TasApiFeatureProvider(new i.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}t.ExperimentationService=s,s.REFRESH_RATE_IN_MINUTES=30},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1039);class i extends r.FilteredFeatureProvider{constructor(e,t,n){super(t,n),this.httpClient=e,this.telemetry=t,this.filterProviders=n}async fetch(){let e=this.getFilters(),t={};for(let n of e.keys()){const r=e.get(n);t[n]=r}let n=await this.httpClient.get({headers:t});e.keys.length>0&&this.PostEventToTelemetry(t);let r=n.data,i=r.Configs,o=[];for(let e of i)if(e.Parameters)for(let t of Object.keys(e.Parameters)){const n=t+(e.Parameters[t]?"":"cf");o.includes(n)||o.push(n)}return{features:o,assignmentContext:r.AssignmentContext,configs:i}}}t.TasApiFeatureProvider=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1040);class i extends r.BaseFeatureProvider{constructor(e,t){super(e),this.telemetry=e,this.filterProviders=t,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let t of this.filterProviders){let n=t.getFilters();for(let t of n.keys()){let r=n.get(t);e.set(t,r)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;const t=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",t]])),this.cachedTelemetryEvents.push(e)}}t.FilteredFeatureProvider=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseFeatureProvider=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1042);t.AxiosHttpClient=class{constructor(e){this.endpoint=e}get(e){return r.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}}},function(e,t,n){e.exports=n(1043)},function(e,t,n){"use strict";var r=n(44),i=n(379),o=n(1044),s=n(387);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=a(n(381));c.Axios=o,c.create=function(e){return a(s(c.defaults,e))},c.Cancel=n(388),c.CancelToken=n(1063),c.isCancel=n(380),c.all=function(e){return Promise.all(e)},c.spread=n(1064),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(44),i=n(228),o=n(1045),s=n(1046),a=n(387);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=a(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(44);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(44),i=n(1047),o=n(380),s=n(381);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){"use strict";var r=n(44);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(44),i=n(382),o=n(228),s=n(384),a=n(1052),c=n(1053),l=n(229);e.exports=function(e){return new Promise((function(t,u){var d=e.data,h=e.headers;r.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",g=e.auth.password||"";h.Authorization="Basic "+btoa(f+":"+g)}var m=s(e.baseURL,e.url);if(p.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};i(t,u,r),p=null}},p.onabort=function(){p&&(u(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),u(l(t,e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var v=n(1054),y=(e.withCredentials||c(m))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&r.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),void 0===d&&(d=null),p.send(d)}))}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(44),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},function(e,t,n){"use strict";var r=n(44);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(44);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(44),i=n(382),o=n(384),s=n(228),a=n(81),c=n(82),l=n(385).http,u=n(385).https,d=n(83),h=n(131),p=n(1062),f=n(229),g=n(383),m=/https:?/;e.exports=function(e){return new Promise((function(t,n){var v=function(e){t(e)},y=function(e){n(e)},b=e.data,S=e.headers;if(S["User-Agent"]||S["user-agent"]||(S["User-Agent"]="axios/"+p.version),b&&!r.isStream(b)){if(Buffer.isBuffer(b));else if(r.isArrayBuffer(b))b=Buffer.from(new Uint8Array(b));else{if(!r.isString(b))return y(f("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));b=Buffer.from(b,"utf-8")}S["Content-Length"]=b.length}var E=void 0;e.auth&&(E=(e.auth.username||"")+":"+(e.auth.password||""));var w=o(e.baseURL,e.url),_=d.parse(w),P=_.protocol||"http:";if(!E&&_.auth){var C=_.auth.split(":");E=(C[0]||"")+":"+(C[1]||"")}E&&delete S.Authorization;var T=m.test(P),I=T?e.httpsAgent:e.httpAgent,O={path:s(_.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:S,agent:I,agents:{http:e.httpAgent,https:e.httpsAgent},auth:E};e.socketPath?O.socketPath=e.socketPath:(O.hostname=_.hostname,O.port=_.port);var R,D=e.proxy;if(!D&&!1!==D){var x=P.slice(0,-1)+"_proxy",k=process.env[x]||process.env[x.toUpperCase()];if(k){var A=d.parse(k),N=process.env.no_proxy||process.env.NO_PROXY,j=!0;if(N)j=!N.split(",").map((function(e){return e.trim()})).some((function(e){return!!e&&("*"===e||("."===e[0]&&_.hostname.substr(_.hostname.length-e.length)===e||_.hostname===e))}));if(j&&(D={host:A.hostname,port:A.port},A.auth)){var F=A.auth.split(":");D.auth={username:F[0],password:F[1]}}}}if(D&&(O.hostname=D.host,O.host=D.host,O.headers.host=_.hostname+(_.port?":"+_.port:""),O.port=D.port,O.path=P+"//"+_.hostname+(_.port?":"+_.port:"")+O.path,D.auth)){var M=Buffer.from(D.auth.username+":"+D.auth.password,"utf8").toString("base64");O.headers["Proxy-Authorization"]="Basic "+M}var L=T&&(!D||m.test(D.protocol));e.transport?R=e.transport:0===e.maxRedirects?R=L?c:a:(e.maxRedirects&&(O.maxRedirects=e.maxRedirects),R=L?u:l),e.maxContentLength&&e.maxContentLength>-1&&(O.maxBodyLength=e.maxContentLength);var U=R.request(O,(function(t){if(!U.aborted){var n=t;switch(t.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=204===t.statusCode?n:n.pipe(h.createUnzip()),delete t.headers["content-encoding"]}var r=t.req||U,o={status:t.statusCode,statusText:t.statusMessage,headers:t.headers,config:e,request:r};if("stream"===e.responseType)o.data=n,i(v,y,o);else{var s=[];n.on("data",(function(t){s.push(t),e.maxContentLength>-1&&Buffer.concat(s).length>e.maxContentLength&&(n.destroy(),y(f("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,r)))})),n.on("error",(function(t){U.aborted||y(g(t,e,null,r))})),n.on("end",(function(){var t=Buffer.concat(s);"arraybuffer"!==e.responseType&&(t=t.toString(e.responseEncoding)),o.data=t,i(v,y,o)}))}}}));U.on("error",(function(t){U.aborted||y(g(t,e,null,U))})),e.timeout&&U.setTimeout(e.timeout,(function(){U.abort(),y(f("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",U))})),e.cancelToken&&e.cancelToken.promise.then((function(e){U.aborted||(U.abort(),y(e))})),r.isStream(b)?b.on("error",(function(t){y(g(t,e,null,U))})).pipe(U):U.end(b)}))}},function(e,t,n){"undefined"==typeof process||"renderer"===process.type?e.exports=n(1057):e.exports=n(1059)},function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(386)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(a=e,o,"day")||s(a,i,"hour")||s(a,r,"minute")||s(a,n,"second")||a+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(278),i=n(22);(t=e.exports=n(386)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return process.stderr.write(i.format.apply(i,arguments)+"\n")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var r=this.color,i="[3"+(r<8?r:"8;5;"+r),o="  "+i+";1m"+n+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push(i+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=s,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)},t.colors=[6,2,3,4,5,1];try{var o=n(1060);o&&o.level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}function s(){return process.env.DEBUG}t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[n]=r,e}),{}),t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,i.inspect(e,this.inspectOpts)},t.enable(s())},function(e,t,n){"use strict";const r=n(20),i=n(1061),o=process.env;let s;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},function(e){e.exports=JSON.parse('{"name":"axios","version":"0.19.2","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"typings":"./index.d.ts","dependencies":{"follow-redirects":"1.5.10"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.19.2.tgz","_integrity":"sha512-fjgm5MvRHLhx+osE2xoekY70AhARk3a6hkN+3Io1jc00jtquGvxYlKlsFUhmUET0V5te6CcZI7lcv2Ym61mjHA==","_from":"axios@0.19.2"}')},function(e,t,n){"use strict";var r=n(388);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1066),i=n(1068);class o extends r.ExperimentationServiceBase{constructor(e,t,n,r,o,s,a,c){if(super(e,r,o,s,a,c),this.telemetry=e,this.filterProviders=t,this.refreshRateMs=n,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n>=1e3&&(this.pollingService=new i.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()})),n<1e3&&0!==n)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.")}init(){var e;null===(e=this.pollingService)||void 0===e||e.StartPolling(!0)}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let t=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),t}return await super.getFeaturesAsync(e)}}t.ExperimentationServiceAutoPolling=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1067);t.ExperimentationServiceBase=class{constructor(e,t,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=t,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new r.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(null!=this.fetchPromise)return await this.fetchPromise,this.features;if(!this.featureProviders||0===this.featureProviders.length)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async e=>await e.getFeatures()));let t=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(t,e),this.features}updateFeatures(e,t=!1){let n={features:[],assignmentContext:"",configs:[]};for(let t of e){for(let e of t.features)n.features.includes(e)||n.features.push(e);for(let e of t.configs){const t=n.configs.find(t=>t.Id===e.Id);t?t.Parameters=Object.assign(Object.assign({},t.Parameters),e.Parameters):n.configs.push(e)}n.assignmentContext+=t.assignmentContext}!t&&this.featuresConsumed||(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),void 0!==e&&void 0===e.configs&&(e.configs=[])),0===this.features.features.length&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){const t=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),t.features.includes(e)}getTreatmentVariable(e,t){var n;this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${t}`);return null===(n=this.features.configs.find(t=>t.Id===e))||void 0===n?void 0:n.Parameters[t]}async getTreatmentVariableAsync(e,t){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,t)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(null!=e&&null!=this.featureProviders)for(let t of e)this.featureProviders.push(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MemoryKeyValueStorage=class{constructor(){this.storage=new Map}async getValue(e,t){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(t||void 0)}setValue(e,t){this.storage.set(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PollingService=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),null!=this.onTick&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MementoKeyValueStorage=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,t){return await this.mementoGlobalStorage.get(e)||t}setValue(e,t){this.mementoGlobalStorage.update(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(7);t.ExperimentationTelemetry=class{setSharedProperty(e,t){r.setSharedProperty(e,t)}postEvent(e,t){const n={};t.forEach((e,t)=>{n[t]=e}),r.sendTelemetryEvent(e,void 0,n)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureDeprecationManager=void 0;const o=n(0),s=n(3),a=n(5),c=n(389),l=n(1),u=[{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE",message:"The setting 'python.formatting.formatOnSave' is deprecated, please use 'editor.formatOnSave'.",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/309",setting:{setting:"formatting.formatOnSave",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE",message:"The setting 'python.linting.lintOnTextChange' is deprecated, please enable 'python.linting.lintOnSave' and 'files.autoSave'.",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/313",setting:{setting:"linting.lintOnTextChange",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES",message:"The setting 'python.autoComplete.preloadModules' is deprecated, please consider using Pylance Language Server ('python.languageServer' setting).",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/1704",setting:{setting:"autoComplete.preloadModules"}}];let d=class{constructor(e,t,n,r){this.persistentStateFactory=e,this.cmdMgr=t,this.workspace=n,this.appShell=r,this.disposables=[]}dispose(){this.disposables.forEach(e=>e.dispose())}initialize(){u.forEach(this.registerDeprecation.bind(this))}registerDeprecation(e){Array.isArray(e.commands)&&e.commands.forEach(t=>{this.disposables.push(this.cmdMgr.registerCommand(t,()=>this.notifyDeprecation(e),this))}),e.setting&&this.checkAndNotifyDeprecatedSetting(e)}async notifyDeprecation(e){const t=this.persistentStateFactory.createGlobalPersistentState(e.doNotDisplayPromptStateKey,!0);if(!t.value)return;const n=await this.appShell.showInformationMessage(e.message,"Learn more","Never show again");if(n)switch(n){case"Learn more":c.launch(e.moreInfoUrl);break;case"Never show again":await t.updateValue(!1);break;default:throw new Error("Selected option not supported.")}}checkAndNotifyDeprecatedSetting(e){let t=!1;Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders.forEach(n=>{t||(t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("python",n.uri),e.setting))}):t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("python"),e.setting),t&&this.notifyDeprecation(e).catch(e=>a.traceVerbose("Python Extension: notifyDeprecation",e))}isDeprecatedSettingAndValueUsed(e,t){if(!e.has(t.setting))return!1;const n=e.get(t.setting);return Array.isArray(t.values)&&0!==t.values.length?Array.isArray(t.values)&&0!==t.values.length?t.values.indexOf(e.get(t.setting))>=0:void 0!==n&&(!Array.isArray(n)||n.length>0):!Array.isArray(n)||n.length>0}};d=r([o.injectable(),i(0,o.inject(l.IPersistentStateFactory)),i(1,o.inject(s.ICommandManager)),i(2,o.inject(s.IWorkspaceService)),i(3,o.inject(s.IApplicationShell))],d),t.FeatureDeprecationManager=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionInsidersWeeklyChannelRule=t.ExtensionInsidersDailyChannelRule=t.ExtensionInsidersOffChannelRule=t.lastLookUpTimeKey=t.frequencyForWeeklyInsidersCheck=t.frequencyForDailyInsidersCheck=void 0;const o=n(0),s=n(5),a=n(1);t.frequencyForDailyInsidersCheck=864e5,t.frequencyForWeeklyInsidersCheck=6048e5,t.lastLookUpTimeKey="INSIDERS_LAST_LOOK_UP_TIME_KEY";let c=class{async shouldLookForInsidersBuild(){return!1}};c=r([o.injectable()],c),t.ExtensionInsidersOffChannelRule=c;let l=class{constructor(e){this.persistentStateFactory=e}async shouldLookForInsidersBuild(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.lastLookUpTimeKey,-1);return(e||-1===n.value||n.value+t.frequencyForDailyInsidersCheck<Date.now())&&(await n.updateValue(Date.now()),!0)}};r([s.traceDecorators.error("Error in checking if insiders build is to be for daily channel rule")],l.prototype,"shouldLookForInsidersBuild",null),l=r([o.injectable(),i(0,o.inject(a.IPersistentStateFactory))],l),t.ExtensionInsidersDailyChannelRule=l;let u=class{constructor(e){this.persistentStateFactory=e}async shouldLookForInsidersBuild(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.lastLookUpTimeKey,-1);return(e||-1===n.value||n.value+t.frequencyForWeeklyInsidersCheck<Date.now())&&(await n.updateValue(Date.now()),!0)}};r([s.traceDecorators.error("Error in checking if insiders build is to be for daily channel rule")],u.prototype,"shouldLookForInsidersBuild",null),u=r([o.injectable(),i(0,o.inject(a.IPersistentStateFactory))],u),t.ExtensionInsidersWeeklyChannelRule=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionChannelService=t.insidersChannelSetting=void 0;const o=n(0),s=n(2),a=n(3),c=n(5),l=n(1);t.insidersChannelSetting="insidersChannel";let u=class{constructor(e,t,n){this.configService=e,this.workspaceService=t,this._onDidChannelChange=new s.EventEmitter,n.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this)))}getChannel(){return this.configService.getSettings().insidersChannel}get isChannelUsingDefaultConfiguration(){const e=this.workspaceService.getConfiguration("python").inspect(t.insidersChannelSetting);if(!e)throw new Error(`WorkspaceConfiguration.inspect returns 'undefined' for setting 'python.${t.insidersChannelSetting}'`);return!e.globalValue}async updateChannel(e){await this.configService.updateSetting(t.insidersChannelSetting,e,void 0,s.ConfigurationTarget.Global)}get onDidChannelChange(){return this._onDidChannelChange.event}async onDidChangeConfiguration(e){if(e.affectsConfiguration("python."+t.insidersChannelSetting)){const e=this.configService.getSettings();this._onDidChannelChange.fire(e.insidersChannel)}}};r([c.traceDecorators.error("Updating channel failed")],u.prototype,"updateChannel",null),u=r([o.injectable(),i(0,o.inject(l.IConfigurationService)),i(1,o.inject(a.IWorkspaceService)),i(2,o.inject(l.IDisposableRegistry))],u),t.ExtensionChannelService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InsidersExtensionPrompt=t.insidersPromptStateKey=void 0;const o=n(0),s=n(7),a=n(9),c=n(3),l=n(5),u=n(1),d=n(13),h=n(14),p=n(230);t.insidersPromptStateKey="INSIDERS_PROMPT_STATE_KEY";let f=class{constructor(e,n,r,i){this.appShell=e,this.insidersDownloadChannelService=n,this.cmdManager=r,this.persistentStateFactory=i,this.hasUserBeenNotified=this.persistentStateFactory.createGlobalPersistentState(t.insidersPromptStateKey,!1)}async promptToInstallInsiders(){const e=[d.ExtensionChannels.yesWeekly(),d.ExtensionChannels.yesDaily(),d.ExtensionSurveyBanner.bannerLabelNo()],t=await this.appShell.showInformationMessage(d.ExtensionChannels.promptMessage(),...e);await this.hasUserBeenNotified.updateValue(!0),s.sendTelemetryEvent(a.EventName.INSIDERS_PROMPT,void 0,{selection:t?["Yes, weekly","Yes, daily","No, thanks"][e.indexOf(t)]:void 0}),t&&(t===d.ExtensionChannels.yesWeekly()?await this.insidersDownloadChannelService.updateChannel("weekly"):t===d.ExtensionChannels.yesDaily()&&await this.insidersDownloadChannelService.updateChannel("daily"))}async promptToReload(){const e=await this.appShell.showInformationMessage(d.ExtensionChannels.reloadToUseInsidersMessage(),d.Common.reload());s.sendTelemetryEvent(a.EventName.INSIDERS_RELOAD_PROMPT,void 0,{selection:e?"Reload":void 0}),e===d.Common.reload()&&this.cmdManager.executeCommand("workbench.action.reloadWindow").then(h.noop)}};r([l.traceDecorators.error("Error in prompting to install insiders")],f.prototype,"promptToInstallInsiders",null),r([l.traceDecorators.error("Error in prompting to reload")],f.prototype,"promptToReload",null),f=r([o.injectable(),i(0,o.inject(c.IApplicationShell)),i(1,o.inject(p.IExtensionChannelService)),i(2,o.inject(c.ICommandManager)),i(3,o.inject(u.IPersistentStateFactory))],f),t.InsidersExtensionPrompt=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InsidersExtensionService=void 0,n(11);const o=n(0),s=n(8),a=n(3),c=n(10),l=n(146),u=n(5),d=n(1),h=n(230);let p=class{constructor(e,t,n,r,i,o,s){this.extensionChannelService=e,this.insidersPrompt=t,this.appEnvironment=n,this.cmdManager=r,this.serviceContainer=i,this.insidersInstaller=o,this.disposables=s}async activate(){this.registerCommandsAndHandlers(),await this.initChannel()}registerCommandsAndHandlers(){this.disposables.push(this.extensionChannelService.onDidChannelChange(e=>this.handleChannel(e,!0))),this.disposables.push(this.cmdManager.registerCommand(c.Commands.SwitchOffInsidersChannel,()=>this.extensionChannelService.updateChannel("off"))),this.disposables.push(this.cmdManager.registerCommand(c.Commands.SwitchToInsidersDaily,()=>this.extensionChannelService.updateChannel("daily"))),this.disposables.push(this.cmdManager.registerCommand(c.Commands.SwitchToInsidersWeekly,()=>this.extensionChannelService.updateChannel("weekly")))}async initChannel(){const e=this.extensionChannelService.getChannel(),t=this.extensionChannelService.isChannelUsingDefaultConfiguration;await this.handleEdgeCases(t)||this.handleChannel(e).ignoreErrors()}async handleChannel(e,t=!1){const n=this.serviceContainer.get(h.IExtensionChannelRule,e);await n.shouldLookForInsidersBuild(t)&&(await this.insidersInstaller.install(),await this.insidersPrompt.promptToReload())}async handleEdgeCases(e){return!!process.env.UITEST_DISABLE_INSIDERS||!!await this.promptToInstallInsidersIfApplicable(e)}async promptToInstallInsidersIfApplicable(e){return"insiders"===this.appEnvironment.channel&&(!this.insidersPrompt.hasUserBeenNotified.value&&(!!e&&(await this.insidersPrompt.promptToInstallInsiders(),!0)))}};r([u.traceDecorators.error("Handling channel failed")],p.prototype,"handleChannel",null),p=r([o.injectable(),i(0,o.inject(h.IExtensionChannelService)),i(1,o.inject(h.IInsiderExtensionPrompt)),i(2,o.inject(a.IApplicationEnvironment)),i(3,o.inject(a.ICommandManager)),i(4,o.inject(s.IServiceContainer)),i(5,o.inject(l.IExtensionBuildInstaller)),i(5,o.named(l.INSIDERS_INSTALLER)),i(6,o.inject(d.IDisposableRegistry))],p),t.InsidersExtensionService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathService=t.getCIPythonPath=t.defaultInterpreterPathSetting=t.isGlobalSettingCopiedKey=t.workspaceFolderKeysForWhichTheCopyIsDone_Key=t.workspaceKeysForWhichTheCopyIsDone_Key=void 0;const o=n(109),s=n(0),a=n(2),c=n(3),l=n(227),u=n(10),d=n(5),h=n(137),p=n(1);t.workspaceKeysForWhichTheCopyIsDone_Key="workspaceKeysForWhichTheCopyIsDone_Key",t.workspaceFolderKeysForWhichTheCopyIsDone_Key="workspaceFolderKeysForWhichTheCopyIsDone_Key",t.isGlobalSettingCopiedKey="isGlobalSettingCopiedKey",t.defaultInterpreterPathSetting="defaultInterpreterPath";const f=g();function g(){return process.env.CI_PYTHON_PATH&&o.existsSync(process.env.CI_PYTHON_PATH)?process.env.CI_PYTHON_PATH:"python"}t.getCIPythonPath=g;let m=class{constructor(e,t,n){this.persistentStateFactory=e,this.workspaceService=t,this._didChangeInterpreterEmitter=new a.EventEmitter,n.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),this.fileSystemPaths=h.FileSystemPaths.withDefaults()}get onDidChange(){return this._didChangeInterpreterEmitter.event}async onDidChangeConfiguration(e){e.affectsConfiguration("python."+t.defaultInterpreterPathSetting)&&this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:a.ConfigurationTarget.Global})}inspect(e){let t,n;(e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)&&(t=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.WorkspaceFolder),void 0),n=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.Workspace),void 0));return{globalValue:this.workspaceService.getConfiguration("python").inspect("defaultInterpreterPath").globalValue,workspaceFolderValue:null==t?void 0:t.value,workspaceValue:null==n?void 0:n.value}}get(e){const t=this.inspect(e);return t.workspaceFolderValue||t.workspaceValue||t.globalValue||(u.isTestExecution()?f:"python")}async update(e,t,n){if(e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri,t===a.ConfigurationTarget.Global){const e=this.workspaceService.getConfiguration("python");return void(e.inspect("defaultInterpreterPath").globalValue!==n&&(await e.update("defaultInterpreterPath",n,!0),this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:t})))}if(!e)return void d.traceError("Cannot update workspace settings as no workspace is opened");const r=this.getSettingKey(e,t),i=this.persistentStateFactory.createGlobalPersistentState(r,void 0);i.value!==n&&(await i.updateValue(n),this._didChangeInterpreterEmitter.fire({uri:e,configTarget:t}))}getSettingKey(e,t){let n;const r=this.workspaceService.getWorkspaceFolderIdentifier(e);return n=t===a.ConfigurationTarget.WorkspaceFolder?"WORKSPACE_FOLDER_INTERPRETER_PATH_"+r:this.workspaceService.workspaceFile?"WORKSPACE_INTERPRETER_PATH_"+this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):"WORKSPACE_FOLDER_INTERPRETER_PATH_"+r,n}async copyOldInterpreterStorageValuesToNew(e){e=l.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri;const t=this.workspaceService.getConfiguration("python",e).inspect("pythonPath");await Promise.all([this._copyWorkspaceFolderValueToNewStorage(e,t.workspaceFolderValue),this._copyWorkspaceValueToNewStorage(e,t.workspaceValue),this._moveGlobalSettingValueToNewStorage(t.globalValue)])}async _copyWorkspaceFolderValueToNewStorage(e,n){const r=this.workspaceService.getWorkspaceFolderIdentifier(e,"");if(""===r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.workspaceFolderKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.WorkspaceFolder,n),await i.updateValue([r,...o]))}async _copyWorkspaceValueToNewStorage(e,n){const r=this.workspaceService.workspaceFile?this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):void 0;if(!r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.workspaceKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.Workspace,n),await i.updateValue([r,...o]))}async _moveGlobalSettingValueToNewStorage(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.isGlobalSettingCopiedKey,!1);!n.value&&(await this.update(void 0,a.ConfigurationTarget.Global,e),await this.workspaceService.getConfiguration("python").update("pythonPath",void 0,a.ConfigurationTarget.Global),await n.updateValue(!0))}};m=r([s.injectable(),i(0,s.inject(p.IPersistentStateFactory)),i(1,s.inject(c.IWorkspaceService)),i(2,s.inject(p.IDisposableRegistry))],m),t.InterpreterPathService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileDownloader=void 0;const o=n(0),s=n(3),a=n(10),c=n(6),l=n(1),u=n(13),d=n(14);let h=class{constructor(e,t,n){this.httpClient=e,this.fs=t,this.appShell=n}async downloadFile(e,t){t.outputChannel&&t.outputChannel.appendLine(u.Http.downloadingFile().format(e));const n=await this.fs.createTemporaryFile(t.extension);return await this.downloadFileWithStatusBarProgress(e,t.progressMessagePrefix,n.filePath).then(d.noop,e=>(n.dispose(),Promise.reject(e))),n.filePath}async downloadFileWithStatusBarProgress(e,t,n){await this.appShell.withProgressCustomIcon(a.Octicons.Downloading,async r=>{const i=await this.httpClient.downloadFile(e),o=this.fs.createWriteStream(n);return this.displayDownloadProgress(e,r,i,o,t)})}async displayDownloadProgress(e,t,r,i,o){return new Promise((s,a)=>{r.on("response",t=>{200!==t.statusCode&&a(new Error(`Failed with status ${t.statusCode}, ${t.statusMessage}, Uri ${e}`))});n(1078)(r).on("progress",e=>{const n=function(e,t){const n=Math.round(t.size.transferred/1024),r=Math.round(t.size.total/1024),i=Math.round(100*t.percent);return u.Http.downloadingFileProgress().format(e,n.toString(),r.toString(),i.toString())}(o,e);t.report({message:n})}).on("error",a).pipe(i).on("error",a).on("close",s)})}};h=r([o.injectable(),i(0,o.inject(l.IHttpClient)),i(1,o.inject(c.IFileSystem)),i(2,o.inject(s.IApplicationShell))],h),t.FileDownloader=h},function(e,t){e.exports=require("./node_modules/request-progress")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const o=n(0),s=n(91),a=n(8),c=n(3),l=n(5);let u=class{constructor(e){const t=e.get(c.IWorkspaceService);this.requestOptions={proxy:t.getConfiguration("http").get("proxy","")}}async downloadFile(e){return(await Promise.resolve().then(()=>n(231)))(e,this.requestOptions)}async getJSON(e,t=!0){const n=await this.getContents(e);return this.parseBodyToJSON(n,t)}async parseBodyToJSON(e,t){if(t)return JSON.parse(e);{let t=[];const n=s.parse(e,t,{allowTrailingComma:!0,disallowComments:!1});return t.length>0&&l.traceError("JSONC parser returned ParseError codes",t),n}}async exists(e){const t=n(231);return new Promise(n=>{try{t.get(e,this.requestOptions).on("response",e=>n(200===e.statusCode)).on("error",()=>n(!1))}catch(e){n(!1)}})}async getContents(e){const t=n(231);return new Promise((n,r)=>{t(e,this.requestOptions,(t,i,o)=>t?r(t):200!==i.statusCode?r(new Error(`Failed with status ${i.statusCode}, ${i.statusMessage}, Uri ${e}`)):void n(o))})}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.HttpClient=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NugetService=void 0;const i=n(0),o=n(4),s=n(38);let a=class{isReleaseVersion(e){return 0===e.prerelease.length}getVersionFromPackageFileName(e){const t=o.extname(e),n=e.substring(e.indexOf(".")+1),r=n.substring(0,n.length-t.length).split("."),i=r.filter((e,t)=>t<=2).join("."),a=r.filter((e,t)=>3===t).join("."),c=`${i}${0===a.length?"":"-"+a}`;return s.parse(c,!0)||new s.SemVer("0.0.0")}};a=r([i.injectable()],a),t.NugetService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentStateFactory=t.PersistentState=void 0;const o=n(0),s=n(1);class a{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e){this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e)}}t.PersistentState=a;let c=class{constructor(e,t){this.globalState=e,this.workspaceState=t}createGlobalPersistentState(e,t,n){return new a(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return new a(this.workspaceState,e,t,n)}};c=r([o.injectable(),i(0,o.inject(s.IMemento)),i(0,o.named(s.GLOBAL_MEMENTO)),i(1,o.inject(s.IMemento)),i(1,o.named(s.WORKSPACE_MEMENTO))],c),t.PersistentStateFactory=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PathUtils=void 0;const o=n(0),s=n(4),a=n(1),c=n(27),l=n(137),u=n(97);let d=class{constructor(e){const t=e?c.OSType.Windows:c.OSType.Unknown;this.utils=new l.FileSystemPathUtils(u("~"),l.FileSystemPaths.withDefaults(),new l.Executables(s.delimiter,t),s)}get home(){return this.utils.home}get delimiter(){return this.utils.executables.delimiter}get separator(){return this.utils.paths.sep}getPathVariableName(){return this.utils.executables.envVar}getDisplayName(e,t){return this.utils.getDisplayName(e,t)}basename(e,t){return this.utils.paths.basename(e,t)}};d=r([o.injectable(),i(0,o.inject(a.IsWindows))],d),t.PathUtils=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentProcess=void 0;const i=n(0);let o=class{constructor(){this.on=(e,t)=>(process.on(e,t),process)}get env(){return process.env}get argv(){return process.argv}get stdout(){return process.stdout}get stdin(){return process.stdin}get execPath(){return process.execPath}};o=r([i.injectable()],o),t.CurrentProcess=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessLogger=void 0;const o=n(0),s=n(10),a=n(5),c=n(1),l=n(13);let u=class{constructor(e,t){this.outputChannel=e,this.pathUtils=t}logProcess(e,t,n){if(!s.isTestExecution()&&s.isCI&&process.env.UITEST_DISABLE_PROCESS_LOGGING)return;const r=t.reduce((e,t,n)=>{let r=this.pathUtils.getDisplayName(t).toCommandArgument();return"'"!==t[0]&&'"'!==t[0]||(r=`${t[0]}${this.pathUtils.getDisplayName(t.substr(1))}`),0===n?r:`${e} ${r}`},""),i=[`> ${this.pathUtils.getDisplayName(e)} ${r}`];n&&n.cwd&&i.push(`${l.Logging.currentWorkingDirectory()} ${this.pathUtils.getDisplayName(n.cwd)}`),i.forEach(e=>{a.traceInfo(e),this.outputChannel.appendLine(e)})}};u=r([o.injectable(),i(0,o.inject(c.IOutputChannel)),i(0,o.named(s.STANDARD_OUTPUT_CHANNEL)),i(1,o.inject(c.IPathUtils))],u),t.ProcessLogger=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeCssGenerator=void 0;const o=n(0),s=n(91),a=n(4),c=n(3),l=n(5),u=n(6),d=n(148),h=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/,p=/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/,f={light:"\n    :root {\n        --override-widget-background: #f3f3f3;\n        --override-foreground: #000000;\n        --override-background: #FFFFFF;\n        --override-selection-background: #add6ff;\n        --override-watermark-color: rgba(66, 66, 66, 0.75);\n        --override-tabs-background: #f3f3f3;\n        --override-progress-background: #0066bf;\n        --override-badge-background: #c4c4c4;\n        --override-lineHighlightBorder: #eeeeee;\n        --override-peek-background: #f2f8fc;\n    }\n",dark:"\n    :root {\n        --override-widget-background: #1e1e1e;\n        --override-foreground: #d4d4d4;\n        --override-background: #1e1e1e;\n        --override-selection-background: #264f78;\n        --override-watermark-color: rgba(231, 231, 231, 0.6);\n        --override-tabs-background: #252526;\n        --override-progress-background: #0066bf;\n        --override-badge-background: #4d4d4d;\n        --override-lineHighlightBorder: #282828;\n        --override-peek-background: #001f33;\n    }\n"},g={"light.comment":"#008000","light.constant.numeric":"#09885a","light.string":"#a31515","light.keyword.control":"#AF00DB","light.keyword.operator":"#000000","light.variable":"#001080","light.entity.name.type":"#267f99","light.support.function":"#795E26","light.punctuation":"#000000","dark.comment":"#6A9955","dark.constant.numeric":"#b5cea8","dark.string":"#ce9178","dark.keyword.control":"#C586C0","dark.keyword.operator":"#d4d4d4","dark.variable":"#9CDCFE","dark.entity.name.type":"#4EC9B0","dark.support.function":"#DCDCAA","dark.punctuation":"#1e1e1e"};let m=class{constructor(e,t,n){this.workspaceService=e,this.themeFinder=t,this.fs=n,this.getScopeStyle=(e,t,n,r)=>{if(e){let r=this.matchTokenColor(e,t);r<0&&n&&(r=this.matchTokenColor(e,n));const i=r>=0?e[r]:null;if(null!==i){const{settings:e}=i;if(e&&null!==e){return{fontStyle:e.fontStyle?e.fontStyle:"normal",color:e.foreground?e.foreground:"var(--vscode-editor-foreground)"}}}}return{color:this.getDefaultColor(r,t),fontStyle:"normal"}},this.mergeColors=(e,t)=>[...e,...t],this.mergeBaseColors=(e,t)=>({...e,...t}),this.readTokenColors=async e=>{try{const t=await this.fs.readFile(e),n=s.parse(t);let r=[];if("string"==typeof n.tokenColors){const e=await this.fs.readFile(n.tokenColors);r=JSON.parse(e)}else r=n.tokenColors;if(r&&r.length>0){const t=n?n.include:void 0;if(t){const n=a.join(a.dirname(e),t.toString()),i=await this.readTokenColors(n);return this.mergeColors(r,i)}return r}const i=n.settings;return i&&i.length>0?i:[]}catch(e){return l.traceError("Python Extension: Error reading custom theme",e),[]}},this.readBaseColors=async e=>{const t=await this.fs.readFile(e),n=s.parse(t),r=n.colors,i=n?n.include:void 0;if(i){const t=a.join(a.dirname(e),i.toString()),n=await this.readBaseColors(t);return this.mergeBaseColors(r,n)}return r},this.findTokenColors=async e=>{try{l.traceInfo("Attempting search for colors ...");const t=await this.themeFinder.findThemeRootJson(e);if(t){l.traceInfo(`Loading colors from ${t} ...`);const n=await this.fs.readFile(t),r=s.parse(n),i=r.contributes;if(!i){if(r.tokenColors)return await this.readTokenColors(t)}const o=i.themes,c=o.findIndex(t=>null!==t&&(t.id===e||t.name===e)),u=c>=0?o[c]:null;if(null!==u){const e=a.join(a.dirname(t),u.path);return l.traceInfo("Reading colors from "+e),await this.readTokenColors(e)}}else l.traceWarning(`Color theme ${e} not found. Using default colors.`)}catch(e){l.traceError(e)}return null},this.findBaseColors=async e=>{try{l.traceInfo("Attempting search for colors ...");const t=await this.themeFinder.findThemeRootJson(e);if(t){l.traceInfo(`Loading base colors from ${t} ...`);const n=await this.fs.readFile(t),r=s.parse(n).contributes;if(!r)return await this.readBaseColors(t);const i=r.themes,o=i.findIndex(t=>null!==t&&(t.id===e||t.name===e)),c=o>=0?i[o]:null;if(null!==c){const e=a.join(a.dirname(t),c.path);return l.traceInfo("Reading base colors from "+e),await this.readBaseColors(e)}}else l.traceWarning(`Color theme ${e} not found. Using default colors.`)}catch(e){l.traceError(e)}return null}}generateThemeCss(e,t){return this.applyThemeData(e,t,"",this.generateCss.bind(this))}generateMonacoTheme(e,t){return this.applyThemeData(e,t,{},this.generateMonacoThemeObject.bind(this))}async applyThemeData(e,t,n,r){let i=n;try{const n=this.workspaceService.getConfiguration("editor",void 0),o=n?n.get("fontFamily","Consolas, 'Courier New', monospace"):"Consolas, 'Courier New', monospace",s=n?n.get("fontSize",14):14,a=e;if(t){l.traceInfo("Searching for token colors ...");const n=await this.findTokenColors(t),c=await this.findBaseColors(t);if(n&&o&&s)l.traceInfo("Using colors to generate CSS ..."),i=r({tokenColors:n,baseColors:c,fontFamily:o,fontSize:s,isDark:a,defaultStyle:"light"});else if(null===n&&o&&s){i=r({fontFamily:o,fontSize:s,isDark:a,defaultStyle:e?"dark":"light"})}}}catch(e){l.traceError(e)}return i}getScopes(e){return e&&e.scope?Array.isArray(e.scope)?e.scope:e.scope.toString().split(","):[]}matchTokenColor(e,t){return e.findIndex(e=>!!this.getScopes(e).find(e=>null!=e&&e.toString().trim()===t))}getDefaultColor(e,t){return e?g[`${e}.${t}`]:"var(--override-foreground, var(--vscode-editor-foreground))"}generateCss(e){const t=this.getScopeStyle(e.tokenColors,"comment","comment",e.defaultStyle),n=this.getScopeStyle(e.tokenColors,"constant.numeric","constant",e.defaultStyle),r=this.getScopeStyle(e.tokenColors,"string","string",e.defaultStyle),i=this.getScopeStyle(e.tokenColors,"variable","variable",e.defaultStyle),o=this.getScopeStyle(e.tokenColors,"entity.name.type","entity.name.type",e.defaultStyle);return`\n:root {\n    --code-comment-color: ${t.color};\n    --code-numeric-color: ${n.color};\n    --code-string-color: ${r.color};\n    --code-variable-color: ${i.color};\n    --code-type-color: ${o.color};\n    --code-font-family: ${e.fontFamily};\n    --code-font-size: ${e.fontSize}px;\n}\n\n${e.defaultStyle?f[e.defaultStyle]:""}\n`}generateMonacoThemeObject(e){const t={base:e.isDark?"vs-dark":"vs",inherit:!1,rules:[],colors:{}};if(e.tokenColors&&e.tokenColors.length){const n=new Set;e.tokenColors.forEach(e=>{const r=this.getScopes(e),i=e&&e.settings?e.settings:void 0;r&&i&&r.forEach(e=>{const r=e?e.toString():"";if(!n.has(r)){if(n.add(r),i.foreground&&!h.test(i.foreground)){const e=p.exec(i.foreground);e&&e.length>3?i.foreground=`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:i.foreground=void 0}i.foreground?t.rules.push({token:r,foreground:i.foreground,background:i.background,fontStyle:i.fontStyle}):t.rules.push({token:r,background:i.background,fontStyle:i.fontStyle}),"comment"===r&&t.rules.push({token:"punctuation.definition.comment",foreground:i.foreground,background:i.background,fontStyle:i.fontStyle}),"string"===r&&t.rules.push({token:"punctuation.definition.string",foreground:i.foreground,background:i.background,fontStyle:i.fontStyle})}})}),t.rules=t.rules.sort((e,t)=>e.token.localeCompare(t.token))}else t.base="dark"===e.defaultStyle?"vs-dark":"vs",t.inherit=!0,e.defaultStyle&&(t.rules.push({token:"punctuation.definition.comment",foreground:g[e.defaultStyle+".comment"]}),t.rules.push({token:"punctuation.definition.string",foreground:g[e.defaultStyle+".string"]}));if(e.baseColors){Object.keys(e.baseColors).forEach(n=>{const r=e.baseColors&&e.baseColors[n]?e.baseColors[n]:"#000000";t.colors[n]=r?r.toString():"#000000"})}return t}};m=r([o.injectable(),i(0,o.inject(c.IWorkspaceService)),i(1,o.inject(d.IThemeFinder)),i(2,o.inject(u.IFileSystem))],m),t.CodeCssGenerator=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.StartPage=void 0;const o=n(0),s=n(4),a=n(2),c=n(61),l=n(7),u=n(26),d=n(3),h=n(6),p=n(1),f=n(13),g=n(30),m=n(133),v=n(1087),y=n(148),b=n(1088),S=s.join(c.EXTENSION_ROOT_DIR,"out","startPage-ui","viewers");let E=class extends b.WebviewPanelHost{constructor(e,t,n,r,i,o,c,l,u,d,h){super(r,e,t,n,i,(e,t,n)=>new v.StartPageMessageListener(e,t,n),S,[s.join(S,"commons.initial.bundle.js"),s.join(S,"startPage.js")],f.StartPage.getStarted(),a.ViewColumn.One,!1),this.configuration=r,this.file=o,this.commandManager=c,this.documentManager=l,this.appShell=u,this.context=d,this.appEnvironment=h,this.closedEvent=new a.EventEmitter,this.actionTaken=!1,this.actionTakenOnFirstTime=!1,this.firstTime=!1,this.webviewDidLoad=!1,this.timer=new g.StopWatch}async activate(){this.activateBackground().ignoreErrors()}dispose(){return this.isDisposed||super.dispose(),this.close()}async open(){l.sendTelemetryEvent(m.Telemetry.StartPageViewed),setTimeout(async()=>{await this.loadWebPanel(process.cwd()),await super.show(!0),setTimeout(()=>{this.webviewDidLoad||l.sendTelemetryEvent(m.Telemetry.StartPageWebViewError)},5e3)},3e3)}get owningResource(){}async close(){this.actionTaken||l.sendTelemetryEvent(m.Telemetry.StartPageClosedWithoutAction),this.actionTakenOnFirstTime&&l.sendTelemetryEvent(m.Telemetry.StartPageUsedAnActionOnFirstTime),l.sendTelemetryEvent(m.Telemetry.StartPageTime,this.timer.elapsedTime),this.closedEvent.fire(this)}async onMessage(e,t){switch(e){case y.StartPageMessages.Started:this.webviewDidLoad=!0;break;case y.StartPageMessages.RequestShowAgainSetting:const e=this.configuration.getSettings();await this.postMessage(y.StartPageMessages.SendSetting,{showAgainSetting:e.showStartPage});break;case y.StartPageMessages.OpenBlankNotebook:l.sendTelemetryEvent(m.Telemetry.StartPageOpenBlankNotebook),this.setTelemetryFlags();this.context.globalState.get("extensionVersion")?await this.commandManager.executeCommand("jupyter.opennotebook",void 0,u.CommandSource.commandPalette):this.openSampleNotebook().ignoreErrors();break;case y.StartPageMessages.OpenBlankPythonFile:l.sendTelemetryEvent(m.Telemetry.StartPageOpenBlankPythonFile),this.setTelemetryFlags();const n=await this.documentManager.openTextDocument({language:"python",content:`print("${f.StartPage.helloWorld()}")`});await this.documentManager.showTextDocument(n,1,!0);break;case y.StartPageMessages.OpenInteractiveWindow:l.sendTelemetryEvent(m.Telemetry.StartPageOpenInteractiveWindow),this.setTelemetryFlags();const r=await this.documentManager.openTextDocument({language:"python",content:`#%%\nprint("${f.StartPage.helloWorld()}")`});await this.documentManager.showTextDocument(r,1,!0),await this.commandManager.executeCommand("jupyter.runallcells",a.Uri.parse(""));break;case y.StartPageMessages.OpenCommandPalette:l.sendTelemetryEvent(m.Telemetry.StartPageOpenCommandPalette),this.setTelemetryFlags(),await this.commandManager.executeCommand("workbench.action.showCommands");break;case y.StartPageMessages.OpenCommandPaletteWithOpenNBSelected:l.sendTelemetryEvent(m.Telemetry.StartPageOpenCommandPaletteWithOpenNBSelected),this.setTelemetryFlags(),await this.commandManager.executeCommand("workbench.action.quickOpen",">Create New Blank Jupyter Notebook");break;case y.StartPageMessages.OpenSampleNotebook:l.sendTelemetryEvent(m.Telemetry.StartPageOpenSampleNotebook),this.setTelemetryFlags(),this.openSampleNotebook().ignoreErrors();break;case y.StartPageMessages.OpenFileBrowser:l.sendTelemetryEvent(m.Telemetry.StartPageOpenFileBrowser),this.setTelemetryFlags();const i=await this.appShell.showOpenDialog({filters:{Python:["py","ipynb"]},canSelectMany:!1});if(i){const e=await this.documentManager.openTextDocument(i[0]);await this.documentManager.showTextDocument(e)}break;case y.StartPageMessages.OpenFolder:l.sendTelemetryEvent(m.Telemetry.StartPageOpenFolder),this.setTelemetryFlags(),this.commandManager.executeCommand("workbench.action.files.openFolder");break;case y.StartPageMessages.OpenWorkspace:l.sendTelemetryEvent(m.Telemetry.StartPageOpenWorkspace),this.setTelemetryFlags(),this.commandManager.executeCommand("workbench.action.openWorkspace");break;case y.StartPageMessages.UpdateSettings:!1===t&&l.sendTelemetryEvent(m.Telemetry.StartPageClickedDontShowAgain),await this.configuration.updateSetting("showStartPage",t,void 0,a.ConfigurationTarget.Global)}super.onMessage(e,t)}async extensionVersionChanged(){const e=this.context.globalState.get("extensionVersion"),t=this.appEnvironment.packageJson.version;let n;return e?e===t||this.savedVersionisOlder(e,t)?n=!1:(l.sendTelemetryEvent(m.Telemetry.StartPageOpenedFromNewUpdate),n=!0):(l.sendTelemetryEvent(m.Telemetry.StartPageOpenedFromNewInstall),n=!0),await this.context.globalState.update("extensionVersion",t),n}async activateBackground(){if(this.configuration.getSettings().showStartPage&&"stable"===this.appEnvironment.extensionChannel){await this.extensionVersionChanged()&&(this.firstTime=!0,this.open().ignoreErrors())}}savedVersionisOlder(e,t){const n=e.split("."),r=t.split(".");switch(!0){case Number(r[0])>Number(n[0]):return!1;case Number(r[0])<Number(n[0]):return!0;case Number(r[1])>Number(n[1]):return!1;case Number(r[1])<Number(n[1]):return!0;case Number(r[2][0])>Number(n[2][0]):return!1;case Number(r[2][0])<Number(n[2][0]):return!0;default:return!1}}async openSampleNotebook(){const e=s.join(c.EXTENSION_ROOT_DIR,"pythonFiles",f.StartPage.sampleNotebook()+".ipynb");let t;t=await this.file.fileExists(e)?e:s.join(c.EXTENSION_ROOT_DIR,"pythonFiles","Notebooks intro.ipynb"),await this.commandManager.executeCommand("jupyter.opennotebook",a.Uri.file(t),u.CommandSource.commandPalette)}setTelemetryFlags(){this.firstTime&&(this.actionTakenOnFirstTime=!0),this.actionTaken=!0}};E=r([o.injectable(),i(0,o.inject(d.IWebviewPanelProvider)),i(1,o.inject(y.ICodeCssGenerator)),i(2,o.inject(y.IThemeFinder)),i(3,o.inject(p.IConfigurationService)),i(4,o.inject(d.IWorkspaceService)),i(5,o.inject(h.IFileSystem)),i(6,o.inject(d.ICommandManager)),i(7,o.inject(d.IDocumentManager)),i(8,o.inject(d.IApplicationShell)),i(9,o.inject(p.IExtensionContext)),i(10,o.inject(d.IApplicationEnvironment))],E),t.StartPage=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartPageMessageListener=void 0,n(11);t.StartPageMessageListener=class{constructor(e,t,n){this.disposedCallback=n,this.callback=e,this.viewChanged=t}async dispose(){this.disposedCallback()}onMessage(e,t){this.callback(e,t)}onChangeViewState(e){this.viewChanged(e)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewPanelHost=void 0,n(11);const o=n(0),s=n(2),a=n(5),c=n(15),l=n(14),u=n(30),d=n(7),h=n(133),p=n(390),f=n(1089);let g=class extends f.WebviewHost{constructor(e,t,n,r,i,o,s,a,c,l,d){super(e,n,r,i,d),this.configService=e,this.provider=t,this.themeFinder=r,this.workspaceService=i,this.rootPath=s,this.scripts=a,this._title=c,this.viewColumn=l,this.useCustomEditorApi=d,this.viewState={visible:!1,active:!1},this.startupStopwatch=new u.StopWatch,this.onWebPanelLoadFailed=async()=>{this.dispose()},this.webPanelViewStateChanged=e=>{const t=e.isVisible(),n=e.isActive(),r={visible:t,active:n},i={visible:this.viewState.visible,active:this.viewState.active};this.viewState.visible=t,this.viewState.active=n,this.onViewStateChanged({current:r,previous:i})},this.messageListener=o(this.onMessage.bind(this),this.webPanelViewStateChanged.bind(this),this.dispose.bind(this))}get isDisposed(){return this.disposed}async show(e){this.isDisposed||this.webPanel&&await this.webPanel.show(e)}updateCwd(e){this.webPanel&&this.webPanel.updateCwd(e)}dispose(){this.isDisposed||(this.disposed=!0,this.webPanel&&(this.webPanel.close(),this.webPanel=void 0)),super.dispose()}get title(){return this._title}setTitle(e){this._title=e,!this.isDisposed&&this.webPanel&&this.webPanel.setTitle(e)}onMessage(e,t){switch(e){case p.SharedMessages.Started:this.webPanelRendered();break;default:super.onMessage(e,t)}}shareMessage(e,t){this.messageListener.onMessage(e.toString(),t)}onViewStateChanged(e){l.noop()}async loadWebPanel(e,t){var n;if(this.disposed=!1,this.webviewInit=this.webviewInit||c.createDeferred(),this.themeIsDarkPromise=this.themeIsDarkPromise?this.themeIsDarkPromise:c.createDeferred(),a.traceInfo("Loading web panel. Panel is "+(this.webPanel?"set":"notset")),void 0===this.webPanel){const r=await this.generateExtraSettings();a.traceInfo("Loading web view...");const i=null===(n=this.workspaceService.getWorkspaceFolder(s.Uri.file(e)))||void 0===n?void 0:n.uri;this.webPanel=await this.provider.create({viewColumn:this.viewColumn,listener:this.messageListener,title:this.title,rootPath:this.rootPath,scripts:this.scripts,settings:r,cwd:e,webViewPanel:t,additionalPaths:i?[i.fsPath]:[]}),this.webview=this.webPanel,this._disposables.push(this.webPanel.loadFailed(this.onWebPanelLoadFailed,this)),a.traceInfo("Web view created.")}this.onSettingsChanged().ignoreErrors(),this.sendLocStrings().ignoreErrors()}webPanelRendered(){this.webviewInit&&!this.webviewInit.resolved&&(d.sendTelemetryEvent(h.Telemetry.WebviewStartup,this.startupStopwatch.elapsedTime,{type:this.title}),this.webviewInit.resolve(),a.traceInfo("Web view react rendered")),this.sendLocStrings().ignoreErrors(),this.onSettingsChanged().ignoreErrors()}};g=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged()),i(3,o.unmanaged()),i(4,o.unmanaged()),i(5,o.unmanaged()),i(6,o.unmanaged()),i(7,o.unmanaged()),i(8,o.unmanaged()),i(9,o.unmanaged()),i(10,o.unmanaged())],g),t.WebviewPanelHost=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebviewHost=void 0,n(11);const o=n(0),s=n(7),a=n(15),c=n(13),l=n(133),u=n(227),d=n(10),h=n(390);let p=class{constructor(e,t,n,r,i){this.configService=e,this.cssGenerator=t,this.themeFinder=n,this.workspaceService=r,this.useCustomEditorApi=i,this.disposed=!1,this.themeIsDarkPromise=a.createDeferred(),this.webviewInit=a.createDeferred(),this._disposables=[],this.onSettingsChanged=async()=>{const e=JSON.stringify(await this.generateExtraSettings());this.postMessageInternal(h.SharedMessages.UpdateSettings,e).ignoreErrors()},this.onPossibleSettingsChange=async e=>{if(e.affectsConfiguration("workbench.colorTheme")){const e=await this.generateExtraSettings();if(e){const t=JSON.stringify(e);this.postMessageInternal(h.SharedMessages.UpdateSettings,t).ignoreErrors()}}},this._disposables.push(this.workspaceService.onDidChangeConfiguration(this.onPossibleSettingsChange,this)),this._disposables.push(this.configService.getSettings(void 0).onDidChange(this.onSettingsChanged.bind(this)))}dispose(){this.disposed||(this.disposed=!0,this.themeIsDarkPromise=void 0,this._disposables.forEach(e=>e.dispose())),this.webviewInit=void 0}setTheme(e){this.themeIsDarkPromise&&!this.themeIsDarkPromise.resolved||(this.themeIsDarkPromise=a.createDeferred()),this.themeIsDarkPromise.resolve(e)}asWebviewUri(e){var t;if(!this.webview)throw new Error("asWebViewUri called too early");return null===(t=this.webview)||void 0===t?void 0:t.asWebviewUri(e)}postMessage(e,t){return this.postMessageInternal(e.toString(),t)}onMessage(e,t){switch(e){case h.CssMessages.GetCssRequest:this.handleCssRequest(t).ignoreErrors();break;case h.CssMessages.GetMonacoThemeRequest:this.handleMonacoThemeRequest(t).ignoreErrors()}}async generateExtraSettings(){const e=this.configService.getSettings(this.owningResource);return u.PythonSettings.toSerializable(e)}async sendLocStrings(){const e=d.isTestExecution()?"{}":c.getCollectionJSON();this.postMessageInternal(h.SharedMessages.LocInit,e).ignoreErrors()}async postMessageInternal(e,t){var n;this.webviewInit&&(await this.webviewInit.promise,null===(n=this.webview)||void 0===n||n.postMessage({type:e.toString(),payload:t}))}isDark(){return this.themeIsDarkPromise?this.themeIsDarkPromise.promise:Promise.resolve(!1)}async handleCssRequest(e){const t=this.workspaceService.getConfiguration("workbench"),n=t?t.get("colorTheme",l.DefaultTheme):l.DefaultTheme,r=null==e?void 0:e.isDark;this.setTheme(r);const i=await this.themeFinder.isThemeDark(n),o=await this.cssGenerator.generateThemeCss(r,n);return this.postMessageInternal(h.CssMessages.GetCssResponse,{css:o,theme:n,knownDark:i})}async handleMonacoThemeRequest(e){const t=this.workspaceService.getConfiguration("workbench"),n=t?t.get("colorTheme",l.DefaultTheme):l.DefaultTheme,r=null==e?void 0:e.isDark;this.setTheme(r);const i=await this.cssGenerator.generateMonacoTheme(r,n);return this.postMessageInternal(h.CssMessages.GetMonacoThemeResponse,{theme:i})}};r([s.captureTelemetry(l.Telemetry.WebviewStyleUpdate)],p.prototype,"handleCssRequest",null),r([s.captureTelemetry(l.Telemetry.WebviewMonacoStyleUpdate)],p.prototype,"handleMonacoThemeRequest",null),p=r([o.injectable(),i(0,o.unmanaged()),i(1,o.unmanaged()),i(2,o.unmanaged()),i(3,o.unmanaged()),i(4,o.unmanaged())],p),t.WebviewHost=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeFinder=void 0;const o=n(0),s=n(4),a=n(10),c=n(5),l=n(369),u=n(6),d=n(1);let h=class{constructor(e,t,n){this.extensions=e,this.currentProcess=t,this.fs=n,this.themeCache={},this.languageCache={}}async findThemeRootJson(e){const t=await this.findThemeData(e);if(t)return t.rootFile}async findTmLanguage(e){if(!this.themeCache.hasOwnProperty(e))try{this.languageCache[e]=await this.findMatchingLanguage(e)}catch(e){c.traceError(e)}return this.languageCache[e]}async findLanguageConfiguration(e){return e===a.PYTHON_LANGUAGE?{comments:{lineComment:"#",blockComment:['"""','"""']},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{offSide:!0,markers:{start:new RegExp("^\\s*#region\\b"),end:new RegExp("^\\s*#endregion\\b")}},...l.getLanguageConfiguration()}:this.findMatchingLanguageConfiguration(e)}async isThemeDark(e){const t=await this.findThemeData(e);if(t)return t.isDark}async findThemeData(e){if(!this.themeCache.hasOwnProperty(e))try{this.themeCache[e]=await this.findMatchingTheme(e)}catch(e){c.traceError(e)}return this.themeCache[e]}async findMatchingLanguage(e){const t=this.currentProcess.execPath;let n=s.dirname(t),r=s.join(n,"resources","app","extensions");await this.fs.directoryExists(r)||(n=s.resolve(n,"../../../.."),r=s.join(n,"resources","app","extensions"));let i=await this.findMatchingLanguages(e,r);return i||e!==a.PYTHON_LANGUAGE||(i=await this.fs.readFile(s.join(a.EXTENSION_ROOT_DIR,"resources","MagicPython.tmLanguage.json"))),i}async findMatchingLanguageConfiguration(e){try{const t=this.currentProcess.execPath;let n=s.dirname(t),r=s.join(n,"resources","app","extensions",e);await this.fs.directoryExists(r)||(n=s.resolve(n,"../../../.."),r=s.join(n,"resources","app","extensions",e));const i=s.join(r,"language-configuration.json");if(await this.fs.fileExists(i)){const e=await this.fs.readFile(i);return JSON.parse(e)}}catch(e){}return{}}async findMatchingLanguages(e,t){if(process.env.VSC_PYTHON_MIMIC_REMOTE)return;const n=await this.fs.search("**/package.json",t);if(n&&n.length>0)for(const r of n){const n=s.join(t,r),i=await this.findMatchingLanguageFromJson(n,e);if(i)return i}}async findMatchingTheme(e){if(process.env.VSC_PYTHON_MIMIC_REMOTE)return;const t=this.extensions.all;for(const n of t){const t=await this.findMatchingThemeFromJson(s.join(n.extensionPath,"package.json"),e);if(t)return t}const n=this.currentProcess.execPath;let r=s.dirname(n),i=s.join(r,"resources","app","extensions");await this.fs.directoryExists(i)||(r=s.resolve(r,"../../../.."),i=s.join(r,"resources","app","extensions"));const o=await this.findMatchingThemes(i,e);return o||void 0}async findMatchingThemes(e,t){const n=await this.fs.search("**/package.json",e);if(n&&n.length>0)for(const r of n){const n=s.join(e,r),i=await this.findMatchingThemeFromJson(n,t);if(i)return i}}async findMatchingLanguageFromJson(e,t){const n=await this.fs.readFile(e),r=JSON.parse(n);if(r.hasOwnProperty("name")&&r.hasOwnProperty("contributes")){const{contributes:n}=r;if(n.hasOwnProperty("grammars")){const r=n.grammars;for(const n of r)if(n.hasOwnProperty("language")&&n.language===t){const t=n.hasOwnProperty("path")?s.join(s.dirname(e),n.path.toString()):"";return this.fs.readFile(t)}}}}async findMatchingThemeFromJson(e,t){const n=await this.fs.readFile(e),r=JSON.parse(n);if(r.hasOwnProperty("name")&&r.hasOwnProperty("contributes")){const{contributes:n}=r;if(n.hasOwnProperty("themes")){const r=n.themes;for(const n of r)if(n.hasOwnProperty("label")&&n.label===t||n.hasOwnProperty("id")&&n.id===t){return{isDark:n.hasOwnProperty("uiTheme")&&"vs-dark"===n.uiTheme,rootFile:n.hasOwnProperty("path")?s.join(s.dirname(e),n.path.toString()):""}}}}}};h=r([o.injectable(),i(0,o.inject(d.IExtensions)),i(1,o.inject(d.ICurrentProcess)),i(2,o.inject(u.IFileSystem))],h),t.ThemeFinder=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalActivator=void 0;const o=n(0),s=n(1),a=n(25),c=n(1092);let l=class{constructor(e,t,n){this.helper=e,this.handlers=t,this.configurationService=n,this.initialize()}async activateEnvironmentInTerminal(e,t){if(!this.configurationService.getSettings(null==t?void 0:t.resource).terminal.activateEnvironment||(null==t?void 0:t.hideFromUser))return!1;const n=await this.baseActivator.activateEnvironmentInTerminal(e,t);return this.handlers.forEach(r=>r.handleActivation(e,null==t?void 0:t.resource,!0===(null==t?void 0:t.preserveFocus),n).ignoreErrors()),n}initialize(){this.baseActivator=new c.BaseTerminalActivator(this.helper)}};l=r([o.injectable(),i(0,o.inject(a.ITerminalHelper)),i(1,o.multiInject(a.ITerminalActivationHandler)),i(2,o.inject(s.IConfigurationService))],l),t.TerminalActivator=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTerminalActivator=void 0;const r=n(15);t.BaseTerminalActivator=class{constructor(e){this.helper=e,this.activatedTerminals=new Map}async activateEnvironmentInTerminal(e,t){if(this.activatedTerminals.has(e))return this.activatedTerminals.get(e);const n=r.createDeferred();this.activatedTerminals.set(e,n.promise);const i=this.helper.identifyTerminalShell(e),o=await this.helper.getEnvironmentActivationCommands(i,null==t?void 0:t.resource,null==t?void 0:t.interpreter);let s=!1;if(o)for(const n of o)e.show(null==t?void 0:t.preserveFocus),e.sendText(n),await this.waitForCommandToProcess(i),s=!0;return n.resolve(s),s}async waitForCommandToProcess(e){await r.sleep(500)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowershellTerminalActivationFailedHandler=void 0;const o=n(0),s=n(349),a=n(34),c=n(6),l=n(25);let u=class{constructor(e,t,n){this.helper=e,this.platformService=t,this.diagnosticService=n}async handleActivation(e,t,n,r){if(r||!this.platformService.isWindows)return;const i=this.helper.identifyTerminalShell(e);if(i!==l.TerminalShellType.powershell&&i!==l.TerminalShellType.powershellCore)return;const o=await this.helper.getEnvironmentActivationCommands(l.TerminalShellType.commandPrompt,t);o&&Array.isArray(o)&&0!==o.length&&this.diagnosticService.handle([new s.PowershellActivationNotAvailableDiagnostic(t)]).ignoreErrors()}};u=r([o.injectable(),i(0,o.inject(l.ITerminalHelper)),i(1,o.inject(c.IPlatformService)),i(2,o.inject(a.IDiagnosticsService)),i(2,o.named(s.PowerShellActivationHackDiagnosticsServiceId))],u),t.PowershellTerminalActivationFailedHandler=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaActivationCommandProvider=void 0,n(11);const o=n(0),s=n(4),a=n(12),c=n(6),l=n(1),u=n(25);let d=class{constructor(e,t,n){this.condaService=e,this.platform=t,this.configService=n}isShellSupported(e){return!0}getActivationCommands(e,t){const n=this.configService.getSettings(e).pythonPath;return this.getActivationCommandsForInterpreter(n,t)}async getActivationCommandsForInterpreter(e,t){const n=await this.condaService.getCondaEnvironment(e);if(!n)return;const r=n.name.length>0?n.name:n.path,i=await this.condaService.getCondaVersion();if(i&&i.major>=4){if(i.minor>=6&&(t===u.TerminalShellType.powershell||t===u.TerminalShellType.powershellCore))return this.getPowershellCommands(r);if(i.minor>=4){const t=await this.condaService.getCondaFileFromInterpreter(e,n.name);if(t){const e=s.join(s.dirname(t),"activate").fileToCommandArgument();return[this.platform.isWindows?e:"source "+e,"conda activate "+r.toCommandArgument()]}}}switch(t){case u.TerminalShellType.powershell:case u.TerminalShellType.powershellCore:return this.getPowershellCommands(r);case u.TerminalShellType.fish:return this.getFishCommands(r,await this.condaService.getCondaFile());default:return this.platform.isWindows?this.getWindowsCommands(r):this.getUnixCommands(r,await this.condaService.getCondaFile())}}async getWindowsActivateCommand(){let e="activate";const t=await this.condaService.getCondaFile();if(t&&s.basename(t)!==t){const n=s.dirname(t);e=s.join(n,e),e=e.toCommandArgument()}return e}async getWindowsCommands(e){return[`${await this.getWindowsActivateCommand()} ${e.toCommandArgument()}`]}async getPowershellCommands(e){return["conda activate "+e.toCommandArgument()]}async getFishCommands(e,t){return[`${t.fileToCommandArgument()} activate ${e.toCommandArgument()}`]}async getUnixCommands(e,t){const n=s.dirname(t);return[`source ${s.join(n,"activate").fileToCommandArgument()} ${e.toCommandArgument()}`]}};d=r([o.injectable(),i(0,o.inject(a.ICondaService)),i(1,o.inject(c.IPlatformService)),i(2,o.inject(l.IConfigurationService))],d),t.CondaActivationCommandProvider=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvActivationCommandProvider=void 0;const o=n(0);n(11);const s=n(12),a=n(28),c=n(3),l=n(6);let u=class{constructor(e,t,n,r){this.interpreterService=e,this.pipenvService=t,this.workspaceService=n,this.fs=r}isShellSupported(e){return!1}async getActivationCommands(e,t){const n=await this.interpreterService.getActiveInterpreter(e);if(!n||n.envType!==a.EnvironmentType.Pipenv)return;const r=e?this.workspaceService.getWorkspaceFolder(e):void 0;if(r&&n.pipEnvWorkspaceFolder&&!this.fs.arePathsSame(r.uri.fsPath,n.pipEnvWorkspaceFolder))return;return[this.pipenvService.executable.fileToCommandArgument()+" shell"]}async getActivationCommandsForInterpreter(e,t){const n=await this.interpreterService.getInterpreterDetails(e);if(!n||n.envType!==a.EnvironmentType.Pipenv)return;return[this.pipenvService.executable.fileToCommandArgument()+" shell"]}};u=r([o.injectable(),i(0,o.inject(s.IInterpreterService)),i(1,o.inject(s.IInterpreterLocatorService)),i(1,o.named(s.PIPENV_SERVICE)),i(2,o.inject(c.IWorkspaceService)),i(3,o.inject(l.IFileSystem))],u),t.PipEnvActivationCommandProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PyEnvActivationCommandProvider=void 0;const o=n(0),s=n(12),a=n(8),c=n(28);let l=class{constructor(e){this.serviceContainer=e}isShellSupported(e){return!0}async getActivationCommands(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return["pyenv shell "+n.envName.toCommandArgument()]}async getActivationCommandsForInterpreter(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getInterpreterDetails(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return["pyenv shell "+n.envName.toCommandArgument()]}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l),t.PyEnvActivationCommandProvider=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalServiceFactory=void 0;const o=n(0),s=n(12),a=n(8),c=n(3),l=n(6),u=n(14),d=n(1098),h=n(1099);let p=class{constructor(e,t,n){this.serviceContainer=e,this.fs=t,this.interpreterService=n,this.terminalServices=new Map}getTerminalService(e,t){const n=u.isUri(e)?e:void 0,r=u.isUri(e)?void 0:(null==e?void 0:e.title)||t,i="string"==typeof r&&r.trim().length>0?r.trim():"Python",o=u.isUri(e)||null==e?void 0:e.interpreter,s=!u.isUri(e)&&!0===(null==e?void 0:e.hideFromUser),a={env:u.isUri(e)||null==e?void 0:e.env,hideFromUser:s,interpreter:o,resource:n,title:r},c=this.getTerminalId(i,n,o);if(!this.terminalServices.has(c)){const e=new d.TerminalService(this.serviceContainer,a);this.terminalServices.set(c,e)}return new h.SynchronousTerminalService(this.fs,this.interpreterService,this.terminalServices.get(c),o)}createTerminalService(e,t){return t="string"==typeof t&&t.trim().length>0?t.trim():"Python",new d.TerminalService(this.serviceContainer,{resource:e,title:t})}getTerminalId(e,t,n){if(!t&&!n)return e;const r=this.serviceContainer.get(c.IWorkspaceService).getWorkspaceFolder(t||void 0);return`${e}:${(null==r?void 0:r.uri.fsPath)||""}:${null==n?void 0:n.path}`}};p=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(l.IFileSystem)),i(2,o.inject(s.IInterpreterService))],p),t.TerminalServiceFactory=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalService=void 0;const o=n(0),s=n(2);n(11);const a=n(12),c=n(8),l=n(7),u=n(9),d=n(3),h=n(1),p=n(25);let f=class{constructor(e,t){this.serviceContainer=e,this.options=t,this.terminalClosed=new s.EventEmitter;const n=this.serviceContainer.get(h.IDisposableRegistry);n.push(this),this.terminalHelper=this.serviceContainer.get(p.ITerminalHelper),this.terminalManager=this.serviceContainer.get(d.ITerminalManager),this.terminalManager.onDidCloseTerminal(this.terminalCloseHandler,this,n),this.terminalActivator=this.serviceContainer.get(p.ITerminalActivator)}get onDidCloseTerminal(){return this.terminalClosed.event.bind(this.terminalClosed)}dispose(){this.terminal&&this.terminal.dispose()}async sendCommand(e,t,n){var r;await this.ensureTerminal();const i=this.terminalHelper.buildCommandForTerminal(this.terminalShellType,e,t);(null===(r=this.options)||void 0===r?void 0:r.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(i,!0)}async sendText(e){var t;await this.ensureTerminal(),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(e)}async show(e=!0){var t;await this.ensureTerminal(e),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(e)}async ensureTerminal(e=!0){var t,n,r,i,o,s,a;this.terminal||(this.terminalShellType=this.terminalHelper.identifyTerminalShell(this.terminal),this.terminal=this.terminalManager.createTerminal({name:(null===(t=this.options)||void 0===t?void 0:t.title)||"Python",env:null===(n=this.options)||void 0===n?void 0:n.env,hideFromUser:null===(r=this.options)||void 0===r?void 0:r.hideFromUser}),await new Promise(e=>setTimeout(e,100)),await this.terminalActivator.activateEnvironmentInTerminal(this.terminal,{resource:null===(i=this.options)||void 0===i?void 0:i.resource,preserveFocus:e,interpreter:null===(o=this.options)||void 0===o?void 0:o.interpreter,hideFromUser:null===(s=this.options)||void 0===s?void 0:s.hideFromUser}),(null===(a=this.options)||void 0===a?void 0:a.hideFromUser)||this.terminal.show(e),this.sendTelemetry().ignoreErrors())}terminalCloseHandler(e){e===this.terminal&&(this.terminalClosed.fire(),this.terminal=void 0)}async sendTelemetry(){var e,t;const n=this.serviceContainer.get(h.IConfigurationService).getSettings(null===(e=this.options)||void 0===e?void 0:e.resource).pythonPath,r=(null===(t=this.options)||void 0===t?void 0:t.interpreter)||await this.serviceContainer.get(a.IInterpreterService).getInterpreterDetails(n),i=r&&r.version?r.version.raw:void 0,o=r?r.envType:void 0;l.captureTelemetry(u.EventName.TERMINAL_CREATE,{terminal:this.terminalShellType,pythonVersion:i,interpreterType:o})}};f=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],f),t.TerminalService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronousTerminalService=void 0;const o=n(0),s=n(12),a=n(351),c=n(5),l=n(6),u=n(41),d=n(15),h=n(14);var p;!function(e){e[e.notStarted=0]="notStarted",e[e.started=1]="started",e[e.completed=2]="completed",e[e.errored=4]="errored"}(p||(p={}));class f{constructor(e,t,n){this.lockFile=e,this.fs=t,this.command=n,this.state=p.notStarted,this._completed=d.createDeferred(),this.registerStateUpdate(),this._completed.promise.finally(()=>this.dispose()).ignoreErrors()}get completed(){return this._completed.promise}dispose(){this.disposable&&(this.disposable.dispose(),this.disposable=void 0)}registerStateUpdate(){const e=setInterval(async()=>{const e=await this.getLockFileState(this.lockFile);if(e!==this.state&&c.traceVerbose(`Command state changed to ${e}. ${this.command.join(" ")}`),this.state=e,e&p.errored){const e=await this.fs.readFile(this.lockFile+".error").catch(()=>"");this._completed.reject(new Error(`Command failed with errors, check the terminal for details. Command: ${this.command.join(" ")}\n${e}`))}else e&p.completed&&this._completed.resolve()},100);this.disposable={dispose:()=>clearInterval(e)}}async getLockFileState(e){const t=await this.fs.readFile(e);let n=p.notStarted;return t.includes("START")&&(n|=p.started),t.includes("END")&&(n|=p.completed),t.includes("FAIL")&&(n|=p.completed|p.errored),n}}let g=class{constructor(e,t,n,r){this.fs=e,this.interpreter=t,this.terminalService=n,this.pythonInterpreter=r,this.disposables=[]}get onDidCloseTerminal(){return this.terminalService.onDidCloseTerminal}dispose(){for(this.terminalService.dispose();this.disposables.length;){const e=this.disposables.shift();if(!e)break;try{e.dispose()}catch(e){h.noop()}}}async sendCommand(e,t,n,r=!0){if(!n)return this.terminalService.sendCommand(e,t);const i=await this.createLockFile(),o=new f(i.filePath,this.fs,[e,...t]);try{const s=this.pythonInterpreter||await this.interpreter.getActiveInterpreter(void 0),c=u.shell_exec(e,i.filePath,t);await this.terminalService.sendCommand((null==s?void 0:s.path)||"python",c);const l=r?o.completed:o.completed.catch(h.noop);await a.Cancellation.race(()=>l,n)}finally{o.dispose(),i.dispose()}}sendText(e){return this.terminalService.sendText(e)}show(e){return this.terminalService.show(e)}createLockFile(){return this.fs.createTemporaryFile(".log").then(e=>(this.disposables.push(e),e))}};g=r([i(0,o.inject(l.IFileSystem)),i(1,o.inject(s.IInterpreterService))],g),t.SynchronousTerminalService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalHelper=void 0;const o=n(0),s=n(12),a=n(28),c=n(7),l=n(9),u=n(3);n(11);const d=n(5),h=n(6),p=n(1),f=n(27),g=n(1101),m=n(25);let v=class{constructor(e,t,n,r,i,o,s,a,c,l,u){this.platform=e,this.terminalManager=t,this.condaService=n,this.interpreterService=r,this.configurationService=i,this.conda=o,this.bashCShellFish=s,this.commandPromptAndPowerShell=a,this.pyenv=c,this.pipenv=l,this.shellDetector=new g.ShellDetector(this.platform,u)}createTerminal(e){return this.terminalManager.createTerminal({name:e})}identifyTerminalShell(e){return this.shellDetector.identifyTerminalShell(e)}buildCommandForTerminal(e,t,n){const r=e===m.TerminalShellType.powershell||e===m.TerminalShellType.powershellCore?"& ":"",i=n.map(e=>e.toCommandArgument());return`${r}${t.fileToCommandArgument()} ${i.join(" ")}`.trim()}async getEnvironmentActivationCommands(e,t,n){const r=[this.pipenv,this.pyenv,this.bashCShellFish,this.commandPromptAndPowerShell],i=this.getActivationCommands(t||void 0,n,e,r);return this.sendTelemetry(e,l.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL,n,i).ignoreErrors(),i}async getEnvironmentActivationShellCommands(e,t,n){if(this.platform.osType===f.OSType.Unknown)return;const r=[this.bashCShellFish,this.commandPromptAndPowerShell],i=this.getActivationCommands(e,n,t,r);return this.sendTelemetry(t,l.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE,n,i).ignoreErrors(),i}async sendTelemetry(e,t,n,r){let i=!1,o=!1;try{const e=await r;i=Array.isArray(e)&&e.length>0}catch(e){o=!0,d.traceError("Failed to get activation commands",e)}const s=n&&n.version?n.version.raw:void 0,l={failed:o,hasCommands:i,interpreterType:n?n.envType:a.EnvironmentType.Unknown,terminal:e,pythonVersion:s};c.sendTelemetryEvent(t,void 0,l)}async getActivationCommands(e,t,n,r){const i=this.configurationService.getSettings(e);if(t?t.envType===a.EnvironmentType.Conda:await this.condaService.isCondaEnvironment(i.pythonPath)){const r=t?await this.conda.getActivationCommandsForInterpreter(t.path,n):await this.conda.getActivationCommands(e,n);if(Array.isArray(r))return r}const o=r.filter(e=>e.isShellSupported(n));for(const r of o){const i=t?await r.getActivationCommandsForInterpreter(t.path,n):await r.getActivationCommands(e,n);if(Array.isArray(i)&&i.length>0)return i}}};r([d.traceDecorators.error("Failed to capture telemetry")],v.prototype,"sendTelemetry",null),v=r([o.injectable(),i(0,o.inject(h.IPlatformService)),i(1,o.inject(u.ITerminalManager)),i(2,o.inject(s.ICondaService)),i(3,o.inject(s.IInterpreterService)),i(4,o.inject(p.IConfigurationService)),i(5,o.inject(m.ITerminalActivationCommandProvider)),i(5,o.named(m.TerminalActivationProviders.conda)),i(6,o.inject(m.ITerminalActivationCommandProvider)),i(6,o.named(m.TerminalActivationProviders.bashCShellFish)),i(7,o.inject(m.ITerminalActivationCommandProvider)),i(7,o.named(m.TerminalActivationProviders.commandPromptAndPowerShell)),i(8,o.inject(m.ITerminalActivationCommandProvider)),i(8,o.named(m.TerminalActivationProviders.pyenv)),i(9,o.inject(m.ITerminalActivationCommandProvider)),i(9,o.named(m.TerminalActivationProviders.pipenv)),i(10,o.multiInject(m.IShellDetector))],v),t.TerminalHelper=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShellDetector=void 0;const o=n(0),s=n(7),a=n(9);n(11);const c=n(5),l=n(6),u=n(27),d=n(25),h={[u.OSType.Linux]:d.TerminalShellType.bash,[u.OSType.OSX]:d.TerminalShellType.bash,[u.OSType.Windows]:d.TerminalShellType.commandPrompt,[u.OSType.Unknown]:d.TerminalShellType.other};let p=class{constructor(e,t){this.platform=e,this.shellDetectors=t}identifyTerminalShell(e){let t;const n={failed:!0,shellIdentificationSource:"default",terminalProvided:!!e,hasCustomShell:void 0,hasShellInEnv:void 0},r=this.shellDetectors.slice().sort((e,t)=>t.priority-e.priority);for(const i of r)if(t=i.identify(n,e),c.traceVerbose(`${i}. Shell identified as ${t} ${e?`(Terminal name is ${e.name})`:""}`),t&&t!==d.TerminalShellType.other)break;return s.sendTelemetryEvent(a.EventName.TERMINAL_SHELL_IDENTIFICATION,void 0,n),c.traceVerbose(`Shell identified as '${t}'`),void 0!==t&&t!==d.TerminalShellType.other||(c.traceVerbose("Using default OS shell"),t=h[this.platform.osType]),t}};p=r([o.injectable(),i(0,o.inject(l.IPlatformService)),i(1,o.multiInject(d.IShellDetector))],p),t.ShellDetector=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsShellDetector=void 0;const o=n(0),s=n(3),a=n(5),c=n(6),l=n(27),u=n(25),d=n(153);let h=class extends d.BaseShellDetector{constructor(e,t){super(2),this.workspace=e,this.platform=t}getTerminalShellPath(){const e=this.workspace.getConfiguration("terminal.integrated.shell");let t="";switch(this.platform.osType){case l.OSType.Windows:t="windows";break;case l.OSType.OSX:t="osx";break;case l.OSType.Linux:t="linux";break;default:return""}return e.get(t)}identify(e,t){const n=this.getTerminalShellPath();e.hasCustomShell=!!n;const r=n?this.identifyShellFromShellPath(n):u.TerminalShellType.other;return r!==u.TerminalShellType.other&&(e.shellIdentificationSource="environment"),e.shellIdentificationSource="settings",a.traceVerbose(`Shell path from user settings '${n}'`),r}};h=r([o.injectable(),i(0,o.inject(s.IWorkspaceService)),i(1,o.inject(c.IPlatformService))],h),t.SettingsShellDetector=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalNameShellDetector=void 0;const i=n(0),o=n(5),s=n(25),a=n(153);let c=class extends a.BaseShellDetector{constructor(){super(4)}identify(e,t){if(!t)return;const n=this.identifyShellFromShellPath(t.name);return o.traceVerbose(`Terminal name '${t.name}' identified as shell '${n}'`),e.shellIdentificationSource=n===s.TerminalShellType.other?e.shellIdentificationSource:"terminalName",n}};c=r([i.injectable()],c),t.TerminalNameShellDetector=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserEnvironmentShellDetector=void 0;const o=n(0),s=n(5),a=n(6),c=n(1),l=n(27),u=n(25),d=n(153);let h=class extends d.BaseShellDetector{constructor(e,t){super(1),this.currentProcess=e,this.platform=t}getDefaultPlatformShell(){return function(e,t){if(e.osType===l.OSType.Windows)return function(e,t){const n=parseFloat(e.osRelease)>=10,r=t.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),i=`${t.env.windir}\\${r?"Sysnative":"System32"}\\WindowsPowerShell\\v1.0\\powershell.exe`;return n?i:function(e){return e.env.comspec||"cmd.exe"}(t)}(e,t);return t.env.SHELL&&"/bin/false"!==t.env.SHELL?t.env.SHELL:"/bin/bash"}(this.platform,this.currentProcess)}identify(e,t){const n=this.getDefaultPlatformShell();e.hasShellInEnv=!!n;const r=this.identifyShellFromShellPath(n);return r!==u.TerminalShellType.other&&(e.shellIdentificationSource="environment"),s.traceVerbose(`Shell path from user env '${n}'`),r}};h=r([o.injectable(),i(0,o.inject(c.ICurrentProcess)),i(1,o.inject(a.IPlatformService))],h),t.UserEnvironmentShellDetector=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCEnvironmentShellDetector=void 0;const o=n(0),s=n(3),a=n(5),c=n(25),l=n(153);let u=class extends l.BaseShellDetector{constructor(e){super(3),this.appEnv=e}identify(e,t){if(!this.appEnv.shell)return;const n=this.identifyShellFromShellPath(this.appEnv.shell);return a.traceVerbose(`Terminal shell path '${this.appEnv.shell}' identified as shell '${n}'`),e.shellIdentificationSource=n===c.TerminalShellType.other?e.shellIdentificationSource:"vscode",n}};u=r([i(0,o.inject(s.IApplicationEnvironment))],u),t.VSCEnvironmentShellDetector=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Random=t.getRandomBetween=void 0;const i=n(73),o=n(0);function s(e=0,t=10){return e+function(){let e=0;const t=i.randomBytes(2);return e=(t.readUInt8(0)<<8)+t.readUInt8(1),e/(Math.pow(16,4)-1)}()*(t-e)}t.getRandomBetween=s;let a=class{getRandomInt(e=0,t=10){return s(e,t)}};a=r([o.injectable()],a),t.Random=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceContainer=void 0;const i=n(72),o=n(0),s=n(5);try{o.decorate(o.injectable(),i.EventEmitter)}catch(e){s.traceWarning("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let a=class{constructor(e){this.container=e}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}};a=r([o.injectable()],a),t.ServiceContainer=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const i=n(0);let o=class{constructor(e){this.container=e}add(e,t,n,r){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t),r&&r.forEach(t=>{this.addBinding(e,t)})}addFactory(e,t){this.container.bind(e).toFactory(t)}addBinding(e,t){this.container.bind(t).toService(e)}addSingleton(e,t,n,r){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope(),r&&r.forEach(t=>{this.addBinding(e,t)})}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}tryGet(e,t){try{return t?this.container.getNamed(e,t):this.container.get(e)}catch(e){}}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindSingleton(e,t,n){n?this.container.rebind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.rebind(e).to(t).inSingletonScope()}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}dispose(){this.container.unbindAll(),this.container.unload()}};o=r([i.injectable()],o),t.ServiceManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAPI=t.PythonEnvironments=t.activate=void 0;const r=n(2),i=n(1110),o=n(1111),s=n(154),a=n(393),c=n(395),l=n(1120);t.activate=function(e,t){const[n,r]=d();l.registerForIOC(e,t,n),r()};class u{constructor(e){this.locators=e}get onChanged(){return this.locators.onChanged}iterEnvs(e){return this.locators.iterEnvs(e)}async resolveEnv(e){return this.locators.resolveEnv(e)}}function d(){const[e,t]=function(){const e=new a.WorkspaceLocators([]);return[new a.ExtensionLocators([],e),()=>{e.activate(function(){const e=new r.EventEmitter,t=new r.EventEmitter;r.workspace.onDidChangeWorkspaceFolders(n=>{for(const e of n.removed)t.fire(e.uri);for(const t of n.added)e.fire(t.uri)});const n=r.workspace.workspaceFolders;return{roots:n?n.map(e=>e.uri):[],onAdded:e.event,onRemoved:t.event}}())}]}(),n=new c.EnvironmentInfoService,l=new i.PythonEnvInfoCache(e=>n.isInfoProvided(e.executable.filename),()=>{const e=s.getGlobalPersistentStore("PYTHON_ENV_INFO_CACHE");return{load:async()=>e.get(),store:async t=>e.set(t)}}),d=new o.CachingLocator(l,e);return[new u(d),()=>{t(),l.initialize().ignoreErrors(),d.initialize().ignoreErrors()}]}t.PythonEnvironments=u,t.createAPI=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonEnvInfoCache=void 0;const r=n(111),i=n(232);t.PythonEnvInfoCache=class{constructor(e,t){this.isComplete=e,this.getPersistentStorage=t,this.initialized=!1}async initialize(){this.initialized||(this.initialized=!0,void 0!==this.getPersistentStorage&&(this.persistentStorage=this.getPersistentStorage(),this.envsList=await this.persistentStorage.load()))}getAllEnvs(){return r.cloneDeep(this.envsList)}setAllEnvs(e){this.envsList=r.cloneDeep(e)}filterEnvs(e){if(void 0===this.envsList)return;const t=this.envsList.filter(t=>i.areSameEnv(t,e));return r.cloneDeep(t)}async flush(){var e,t;const n=null===(e=this.envsList)||void 0===e?void 0:e.filter(this.isComplete);(null==n?void 0:n.length)&&await(null===(t=this.persistentStorage)||void 0===t?void 0:t.store(n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachingLocator=void 0,n(11);const r=n(15),i=n(1112),o=n(119),s=n(232),a=n(392),c=n(234),l=n(1113);t.CachingLocator=class{constructor(e,t){this.cache=e,this.locator=t,this.watcher=new c.PythonEnvsWatcher,this.initializing=r.createDeferred(),this.initialized=!1,this.onChanged=this.watcher.onChanged,this.looper=new i.BackgroundRequestLooper({runDefault:null})}async initialize(){if(this.initialized)return;await this.cache.initialize(),this.looper.start(),this.locator.onChanged(e=>this.ensureCurrentRefresh(e));void 0!==this.cache.getAllEnvs()?(this.initializing.resolve(),await this.ensureRecentRefresh()):(await this.ensureRecentRefresh(),this.initializing.resolve())}dispose(){this.looper.stop().ignoreErrors()}iterEnvs(e){return void 0===this.cache.getAllEnvs()?this.iterFromWrappedLocator(e):this.iterFromCache(e)}async resolveEnv(e){const t=s.getMinimalPartialInfo(e);if(void 0===t)return;const n=this.cache.filterEnvs(t);if(void 0===n)return;if(n.length>0)return l.pickBestEnv(n);const r=await this.locator.resolveEnv(e);if(void 0!==r){const e=this.cache.getAllEnvs();void 0!==e&&(e.push(r),await this.updateCache(e))}return r}async*iterFromWrappedLocator(e){await this.initializing.promise;const t=this.iterFromCache(e);let n=await t.next();for(;!n.done;)yield n.value,n=await t.next()}async*iterFromCache(e){const t=this.cache.getAllEnvs();if(void 0!==t)if(void 0!==e){const n=a.getQueryFilter(e);yield*t.filter(n)}else yield*t;else o.logWarning("envs cache unexpectedly not initialized")}ensureRecentRefresh(){const e=this.looper.getLastRequest();if(void 0!==e){const[,t]=e;return t}return this.addRefreshRequest()}ensureCurrentRefresh(e){void 0===this.looper.getNextRequest()&&this.addRefreshRequest(e).ignoreErrors()}addRefreshRequest(e){const[,t]=this.looper.addRequest(async()=>{const t=this.locator.iterEnvs(),n=await a.getEnvs(t);await this.updateCache(n,e)});return t}async updateCache(e,t){this.cache.setAllEnvs(e),await this.cache.flush(),this.watcher.fire(t||{})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundRequestLooper=void 0;const r=n(15);t.BackgroundRequestLooper=class{constructor(e={}){var t;this.started=!1,this.stopped=!1,this.done=r.createDeferred(),this.loopRunning=r.createDeferred(),this.waitUntilReady=r.createDeferred(),this.queue=[],this.requests={},this.opts={runDefault:null!==(t=e.runDefault)&&void 0!==t?t:async()=>{throw Error("no default operation provided")}}}start(){if(this.stopped)throw Error("already stopped");this.started||(this.started=!0,this.runLoop().ignoreErrors())}stop(){if(this.stopped)return this.loopRunning.promise;if(!this.started)throw Error("not started yet");return this.stopped=!0,this.done.resolve(),this.loopRunning.promise}getLastRequest(){let e;if(this.queue.length>0)e=this.queue[this.queue.length-1];else{if(void 0===this.running)return;e=this.running}const[,t]=this.requests[e];if(void 0!==e)return[e,t]}getNextRequest(){if(0===this.queue.length)return;const e=this.queue[0],[,t]=this.requests[e];return[e,t]}addRequest(e){const t=this.getNextID(),n=r.createDeferred();return this.requests[t]=[null!=e?e:this.opts.runDefault,n.promise,()=>n.resolve()],this.queue.push(t),1===this.queue.length&&this.waitUntilReady.resolve(),[t,n.promise]}async runLoop(){const e=()=>{const e=[this.done.promise.then(()=>0),this.waitUntilReady.promise.then(()=>1)];return Promise.race(e)};let t=await e();for(;!this.done.completed;){if(1!==t)throw Error("unsupported winner "+t);this.waitUntilReady=r.createDeferred(),await this.flush(),t=await e()}this.loopRunning.resolve()}async flush(){if(void 0===this.running){for(;this.queue.length>0;){const e=this.queue[0];this.running=e,this.queue.shift();const[t,,n]=this.requests[e];await t(),delete this.requests[e],n()}this.running=void 0}}getNextID(){return void 0===this.lastID?this.lastID=1:this.lastID+=1,this.lastID}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickBestEnv=void 0,t.pickBestEnv=function(e){return e[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableRegistry=void 0;const r=n(5);t.DisposableRegistry=class{constructor(){this._list=[]}dispose(){this._list.forEach((e,t)=>{try{e.dispose()}catch(e){r.traceWarning(`dispose() #${t} failed (${e})`)}}),this._list=[]}push(e){e&&this._list.push(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisableableLocator=t.Locators=t.combineIterators=void 0;const r=n(2),i=n(15),o=n(394),s=n(1116);function a(e){const t=i.chain(e),n=e.map(e=>e.onUpdated).filter(e=>e);if(!n||0===n.length)return t;const o=new r.EventEmitter;let s=n.length;return n.forEach(e=>{e(e=>{null===e?(s-=1,0===s&&o.fire(null)):o.fire(e)})}),t.onUpdated=o.event,t}t.combineIterators=a;class c extends s.PythonEnvsWatchers{constructor(e){super(e),this.locators=e}iterEnvs(e){return a(this.locators.map(t=>t.iterEnvs(e)))}async resolveEnv(e){for(const t of this.locators){const n=await t.resolveEnv(e);if(void 0!==n)return n}}}t.Locators=c;class l extends s.DisableableEnvsWatcher{constructor(e){super(e),this.locator=e}iterEnvs(e){return this.enabled?this.locator.iterEnvs(e):o.NOOP_ITERATOR}async resolveEnv(e){if(this.enabled)return this.locator.resolveEnv(e)}}t.DisableableLocator=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisableableEnvsWatcher=t.PythonEnvsWatchers=void 0;const r=n(234);t.PythonEnvsWatchers=class{constructor(e){this.watcher=new r.PythonEnvsWatcher,this.onChanged=this.watcher.onChanged,e.forEach(e=>{e.onChanged(e=>this.watcher.fire(e))})}};t.DisableableEnvsWatcher=class{constructor(e){this.wrapped=e,this.enabled=!0}enable(){this.enabled=!0}disable(){this.enabled=!1}onChanged(e,t,n){return this.wrapped.onChanged(t=>{this.enabled&&e(t)},t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHiddenInterpreter=void 0;const r=n(98);t.isHiddenInterpreter=function(e){return r.isRestrictedWindowsStoreInterpreterPath(e.path)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWorkerPool=t.QueuePosition=void 0;const r=n(5),i=n(15);var o;!function(e){e[e.Back=0]="Back",e[e.Front=1]="Front"}(o=t.QueuePosition||(t.QueuePosition={}));class s{constructor(e,t,n,r){this.next=e,this.workFunc=t,this.postResult=n,this.name=r,this.stopProcessing=!1}stop(){this.stopProcessing=!0}async start(){for(;!this.stopProcessing;)try{const e=await this.next();try{const t=await this.workFunc(e);this.postResult(e,t)}catch(t){this.postResult(e,void 0,t)}}catch(e){r.traceError(`Error while running worker[${this.name}].`,e);continue}}}class a{constructor(){this.items=[],this.results=new Map}add(e,t){const n={item:e};t===o.Front?this.items.unshift(n):this.items.push(n);const r=i.createDeferred();return this.results.set(n,r),r.promise}completed(e,t,n){const r=this.results.get(e);void 0!==r&&(this.results.delete(e),void 0!==n&&r.reject(n),r.resolve(t))}next(){return this.items.shift()}clear(){this.results.forEach((e,t,n)=>{e.reject(Error("Queue stopped processing")),n.delete(t)})}}class c{constructor(e,t=2,n="Worker"){this.workerFunc=e,this.numWorkers=t,this.name=n,this.workers=[],this.waitingWorkersUnblockQueue=[],this.queue=new a,this.stopProcessing=!1}addToQueue(e,t){if(this.stopProcessing)throw Error("Queue is stopped");const n=this.queue.add(e,t),i=this.waitingWorkersUnblockQueue.shift();if(i){const e=this.queue.next();void 0!==e?i.unblock(e):r.traceError("Work queue was empty immediately after adding item.")}return n}start(){this.stopProcessing=!1;let e=this.numWorkers;for(;e>0;)this.workers.push(new s(()=>this.nextWorkItem(),e=>this.workerFunc(e.item),(e,t,n)=>this.queue.completed(e,t,n),`${this.name} ${e}`)),e-=1;this.workers.forEach(async e=>e.start())}stop(){this.stopProcessing=!0;let e=this.workers.shift();for(;e;)e.stop(),e=this.workers.shift();this.queue.clear();let t=this.waitingWorkersUnblockQueue.shift();for(;t;)t.stop(),t=this.waitingWorkersUnblockQueue.shift()}nextWorkItem(){const e=this.queue.next();return void 0!==e?Promise.resolve(e):new Promise((e,t)=>{this.waitingWorkersUnblockQueue.push({unblock:n=>{this.stopProcessing&&t(),e(n)},stop:()=>{t()}})})}}t.createWorkerPool=function(e,t=2,n="Worker"){const r=new c(e,t,n);return r.start(),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterpreterInfo=void 0;const r=n(41),i=n(27),o=n(88),s=n(391);t.getInterpreterInfo=async function(e,t,n){const[a,c]=r.interpreterInfo(),l=o.copyPythonExecInfo(e,a),u=[l.command,...l.args],d=u.reduce((e,t)=>e?`${e} "${t}"`:`"${t.replace("\\","\\\\")}"`,""),h=await t(d,15e3);if(h.stderr)return void(n&&n.error(`Failed to parse interpreter information for ${u} stderr: ${h.stderr}`));const p=c(h.stdout);return n&&n.info("Found interpreter for "+u),function(e,t){const n=`${t.versionInfo.slice(0,3).join(".")}-${t.versionInfo[3]}`;return{arch:t.is64Bit?i.Architecture.x64:i.Architecture.x86,executable:{filename:e,sysPrefix:t.sysPrefix,mtime:-1,ctime:-1},version:{...s.parseVersion(n),sysVersion:t.sysVersion}}}(e.pythonExecutable,p)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.registerForIOC=void 0;const i=n(0),o=n(2),s=n(213),a=n(12),c=n(155),l=n(233),u=n(232),d=n(392),h=n(154),p=n(393),f=n(235),g=n(1121),m=n(1122),v=n(1123),y=n(1124),b=n(1126),S=n(1127),E=n(362),w=n(220),_=n(1128),P=n(1129),C=n(1130),T=n(1131),I=n(1132),O=n(98),R=n(1133),D=n(1134),x=n(28),k=n(395),A=new Map(Object.entries({[l.PythonEnvKind.System]:x.EnvironmentType.System,[l.PythonEnvKind.MacDefault]:x.EnvironmentType.System,[l.PythonEnvKind.WindowsStore]:x.EnvironmentType.WindowsStore,[l.PythonEnvKind.Pyenv]:x.EnvironmentType.Pyenv,[l.PythonEnvKind.Conda]:x.EnvironmentType.Conda,[l.PythonEnvKind.CondaBase]:x.EnvironmentType.Conda,[l.PythonEnvKind.VirtualEnv]:x.EnvironmentType.VirtualEnv,[l.PythonEnvKind.Pipenv]:x.EnvironmentType.Pipenv,[l.PythonEnvKind.Venv]:x.EnvironmentType.Venv}));function N(e){const{name:t,location:n,executable:r,arch:i,kind:o,searchLocation:a,version:c,distro:u}=e,{filename:d,sysPrefix:h}=r,p={sysPrefix:h,envType:x.EnvironmentType.Unknown,envName:t,envPath:n,path:d,architecture:i},f=A.get(o);if(void 0!==f&&(p.envType=f),void 0!==a&&o===l.PythonEnvKind.Pipenv&&(p.pipEnvWorkspaceFolder=a.fsPath),void 0!==c){const{release:e,sysVersion:t}=c;if(void 0===e){const e=s.getVersionString(c)+"-final";p.version=s.parseVersion(e),p.sysVersion=""}else{const{level:n,serial:r}=e,i=n===l.PythonReleaseLevel.Final?"final":`${n}${r}`,o=`${s.getVersionString(c)}-${i}`;p.version=s.parseVersion(o),p.sysVersion=t}}return void 0!==u&&""!==u.org&&(p.companyDisplayName=u.org),p}let j=class{constructor(e,t=!1){this.api=e,this.enabled=t}async getInterpreterInformation(e){if(!this.enabled)return;const t=await this.api.resolveEnv(e);return void 0!==t?N(t):void 0}async isMacDefaultPythonPath(e){if(!this.enabled)return;const t=await this.api.resolveEnv(e);return void 0!==t?t.kind===l.PythonEnvKind.MacDefault:void 0}async getInterpreterDetails(e,t){if(!this.enabled)return;const n=u.buildEnvInfo({executable:e});if(void 0!==t){const e=o.workspace.getWorkspaceFolder(t);void 0!==e&&(n.searchLocation=e.uri)}const r=await this.api.resolveEnv(n);return void 0!==r?N(r):void 0}async isCondaEnvironment(e){if(!this.enabled)return;const t=await this.api.resolveEnv(e);return void 0!==t?t.kind===l.PythonEnvKind.Conda:void 0}async getCondaEnvironment(e){if(!this.enabled)return;const t=await this.api.resolveEnv(e);return void 0!==t&&t.kind===l.PythonEnvKind.Conda?""!==t.name?{name:t.name,path:""}:{name:"",path:t.location}:void 0}async isWindowsStoreInterpreter(e){if(!this.enabled)return;const t=await this.api.resolveEnv(e);return void 0!==t?t.kind===l.PythonEnvKind.WindowsStore:void 0}get hasInterpreters(){if(!this.enabled)return Promise.resolve(void 0);return this.api.iterEnvs().next().then(e=>!e.done)}async getInterpreters(e){if(!this.enabled)return;const t={};if(void 0!==e){const n=o.workspace.getWorkspaceFolder(e);void 0!==n&&(t.searchLocations={roots:[n.uri]})}const n=this.api.iterEnvs(t);return(await d.getEnvs(n)).map(N)}};j=r([i.injectable()],j),t.registerForIOC=function(e,t,n){const r=new j(n);e.addSingletonInstance(a.IComponentAdapter,r),e.addSingleton(a.IInterpreterLocatorHelper,f.InterpreterLocatorHelper),e.addSingleton(a.IInterpreterLocatorService,p.PythonInterpreterLocatorService,a.INTERPRETER_LOCATOR_SERVICE),e.addSingleton(a.IInterpreterLocatorProgressService,g.InterpreterLocatorProgressService),e.addSingleton(a.IInterpreterLocatorService,m.CondaEnvFileService,a.CONDA_ENV_FILE_SERVICE),e.addSingleton(a.IInterpreterLocatorService,v.CondaEnvService,a.CONDA_ENV_SERVICE),e.addSingleton(a.IInterpreterLocatorService,b.CurrentPathService,a.CURRENT_PATH_SERVICE),e.addSingleton(a.IInterpreterLocatorService,S.GlobalVirtualEnvService,a.GLOBAL_VIRTUAL_ENV_SERVICE),e.addSingleton(a.IInterpreterLocatorService,R.WorkspaceVirtualEnvService,a.WORKSPACE_VIRTUAL_ENV_SERVICE),e.addSingleton(a.IInterpreterLocatorService,C.PipEnvService,a.PIPENV_SERVICE),e.addSingleton(a.IInterpreterLocatorService,I.WindowsRegistryService,a.WINDOWS_REGISTRY_SERVICE),e.addSingleton(a.IInterpreterLocatorService,P.KnownPathsService,a.KNOWN_PATH_SERVICE),e.addSingleton(a.ICondaService,y.CondaService),e.addSingleton(c.IPipEnvServiceHelper,T.PipEnvServiceHelper),e.addSingleton(c.IPythonInPathCommandProvider,b.PythonInPathCommandProvider),e.add(a.IInterpreterWatcher,D.WorkspaceVirtualEnvWatcherService,a.WORKSPACE_VIRTUAL_ENV_SERVICE),e.addSingleton(O.WindowsStoreInterpreter,O.WindowsStoreInterpreter),e.addSingleton(E.InterpreterHashProvider,E.InterpreterHashProvider),e.addSingleton(w.InterpeterHashProviderFactory,w.InterpeterHashProviderFactory),e.addSingleton(a.IVirtualEnvironmentsSearchPathProvider,S.GlobalVirtualEnvironmentsSearchPathProvider,"global"),e.addSingleton(a.IVirtualEnvironmentsSearchPathProvider,R.WorkspaceVirtualEnvironmentsSearchPathProvider,"workspace"),e.addSingleton(a.IKnownSearchPathsForInterpreters,P.KnownSearchPathsForInterpreters),e.addSingleton(a.IInterpreterWatcherBuilder,_.InterpreterWatcherBuilder),e.addSingletonInstance(k.IEnvironmentInfoService,new k.EnvironmentInfoService),h.initializeExternalDependencies(t)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterLocatorProgressService=void 0;const o=n(0),s=n(2),a=n(5),c=n(1),l=n(15),u=n(14),d=n(12),h=n(8);let p=class{constructor(e,t){this.disposables=t,this.deferreds=[],this.refreshing=new s.EventEmitter,this.refreshed=new s.EventEmitter,this.locators=[],this.locators=e.getAll(d.IInterpreterLocatorService)}get onRefreshing(){return this.refreshing.event}get onRefreshed(){return this.refreshed.event}register(){this.locators.forEach(e=>{e.onLocating(this.handleProgress,this,this.disposables)})}handleProgress(e){this.deferreds.push(l.createDeferredFrom(e)),this.notifyRefreshing(),this.checkProgress()}notifyCompleted(){this.refreshed.fire()}notifyRefreshing(){this.refreshing.fire()}checkProgress(){0!==this.deferreds.length&&(this.areAllItemsComplete()?this.notifyCompleted():Promise.all(this.deferreds.map(e=>e.promise)).catch(u.noop).then(()=>this.checkProgress()).ignoreErrors())}areAllItemsComplete(){return this.deferreds=this.deferreds.filter(e=>!e.completed),0===this.deferreds.length}};r([a.traceDecorators.verbose("Detected refreshing of Interpreters")],p.prototype,"handleProgress",null),r([a.traceDecorators.verbose("All locators have completed locating")],p.prototype,"notifyCompleted",null),r([a.traceDecorators.verbose("Notify locators are locating")],p.prototype,"notifyRefreshing",null),r([a.traceDecorators.verbose("Checking whether locactors have completed locating")],p.prototype,"areAllItemsComplete",null),p=r([o.injectable(),i(0,o.inject(h.IServiceContainer)),i(1,o.inject(c.IDisposableRegistry))],p),t.InterpreterLocatorProgressService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaEnvFileService=void 0;const o=n(0),s=n(4),a=n(5),c=n(6),l=n(12),u=n(8),d=n(28),h=n(90),p=n(156);let f=class extends h.CacheableLocatorService{constructor(e,t,n,r){super("CondaEnvFileService",r),this.helperService=e,this.condaService=t,this.fileSystem=n}dispose(){}getInterpretersImplementation(e){return this.getSuggestionsFromConda()}async getSuggestionsFromConda(){return this.condaService.condaEnvironmentsFile?this.fileSystem.fileExists(this.condaService.condaEnvironmentsFile).then(e=>e?this.getEnvironmentsFromFile(this.condaService.condaEnvironmentsFile):Promise.resolve([])):[]}async getEnvironmentsFromFile(e){try{const t=(await this.fileSystem.readFile(e)).split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0),n=(await Promise.all(t.map(e=>this.getInterpreterDetails(e)))).filter(e=>!!e).map(e=>e),r=await this.condaService.getCondaEnvironments(!0);return Array.isArray(r)&&r.length>0&&n.forEach(e=>{const t=r.find(t=>this.fileSystem.arePathsSame(t.path,e.envPath));t&&(e.envName=t.name)}),n}catch(e){return a.traceError("Python Extension (getEnvironmentsFromFile.readFile):",e),[]}}async getInterpreterDetails(e){const t=this.condaService.getInterpreterPath(e);if(!t||!await this.fileSystem.fileExists(t))return;const n=await this.helperService.getInterpreterInformation(t);if(!n)return;const r=n.envName?n.envName:s.basename(e);return this._hasInterpreters.resolve(!0),{...n,path:t,companyDisplayName:p.AnacondaCompanyName,envType:d.EnvironmentType.Conda,envPath:e,envName:r}}};f=r([o.injectable(),i(0,o.inject(l.IInterpreterHelper)),i(1,o.inject(l.ICondaService)),i(2,o.inject(c.IFileSystem)),i(3,o.inject(u.IServiceContainer))],f),t.CondaEnvFileService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaEnvService=void 0;const o=n(0),s=n(5),a=n(6),c=n(12),l=n(8),u=n(90),d=n(156);let h=class extends u.CacheableLocatorService{constructor(e,t,n,r){super("CondaEnvService",n),this.condaService=e,this.helper=t,this.fileSystem=r}dispose(){}getInterpretersImplementation(e){return this.getSuggestionsFromConda()}async getSuggestionsFromConda(){try{const e=await this.condaService.getCondaInfo();if(!e)return[];const t=await d.parseCondaInfo(e,e=>this.condaService.getInterpreterPath(e),e=>this.fileSystem.fileExists(e),e=>this.helper.getInterpreterInformation(e));this._hasInterpreters.resolve(t.length>0);const n=await this.condaService.getCondaEnvironments(!0);return Array.isArray(n)&&n.length>0&&t.forEach(e=>{const t=n.find(t=>this.fileSystem.arePathsSame(t.path,e.envPath));t&&(e.envName=t.name)}),t}catch(e){return s.traceError("Failed to get Suggestions from conda",e),[]}}};h=r([o.injectable(),i(0,o.inject(c.ICondaService)),i(1,o.inject(c.IInterpreterHelper)),i(2,o.inject(l.IServiceContainer)),i(3,o.inject(a.IFileSystem))],h),t.CondaEnvService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaService=t.CondaGetEnvironmentPrefix=t.CondaLocationsGlobWin=t.CondaLocationsGlob=void 0;const o=n(0),s=n(4),a=n(38),c=n(3),l=n(5),u=n(6),d=n(18),h=n(1),p=n(23),f=n(12),g=n(28),m=n(1125),v=n(97),y=[v("~/opt/*conda*/bin/conda"),"/opt/*conda*/bin/conda","/usr/share/*conda*/bin/conda",v("~/*conda*/bin/conda")];t.CondaLocationsGlob=`{${y.join(",")}}`;const b=["/ProgramData/[Mm]iniconda*/Scripts/conda.exe","/ProgramData/[Aa]naconda*/Scripts/conda.exe",v("~/[Mm]iniconda*/Scripts/conda.exe"),v("~/[Aa]naconda*/Scripts/conda.exe"),v("~/AppData/Local/Continuum/[Mm]iniconda*/Scripts/conda.exe"),v("~/AppData/Local/Continuum/[Aa]naconda*/Scripts/conda.exe")];t.CondaLocationsGlobWin=`{${b.join(",")}}`,t.CondaGetEnvironmentPrefix="Outputting Environment Now...";let S=class{constructor(e,t,n,r,i,o,s,a,c){this.processServiceFactory=e,this.platform=t,this.fileSystem=n,this.persistentStateFactory=r,this.configService=i,this.disposableRegistry=o,this.workspaceService=s,this.pyenvs=a,this.registryLookupForConda=c,this.addCondaPathChangedHandler()}get condaEnvironmentsFile(){const e=this.platform.isWindows?process.env.USERPROFILE:process.env.HOME||process.env.HOMEPATH;return e?s.join(e,".conda","environments.txt"):void 0}dispose(){}async getCondaFile(){this.condaFile||(this.condaFile=this.getCondaFileImpl());return await this.condaFile}async isCondaAvailable(){return"boolean"==typeof this.isAvailable?this.isAvailable:this.getCondaVersion().then(e=>this.isAvailable=void 0!==e).catch(()=>this.isAvailable=!1)}async getCondaVersion(){const e=await this.processServiceFactory.create(),t=await this.getCondaInfo().catch(()=>{});let n;if(t&&t.conda_version)n=t.conda_version;else{const t=await this.getCondaFile().then(t=>e.exec(t,["--version"],{})).then(e=>e.stdout.trim()).catch(()=>{});n=t&&t.startsWith("conda ")?t.substring("conda ".length).trim():t}if(!n)return;const r=a.parse(n,!0);return r||(l.traceWarning("Unable to parse Version of Conda, "+n),new a.SemVer("0.0.1"))}async isCondaInCurrentPath(){return(await this.processServiceFactory.create()).exec("conda",["--version"]).then(e=>e.stdout.length>0).catch(()=>!1)}async getCondaInfo(){try{const e=await this.getCondaFile(),t=await this.processServiceFactory.create(),n=await t.exec(e,["info","--json"]).then(e=>e.stdout);return JSON.parse(n)}catch(e){}}async isCondaEnvironment(e){const t=await this.pyenvs.isCondaEnvironment(e);if(void 0!==t)return t;const n=s.dirname(e),{isWindows:r}=this.platform,i=r?s.join(n,"conda-meta"):s.join(n,"..","conda-meta");return this.fileSystem.directoryExists(i)}async getCondaEnvironment(e){const t=await this.pyenvs.getCondaEnvironment(e);if(void 0!==t)return t;if(!await this.isCondaEnvironment(e))return;let n=await this.getCondaEnvironments(!1);const r=s.dirname(e),i=s.basename(r),o=-1!==["BIN","SCRIPTS"].indexOf(i.toUpperCase())?s.join(r,".."):r;let a=Array.isArray(n)?n.filter(e=>this.fileSystem.arePathsSame(e.path,o)):[];return 0===a.length&&(n=await this.getCondaEnvironments(!0),a=Array.isArray(n)?n.filter(e=>this.fileSystem.arePathsSame(e.path,o)):[]),a.length>0?{name:a[0].name,path:o}:void 0}async getCondaEnvironments(e){const t=this.persistentStateFactory.createGlobalPersistentState("CONDA_ENVIRONMENTS",void 0);if(!e&&t.value)return t.value.data;try{const e=await this.getCondaFile(),n=await this.processServiceFactory.create();let r=await n.exec(e,["env","list"]).then(e=>e.stdout);if(l.traceVerbose(`Conda Env List ${r}}`),!r){l.traceVerbose("Conda env list failure, attempting path additions.");const t=s.dirname(s.dirname(e)),i=s.join(t,"bin"),o=s.join(t,"condabin"),a=s.join(t,"library","bin"),c=process.env;c.PATH=`${i};${o};${a};${c.PATH}`,l.traceVerbose("Attempting new path for conda env list: "+c.PATH),r=await n.exec(e,["env","list"],{env:c}).then(e=>e.stdout)}const i=m.parseCondaEnvFileContents(r);return await t.updateValue({data:i}),i}catch(e){await t.updateValue({data:void 0}),l.traceError("Failed to get conda environment list from conda",e)}}getInterpreterPath(e){const t=this.platform.isWindows?"python.exe":s.join("bin","python");return s.join(e,t)}async getCondaFileFromInterpreter(e,t){const n=this.platform.isWindows?"conda.exe":"conda",r=this.platform.isWindows?"Scripts":"bin",i=e?s.dirname(e):"",o=t?i.indexOf(s.join("envs",t)):-1;if(o>0){const e=i.slice(0,o);let t=s.join(e,n);if(await this.fileSystem.fileExists(t))return t;if(t=s.join(e,r,n),await this.fileSystem.fileExists(t))return t}let a=s.join(i,n);return await this.fileSystem.fileExists(a)?a:(a=s.join(i,r,n),await this.fileSystem.fileExists(a)?a:void 0)}detectCondaEnvironment(e){return e.envType===g.EnvironmentType.Conda||(e.displayName?e.displayName:"").toUpperCase().indexOf("ANACONDA")>=0||(e.companyDisplayName?e.companyDisplayName:"").toUpperCase().indexOf("ANACONDA")>=0||(e.companyDisplayName?e.companyDisplayName:"").toUpperCase().indexOf("CONTINUUM")>=0}getLatestVersion(e){const t=e.slice();if(t.sort((e,t)=>e.version&&t.version?a.compare(e.version.raw,t.version.raw):0),t.length>0)return t[t.length-1]}addCondaPathChangedHandler(){const e=this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this));this.disposableRegistry.push(e)}async onDidChangeConfiguration(e){-1!==(this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders.map(e=>e.uri):[void 0]).findIndex(t=>e.affectsConfiguration("python.condaPath",t))&&(this.condaFile=void 0)}async getCondaFileImpl(){const e=this.configService.getSettings().condaPath;if(e&&""!==e)return e;if(await this.isCondaInCurrentPath())return"conda";if(this.platform.isWindows&&this.registryLookupForConda){const e=(await this.registryLookupForConda.getInterpreters()).filter(this.detectCondaEnvironment),t=this.getLatestVersion(e);if(t){const e=await this.getCondaFileFromInterpreter(t.path,t.envName);if(e)return e}}return this.getCondaFileFromKnownLocations()}async getCondaFileFromKnownLocations(){const e=this.platform.isWindows?t.CondaLocationsGlobWin:t.CondaLocationsGlob,n=(await this.fileSystem.search(e).catch(e=>(l.traceWarning("Default conda location search failed.","Searching for default install locations for conda results in error: "+e),[]))).filter(e=>e.length>0);return 0===n.length?"conda":n[0]}};r([p.cache(12e4)],S.prototype,"getCondaVersion",null),r([p.cache(6e4)],S.prototype,"getCondaInfo",null),r([l.traceDecorators.verbose("Get Conda environments")],S.prototype,"getCondaEnvironments",null),r([l.traceDecorators.verbose("Get Conda File from interpreter"),p.cache(12e4)],S.prototype,"getCondaFileFromInterpreter",null),S=r([o.injectable(),i(0,o.inject(d.IProcessServiceFactory)),i(1,o.inject(u.IPlatformService)),i(2,o.inject(u.IFileSystem)),i(3,o.inject(h.IPersistentStateFactory)),i(4,o.inject(h.IConfigurationService)),i(5,o.inject(h.IDisposableRegistry)),i(6,o.inject(c.IWorkspaceService)),i(7,o.inject(f.IComponentAdapter)),i(8,o.inject(f.IInterpreterLocatorService)),i(8,o.named(f.WINDOWS_REGISTRY_SERVICE)),i(8,o.optional())],S),t.CondaService=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCondaEnvFileContents=t.getDisplayName=void 0,n(11);const r=n(156);t.getDisplayName=function(e={}){const t=e["sys.version"];if(!t)return r.AnacondaDisplayName;const n=t.split("|",2);if(2===n.length){const e=n[1].trim();return function(e){const t=e.toLowerCase();return r.AnacondaIdentifiers.some(e=>-1!==t.indexOf(e.toLowerCase()))}(e)?e:`${e} : ${r.AnacondaDisplayName}`}return r.AnacondaDisplayName},t.parseCondaEnvFileContents=function(e){const t=e.splitLines({trim:!1}),n=[];return t.forEach(e=>{const t=function(e){if(0===e.length||e.startsWith("#"))return;let t="",n=e,r=e.indexOf("     ");-1===r&&(r=e.indexOf("  *  "));r>0&&(t=e.substring(0,r).trimRight(),n=e.substring(r));n=n.trimLeft();const i=n.startsWith("*");return n=(i?n.substring(1):n).trimLeft(),{name:t,path:n,isActive:i}}(e);t&&n.push(t)}),n.length>0?n:void 0}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonInPathCommandProvider=t.CurrentPathService=void 0;const o=n(0),s=n(5),a=n(6),c=n(59),l=n(18),u=n(1),d=n(27),h=n(12),p=n(155),f=n(8),g=n(28),m=n(90);let v=class extends m.CacheableLocatorService{constructor(e,t,n,r){super("CurrentPathService",r),this.helper=e,this.processServiceFactory=t,this.pythonCommandProvider=n,this.fs=r.get(a.IFileSystem)}dispose(){}getInterpretersImplementation(e){return this.suggestionsFromKnownPaths(e)}async suggestionsFromKnownPaths(e){const t=this.serviceContainer.get(u.IConfigurationService).getSettings(e),n=[...this.pythonCommandProvider.getCommands(),{command:t.pythonPath}];return Promise.all(n.map(e=>this.getInterpreter(e))).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(e=>this.getInterpreterDetails(e)))).then(e=>e.filter(e=>!!e).map(e=>e))}async getInterpreterDetails(e){return this.helper.getInterpreterInformation(e).then(t=>{if(t)return this._hasInterpreters.resolve(!0),{...t,path:e,envType:t.envType?t.envType:g.EnvironmentType.Unknown}})}async getInterpreter(e){try{const t=await this.processServiceFactory.create(),n=Array.isArray(e.args)?e.args:[],[r,i]=c.getExecutable();return t.exec(e.command,n.concat(r),{}).then(e=>i(e.stdout)).then(async t=>t.length>0&&await this.fs.fileExists(t)?t:(s.traceError(`Detection of Python Interpreter for Command ${e.command} and args ${n.join(" ")} failed as file ${t} does not exist`),"")).catch(t=>(s.traceInfo(`Detection of Python Interpreter for Command ${e.command} and args ${n.join(" ")} failed`),""))}catch(t){return s.traceError(`Detection of Python Interpreter for Command ${e.command} failed`,t),""}}};v=r([o.injectable(),i(0,o.inject(h.IInterpreterHelper)),i(1,o.inject(l.IProcessServiceFactory)),i(2,o.inject(p.IPythonInPathCommandProvider)),i(3,o.inject(f.IServiceContainer))],v),t.CurrentPathService=v;let y=class{constructor(e){this.platform=e}getCommands(){const e=["python3.7","python3.6","python3","python2","python"].map(e=>({command:e}));if(this.platform.osType!==d.OSType.Windows)return e;return e.concat(["3.7","3.6","3","2"].map(e=>({command:"py",args:["-"+e]})))}};y=r([o.injectable(),i(0,o.inject(a.IPlatformService))],y),t.PythonInPathCommandProvider=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalVirtualEnvironmentsSearchPathProvider=t.GlobalVirtualEnvService=void 0;const o=n(0),s=n(20),a=n(4),c=n(1),l=n(12),u=n(150),d=n(8),h=n(396),p=n(97);let f=class extends h.BaseVirtualEnvService{constructor(e,t){super(e,t,"VirtualEnvService")}};f=r([o.injectable(),i(0,o.inject(l.IVirtualEnvironmentsSearchPathProvider)),i(0,o.named("global")),i(1,o.inject(d.IServiceContainer))],f),t.GlobalVirtualEnvService=f;let g=class{constructor(e){this.config=e.get(c.IConfigurationService),this.virtualEnvMgr=e.get(u.IVirtualEnvironmentManager),this.currentProcess=e.get(c.ICurrentProcess)}async getSearchPaths(e){const t=s.homedir(),n=["envs",".pyenv",".direnv",".virtualenvs",...this.config.getSettings(e).venvFolders],r=[...new Set(n.map(e=>a.join(t,e)))],i=this.currentProcess.env.WORKON_HOME;i&&r.push(p(i));const o=await this.virtualEnvMgr.getPyEnvRoot(e);return o&&(r.push(o),r.push(a.join(o,"versions"))),r}};g=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],g),t.GlobalVirtualEnvironmentsSearchPathProvider=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterWatcherBuilder=void 0;const o=n(0),s=n(3),a=n(5),c=n(15),l=n(12),u=n(8);let d=class{constructor(e,t){this.workspaceService=e,this.serviceContainer=t,this.watchersByResource=new Map}async getWorkspaceVirtualEnvInterpreterWatcher(e){const t=this.getResourceKey(e);if(!this.watchersByResource.has(t)){const n=c.createDeferred();this.watchersByResource.set(t,n.promise);const r=this.serviceContainer.get(l.IInterpreterWatcher,l.WORKSPACE_VIRTUAL_ENV_SERVICE);await r.register(e),n.resolve(r)}return this.watchersByResource.get(t)}getResourceKey(e){const t=e?this.workspaceService.getWorkspaceFolder(e):void 0;return t?t.uri.fsPath:""}};r([a.traceDecorators.verbose("Build the workspace interpreter watcher")],d.prototype,"getWorkspaceVirtualEnvInterpreterWatcher",null),d=r([o.injectable(),i(0,o.inject(s.IWorkspaceService)),i(1,o.inject(u.IServiceContainer))],d),t.InterpreterWatcherBuilder=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.KnownSearchPathsForInterpreters=t.KnownPathsService=void 0;const o=n(0),s=n(4),a=n(6),c=n(1),l=n(12),u=n(8),d=n(28),h=n(235),p=n(90),f=n(208);let g=class extends p.CacheableLocatorService{constructor(e,t,n){super("KnownPathsService",n),this.knownSearchPaths=e,this.helper=t}dispose(){}getInterpretersImplementation(e){return this.suggestionsFromKnownPaths()}suggestionsFromKnownPaths(){const e=this.knownSearchPaths.getSearchPaths().map(e=>this.getInterpretersInDirectory(e));return Promise.all(e).then(e=>f(e)).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(e=>this.getInterpreterDetails(e)))).then(e=>e.filter(e=>!!e).map(e=>e))}async getInterpreterDetails(e){const t=await this.helper.getInterpreterInformation(e);if(t)return this._hasInterpreters.resolve(!0),{...t,path:e,envType:d.EnvironmentType.Unknown}}getInterpretersInDirectory(e){return this.serviceContainer.get(a.IFileSystem).directoryExists(e).then(t=>t?h.lookForInterpretersInDirectory(e):Promise.resolve([]))}};g=r([o.injectable(),i(0,o.inject(l.IKnownSearchPathsForInterpreters)),i(1,o.inject(l.IInterpreterHelper)),i(2,o.inject(u.IServiceContainer))],g),t.KnownPathsService=g;let m=class{constructor(e){this.serviceContainer=e}getSearchPaths(){const e=this.serviceContainer.get(c.ICurrentProcess),t=this.serviceContainer.get(a.IPlatformService),n=this.serviceContainer.get(c.IPathUtils),r=e.env[t.pathVariableName].split(n.delimiter).map(e=>e.trim()).filter(e=>e.length>0);return t.isWindows||(["/usr/local/bin","/usr/bin","/bin","/usr/sbin","/sbin","/usr/local/sbin"].forEach(e=>{r.push(e),r.push(s.join(n.home,e))}),process.env.HOME&&(r.push(s.join(n.home,"anaconda","bin")),r.push(s.join(n.home,"python","bin")))),r}};m=r([o.injectable(),i(0,o.inject(u.IServiceContainer))],m),t.KnownSearchPathsForInterpreters=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvService=void 0;const o=n(0),s=n(4),a=n(2),c=n(3),l=n(5),u=n(6),d=n(18),h=n(1),p=n(30),f=n(12),g=n(155),m=n(8),v=n(7),y=n(9),b=n(28),S=n(90);let E=class extends S.CacheableLocatorService{constructor(e){super("PipEnvService",e,!0),this.helper=this.serviceContainer.get(f.IInterpreterHelper),this.processServiceFactory=this.serviceContainer.get(d.IProcessServiceFactory),this.workspace=this.serviceContainer.get(c.IWorkspaceService),this.fs=this.serviceContainer.get(u.IFileSystem),this.configService=this.serviceContainer.get(h.IConfigurationService),this.pipEnvServiceHelper=this.serviceContainer.get(g.IPipEnvServiceHelper)}dispose(){}async isRelatedPipEnvironment(e,t){if(!this.didTriggerInterpreterSuggestions)return!1;if(-1===t.indexOf(`${s.sep}${s.basename(e)}-`))return!1;return!!await this.getInterpreterPathFromPipenv(e,!0)}get executable(){return this.didTriggerInterpreterSuggestions?this.configService.getSettings().pipenvPath:""}async getInterpreters(e,t){if(!this.didTriggerInterpreterSuggestions)return[];const n=new p.StopWatch,r=n.elapsedTime,i=await super.getInterpreters(e,t),o=n.elapsedTime-r;return v.sendTelemetryEvent(y.EventName.PIPENV_INTERPRETER_DISCOVERY,o),i}getInterpretersImplementation(e){if(!this.didTriggerInterpreterSuggestions)return Promise.resolve([]);const t=this.getPipenvWorkingDirectory(e);return t?this.getInterpreterFromPipenv(t).then(e=>e?[e]:[]).catch(()=>[]):Promise.resolve([])}async getInterpreterFromPipenv(e){const t=await this.getInterpreterPathFromPipenv(e);if(!t)return;const n=await this.helper.getInterpreterInformation(t);return n?(this._hasInterpreters.resolve(!0),await this.pipEnvServiceHelper.trackWorkspaceFolder(t,a.Uri.file(e)),{...n,path:t,envType:b.EnvironmentType.Pipenv,pipEnvWorkspaceFolder:e}):void 0}getPipenvWorkingDirectory(e){const t=e?this.workspace.getWorkspaceFolder(e):void 0;return t?t.uri.fsPath:this.workspace.rootPath}async getInterpreterPathFromPipenv(e,t=!1){if(await this.checkIfPipFileExists(e))try{if(void 0===await this.invokePipenv("--version",e)){return void this.serviceContainer.get(c.IApplicationShell).showWarningMessage(`Workspace contains Pipfile but '${this.executable}' was not found. Make sure '${this.executable}' is on the PATH.`)}if(void 0===await this.invokePipenv("--venv",e)){return void this.serviceContainer.get(c.IApplicationShell).showWarningMessage("Workspace contains Pipfile but the associated virtual environment has not been setup. Setup the virtual environment manually if needed.")}const t=await this.invokePipenv("--py",e);return t&&await this.fs.fileExists(t)?t:void 0}catch(e){if(l.traceError("PipEnv identification failed",e),t)return}}async checkIfPipFileExists(e){const t=this.serviceContainer.get(h.ICurrentProcess).env.PIPENV_PIPFILE;return!("string"!=typeof t||!await this.fs.fileExists(s.join(e,t)))||!!await this.fs.fileExists(s.join(e,"Pipfile"))}async invokePipenv(e,t){try{const n=await this.processServiceFactory.create(a.Uri.file(t)),r=this.executable,i=await n.exec(r,[e],{cwd:t});if(i){const e=i.stdout?i.stdout.trim():"",t=i.stderr?i.stderr.trim():"";if(t.length>0&&0===e.length)throw new Error(t);return e}}catch(e){const t=this.serviceContainer.get(u.IPlatformService),n=this.serviceContainer.get(h.ICurrentProcess),r={LC_ALL:n.env.LC_ALL,LANG:n.env.LANG};r[t.pathVariableName]=n.env[t.pathVariableName],l.traceWarning("Error in invoking PipEnv",e),l.traceWarning("Relevant Environment Variables "+JSON.stringify(r,void 0,4))}}};E=r([o.injectable(),i(0,o.inject(m.IServiceContainer))],E),t.PipEnvService=E},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvServiceHelper=void 0;const o=n(0),s=n(4),a=n(2),c=n(6),l=n(1);let u=class{constructor(e,t){this.statefactory=e,this.fs=t,this.initialized=!1,this.state=this.statefactory.createGlobalPersistentState("PipEnvInformation",[])}async getPipEnvInfo(e){await this.initializeStateStore();const t=this.state.value.find(t=>this.fs.arePathsSame(t.pythonPath,e));return t?{workspaceFolder:a.Uri.file(t.workspaceFolder),envName:t.envName}:void 0}async trackWorkspaceFolder(e,t){await this.initializeStateStore();const n=[...this.state.value].filter(t=>!this.fs.arePathsSame(t.pythonPath,e)),r=s.basename(t.fsPath);n.push({pythonPath:e,workspaceFolder:t.fsPath,envName:r}),await this.state.updateValue(n)}async initializeStateStore(){if(this.initialized)return;const e=(await Promise.all(this.state.value.map(async e=>await this.fs.fileExists(e.pythonPath)?e:void 0))).filter(e=>!!e);await this.state.updateValue(e),this.initialized=!0}};u=r([o.injectable(),i(0,o.inject(l.IPersistentStateFactory)),i(1,o.inject(c.IFileSystem))],u),t.PipEnvServiceHelper=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsRegistryService=void 0;const o=n(0),s=n(4),a=n(5),c=n(6),l=n(1),u=n(27),d=n(12),h=n(8),p=n(28),f=n(145),g=n(90),m=n(156),v=n(98),y=n(208),b=["PYLAUNCHER"];let S=class extends g.CacheableLocatorService{constructor(e,t,n,r){super("WindowsRegistryService",n),this.registry=e,this.platform=t,this.windowsStoreInterpreter=r,this.pathUtils=n.get(l.IPathUtils),this.fs=n.get(c.IFileSystem)}dispose(){}async getInterpretersImplementation(e){return this.platform.isWindows?this.getInterpretersFromRegistry().catch(e=>(a.traceError("Fetching interpreters from registry failed with error",e),[])):[]}async getInterpretersFromRegistry(){const e=this.platform.is64bit?void 0:u.Architecture.x86,t=[this.getCompanies(c.RegistryHive.HKCU,e),this.getCompanies(c.RegistryHive.HKLM,u.Architecture.x86)];this.platform.is64bit&&t.push(this.getCompanies(c.RegistryHive.HKLM,u.Architecture.x64));const n=await Promise.all(t),r=await Promise.all(y(n).filter(e=>null!=e).map(e=>this.getInterpretersForCompany(e.companyKey,e.hive,e.arch)));return y(r).filter(e=>null!=e).map(e=>e).reduce((e,t)=>(-1===e.findIndex(e=>e.path.toUpperCase()===t.path.toUpperCase())&&e.push(t),e),[])}async getCompanies(e,t){return this.registry.getKeys("\\Software\\Python",e,t).then(n=>n.filter(e=>-1===b.indexOf(this.pathUtils.basename(e).toUpperCase())).map(n=>({companyKey:n,hive:e,arch:t})))}async getInterpretersForCompany(e,t,n){const r=await this.registry.getKeys(e,t,n);return Promise.all(r.map(r=>this.getInreterpreterDetailsForCompany(r,e,t,n)))}getInreterpreterDetailsForCompany(e,t,n,r){const i=e+"\\InstallPath";return this.registry.getValue(i,n,r).then(o=>o?Promise.all([Promise.resolve(o),this.registry.getValue(i,n,r,"ExecutablePath"),this.registry.getValue(e,n,r,"SysVersion"),this.getCompanyDisplayName(t,n,r)]).then(([e,t,n,r])=>({installPath:e,executablePath:t,version:n,companyDisplayName:r=-1===m.AnacondaCompanyNames.indexOf(r)?r:m.AnacondaCompanyName})):Promise.resolve(null)).then(async t=>{if(!t)return;const n=t.executablePath&&t.executablePath.length>0?t.executablePath:s.join(t.installPath,"python.exe");if(this.windowsStoreInterpreter.isHiddenInterpreter(n))return;const r=this.serviceContainer.get(d.IInterpreterHelper),i=await r.getInterpreterInformation(n);if(!i)return;const o=t.version?this.pathUtils.basename(t.version):this.pathUtils.basename(e);return this._hasInterpreters.resolve(!0),{...i,path:n,version:i.version||f.parsePythonVersion(o),companyDisplayName:t.companyDisplayName,envType:await this.windowsStoreInterpreter.isWindowsStoreInterpreter(n)?p.EnvironmentType.WindowsStore:p.EnvironmentType.Unknown}}).then(e=>e?this.fs.fileExists(e.path).catch(()=>!1).then(t=>t?e:null):null).catch(i=>(a.traceError(`Failed to retrieve interpreter details for company ${t},tag: ${e}, hive: ${n}, arch: ${r}`,i),null))}async getCompanyDisplayName(e,t,n){const r=await this.registry.getValue(e,t,n,"DisplayName");if(r&&r.length>0)return r;const i=this.pathUtils.basename(e);return"PYTHONCORE"===i.toUpperCase()?"Python Software Foundation":i}};S=r([o.injectable(),i(0,o.inject(c.IRegistry)),i(1,o.inject(c.IPlatformService)),i(2,o.inject(h.IServiceContainer)),i(3,o.inject(v.WindowsStoreInterpreter))],S),t.WindowsRegistryService=S},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceVirtualEnvironmentsSearchPathProvider=t.WorkspaceVirtualEnvService=void 0;const o=n(0),s=n(4),a=n(3),c=n(1),l=n(12),u=n(8),d=n(396),h=n(97);let p=class extends d.BaseVirtualEnvService{constructor(e,t,n){super(e,t,"WorkspaceVirtualEnvService",!0),this.builder=n}async getInterpreterWatchers(e){return[await this.builder.getWorkspaceVirtualEnvInterpreterWatcher(e)]}};p=r([o.injectable(),i(0,o.inject(l.IVirtualEnvironmentsSearchPathProvider)),i(0,o.named("workspace")),i(1,o.inject(u.IServiceContainer)),i(2,o.inject(l.IInterpreterWatcherBuilder))],p),t.WorkspaceVirtualEnvService=p;let f=class{constructor(e){this.serviceContainer=e}async getSearchPaths(e){const t=this.serviceContainer.get(c.IConfigurationService),n=[],{venvPath:r}=t.getSettings(e);r&&n.push(h(r));const i=this.serviceContainer.get(a.IWorkspaceService);if(Array.isArray(i.workspaceFolders)&&i.workspaceFolders.length>0){let t;if(e&&i.workspaceFolders.length>1){const n=i.getWorkspaceFolder(e);n&&(t=n.uri.fsPath)}else t=i.workspaceFolders[0].uri.fsPath;t&&(n.push(t),n.push(s.join(t,".direnv")))}return n}};f=r([o.injectable(),i(0,o.inject(u.IServiceContainer))],f),t.WorkspaceVirtualEnvironmentsSearchPathProvider=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceVirtualEnvWatcherService=void 0;const o=n(0),s=n(4),a=n(2),c=n(3);n(11);const l=n(5),u=n(6),d=n(18),h=n(1);let p=class{constructor(e,t,n,r){this.disposableRegistry=e,this.workspaceService=t,this.platformService=n,this.pythonExecFactory=r,this.timers=new Map,this.fsWatchers=[],this.didCreate=new a.EventEmitter,e.push(this)}get onDidCreate(){return this.didCreate.event}dispose(){this.clearTimers()}async register(e){if(this.fsWatchers.length>0)return;this.resource=e;const t=e?this.workspaceService.getWorkspaceFolder(e):void 0,n=this.platformService.isWindows?"python.exe":"python",r=[s.join("*",n),s.join("*","*",n)];for(const e of r){const n=t?new a.RelativePattern(t.uri.fsPath,e):e;l.traceVerbose("Create file systemwatcher with pattern "+e);const r=this.workspaceService.createFileSystemWatcher(n);r.onDidCreate(e=>this.createHandler(e),this,this.disposableRegistry),this.disposableRegistry.push(r),this.fsWatchers.push(r)}}async createHandler(e){this.didCreate.fire(this.resource),this.notifyCreationWhenReady(e.fsPath).ignoreErrors()}async notifyCreationWhenReady(e){const t=this.timers.has(e)?this.timers.get(e).counter+1:0;if(await this.isValidExecutable(e))return t>0&&this.didCreate.fire(this.resource),this.timers.delete(e);if(t>30)return this.didCreate.fire(this.resource),void this.timers.delete(e);const n=setTimeout(()=>this.notifyCreationWhenReady(e).ignoreErrors(),2e3);this.timers.set(e,{timer:n,counter:t})}clearTimers(){this.timers.forEach(e=>clearTimeout(e.timer)),this.timers.clear()}async isValidExecutable(e){const t=await this.pythonExecFactory.create({pythonPath:e});return void 0!==await t.getInterpreterInformation().catch(()=>{})}};r([l.traceDecorators.verbose("Register Interpreter Watcher")],p.prototype,"register",null),r([l.traceDecorators.verbose("Interpreter Watcher change handler")],p.prototype,"createHandler",null),p=r([o.injectable(),i(0,o.inject(h.IDisposableRegistry)),i(1,o.inject(c.IWorkspaceService)),i(2,o.inject(u.IPlatformService)),i(3,o.inject(d.IPythonExecutionFactory))],p),t.WorkspaceVirtualEnvWatcherService=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasUserDefinedPythonPath=t.sendErrorTelemetry=t.sendStartupTelemetry=void 0;const r=n(3),i=n(10),o=n(24),s=n(5),a=n(25),c=n(1),l=n(40),u=n(12),d=n(7),h=n(9);function p(e,t){const n=t.get(c.IExperimentsManager),i=t.get(r.IWorkspaceService),s=t.get(c.IInterpreterPathService);let a;return a=n.inExperiment(o.DeprecatePythonPath.experiment)?s.inspect(e):i.getConfiguration("python",e).inspect("pythonPath"),n.sendTelemetryIfInExperiment(o.DeprecatePythonPath.control),!!(a.workspaceFolderValue&&"python"!==a.workspaceFolderValue||a.workspaceValue&&"python"!==a.workspaceValue||a.globalValue&&"python"!==a.globalValue)}function f(e,t){const n=t.get(l.IInterpreterAutoSelectionRule,l.AutoSelectionRule.workspaceVirtualEnvs).getPreviouslyAutoSelectedInterpreter(e);return n?n.path:void 0}async function g(e){const t=e.get(a.ITerminalHelper).identifyTerminalShell(),n=e.get(u.ICondaService),i=e.get(u.IInterpreterService),o=e.get(r.IWorkspaceService),s=e.get(c.IConfigurationService),d=o.hasWorkspaceFolders?o.workspaceFolders[0].uri:void 0,h=s.getSettings(d),[g,m,v]=await Promise.all([n.getCondaVersion().then(e=>e?e.raw:"").catch(()=>""),i.getActiveInterpreter().catch(()=>{}),i.getInterpreters(d).catch(()=>[])]),y=o.hasWorkspaceFolders?o.workspaceFolders.length:0,b=m&&m.version?m.version.raw:void 0,S=m?m.envType:void 0,E=p(d,e),w=f(d,e),_=function(e,t){const n=t.get(l.IInterpreterAutoSelectionService).getAutoSelectedInterpreter(void 0);return!!n&&e===n.path}(h.pythonPath,e),P=!!w&&h.pythonPath===f(d,e);return{condaVersion:g,terminal:t,pythonVersion:b,interpreterType:S,workspaceFolderCount:y,hasPython3:v.filter(e=>!(!e||!e.version)&&3===e.version.major).length>0,usingUserDefinedInterpreter:E,usingAutoSelectedWorkspaceInterpreter:P,usingGlobalInterpreter:_}}t.sendStartupTelemetry=async function(e,t,n,r){if(!i.isTestExecution())try{await e,t.totalActivateTime=n.elapsedTime;const i=await g(r);d.sendTelemetryEvent(h.EventName.EDITOR_LOAD,t,i)}catch(e){s.traceError("sendStartupTelemetry() failed.",e)}},t.sendErrorTelemetry=async function(e,t,n){try{let r={};if(n)try{r=await g(n)}catch(e){s.traceError("getActivationTelemetryProps() failed.",e)}d.sendTelemetryEvent(h.EventName.EDITOR_LOAD,t,r,e)}catch(e){s.traceError("sendErrorTelemetry() failed.",e)}},t.hasUserDefinedPythonPath=p},function(e,t,n){"use strict";n.r(t);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){return"function"==typeof e}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function c(e){setTimeout((function(){throw e}),0)}var l={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;c(e)},complete:function(){}},u=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function d(e){return null!==e&&"object"==typeof e}var h=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),p=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(o(r))try{r.call(this)}catch(e){t=e instanceof h?f(e.errors):[e]}if(u(i)){s=-1;for(var a=i.length;++s<a;){var c=i[s];if(d(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof h?t=t.concat(f(e.errors)):t.push(e)}}}if(t)throw new h(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function f(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var g=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),m=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=l;break;case 1:if(!n){o.destination=l;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new v(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new v(o,n,r,i)}return o}return i(t,e),t.prototype[g]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(p),v=function(e){function t(t,n,r,i){var s,a=e.call(this)||this;a._parentSubscriber=t;var c=a;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==l&&(o((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=r,a._complete=i,a}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):c(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;c(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;c(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(c(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(m);function y(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof m?r:null}return!0}var b=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function S(){}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w(e)}function w(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:S}var _=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof m)return e;if(e[g])return e[g]()}return e||t||n?new m(e,t,n):new m(l)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),y(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=P(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[b]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:w(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=P(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function P(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var C=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),T=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(p),I=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(m),O=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[g]=function(){return new I(this)},t.prototype.lift=function(e){var t=new R(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new C;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new C;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new C;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new C;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new C;return this.hasError?(e.error(this.thrownError),p.EMPTY):this.isStopped?(e.complete(),p.EMPTY):(this.observers.push(e),new T(this,e))},t.prototype.asObservable=function(){var e=new _;return e.source=this,e},t.create=function(e,t){return new R(e,t)},t}(_),R=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):p.EMPTY},t}(O);var D=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new x(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),x=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(m),k=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new p).add(this.source.subscribe(new A(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new D(e));var e},t}(_),A=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(I);var N=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return i(t,e),t.prototype._subscribe=function(e){var t=new p,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new j(n)),t.add(r.subscribe(e)),t},t}(_),j=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(p),F=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(O),M=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(p)),L=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(M),U=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),W=function(e){function t(n,r){void 0===r&&(r=U.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(U),B=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(W))(L),V=new _((function(e){return e.complete()}));function H(e){return e?function(e){return new _((function(t){return e.schedule((function(){return t.complete()}))}))}(e):V}function q(e){return e&&"function"==typeof e.schedule}var G,$=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function K(e,t){return new _((function(n){var r=new p,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function z(e,t){return t?K(e,t):new _($(e))}function Y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return q(n)?(e.pop(),K(e,n)):z(e)}function J(e,t){return new _(t?function(n){return t.schedule(X,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function X(e){var t=e.error;e.subscriber.error(t)}G||(G={});var Q=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Y(this.value);case"E":return J(this.error);case"C":return H()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var Z=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ee(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Q.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Q.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Q.createComplete()),this.unsubscribe()},t}(m),ee=function(){return function(e,t){this.notification=e,this.destination=t}}(),te=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new ne(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new C;if(this.isStopped||this.hasError?t=p.EMPTY:(this.observers.push(e),t=new T(this,e)),i&&e.add(e=new Z(e,i)),n)for(var s=0;s<o&&!e.closed;s++)e.next(r[s]);else for(s=0;s<o&&!e.closed;s++)e.next(r[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||B).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(O),ne=function(){return function(e,t){this.time=e,this.value=t}}(),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),p.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),p.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(O),ie=1,oe=function(){return Promise.resolve()}(),se={};function ae(e){return e in se&&(delete se[e],!0)}var ce=function(e){var t=ie++;return se[t]=!0,oe.then((function(){return ae(t)&&e()})),t},le=function(e){ae(e)},ue=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=ce(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(le(n),t.scheduled=void 0)},t}(M),de=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(W))(ue),he=new W(M),pe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(M),fe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(W))(pe),ge=function(e){function t(t,n){void 0===t&&(t=me),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(W),me=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(M);function ve(e){return e}function ye(e){return!!e&&(e instanceof _||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var be=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Se=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ee=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function we(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new _e(e,t))}}var _e=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Pe(e,this.project,this.thisArg))},e}(),Pe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(m);function Ce(e,t,n){if(t){if(!q(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ce(e,n).apply(void 0,r).pipe(we((function(e){return u(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:n};return new _((function(r){if(n){var a={args:t,subscriber:r,params:s};return n.schedule(Te,0,a)}if(!i){i=new re;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){y(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function Te(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new re;try{o.apply(s,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(a.schedule(Ie,0,{value:r,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(r))}function Ie(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Oe(e,t,n){if(t){if(!q(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Oe(e,n).apply(void 0,r).pipe(we((function(e){return u(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new _((function(r){var o=i.context,s=i.subject;if(n)return n.schedule(Re,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new re;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?s.error(n):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){y(s)?s.error(e):console.warn(e)}}return s.subscribe(r)}))}}function Re(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new re;try{o.apply(i,s.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(a.schedule(xe,0,{err:r,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(De,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(xe,0,{err:e,subject:c}))}}this.add(c.subscribe(r))}function De(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function xe(e){var t=e.err;e.subject.error(t)}var ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(m),Ae=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(m);function Ne(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var je=Ne(),Fe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Me(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var Le=function(e){if(e&&"function"==typeof e[b])return r=e,function(e){var t=r[b]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Fe(e))return $(e);if(Me(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,c),e};if(e&&"function"==typeof e[je])return t=e,function(e){for(var n=t[je]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=d(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ue(e,t,n,r,i){if(void 0===i&&(i=new Ae(e,n,r)),!i.closed)return t instanceof _?t.subscribe(i):Le(t)(i)}var We={};function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return q(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&u(e[0])&&(e=e[0]),z(e,r).lift(new Ve(n))}var Ve=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new He(e,this.resultSelector))},e}(),He=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(t,e),t.prototype._next=function(e){this.values.push(We),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Ue(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===We?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(ke);function qe(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[b]}(e))return function(e,t){return new _((function(n){var r=new p;return r.add(t.schedule((function(){var i=e[b]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Me(e))return function(e,t){return new _((function(n){var r=new p;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Fe(e))return K(e,t);if(function(e){return e&&"function"==typeof e[je]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new _((function(n){var r,i=new p;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[je](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Ge(e,t){return t?qe(e,t):e instanceof _?e:new _(Le(e))}var $e=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Ke(e,this.project,this.concurrent))},e}(),Ke=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new Ae(this,t,n),i=this.destination;i.add(r);var o=Ue(this,e,void 0,void 0,r);o!==r&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(ke);function ze(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),function e(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(e((function(e,r){return Ge(t(e,r)).pipe(we((function(t,i){return n(e,t,r,i)})))}),r))}:("number"==typeof n&&(r=n),function(e){return e.lift(new $e(t,r))})}(ve,e)}function Ye(){return ze(1)}function Je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ye()(Y.apply(void 0,e))}function Xe(e){return new _((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Ge(n):H()).subscribe(t)}))}function Qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(u(n))return Ze(n,null);if(d(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Ze(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return Ze(e=1===e.length&&u(e[0])?e[0]:e,null).pipe(we((function(e){return i.apply(void 0,e)})))}return Ze(e,null)}function Ze(e,t){return new _((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,s=0,a=function(a){var c=Ge(e[a]),l=!1;n.add(c.subscribe({next:function(e){l||(l=!0,s++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&l||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)a(c);else n.complete()}))}function et(e,t,n,r){return o(n)&&(r=n,n=void 0),r?et(e,t,n).pipe(we((function(e){return u(e)?r.apply(void 0,e):r(e)}))):new _((function(r){!function e(t,n,r,i,o){var s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var a=t;t.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var c=t;t.on(n,r),s=function(){return c.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),s=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,d=t.length;u<d;u++)e(t[u],n,r,i,o)}i.add(s)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function tt(e,t,n){return n?tt(e,t).pipe(we((function(e){return u(e)?n.apply(void 0,e):n(e)}))):new _((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(o(t))return function(){return t(i,r)}}))}function nt(e,t,n,r,i){var o,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,n=a.iterate,o=a.resultSelector||ve,i=a.scheduler}else void 0===r||q(r)?(s=e,o=ve,i=r):(s=e,o=r);return new _((function(e){var r=s;if(i)return i.schedule(rt,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:r});for(;;){if(t){var a=void 0;try{a=t(r)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(r)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function rt(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function it(e,t,n){return void 0===t&&(t=V),void 0===n&&(n=V),Xe((function(){return e()?t:n}))}function ot(e){return!u(e)&&e-parseFloat(e)+1>=0}function st(e,t){return void 0===e&&(e=0),void 0===t&&(t=he),(!ot(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=he),new _((function(n){return n.add(t.schedule(at,e,{subscriber:n,counter:0,period:e})),n}))}function at(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return q(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof _?e[0]:ze(n)(z(e,r))}var lt=new _(S);function ut(){return lt}function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return V;var n=e[0],r=e.slice(1);return 1===e.length&&u(n)?dt.apply(void 0,n):new _((function(e){var t=function(){return e.add(dt.apply(void 0,r).subscribe(e))};return Ge(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function ht(e,t){return new _(t?function(n){var r=Object.keys(e),i=new p;return i.add(t.schedule(pt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function pt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var s=t[n];r.next([s,o[s]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function ft(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function gt(e,t){return function(n){return n.lift(new mt(e,t))}}var mt=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new vt(e,this.predicate,this.thisArg))},e}(),vt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(m);function yt(e,t,n){return[gt(t,n)(new _(Le(e))),gt(ft(t,n))(new _(Le(e)))]}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!u(e[0]))return e[0];e=e[0]}return z(e,void 0).lift(new St)}var St=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Et(e))},e}(),Et=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Ue(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(ke);function wt(e,t,n){return void 0===e&&(e=0),new _((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(_t,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))}function _t(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Pt(e,t,n){void 0===e&&(e=0);var r=-1;return ot(t)?r=Number(t)<1?1:Number(t):q(t)&&(n=t),q(n)||(n=he),new _((function(t){var i=ot(e)?e:+e-n.now();return n.schedule(Ct,i,{index:0,period:r,subscriber:t})}))}function Ct(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Tt(e,t){return new _((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var o=(i?Ge(i):V).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}function It(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),z(e,void 0).lift(new Ot(n))}var Ot=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Rt(e,this.resultSelector))},e}(),Rt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;u(e)?t.push(new xt(e)):"function"==typeof e[je]?t.push(new Dt(e[je]())):t.push(new kt(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(s=e[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var s,a=(s=e[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(m),Dt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),xt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[je]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),kt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[je]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return Ue(this,this.observable,this,t)},t}(ke);n.d(t,"Observable",(function(){return _})),n.d(t,"ConnectableObservable",(function(){return k})),n.d(t,"GroupedObservable",(function(){return N})),n.d(t,"observable",(function(){return b})),n.d(t,"Subject",(function(){return O})),n.d(t,"BehaviorSubject",(function(){return F})),n.d(t,"ReplaySubject",(function(){return te})),n.d(t,"AsyncSubject",(function(){return re})),n.d(t,"asapScheduler",(function(){return de})),n.d(t,"asyncScheduler",(function(){return he})),n.d(t,"queueScheduler",(function(){return B})),n.d(t,"animationFrameScheduler",(function(){return fe})),n.d(t,"VirtualTimeScheduler",(function(){return ge})),n.d(t,"VirtualAction",(function(){return me})),n.d(t,"Scheduler",(function(){return U})),n.d(t,"Subscription",(function(){return p})),n.d(t,"Subscriber",(function(){return m})),n.d(t,"Notification",(function(){return Q})),n.d(t,"NotificationKind",(function(){return G})),n.d(t,"pipe",(function(){return E})),n.d(t,"noop",(function(){return S})),n.d(t,"identity",(function(){return ve})),n.d(t,"isObservable",(function(){return ye})),n.d(t,"ArgumentOutOfRangeError",(function(){return be})),n.d(t,"EmptyError",(function(){return Se})),n.d(t,"ObjectUnsubscribedError",(function(){return C})),n.d(t,"UnsubscriptionError",(function(){return h})),n.d(t,"TimeoutError",(function(){return Ee})),n.d(t,"bindCallback",(function(){return Ce})),n.d(t,"bindNodeCallback",(function(){return Oe})),n.d(t,"combineLatest",(function(){return Be})),n.d(t,"concat",(function(){return Je})),n.d(t,"defer",(function(){return Xe})),n.d(t,"empty",(function(){return H})),n.d(t,"forkJoin",(function(){return Qe})),n.d(t,"from",(function(){return Ge})),n.d(t,"fromEvent",(function(){return et})),n.d(t,"fromEventPattern",(function(){return tt})),n.d(t,"generate",(function(){return nt})),n.d(t,"iif",(function(){return it})),n.d(t,"interval",(function(){return st})),n.d(t,"merge",(function(){return ct})),n.d(t,"never",(function(){return ut})),n.d(t,"of",(function(){return Y})),n.d(t,"onErrorResumeNext",(function(){return dt})),n.d(t,"pairs",(function(){return ht})),n.d(t,"partition",(function(){return yt})),n.d(t,"race",(function(){return bt})),n.d(t,"range",(function(){return wt})),n.d(t,"throwError",(function(){return J})),n.d(t,"timer",(function(){return Pt})),n.d(t,"using",(function(){return Tt})),n.d(t,"zip",(function(){return It})),n.d(t,"scheduled",(function(){return qe})),n.d(t,"EMPTY",(function(){return V})),n.d(t,"NEVER",(function(){return lt})),n.d(t,"config",(function(){return a}))}]);
//# sourceMappingURL=extension.js.map